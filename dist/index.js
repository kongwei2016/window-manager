"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var Eg=require("p-retry"),Tg=require("emittery"),T=require("lodash"),C=require("white-web-sdk"),Ng=require("uuid"),Ko=require("@juggle/resize-observer"),kg=require("video.js");function qo(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function Pg(e){if(e&&e.__esModule)return e;var t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});return e&&Object.keys(e).forEach(function(i){if(i!=="default"){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}}),t.default=e,Object.freeze(t)}var Ad=qo(Eg),jt=qo(Tg),Eu=qo(kg),J=(e=>(e.AppMove="AppMove",e.AppFocus="AppFocus",e.AppResize="AppResize",e.AppBoxStateChange="AppBoxStateChange",e.GetAttributes="GetAttributes",e.UpdateWindowManagerWrapper="UpdateWindowManagerWrapper",e.InitReplay="InitReplay",e.WindowCreated="WindowCreated",e.SetMainViewScenePath="SetMainViewScenePath",e.SetMainViewSceneIndex="SetMainViewSceneIndex",e.SetAppFocusIndex="SetAppFocusIndex",e.SwitchViewsToFreedom="SwitchViewsToFreedom",e.MoveCamera="MoveCamera",e.MoveCameraToContain="MoveCameraToContain",e.CursorMove="CursorMove",e.RootDirRemoved="RootDirRemoved",e.Refresh="Refresh",e.InitMainViewCamera="InitMainViewCamera",e))(J||{});const Va="__WindowManger",oa="__WindowMangerEnsureReconnected__";var ze=(e=>(e.Size="size",e.Position="position",e.SceneIndex="SceneIndex",e.ZIndex="zIndex",e))(ze||{}),Ed=(e=>(e.setBoxSize="setBoxSize",e.setBoxMinSize="setBoxMinSize",e.destroy="destroy",e))(Ed||{}),_a=(e=>(e.StartCreate="StartCreate",e))(_a||{}),Oa=(e=>(e.Leave="leave",e.Normal="normal",e))(Oa||{});const Tu="2.16.1",Dg=340/720,zg=340/720,jg=9/16,He="/",Td="/init",Nd=50,Z=new jt.default;class Lg{constructor(){this.list=[],this.isEmit=!1,this.invoked=()=>{this.currentInvoker=void 0,this.list.length===0&&(this.clear(),this.emitReady())},this.clear=()=>{clearInterval(this.timer),this.timer=void 0}}initInterval(){return setInterval(()=>{this.invoke()},50)}push(t){this.list.push(t),this.invoke(),this.timer===void 0&&this.list.length>0&&(this.timer=this.initInterval())}invoke(){if(this.list.length===0||this.currentInvoker!==void 0)return;const t=this.list.shift();t&&(this.currentInvoker=t,t().then(()=>{this.invoked()}).catch(i=>{console.error(`[WindowManager]: create app error: ${i.message}`),this.invoked()}))}emitReady(){this.isEmit||setTimeout(()=>{Z.emit("ready")},Nd),this.isEmit=!0}empty(){this.list=[],this.clear()}destroy(){this.timer&&this.clear()}}const L=new jt.default,Bg="__WindowManagerAppCache";let Hn,Nu;const Rg=async()=>{Hn=await Og()},Vg=(e,t)=>{if(!!Hn)return Wg(Hn,{kind:e,sourceCode:t})},_g=async e=>Hn?await Ug(Hn,e):null;function Og(){return new Promise((e,t)=>{const i=indexedDB.open(Bg,2);i.onerror=n=>{t(n)},i.onupgradeneeded=n=>{const r=n.target.result;r.objectStoreNames.contains("apps")||(Nu=r.createObjectStore("apps",{keyPath:"kind"}),Nu.createIndex("kind","kind",{unique:!0}))},i.onsuccess=()=>{const n=i.result;e(n)}})}function Ug(e,t){return new Promise((i,n)=>{const s=e.transaction(["apps"]).objectStore("apps").index("kind").get(t);s.onerror=a=>n(a),s.onsuccess=()=>{s.result?i(s.result):i(null)}})}function Wg(e,t){return new Promise((i,n)=>{const r=e.transaction(["apps"],"readwrite").objectStore("apps").add(t);r.onsuccess=()=>i(),r.onerror=()=>n()})}const Hg="NetlessApp",$g=1e4,Zg=async e=>{const t=await _g(e);if(t)return t.sourceCode;{const n=await(await Gg(e,{timeout:$g})).text();return await Vg(e,n),n}},ku=(e,t)=>{let i=Function(e+`
;return ${t}`)();return typeof i=="undefined"&&(i=window[t]),i},Qg=async(e,t,i)=>{const n=i||Hg+t;Z.emit("loadApp",{kind:t,status:"start"});let r;try{if(r=await Zg(e),!r||r.length===0)throw Z.emit("loadApp",{kind:t,status:"failed",reason:"script is empty."}),new Error("[WindowManager]: script is empty.")}catch(s){throw Z.emit("loadApp",{kind:t,status:"failed",reason:s.message}),s}return Fg(r,n,t)},Fg=(e,t,i)=>{try{const n=ku(e,t);return Z.emit("loadApp",{kind:i,status:"success"}),n}catch(n){if(n.message.includes("Can only have one anonymous define call per script file")){const r=window.define;typeof r=="function"&&r.amd&&delete r.amd;const s=ku(e,t);return Z.emit("loadApp",{kind:i,status:"success"}),s}throw Z.emit("loadApp",{kind:i,status:"failed",reason:n.message}),n}};async function Gg(e,t){const{timeout:i=1e4}=t,n=new AbortController,r=setTimeout(()=>n.abort(),i),s=await fetch(e,{...t,signal:n.signal,headers:{"content-type":"text/plain"}});return clearTimeout(r),s}class Yg{constructor(){this.kindEmitters=new Map,this.registered=new Map,this.appClassesCache=new Map,this.appClasses=new Map,this.syncRegisterApp=null,this.onSyncRegisterAppChange=t=>{this.register({kind:t.kind,src:t.src})}}setSyncRegisterApp(t){this.syncRegisterApp=t}async register(t){this.appClassesCache.delete(t.kind),this.registered.set(t.kind,t);const i=t.src;let n;if(typeof i=="string"&&(n=async()=>{const r=await Qg(i,t.kind,t.name);return r.__esModule?r.default:r},this.syncRegisterApp&&this.syncRegisterApp({kind:t.kind,src:i,name:t.name})),typeof i=="function"&&(n=async()=>{let r=await i();if(r)return(r.__esModule||r.default)&&(r=r.default),r;throw new Error(`[WindowManager]: load remote script failed, ${i}`)}),typeof i=="object"&&(n=async()=>i),this.appClasses.set(t.kind,async()=>{let r=this.appClassesCache.get(t.kind);return r||(r=n(),this.appClassesCache.set(t.kind,r)),r}),t.addHooks){const r=this.createKindEmitter(t.kind);r&&t.addHooks(r)}}unregister(t){this.appClasses.delete(t),this.appClassesCache.delete(t),this.registered.delete(t);const i=this.kindEmitters.get(t);i&&(i.clearListeners(),this.kindEmitters.delete(t))}async notifyApp(t,i,n){const r=this.kindEmitters.get(t);await(r==null?void 0:r.emit(i,n))}createKindEmitter(t){if(!this.kindEmitters.has(t)){const i=new jt.default;this.kindEmitters.set(t,i)}return this.kindEmitters.get(t)}}const je=new Yg,Xg=async e=>{var i,n;const t=await((i=je.appClasses.get(e))==null?void 0:i());return t&&((n=t.config)==null?void 0:n.singleton)?e:`${e}-${Ng.v4().replace("-","").slice(0,8)}`},Mi=(e,t)=>{if(e.focusScenePath!==t)return e.focusScenePath=t,e},Ua=(e,t)=>{if(e&&e.isWritable&&e.state.sceneState.scenePath!==t){const i=t==="/"?"":t;e.setScenePath(i)}},Jg=(e,t,i)=>{var n;if(e&&t){const s=(n=Ji(e)[t])==null?void 0:n[i];if(s)return`${t}/${s.name}`}},Wa=(e,t,i)=>{e&&e.scenePathType(t)!==C.ScenePathType.None&&e.removeScenes(t,i)},Kg=(e,t)=>{L.once(e).then(t)};T.debounce((e,t)=>{e.emit("mainViewModeChange",t)},200);const qg=(e,t,i=0)=>{const n=Ji(e)[t];if(!n)return;const r=n[i];if(!r)return;const s=r.name;return t===He?`/${s}`:`${t}/${s}`},Ji=e=>e.entireScenes(),Tn=(e,t,i,n)=>{var r;for(let s=0;s<i.length;++s)if((r=i[s].name)!=null&&r.includes("/"))throw new Error("scenes name can not have '/'");return e==null?void 0:e.putScenes(t,i,n)},em=e=>e.startsWith("/"),la=e=>{const t=e.split("/");t.pop();let i=t.join("/");return i===""&&(i="/"),i},tm=e=>e.endsWith("/")?e.slice(0,-1):e,Pu=e=>{const t=e.split(".").map(i=>i.padStart(2,"0")).join("");return parseInt(t)},kd=e=>new Promise(t=>setTimeout(t,e)),im=e=>e.split("").reduce((i,n)=>(n===He&&(i+=1),i),0)===1;class nm{constructor(t){this.manager=t,this.displayer=this.manager.displayer,this.mainMagixEventListener=i=>{if(i.authorId!==this.displayer.observerId){const n=i.payload;switch(n.eventName){case J.AppMove:{this.appMoveHandler(n.payload);break}case J.AppResize:{this.appResizeHandler(n.payload);break}case J.AppBoxStateChange:{this.boxStateChangeHandler(n.payload);break}case J.SetMainViewScenePath:{this.setMainViewScenePathHandler(n.payload);break}case J.MoveCamera:{this.moveCameraHandler(n.payload);break}case J.MoveCameraToContain:{this.moveCameraToContainHandler(n.payload);break}case J.CursorMove:{this.cursorMoveHandler(n.payload);break}case J.RootDirRemoved:{this.rootDirRemovedHandler();break}case J.Refresh:{this.refreshHandler();break}case J.InitMainViewCamera:{this.initMainViewCameraHandler();break}case J.SetAppFocusIndex:{this.setAppFocusViewIndexHandler(n.payload);break}}}},this.appMoveHandler=i=>{var n;(n=this.boxManager)==null||n.moveBox(i)},this.appResizeHandler=i=>{var n,r;(n=this.boxManager)==null||n.resizeBox(Object.assign(i,{skipUpdate:!0})),(r=this.manager.room)==null||r.refreshViewSize()},this.boxStateChangeHandler=i=>{Z.emit("boxStateChange",i)},this.setMainViewScenePathHandler=({nextScenePath:i})=>{Mi(this.manager.mainView,i),Z.emit("mainViewScenePathChange",i)},this.moveCameraHandler=i=>{T.isEqual(T.omit(i,["animationMode"]),{...this.manager.mainView.camera})||this.manager.mainView.moveCamera(i)},this.moveCameraToContainHandler=i=>{this.manager.mainView.moveCameraToContain(i)},this.cursorMoveHandler=i=>{L.emit("cursorMove",i)},this.rootDirRemovedHandler=()=>{this.manager.createRootDirScenesCallback(),this.manager.mainViewProxy.rebind(),L.emit("rootDirRemoved")},this.refreshHandler=()=>{this.manager.windowManger._refresh()},this.initMainViewCameraHandler=()=>{this.manager.mainViewProxy.addCameraReaction()},this.setAppFocusViewIndexHandler=i=>{if(i.type==="main")this.manager.setSceneIndexWithoutSync(i.index);else if(i.type==="app"&&i.appID){const n=this.manager.appProxies.get(i.appID);n&&n.setSceneIndexWithoutSync(i.index)}}}get boxManager(){return this.manager.boxManager}addListeners(){this.displayer.addMagixEventListener(Va,this.mainMagixEventListener)}removeListeners(){this.displayer.removeMagixEventListener(Va,this.mainMagixEventListener)}}class Pd extends Error{constructor(){super(...arguments),this.message="[WindowManager]: app duplicate exists and cannot be created again"}}class rm extends Error{constructor(t){super(`[WindowManager]: app ${t} need register or provide src`)}}class tt extends Error{constructor(){super(...arguments),this.message="[WindowManager]: AppManager must be initialized"}}class Dd extends Error{constructor(t){super(`[WindowManager]: white-web-sdk version must large than ${t}`)}}class zd extends Error{constructor(){super(...arguments),this.message="[WindowManager]: kind must be a valid string"}}class jd extends Error{constructor(){super(...arguments),this.message="[WindowManager]: box need created"}}class Ld extends Error{constructor(){super(...arguments),this.message='[WindowManager]: ScenePath should start with "/"'}}class Bd extends Error{constructor(){super(...arguments),this.message="[WindowManager]: boxManager not found"}}class Rd extends Error{constructor(){super(...arguments),this.message="[WindowManager]: room phase only Connected can be bindContainer"}}const Vd="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",sm=Vd.length,Du=Array(20),Li=()=>{for(let e=0;e<20;e++)Du[e]=Vd.charAt(Math.random()*sm);return Du.join("")};class nr{constructor(){this.disposers=new Map}add(t,i=Li()){return this.flush(i),this.disposers.set(i,t()),i}addDisposer(t,i=Li()){return this.flush(i),this.disposers.set(i,t),i}addEventListener(t,i,n,r,s=Li()){return this.add(()=>(t.addEventListener(i,n,r),()=>t.removeEventListener(i,n,r)),s),s}setTimeout(t,i,n=Li()){return this.add(()=>{const r=window.setTimeout(()=>{this.remove(n),t()},i);return()=>window.clearTimeout(r)},n)}setInterval(t,i,n=Li()){return this.add(()=>{const r=window.setInterval(t,i);return()=>window.clearInterval(r)},n)}remove(t){const i=this.disposers.get(t);return this.disposers.delete(t),i}flush(t){const i=this.remove(t);if(i)try{i()}catch(n){console.error(n)}}flushAll(){this.disposers.forEach(t=>{try{t()}catch(i){console.error(i)}}),this.disposers.clear()}}const _d=e=>(t,i)=>{if(t!==void 0)if(C.listenUpdated){const n=r=>{r.map(a=>a.kind).includes(e)&&i()};return C.listenUpdated(t,n),i(),()=>C.unlistenUpdated(t,n)}else return C.reaction(()=>t,()=>{i()},{fireImmediately:!0})},Od=(e,t,i)=>{let n=null;const r=C.reaction(e,()=>{n&&(n(),n=null);const s=e();T.isObject(s)?(n=()=>C.unlistenUpdated(s,t),C.listenUpdated(s,t)):i==null||i(s)},{fireImmediately:!0});return()=>{n==null||n(),r()}},am=_d(C.UpdateEventKind.Removed);_d(C.UpdateEventKind.Inserted);class om{constructor(){this.listeners=new Set}get length(){return this.listeners.size}dispatch(t){this.listeners.forEach(i=>i(t))}addListener(t){this.listeners.add(t)}removeListener(t){this.listeners.delete(t)}}const ua=Object.keys;function zu(e){return Boolean(T.has(e,"__isRef"))}function lm(e){return{k:Li(),v:e,__isRef:!0}}const et="_WM-STORAGE_";class ju{constructor(t,i,n){if(this._sideEffect=new nr,this._destroyed=!1,this._refMap=new WeakMap,this._lastValue=new Map,this.onStateChanged=new om,n&&!T.isObject(n))throw new Error(`Default state for Storage ${i} is not an object.`);this._context=t,this.id=i||null,this._state={};const r=this._getRawState(this._state);this._context.getIsWritable()&&(this.id===null?t.isAddApp&&n&&this.setState(n):(r===this._state||!T.isObject(r))&&(T.get(this._context.getAttributes(),[et])||this._context.updateAttributes([et],{}),this._context.updateAttributes([et,this.id],this._state),n&&this.setState(n))),ua(r).forEach(s=>{if(!(this.id===null&&s===et))try{const a=T.isObject(r[s])?JSON.parse(JSON.stringify(r[s])):r[s];zu(a)?(this._state[s]=a.v,T.isObject(a.v)&&this._refMap.set(a.v,a)):this._state[s]=a}catch(a){console.error(a)}}),this._sideEffect.addDisposer(Od(()=>this.id===null?t.getAttributes():T.get(t.getAttributes(),[et,this.id]),this._updateProperties.bind(this),this.destroy.bind(this)))}get state(){return this._destroyed&&console.warn(`Accessing state on destroyed Storage "${this.id}"`),this._state}addStateChangedListener(t){return this.onStateChanged.addListener(t),()=>this.onStateChanged.removeListener(t)}ensureState(t){return this.setState(ua(t).reduce((i,n)=>(T.has(this._state,n)||(i[n]=t[n]),i),{}))}setState(t){if(this._destroyed){console.error(new Error(`Cannot call setState on destroyed Storage "${this.id}".`));return}if(!this._context.getIsWritable()){console.error(new Error(`Cannot setState on Storage "${this.id}" without writable access`),t);return}const i=ua(t);i.length>0&&i.forEach(n=>{const r=t[n];if(r!==this._state[n])if(r===void 0)this._lastValue.set(n,this._state[n]),delete this._state[n],this._setRawState(n,r);else{this._lastValue.set(n,this._state[n]),this._state[n]=r;let s=r;if(T.isObject(r)){let a=this._refMap.get(r);a||(a=lm(r),this._refMap.set(r,a)),s=a}this._setRawState(n,s)}})}emptyStorage(){if(!(T.size(this._state)<=0)){if(this._destroyed){console.error(new Error(`Cannot empty destroyed Storage "${this.id}".`));return}if(!this._context.getIsWritable()){console.error(new Error(`Cannot empty Storage "${this.id}" without writable access.`));return}this.setState(T.mapValues(this._state,T.noop))}}deleteStorage(){if(this.id===null)throw new Error("Cannot delete main Storage");if(!this._context.getIsWritable()){console.error(new Error(`Cannot delete Storage "${this.id}" without writable access.`));return}this.destroy(),this._context.updateAttributes([et,this.id],void 0)}get destroyed(){return this._destroyed}destroy(){this._destroyed=!0,this._sideEffect.flushAll()}_getRawState(t){var i;return this.id===null?(i=this._context.getAttributes())!=null?i:t:T.get(this._context.getAttributes(),[et,this.id],t)}_setRawState(t,i){if(this.id===null){if(t===et)throw new Error(`Cannot set attribute internal filed "${et}"`);return this._context.updateAttributes([t],i)}else return this._context.updateAttributes([et,this.id,t],i)}_updateProperties(t){var i;if(this._destroyed){console.error(new Error(`Cannot call _updateProperties on destroyed Storage "${this.id}".`));return}if(t.length>0){const n={};for(let r=0;r<t.length;r++)try{const s=t[r],a=s.key;if(this.id===null&&a===et)continue;const o=T.isObject(s.value)?JSON.parse(JSON.stringify(s.value)):s.value;let l;switch(this._lastValue.has(a)&&(l=this._lastValue.get(a),this._lastValue.delete(a)),s.kind){case 2:{T.has(this._state,a)&&(l=this._state[a],delete this._state[a]),n[a]={oldValue:l};break}default:{let u=o;if(zu(o)){const{k:c,v:p}=o,v=this._state[a];T.isObject(v)&&((i=this._refMap.get(v))==null?void 0:i.k)===c?u=v:(u=p,T.isObject(p)&&this._refMap.set(p,o))}u!==this._state[a]&&(l=this._state[a],this._state[a]=u),n[a]={newValue:u,oldValue:l};break}}}catch(s){console.error(s)}this.onStateChanged.dispatch(n)}}}class um{constructor(t,i,n,r,s){this.manager=t,this.boxManager=i,this.appId=n,this.appProxy=r,this.appOptions=s,this.mobxUtils={autorun:C.autorun,reaction:C.reaction,toJS:C.toJS},this.objectUtils={listenUpdated:C.listenUpdated,unlistenUpdated:C.unlistenUpdated,listenDisposed:C.listenDisposed,unlistenDisposed:C.unlistenDisposed},this.store=this.manager.store,this.isReplay=this.manager.isReplay,this.getDisplayer=()=>this.manager.displayer,this.getAttributes=()=>this.appProxy.attributes,this.getScenes=()=>{const a=this.store.getAppAttributes(this.appId);return a!=null&&a.isDynamicPPT?this.appProxy.scenes:a==null?void 0:a.options.scenes},this.getView=()=>this.appProxy.view,this.mountView=a=>{const o=this.getView();o&&(o.divElement=a,setTimeout(()=>{var l;(l=this.getRoom())==null||l.refreshViewSize(),Z.emit("onAppViewMounted",{appId:this.appId,view:o})},1e3))},this.getInitScenePath=()=>this.manager.getAppInitPath(this.appId),this.getIsWritable=()=>this.manager.canOperate,this.getBox=()=>{const a=this.boxManager.getBox(this.appId);if(a)return a;throw new jd},this.getRoom=()=>this.manager.room,this.setAttributes=a=>{this.manager.safeSetAttributes({[this.appId]:a})},this.updateAttributes=(a,o)=>{this.manager.attributes[this.appId]&&this.manager.safeUpdateAttributes([this.appId,...a],o)},this.setScenePath=async a=>{var o;!this.appProxy.box||(this.appProxy.setFullPath(a),(o=this.getRoom())==null||o.setScenePath(a))},this.getAppOptions=()=>typeof this.appOptions=="function"?this.appOptions():this.appOptions,this.createStorage=(a,o)=>{const l=new ju(this,a,o);return this.emitter.on("destroy",()=>{l.destroy()}),l},this.dispatchMagixEvent=(...a)=>{var l;const o=`${this.appId}:${a[0]}`;return(l=this.manager.room)==null?void 0:l.dispatchMagixEvent(o,a[1])},this.addMagixEventListener=(a,o,l)=>{const u=`${this.appId}:${a}`;return this.manager.displayer.addMagixEventListener(u,o,l),()=>this.manager.displayer.removeMagixEventListener(u,o)},this.removeMagixEventListener=this.manager.displayer.removeMagixEventListener.bind(this.manager.displayer),this.nextPage=async()=>{const a=this.pageState.index+1;return a>this.pageState.length-1?(console.warn("[WindowManager] nextPage: index out of range"),!1):(this.appProxy.setSceneIndex(a),!0)},this.jumpPage=async a=>0<=a&&a<this.pageState.length?(this.appProxy.setSceneIndex(a),!0):(console.warn("[WindowManager] nextPage: index out of range"),!1),this.prevPage=async()=>{const a=this.pageState.index-1;return a<0?(console.warn("[WindowManager] prevPage: index out of range"),!1):(this.appProxy.setSceneIndex(a),!0)},this.addPage=async a=>{const o=a==null?void 0:a.after,l=a==null?void 0:a.scene,u=this.appProxy.scenePath;if(!!u)if(o){const c=this.pageState.index+1;Tn(this.manager.room,u,[l||{}],c)}else Tn(this.manager.room,u,[l||{}])},this.removePage=async a=>{const o=a===void 0?this.pageState.index:a;return this.pageState.length===1?(console.warn("[WindowManager]: can not remove the last page"),!1):o<0||o>=this.pageState.length?(console.warn(`[WindowManager]: page index ${a} out of range`),!1):this.appProxy.removeSceneByIndex(o)},this.emitter=r.appEmitter,this.isAddApp=r.isAddApp}get storage(){return this._storage||(this._storage=new ju(this)),this._storage}get pageState(){return this.appProxy.pageState}get kind(){return this.appProxy.kind}dispatchAppEvent(t,i){L.emit(`custom-${this.kind}`,{kind:this.kind,appId:this.appId,type:t,value:i})}}class cm{constructor(t){this.params=t,this.sceneNode=null,this.onSceneChange=r=>{this.sceneNode=r,this.params.notifyPageStateChange()};const{displayer:i,scenePath:n}=this.params;n&&(this.sceneNode=i.createScenesCallback(n,{onAddScene:this.onSceneChange,onRemoveScene:this.onSceneChange}))}getFullPath(t){var n;const i=(n=this.sceneNode)==null?void 0:n.scenes;if(this.params.scenePath&&i){const r=i[t];if(r)return`${this.params.scenePath}/${r}`}}toObject(){var t,i;return{index:((t=this.params.view)==null?void 0:t.focusSceneIndex)||0,length:((i=this.sceneNode)==null?void 0:i.scenes.length)||0}}destroy(){var t;(t=this.sceneNode)==null||t.dispose()}}var xe=(e=>(e.Apps="apps",e.Focus="focus",e.State="state",e.BoxState="boxState",e.MainViewCamera="mainViewCamera",e.MainViewSize="mainViewSize",e.Broadcaster="broadcaster",e.Cursors="cursors",e.Position="position",e.CursorState="cursorState",e.FullPath="fullPath",e.Registered="registered",e.IframeBridge="iframeBridge",e))(xe||{});class dm{constructor(t){this.context=t,this.setAppFocus=(i,n)=>{n?this.context.safeSetAttributes({focus:i}):this.context.safeSetAttributes({focus:void 0})}}setContext(t){this.context=t}get attributes(){return this.context.getAttributes()}apps(){return T.get(this.attributes,["apps"])}get focus(){return T.get(this.attributes,["focus"])}getAppAttributes(t){return T.get(this.apps(),[t])}getAppState(t){return T.get(this.apps(),[t,"state"])}getMaximized(){return T.get(this.attributes,["maximized"])}getMinimized(){return T.get(this.attributes,["minimized"])}setupAppAttributes(t,i,n){this.attributes.apps||this.context.safeSetAttributes({apps:{}});const s=["scenePath","title"];n||s.push("scenes");const a=T.pick(t.options,s),o={kind:t.kind,options:a,isDynamicPPT:n};typeof t.src=="string"&&(o.src=t.src),o.createdAt=Date.now(),this.context.safeUpdateAttributes(["apps",i],o),this.context.safeUpdateAttributes(["apps",i,"state"],{[ze.Size]:{},[ze.Position]:{},[ze.SceneIndex]:0})}updateAppState(t,i,n){T.get(this.attributes,["apps",t,"state"])&&this.context.safeUpdateAttributes(["apps",t,"state",i],n)}cleanAppAttributes(t){this.context.safeUpdateAttributes(["apps",t],void 0),this.context.safeSetAttributes({[t]:void 0}),this.attributes.focus===t&&this.cleanFocus()}cleanFocus(){this.context.safeSetAttributes({focus:void 0})}getAppSceneIndex(t){var i;return(i=this.getAppState(t))==null?void 0:i[ze.SceneIndex]}getAppScenePath(t){var i,n;return(n=(i=this.getAppAttributes(t))==null?void 0:i.options)==null?void 0:n.scenePath}getMainViewScenePath(){return this.attributes._mainScenePath}getMainViewSceneIndex(){return this.attributes._mainSceneIndex}getBoxState(){return this.attributes.boxState}setMainViewScenePath(t){this.context.safeSetAttributes({_mainScenePath:t})}setMainViewSceneIndex(t){this.context.safeSetAttributes({_mainSceneIndex:t})}getMainViewCamera(){return T.get(this.attributes,["mainViewCamera"])}getMainViewSize(){return T.get(this.attributes,["mainViewSize"])}setMainViewCamera(t){this.context.safeSetAttributes({mainViewCamera:{...t}})}setMainViewSize(t){t.width===0||t.height===0||this.context.safeSetAttributes({mainViewSize:{...t}})}setMainViewCameraAndSize(t,i){i.width===0||i.height===0||this.context.safeSetAttributes({mainViewCamera:{...t},mainViewSize:{...i}})}updateCursor(t,i){T.get(this.attributes,["cursors"])||this.context.safeUpdateAttributes(["cursors"],{}),T.get(this.attributes,["cursors",t])||this.context.safeUpdateAttributes(["cursors",t],{}),this.context.safeUpdateAttributes(["cursors",t,"position"],i)}updateCursorState(t,i){T.get(this.attributes,["cursors",t])||this.context.safeUpdateAttributes(["cursors",t],{}),this.context.safeUpdateAttributes(["cursors",t,"cursorState"],i)}getCursorState(t){return T.get(this.attributes,["cursors",t,"cursorState"])}cleanCursor(t){this.context.safeUpdateAttributes(["cursors",t],void 0)}setMainViewFocusPath(t){const i=this.getMainViewScenePath();i&&Mi(t,i)}getIframeBridge(){return T.get(this.attributes,["iframeBridge"])}setIframeBridge(t){if(T.isObject(t)){const i=this.getIframeBridge();for(const n in t){const r=t[n];i[n]!==r&&this.context.safeUpdateAttributes(["iframeBridge",n],r)}}}}const hm=new dm({getAttributes:()=>{throw new Error("getAttributes not implemented")},safeSetAttributes:()=>{throw new Error("safeSetAttributes not implemented")},safeUpdateAttributes:()=>{throw new Error("safeUpdateAttributes not implemented")}}),nt=(...e)=>{G.debug&&console.log("[WindowManager]:",...e)},el=(e,t)=>{let i=0;const n=t.length-1;return e===t.index?e===n?i=e-1:i=t.index+1:i=t.index,i},Ct=new jt.default;class tl{constructor(t,i,n,r){var s;this.params=t,this.manager=i,this.boxManager=this.manager.boxManager,this.appProxies=this.manager.appProxies,this.viewManager=this.manager.viewManager,this.store=this.manager.store,this.status="normal",this.getAppInitState=a=>{var d,h;const o=this.store.getAppState(a);if(!o)return;const l=o==null?void 0:o[ze.Position],u=this.store.focus,c=o==null?void 0:o[ze.Size],p=o==null?void 0:o[ze.SceneIndex],v=(d=this.attributes)==null?void 0:d.maximized,S=(h=this.attributes)==null?void 0:h.minimized,y=o==null?void 0:o.zIndex;let x={maximized:v,minimized:S,zIndex:y};return l&&(x={...x,id:a,x:l.x,y:l.y}),u===a&&(x={...x,focus:!0}),c&&(x={...x,width:c.width,height:c.height}),p&&(x={...x,sceneIndex:p}),x},this.appAttributesUpdateListener=a=>{this.manager.refresher.add(a,()=>C.autorun(()=>{const o=this.manager.attributes[a];o&&this.appEmitter.emit("attributesUpdate",o)})),this.manager.refresher.add(this.stateKey,()=>C.autorun(()=>{var l,u,c,p;const o=(l=this.appAttributes)==null?void 0:l.state;(o==null?void 0:o.zIndex)>0&&o.zIndex!==((u=this.box)==null?void 0:u.zIndex)&&((c=this.boxManager)==null||c.setZIndex(a,o.zIndex),(p=this.boxManager)==null||p.focusBox({appId:a}))})),this.manager.refresher.add(`${a}-fullPath`,()=>C.autorun(()=>{var l;const o=(l=this.appAttributes)==null?void 0:l.fullPath;this.setFocusScenePathHandler(o),this._prevFullPath!==o&&(this.notifyPageStateChange(),this._prevFullPath=o)}))},this.setFocusScenePathHandler=T.debounce(a=>{var o;this.view&&a&&a!==((o=this.view)==null?void 0:o.focusScenePath)&&(Mi(this.view,a),Z.emit("onAppScenePathChange",{appId:this.id,view:this.view}))},50),this.notifyPageStateChange=T.debounce(()=>{this.appEmitter.emit("pageStateChange",this.pageState)},50),this.kind=t.kind,this.id=n,this.stateKey=`${this.id}_state`,this.appProxies.set(this.id,this),this.appEmitter=new jt.default,this.appListener=this.makeAppEventListener(this.id),this.isAddApp=r,this.initScenes(),(s=this.params.options)!=null&&s.scenePath&&this.createView(),this._pageState=new cm({displayer:this.manager.displayer,scenePath:this.scenePath,view:this.view,notifyPageStateChange:this.notifyPageStateChange})}initScenes(){var i;const t=this.params.options;t&&(this.scenePath=t.scenePath,((i=this.appAttributes)==null?void 0:i.isDynamicPPT)&&this.scenePath?this.scenes=Ji(this.manager.displayer)[this.scenePath]:this.scenes=t.scenes)}get view(){return this.manager.viewManager.getView(this.id)}get viewIndex(){var t;return(t=this.view)==null?void 0:t.focusSceneIndex}get isWritable(){var t;return this.manager.canOperate&&!((t=this.box)!=null&&t.readonly)}get attributes(){return this.manager.attributes[this.id]}get appAttributes(){return this.store.getAppAttributes(this.id)}getFullScenePath(){if(this.scenePath)return T.get(this.appAttributes,[xe.FullPath])||this.getFullScenePathFromScenes()}getFullScenePathFromScenes(){const t=T.get(this.appAttributes,["state","SceneIndex"],0),i=Jg(this.manager.room,this.scenePath,t);return i&&this.setFullPath(i),i}setFullPath(t){this.manager.safeUpdateAttributes(["apps",this.id,xe.FullPath],t)}async baseInsertApp(t=!1){var s;const i=this.params;if(!i.kind)throw new Error("[WindowManager]: kind require");const n=await((s=je.appClasses.get(i.kind))==null?void 0:s()),r=je.registered.get(i.kind);if(n)await this.setupApp(this.id,t,n,i.options,r==null?void 0:r.appOptions);else throw new Error(`[WindowManager]: app load failed ${i.kind} ${i.src}`);return L.emit("updateManagerRect"),{appId:this.id,app:n}}get box(){var t;return(t=this.boxManager)==null?void 0:t.getBox(this.id)}async setupApp(t,i,n,r,s){var o;if(nt("setupApp",t,n,r),!this.boxManager)throw new Bd;const a=new um(this.manager,this.boxManager,t,this,s);this.appContext=a;try{L.once(`${t}${J.WindowCreated}`).then(async()=>{var u;let l;i||(l=this.getAppInitState(t),(u=this.boxManager)==null||u.updateBoxState(l)),this.appEmitter.onAny(this.appListener),this.appAttributesUpdateListener(t),this.setViewFocusScenePath(),setTimeout(async()=>{console.log("setup app",n);const c=await n.setup(a);this.appResult=c,je.notifyApp(this.kind,"created",{appId:t,result:c}),this.afterSetupApp(l),this.fixMobileSize(),Z.emit("onAppSetup",t)},Nd)}),(o=this.boxManager)==null||o.createBox({appId:t,app:n,options:r,canOperate:this.manager.canOperate,smartPosition:this.isAddApp}),this.isAddApp&&this.box&&(this.store.updateAppState(t,ze.ZIndex,this.box.zIndex),this.store.updateAppState(t,ze.Size,{width:this.box.intrinsicWidth,height:this.box.intrinsicHeight}),this.boxManager.focusBox({appId:t},!1))}catch(l){throw console.error(l),new Error(`[WindowManager]: app setup error: ${l.message}`)}}fixMobileSize(){var i,n;const t=(i=this.boxManager)==null?void 0:i.getBox(this.id);t&&((n=this.boxManager)==null||n.resizeBox({appId:this.id,width:t.intrinsicWidth+.001,height:t.intrinsicHeight+.001,skipUpdate:!0}))}afterSetupApp(t){var i;t&&(!(t!=null&&t.x)||!t.y)&&((i=this.boxManager)==null||i.setBoxInitState(this.id))}async onSeek(t){var n;this.appEmitter.emit("seek",t).catch(r=>{console.log(`[WindowManager]: emit seek error: ${r.message}`)});const i=this.getAppInitState(this.id);(n=this.boxManager)==null||n.updateBoxState(i)}async onReconnected(){var s;if(!Boolean(this.manager.attributes.apps[this.id])){await this.destroy(!0,!1,!0);return}this.appEmitter.emit("reconnected",void 0);const i=this.getAppInitState(this.id);await this.destroy(!0,!1,!0);const n=this.params;await new tl(n,this.manager,this.id,this.isAddApp).baseInsertApp(!0),(s=this.boxManager)==null||s.updateBoxState(i)}async onRemoveScene(t){if(this.scenePath&&t.startsWith(this.scenePath+"/")){let i=this.pageState.index,n=this._pageState.getFullPath(i);n||(i=0,n=this._pageState.getFullPath(i)),n&&this.setFullPath(n),this.setViewFocusScenePath(),this.view&&(this.view.focusSceneIndex=i)}}emitAppSceneStateChange(t){this.appEmitter.emit("sceneStateChange",t)}emitAppIsWritableChange(){this.appEmitter.emit("writableChange",this.isWritable)}makeAppEventListener(t){return(i,n)=>{var r,s,a,o;if(!!this.manager.canOperate)switch(i){case"setBoxSize":{(r=this.boxManager)==null||r.resizeBox({appId:t,width:n.width,height:n.height,skipUpdate:!1});break}case"setBoxMinSize":{(s=this.boxManager)==null||s.setBoxMinSize({appId:t,minWidth:n.minwidth,minHeight:n.minheight});break}case"setBoxTitle":{(a=this.boxManager)==null||a.setBoxTitle({appId:t,title:n.title});break}case Ed.destroy:{if(this.status==="destroyed")return;this.destroy(!0,!1,!0,n==null?void 0:n.error),n!=null&&n.error&&console.error(n==null?void 0:n.error);break}case"focus":{(o=this.boxManager)==null||o.focusBox({appId:this.id}),Ct.emit("focus",{appId:this.id});break}}}}setScenePath(){if(!this.manager.canOperate)return;const t=this.getFullScenePath();this.manager.room&&t&&this.view&&Ua(this.manager.room,t)}setViewFocusScenePath(){const t=this.getFullScenePath();return t&&this.view&&Mi(this.view,t),t}async createView(){const t=await this.viewManager.createView(this.id);return this.setViewFocusScenePath(),t}get pageState(){return this._pageState.toObject()}async removeSceneByIndex(t){const i=this._pageState.getFullPath(t);if(i){const n=el(t,this.pageState);return this.setSceneIndexWithoutSync(n),this.manager.dispatchInternalEvent(J.SetAppFocusIndex,{type:"app",appID:this.id,index:n}),setTimeout(()=>{Wa(this.manager.room,i,t)},100),!0}else return!1}setSceneIndexWithoutSync(t){this.view&&(this.view.focusSceneIndex=t)}setSceneIndex(t){if(this.view){this.view.focusSceneIndex=t;const i=this._pageState.getFullPath(t);i&&this.setFullPath(i)}}async destroy(t,i,n,r){var s;if(this.status!=="destroyed"){this.status="destroyed";try{await je.notifyApp(this.kind,"destroy",{appId:this.id}),await this.appEmitter.emit("destroy",{error:r})}catch(a){console.error("[WindowManager]: notifyApp error",a.message,a.stack)}this.appEmitter.clearListeners(),L.emit(`destroy-${this.id}`,{error:r}),t&&((s=this.boxManager)==null||s.closeBox(this.id,n)),i&&(this.store.cleanAppAttributes(this.id),this.scenePath&&Wa(this.manager.room,this.scenePath)),this.appProxies.delete(this.id),this._pageState.destroy(),this.viewManager.destroyView(this.id),this.manager.appStatus.delete(this.id),this.manager.refresher.remove(this.id),this.manager.refresher.remove(this.stateKey),this.manager.refresher.remove(`${this.id}-fullPath`),this._prevFullPath=void 0}}close(){return this.destroy(!0,!0,!1)}}class pm{constructor(t){this.displayer=t,this.views=new Map}createView(t){const i=Ud(this.displayer);return this.views.set(t,i),i}getView(t){return this.views.get(t)}destroyView(t){const i=this.views.get(t);if(i){try{i.release()}catch{}this.views.delete(t)}}setViewScenePath(t,i){const n=this.views.get(t);n&&(n.focusScenePath=i)}destroy(){this.views.forEach(t=>{try{t.release()}catch{}}),this.views.clear()}}const Ud=e=>{const t=e.views.createView();return fm(t),t},fm=e=>{e.setCameraBound({maxContentMode:()=>10,minContentMode:()=>.1})};class gm{constructor(t){this.manager=t,this.polling=!1,this.started=!1,this.mainViewIsAddListener=!1,this.store=this.manager.store,this.viewMode=this.manager.windowManger.viewMode,this.sideEffectManager=new nr,this.syncCamera=()=>{if(!this.polling||this.viewMode!==C.ViewMode.Broadcaster)return;const{mainViewCamera:n}=this;n&&n.id!==this.manager.uid&&this.moveCameraSizeByAttributes()},this.startListenWritableChange=()=>{this.sideEffectManager.add(()=>L.on("writableChange",n=>{n&&this.ensureCameraAndSize(),this.manager.room&&this.syncMainView(this.manager.room)}))},this.addCameraReaction=()=>{this.manager.refresher.add(xe.MainViewCamera,this.cameraReaction)},this.cameraReaction=()=>C.reaction(()=>this.mainViewCamera,n=>{n&&n.id!==this.manager.uid&&(this.moveCameraToContian(this.mainViewSize),this.moveCamera(n))},{fireImmediately:!0}),this.sizeChangeHandler=T.debounce(n=>{n&&(this.moveCameraToContian(n),this.moveCamera(this.mainViewCamera)),this.ensureMainViewSize()},30),this.onUpdateContainerSizeRatio=()=>{const n=this.store.getMainViewSize();this.sizeChangeHandler(n)},this.onCameraUpdatedByDevice=n=>{this.viewMode!==C.ViewMode.Follower&&(this.store.setMainViewCamera({...n,id:this.manager.uid}),T.isEqual(this.mainViewSize,{...this.mainView.size,id:this.manager.uid})||this.setMainViewSize(this.view.size))},this.mainViewClickListener=()=>{this.mainViewClickHandler()},this.setMainViewSize=T.debounce(n=>{this.store.setMainViewSize({...n,id:this.manager.uid})},50),this._syncMainViewTimer=0,this.onCameraOrSizeUpdated=()=>{Z.emit("cameraStateChange",this.cameraState),this.manager.room&&this.manager.room.syncMainView&&(clearTimeout(this._syncMainViewTimer),this._syncMainViewTimer=setTimeout(this.syncMainView,100,this.manager.room)),this.ensureMainViewSize()},this.syncMainView=n=>{n.isWritable&&n.syncMainView(this.mainView)},this.setViewMode=n=>{this.viewMode=n},this.mainView=this.createMainView(),this.moveCameraSizeByAttributes(),L.once("mainViewMounted").then(()=>{this.addMainViewListener(),this.start(),this.ensureCameraAndSize(),this.startListenWritableChange()});const i=()=>{this.sizeChangeHandler(this.mainViewSize)};this.sideEffectManager.add(()=>L.on("playgroundSizeChange",i)),this.sideEffectManager.add(()=>L.on("containerSizeRatioUpdate",this.onUpdateContainerSizeRatio)),this.sideEffectManager.add(()=>L.on("startReconnect",()=>{this.didRelease||this.mainView.release()})),this.sideEffectManager.setInterval(this.syncCamera,1500)}ensureCameraAndSize(){this.viewMode===C.ViewMode.Broadcaster&&(!this.mainViewCamera||!this.mainViewSize)&&(this.manager.dispatchInternalEvent(J.InitMainViewCamera),this.setCameraAndSize())}get mainViewCamera(){return this.store.getMainViewCamera()}get mainViewSize(){return this.store.getMainViewSize()}get didRelease(){return T.get(this.view,["didRelease"])}moveCameraSizeByAttributes(){this.moveCameraToContian(this.mainViewSize),this.moveCamera(this.mainViewCamera)}start(){this.sizeChangeHandler(this.mainViewSize),!this.started&&(this.addCameraListener(),this.addCameraReaction(),this.manager.room&&this.syncMainView(this.manager.room),this.started=!0)}setCameraAndSize(){const t={...this.mainView.camera,id:this.manager.uid},i={...this.mainView.size,id:this.manager.uid};this.store.setMainViewCameraAndSize(t,i)}get view(){return this.mainView}get cameraState(){return{...this.view.camera,...this.view.size}}createMainView(){const t=Ud(this.manager.displayer),i=this.store.getMainViewScenePath();return i&&Mi(t,i),t}onReconnect(){if(this.didRelease)this.rebind();else{const t=this.store.getMainViewScenePath();this.setFocusScenePath(t)}}setFocusScenePath(t){if(t)return Mi(this.view,t)}rebind(){const t=this.mainView.divElement,i=this.mainView.disableCameraTransform;this.stop(),this.didRelease||this.mainView.release(),this.removeMainViewListener(),this.mainView=this.createMainView(),this.mainView.disableCameraTransform=i,this.mainView.divElement=t,this.addMainViewListener(),this.start(),Z.emit("onMainViewRebind",this.mainView)}addMainViewListener(){this.mainViewIsAddListener||this.view.divElement&&(this.view.divElement.addEventListener("click",this.mainViewClickListener),this.view.divElement.addEventListener("touchend",this.mainViewClickListener),this.mainViewIsAddListener=!0)}removeMainViewListener(){this.view.divElement&&(this.view.divElement.removeEventListener("click",this.mainViewClickListener),this.view.divElement.removeEventListener("touchend",this.mainViewClickListener)),this.mainViewIsAddListener=!1}async mainViewClickHandler(){var t;!this.manager.canOperate||(this.store.cleanFocus(),(t=this.manager.boxManager)==null||t.blurAllBox())}addCameraListener(){this.view.callbacks.on("onCameraUpdatedByDevice",this.onCameraUpdatedByDevice),this.view.callbacks.on("onCameraUpdated",this.onCameraOrSizeUpdated),this.view.callbacks.on("onSizeUpdated",this.onCameraOrSizeUpdated)}removeCameraListener(){this.view.callbacks.off("onCameraUpdatedByDevice",this.onCameraUpdatedByDevice),this.view.callbacks.off("onCameraUpdated",this.onCameraOrSizeUpdated),this.view.callbacks.off("onSizeUpdated",this.onCameraOrSizeUpdated)}ensureMainViewSize(){(!this.mainViewSize||this.mainViewSize.width===0||this.mainViewSize.height===0)&&this.mainView.size.width>0&&this.mainView.size.height>0&&this.setMainViewSize(this.mainView.size)}moveCameraToContian(t){T.isEmpty(t)||(this.view.moveCameraToContain({width:t.width,height:t.height,originX:-t.width/2,originY:-t.height/2,animationMode:C.AnimationMode.Immediately}),this.scale=this.view.camera.scale)}moveCamera(t){if(!T.isEmpty(t)){if(T.isEqual(t,this.view.camera))return;const{centerX:i,centerY:n,scale:r}=t,s=r*(this.scale||1);this.view.moveCamera({centerX:i,centerY:n,scale:s,animationMode:C.AnimationMode.Immediately})}}stop(){this.removeCameraListener(),this.manager.refresher.remove(xe.MainViewCamera),this.manager.refresher.remove(xe.MainViewSize),this.started=!1}destroy(){this.removeMainViewListener(),this.stop(),this.sideEffectManager.flushAll()}}class mm{constructor(t){this.context=t,this.addRedoUndoListeners=i=>{if(i===void 0)this.addViewCallbacks(this.context.mainView(),this.onCanRedoStepsUpdate,this.onCanUndoStepsUpdate);else{const n=this.context.getAppProxy(i);n&&n.view&&this.addViewCallbacks(n.view,this.onCanRedoStepsUpdate,this.onCanUndoStepsUpdate)}},this.addViewCallbacks=(i,n,r)=>{n(i.canRedoSteps),r(i.canUndoSteps),i.callbacks.on("onCanRedoStepsUpdate",n),i.callbacks.on("onCanUndoStepsUpdate",r)},this.disposeViewCallbacks=i=>{i.callbacks.off("onCanRedoStepsUpdate",this.onCanRedoStepsUpdate),i.callbacks.off("onCanUndoStepsUpdate",this.onCanUndoStepsUpdate)},this.onCanRedoStepsUpdate=i=>{Z.emit("canRedoStepsChange",i)},this.onCanUndoStepsUpdate=i=>{Z.emit("canUndoStepsChange",i)},this.disposePrevFocusViewRedoUndoListeners=i=>{let n;if(i===void 0)n=this.context.mainView();else{const r=this.context.getAppProxy(i);r&&r.view&&(n=r.view)}n&&this.disposeViewCallbacks(n)},L.on("focusedChange",i=>{this.disposePrevFocusViewRedoUndoListeners(i.prev),setTimeout(()=>{this.addRedoUndoListeners(i.focused)},0)}),L.on("rootDirRemoved",()=>{this.disposePrevFocusViewRedoUndoListeners(t.focus()),this.addRedoUndoListeners(t.focus())}),this.addRedoUndoListeners(t.focus())}destroy(){this.disposePrevFocusViewRedoUndoListeners(this.context.focus())}}class vm{constructor(t){this.windowManger=t,this.appProxies=new Map,this.appStatus=new Map,this.store=hm,this.isReplay=this.windowManger.isReplay,this.mainViewScenesLength=0,this.callbacksNode=null,this.appCreateQueue=new Lg,this.sideEffectManager=new nr,this.sceneState=null,this.rootDirRemoving=!1,this.onRemoveScenes=async i=>{var r,s;const{scenePath:n}=i;if(n===He){await this.onRootDirRemoved(),this.dispatchInternalEvent(J.RootDirRemoved);return}if(im(n)){let a=this.mainView.focusSceneIndex||0,o=(r=this.callbacksNode)==null?void 0:r.scenes[a];o||(a=0,o=(s=this.callbacksNode)==null?void 0:s.scenes[a]),o&&this.setMainViewScenePath(`${He}${o}`),await this.setMainViewSceneIndex(a)}else this.appProxies.forEach(a=>{a.onRemoveScene(n)})},this.onReadonlyChanged=()=>{this.appProxies.forEach(i=>{i.emitAppIsWritableChange()})},this.onPlayerSeekStart=async()=>{await this.closeAll()},this.onPlayerSeekDone=async i=>{await this.attributesUpdateCallback(this.attributes.apps),this.appProxies.forEach(n=>{n.onSeek(i)})},this.createRootDirScenesCallback=()=>{let i=!1;this.callbacksNode&&(this.callbacksNode.dispose(),i=!0),this.callbacksNode=this.displayer.createScenesCallback(He,{onAddScene:this.onSceneChange,onRemoveScene:async(n,r)=>{await this.onSceneChange(n),L.emit("rootDirSceneRemoved",r)}}),this.callbacksNode&&(this.updateSceneState(this.callbacksNode),this.mainViewScenesLength=this.callbacksNode.scenes.length,i&&this.emitMainViewScenesChange(this.callbacksNode.scenes.length))},this.removeSceneByIndex=async i=>{var s;const n=el(i,this.windowManger.pageState);this.setSceneIndexWithoutSync(n),this.dispatchInternalEvent(J.SetAppFocusIndex,{type:"main",index:n});const r=(s=this.callbacksNode)==null?void 0:s.scenes[i];return setTimeout(()=>{r&&Wa(this.room,`${He}${r}`,i)},100),new Promise((a,o)=>{L.once("rootDirSceneRemoved").then(l=>{l===r&&a(!0)}).catch(l=>{console.log(`[WindowManager]: removePage error: ${l}`),o(!1)})})},this.setSceneIndexWithoutSync=i=>{var r;const n=(r=this.callbacksNode)==null?void 0:r.scenes[i];n&&this.mainViewProxy.setFocusScenePath(`${He}${n}`)},this.onSceneChange=i=>(this.mainViewScenesLength=i.scenes.length,this.updateSceneState(i),this.emitMainViewScenesChange(this.mainViewScenesLength)),this.emitMainViewScenesChange=i=>Promise.all([Z.emit("mainViewScenesLengthChange",i),L.emit("changePageState")]),this.updateSceneState=i=>{const n=this.store.getMainViewSceneIndex()||0;let r=i.scenes[n];r||(r=i.scenes[this.mainView.focusSceneIndex||0]),this.sceneState={scenePath:`${He}${r}`,contextPath:i.path,index:n,scenes:i.scenes.map(s=>({name:s})),sceneName:r},Z.emit("sceneStateChange",this.sceneState)},this.onBoxMove=i=>{this.dispatchInternalEvent(J.AppMove,i),this.store.updateAppState(i.appId,ze.Position,{x:i.x,y:i.y}),Z.emit("onBoxMove",i)},this.onBoxResize=i=>{i.width&&i.height&&(this.dispatchInternalEvent(J.AppResize,i),this.store.updateAppState(i.appId,ze.Size,{width:i.width,height:i.height}),Z.emit("onBoxResize",i))},this.onBoxFocus=i=>{this.windowManger.safeSetAttributes({focus:i.appId}),Z.emit("onBoxFocus",i)},this.onBoxClose=i=>{const n=this.appProxies.get(i.appId);n&&n.destroy(!1,!0,!0,i.error),Z.emit("onBoxClose",i)},this.onBoxStateChange=i=>{this.dispatchInternalEvent(J.AppBoxStateChange,i),Z.emit("onBoxStateChange",i)},this.addAppsChangeListener=()=>{this.refresher.add("apps",()=>Od(()=>this.attributes.apps,()=>{this.attributesUpdateCallback(this.attributes.apps)}))},this.addAppCloseListener=()=>{this.refresher.add("appsClose",()=>am(this.attributes.apps,()=>{this.onAppDelete(this.attributes.apps)}))},this.onMainViewIndexChange=i=>{i!==void 0&&this._prevSceneIndex!==i&&(Z.emit("mainViewSceneIndexChange",i),L.emit("changePageState"),this.callbacksNode&&this.updateSceneState(this.callbacksNode),this._prevSceneIndex=i)},this.onFocusChange=i=>{var n;this._prevFocused!==i&&(Z.emit("focusedChange",i),L.emit("focusedChange",{focused:i,prev:this._prevFocused}),this._prevFocused=i,i!==void 0&&((n=this.boxManager)==null||n.focusBox({appId:i}),setTimeout(()=>{const r=this.appProxies.get(i);r&&je.notifyApp(r.kind,"focus",{appId:i})},0)))},this.attributesUpdateCallback=T.debounce(i=>this._attributesUpdateCallback(i),100),this._appIds=[],this.onRegisteredChange=i=>{!i||Object.entries(i).forEach(([n,r])=>{je.appClasses.has(n)||je.register({kind:n,src:r.src,name:r.name})})},this.onMinimized=i=>{var n,r;((n=this.boxManager)==null?void 0:n.minimized)!==i&&(i===!0&&((r=this.boxManager)==null||r.blurAllBox()),setTimeout(()=>{var s;(s=this.boxManager)==null||s.setMinimized(Boolean(i))},0))},this.onAppDelete=async i=>{const n=Object.keys(i);for(const[r,s]of this.appProxies.entries())n.includes(r)||await s.destroy(!0,!1,!0)},this.closeAll=async()=>{for(const[i,n]of this.appProxies.entries())await n.destroy(!0,!1,!0)},this.displayerStateListener=i=>{this.appProxies.forEach(n=>{n.appEmitter.emit("roomStateChange",i)}),L.emit("observerIdChange",this.displayer.observerId)},this.displayerWritableListener=i=>{var s,a;const n=!i,r=this.windowManger.readonly===void 0||this.windowManger.readonly===!1;this.windowManger.readonly===void 0?(s=this.boxManager)==null||s.setReadonly(i):(a=this.boxManager)==null||a.setReadonly(!(n&&r)),this.appProxies.forEach(o=>{o.emitAppIsWritableChange()}),L.emit("writableChange",n)},this.updateSceneIndex=()=>{const i=this.store.getMainViewScenePath(),n=la(i),r=Ji(this.displayer)[n];if(r.length){const s=i.replace(n,"").replace("/",""),a=r.findIndex(o=>o.name===s);T.isInteger(a)&&a>=0&&this.safeSetAttributes({_mainSceneIndex:a})}},this.updateRootDirRemoving=i=>{this.rootDirRemoving=i},this.displayer=t.displayer,this.store.setContext({getAttributes:()=>this.attributes,safeSetAttributes:i=>this.safeSetAttributes(i),safeUpdateAttributes:(i,n)=>this.safeUpdateAttributes(i,n)}),this.mainViewProxy=new gm(this),this.viewManager=new pm(this.displayer),this.appListeners=new nm(this),this.displayer.callbacks.on(this.eventName,this.displayerStateListener),this.appListeners.addListeners(),this.refresher=wg,this.refresher.setRoom(this.room),this.refresher.setContext({emitter:L}),this.sideEffectManager.addDisposer(()=>{var i,n;this.appCreateQueue.destroy(),this.mainViewProxy.destroy(),this.refresher.destroy(),this.viewManager.destroy(),(i=this.boxManager)==null||i.destroy(),(n=this.callbacksNode)==null||n.dispose()}),L.once("onCreated").then(()=>this.onCreated()),L.on("onReconnected",()=>this.onReconnected()),C.isPlayer(this.displayer)&&(L.on("seekStart",this.onPlayerSeekStart),L.on("seek",this.onPlayerSeekDone)),L.on("removeScenes",this.onRemoveScenes),L.on("setReadonly",this.onReadonlyChanged),this.createRootDirScenesCallback(),je.setSyncRegisterApp(i=>{this.safeUpdateAttributes([xe.Registered,i.kind],i)})}getMemberState(){var t;return((t=this.room)==null?void 0:t.state.memberState)||{strokeColor:[0,0,0]}}async onRootDirRemoved(t=!0){this.setMainViewScenePath(Td),this.createRootDirScenesCallback();for(const[i,n]of this.appProxies.entries())n.view&&await this.closeApp(i,t);this.mainViewProxy.rebind(),L.emit("rootDirRemoved"),this.updateRootDirRemoving(!1)}get eventName(){return C.isRoom(this.displayer)?"onRoomStateChanged":"onPlayerStateChanged"}get attributes(){return this.windowManger.attributes}get canOperate(){return this.windowManger.canOperate}get room(){return C.isRoom(this.displayer)?this.displayer:void 0}get mainView(){return this.mainViewProxy.view}get polling(){return this.mainViewProxy.polling}set polling(t){this.mainViewProxy.polling=t}get focusApp(){if(this.store.focus)return this.appProxies.get(this.store.focus)}get uid(){var t;return((t=this.room)==null?void 0:t.uid)||""}getMainViewSceneDir(){const t=this.store.getMainViewScenePath();if(t)return la(t);throw new Error("[WindowManager]: mainViewSceneDir not found")}async onCreated(){var t;if(await this.attributesUpdateCallback(this.attributes.apps),L.emit("updateManagerRect"),Ct.on("move",this.onBoxMove),Ct.on("resize",this.onBoxResize),Ct.on("focus",this.onBoxFocus),Ct.on("close",this.onBoxClose),Ct.on("boxStateChange",this.onBoxStateChange),this.addAppsChangeListener(),this.addAppCloseListener(),this.refresher.add("maximized",()=>C.autorun(()=>{var n;const i=this.attributes.maximized;(n=this.boxManager)==null||n.setMaximized(Boolean(i))})),this.refresher.add("minimized",()=>C.autorun(()=>{const i=this.attributes.minimized;this.onMinimized(i)})),this.refresher.add("mainViewIndex",()=>C.autorun(()=>{const i=T.get(this.attributes,"_mainSceneIndex");this.onMainViewIndexChange(i)})),this.refresher.add("focusedChange",()=>C.autorun(()=>{const i=T.get(this.attributes,"focus");this.onFocusChange(i)})),this.refresher.add("registeredChange",()=>C.autorun(()=>{const i=T.get(this.attributes,xe.Registered);this.onRegisteredChange(i)})),!this.attributes.apps||Object.keys(this.attributes.apps).length===0){const i=this.store.getMainViewScenePath();if(!i)return;this.resetScenePath(i)}this.displayerWritableListener(!((t=this.room)!=null&&t.isWritable)),this.displayer.callbacks.on("onEnableWriteNowChanged",this.displayerWritableListener),this._prevFocused=this.attributes.focus,this.sideEffectManager.add(()=>{const i=new mm({mainView:()=>this.mainViewProxy.view,focus:()=>this.attributes.focus,getAppProxy:n=>this.appProxies.get(n)});return()=>i.destroy()})}notifyAppsChange(t){(this._appIds.length!==t.length||!this._appIds.every(i=>t.includes(i)))&&(this._appIds=t,Z.emit("appsChange",t))}async _attributesUpdateCallback(t){if(t&&G.container){const i=Object.keys(t);i.length===0&&this.appCreateQueue.emitReady();const r=T.orderBy(i.map(s=>({id:s,createdAt:t[s].createdAt})),"createdAt","asc").map(({id:s})=>s);this.notifyAppsChange(r);for(const s of r)if(!this.appProxies.has(s)&&!this.appStatus.has(s)){const a=t[s];try{if(!this.attributes[s])throw new Error("appAttributes is undefined");this.appCreateQueue.push(()=>(this.appStatus.set(s,_a.StartCreate),this.baseInsertApp({kind:a.kind,options:a.options,isDynamicPPT:a.isDynamicPPT},s,!1))),this.focusByAttributes(t)}catch(o){console.warn("[WindowManager]: Insert App Error",o)}}}}refresh(){this.attributesUpdateCallback(this.attributes.apps)}setBoxManager(t){this.boxManager=t}resetMaximized(){var t;(t=this.boxManager)==null||t.setMaximized(Boolean(this.store.getMaximized()))}resetMinimized(){var t;(t=this.boxManager)==null||t.setMinimized(Boolean(this.store.getMinimized()))}bindMainView(t,i){const n=this.mainViewProxy.view;n.disableCameraTransform=i,n.divElement=t,n.focusScenePath||this.setMainViewFocusPath(),L.emit("mainViewMounted"),Z.emit("onMainViewMounted",n)}setMainViewFocusPath(t){var n;const i=t||this.store.getMainViewScenePath();if(i)return Mi(this.mainView,i),((n=this.mainView)==null?void 0:n.focusScenePath)===i}resetScenePath(t){this.displayer.state.sceneState.scenePath!==t&&Ua(this.room,t)}async addApp(t,i){nt("addApp",t);const{appId:n,needFocus:r}=await this.beforeAddApp(t,i),s=await this.baseInsertApp(t,n,!0,r);return this.afterAddApp(s),s==null?void 0:s.id}async beforeAddApp(t,i){var a,o;const n=await Xg(t.kind);this.appStatus.set(n,_a.StartCreate);const r=(a=t.attributes)!=null?a:{};this.safeUpdateAttributes([n],r),this.store.setupAppAttributes(t,n,i);const s=!((o=this.boxManager)!=null&&o.minimized);return s&&this.store.setAppFocus(n,!0),{appId:n,needFocus:s}}afterAddApp(t){var i,n;if(t&&t.box){const r=t.box;Ct.emit("move",{appId:t.id,x:r==null?void 0:r.intrinsicX,y:r==null?void 0:r.intrinsicY}),this.store.updateAppState(t.id,ze.ZIndex,r.zIndex)}(i=this.boxManager)!=null&&i.minimized&&((n=this.boxManager)==null||n.setMinimized(!1,!1))}async closeApp(t,i=!0){const n=this.appProxies.get(t);n&&n.destroy(!0,i,!1)}async baseInsertApp(t,i,n,r){if(this.appProxies.has(i)){console.warn("[WindowManager]: app duplicate exists and cannot be created again");return}const s=new tl(t,this,i,n);if(s)return await s.baseInsertApp(r),this.appStatus.delete(i),s;throw this.appStatus.delete(i),new Error("[WindowManger]: initialize AppProxy failed")}safeSetAttributes(t){this.windowManger.safeSetAttributes(t)}safeUpdateAttributes(t,i){this.windowManger.safeUpdateAttributes(t,i)}async setMainViewScenePath(t){if(this.room){const i=this.displayer.scenePathType(t);if(la(t)!==He)throw new Error('[WindowManager]: main view scenePath must in root dir "/"');if(i===C.ScenePathType.None)throw new Error(`[WindowManager]: ${t} not valid scene`);if(i===C.ScenePathType.Page)await this._setMainViewScenePath(t);else if(i===C.ScenePathType.Dir){const r=qg(this.displayer,t);r&&await this._setMainViewScenePath(r)}}}async _setMainViewScenePath(t){this.setMainViewFocusPath(t)&&(this.safeSetAttributes({_mainScenePath:t}),this.store.setMainViewFocusPath(this.mainView),this.updateSceneIndex(),this.dispatchSetMainViewScenePath(t))}async setMainViewSceneIndex(t){var i;if(this.room){if(this.store.getMainViewSceneIndex()===t)return;const n=(i=this.callbacksNode)==null?void 0:i.scenes[t],r=`${He}${n}`;if(n)this.setMainViewFocusPath(r)&&(this.store.setMainViewScenePath(r),this.store.setMainViewSceneIndex(t),this.dispatchSetMainViewScenePath(r));else throw new Error(`[WindowManager]: ${t} not valid index`)}}dispatchSetMainViewScenePath(t){this.dispatchInternalEvent(J.SetMainViewScenePath,{nextScenePath:t}),Z.emit("mainViewScenePathChange",t),Ua(this.room,t)}getAppInitPath(t){var n;const i=this.store.getAppAttributes(t);if(i)return(n=i==null?void 0:i.options)==null?void 0:n.scenePath}safeDispatchMagixEvent(t,i){this.canOperate&&this.displayer.dispatchMagixEvent(t,i)}focusByAttributes(t){var i;if(t&&Object.keys(t).length===((i=this.boxManager)==null?void 0:i.boxSize)){const n=this.store.focus;n&&this.boxManager.focusBox({appId:n})}}async onReconnected(){this.attributesUpdateCallback(this.attributes.apps);const i=Array.from(this.appProxies.values()).map(n=>n.onReconnected());this.mainViewProxy.onReconnect(),await Promise.all(i),this.callbacksNode&&this.onSceneChange(this.callbacksNode)}notifyContainerRectUpdate(t){this.appProxies.forEach(i=>{i.appEmitter.emit("containerRectUpdate",t)})}dispatchInternalEvent(t,i){this.safeDispatchMagixEvent(Va,{eventName:t,payload:i})}destroy(){this.displayer.callbacks.off(this.eventName,this.displayerStateListener),this.displayer.callbacks.off("onEnableWriteNowChanged",this.displayerWritableListener),this.appListeners.removeListeners(),Ct.clearListeners(),L.clearListeners(),this.appProxies.size&&this.appProxies.forEach(t=>{t.destroy(!0,!1,!0)}),Z.clearListeners(),this.sideEffectManager.flushAll(),this._prevFocused=void 0,this._prevSceneIndex=void 0}}const wm=e=>{const t=document.createElement("div");t.className="netless-window-manager-playground";const i=document.createElement("div");i.className="netless-window-manager-sizer";const n=document.createElement("div");n.className="netless-window-manager-wrapper";const r=document.createElement("div");return r.className="netless-window-manager-main-view",t.appendChild(i),i.appendChild(n),n.appendChild(r),e.appendChild(t),G.wrapper=n,{playground:t,wrapper:n,sizer:i,mainViewElement:r}},ym=()=>{if(Pu(C.WhiteVersion)<Pu(Tu))throw new Dd(Tu)},Ha=(e,t)=>{var s;const i=(e==null?void 0:e.state.roomMembers)||[];let n=-1,r;for(const a of i)((s=a.payload)==null?void 0:s.uid)===t&&n<a.memberId&&(n=a.memberId,r=a);return r},xm=async e=>{let t=e.getInvisiblePlugin(G.kind);if(t)return t;let i;const n=new Promise(u=>{G._resolve=i=u});let r=!1;const s=Sm(e);!e.isWritable&&s&&(r=!0,await Ad.default(async u=>{nt(`switching to writable (x${u})`),await e.setWritable(!0)},{retries:10,maxTimeout:5e3})),e.isWritable?(nt("creating InvisiblePlugin..."),e.createInvisiblePlugin(G,{}).catch(console.warn)):(s&&console.warn("[WindowManager]: failed to switch to writable"),console.warn("[WindowManager]: waiting for others to create the plugin..."));const a=setTimeout(()=>{console.warn("[WindowManager]: no one called createInvisiblePlugin() after 20 seconds")},2e4),o=setTimeout(()=>{throw new Error("[WindowManager]: no one called createInvisiblePlugin() after 60 seconds")},6e4),l=setInterval(()=>{t=e.getInvisiblePlugin(G.kind),t&&(clearTimeout(o),clearTimeout(a),clearInterval(l),i(t),r&&e.isWritable&&setTimeout(()=>e.setWritable(!1).catch(console.warn),500))},200);return n},Sm=e=>{try{const t=atob(e.roomToken.slice(12)),i=t.indexOf("&role=");return+t[i+6]<2}catch(t){return console.error(t),!1}},Im=window.ResizeObserver||Ko.ResizeObserver;class il{constructor(t){this.emitter=t}static create(t,i,n,r){const s=new il(r);return s.observePlaygroundSize(t,i,n),s}observePlaygroundSize(t,i,n){this.updateSizer(t.getBoundingClientRect(),i,n),this.containerResizeObserver=new Im(r=>{var a;const s=(a=r[0])==null?void 0:a.contentRect;s&&(this.updateSizer(s,i,n),this.emitter.emit("playgroundSizeChange",s))}),this.disposer=this.emitter.on("containerSizeRatioUpdate",()=>{const r=t.getBoundingClientRect();this.updateSizer(r,i,n),this.emitter.emit("playgroundSizeChange",r)}),this.containerResizeObserver.observe(t)}updateSizer({width:t,height:i},n,r){t&&i&&(i/t>G.containerSizeRatio?(i=t*G.containerSizeRatio,n.classList.toggle("netless-window-manager-sizer-horizontal",!0)):(t=i/G.containerSizeRatio,n.classList.toggle("netless-window-manager-sizer-horizontal",!1)),r.style.width=`${t}px`,r.style.height=`${i}px`)}disconnect(){var t;(t=this.containerResizeObserver)==null||t.disconnect(),T.isFunction(this.disposer)&&(this.disposer(),this.disposer=void 0)}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ee=function(){return Ee=Object.assign||function(t){for(var i,n=1,r=arguments.length;n<r;n++){i=arguments[n];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},Ee.apply(this,arguments)};function nl(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]]);return i}var ca=0,Wd=typeof window!="undefined"&&window.requestAnimationFrame!==void 0?function(e){return window.requestAnimationFrame(e)}:function(e){var t=Date.now(),i=Math.max(0,16.7-(t-ca));ca=t+i,setTimeout(function(){return e(ca)},i)},Mm=function(e){var t=[],i=[],n=0,r=!1,s=0,a=new WeakSet,o=new WeakSet,l={cancel:function(u){var c=i.indexOf(u);a.add(u),c!==-1&&i.splice(c,1)},process:function(u){var c;if(r=!0,c=[i,t],t=c[0],i=c[1],i.length=0,n=t.length,n){var p;for(s=0;s<n;s++)p=t[s],p(u),o.has(p)===!0&&!a.has(p)&&(l.schedule(p),e(!0))}r=!1},schedule:function(u,c,p){c===void 0&&(c=!1),p===void 0&&(p=!1);var v=p&&r,S=v?t:i;a.delete(u),c&&o.add(u),S.indexOf(u)===-1&&(S.push(u),v&&(n=t.length))}};return l},bm=40,Lu=1/60*1e3,Rr=!0,$n=!1,$a=!1,Mn={delta:0,timestamp:0},rl=["read","update","preRender","render","postRender"],Cm=function(e){return $n=e},Hd=rl.reduce(function(e,t){return e[t]=Mm(Cm),e},{}),Am=rl.reduce(function(e,t){var i=Hd[t];return e[t]=function(n,r,s){return r===void 0&&(r=!1),s===void 0&&(s=!1),$n||Tm(),i.schedule(n,r,s),n},e},{}),Em=function(e){return Hd[e].process(Mn)},$d=function(e){$n=!1,Mn.delta=Rr?Lu:Math.max(Math.min(e-Mn.timestamp,bm),1),Rr||(Lu=Mn.delta),Mn.timestamp=e,$a=!0,rl.forEach(Em),$a=!1,$n&&(Rr=!1,Wd($d))},Tm=function(){$n=!0,Rr=!0,$a||Wd($d)},Zd=function(e,t){return function(i){return Math.max(Math.min(i,t),e)}},Vr=function(e){return e%1?Number(e.toFixed(5)):e},Qd=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i,Ls={test:function(e){return typeof e=="number"},parse:parseFloat,transform:function(e){return e}},Nn=Ee(Ee({},Ls),{transform:Zd(0,1)}),yr=Ee(Ee({},Ls),{default:1}),sl=function(e){return{test:function(t){return typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1},parse:parseFloat,transform:function(t){return""+t+e}}},oi=sl("deg"),kn=sl("%"),_=sl("px"),Bu=Ee(Ee({},kn),{parse:function(e){return kn.parse(e)/100},transform:function(e){return kn.transform(e*100)}}),Nm=function(e){return e.substring(e.indexOf("(")+1,e.lastIndexOf(")"))},km=Zd(0,255),Za=function(e){return e.red!==void 0},Qa=function(e){return e.hue!==void 0};function Pm(e){return Nm(e).replace(/(,|\/)/g," ").split(/ \s*/)}var Fd=function(e){return function(t){if(typeof t!="string")return t;for(var i={},n=Pm(t),r=0;r<4;r++)i[e[r]]=n[r]!==void 0?parseFloat(n[r]):1;return i}},Dm=function(e){var t=e.red,i=e.green,n=e.blue,r=e.alpha,s=r===void 0?1:r;return"rgba("+t+", "+i+", "+n+", "+s+")"},zm=function(e){var t=e.hue,i=e.saturation,n=e.lightness,r=e.alpha,s=r===void 0?1:r;return"hsla("+t+", "+i+", "+n+", "+s+")"},da=Ee(Ee({},Ls),{transform:function(e){return Math.round(km(e))}});function al(e,t){return e.startsWith(t)&&Qd.test(e)}var _r={test:function(e){return typeof e=="string"?al(e,"rgb"):Za(e)},parse:Fd(["red","green","blue","alpha"]),transform:function(e){var t=e.red,i=e.green,n=e.blue,r=e.alpha,s=r===void 0?1:r;return Dm({red:da.transform(t),green:da.transform(i),blue:da.transform(n),alpha:Vr(Nn.transform(s))})}},ha={test:function(e){return typeof e=="string"?al(e,"hsl"):Qa(e)},parse:Fd(["hue","saturation","lightness","alpha"]),transform:function(e){var t=e.hue,i=e.saturation,n=e.lightness,r=e.alpha,s=r===void 0?1:r;return zm({hue:Math.round(t),saturation:kn.transform(Vr(i)),lightness:kn.transform(Vr(n)),alpha:Vr(Nn.transform(s))})}},Ru=Ee(Ee({},_r),{test:function(e){return typeof e=="string"&&al(e,"#")},parse:function(e){var t="",i="",n="";return e.length>4?(t=e.substr(1,2),i=e.substr(3,2),n=e.substr(5,2)):(t=e.substr(1,1),i=e.substr(2,1),n=e.substr(3,1),t+=t,i+=i,n+=n),{red:parseInt(t,16),green:parseInt(i,16),blue:parseInt(n,16),alpha:1}}}),lt={test:function(e){return typeof e=="string"&&Qd.test(e)||Za(e)||Qa(e)},parse:function(e){return _r.test(e)?_r.parse(e):ha.test(e)?ha.parse(e):Ru.test(e)?Ru.parse(e):e},transform:function(e){return Za(e)?_r.transform(e):Qa(e)?ha.transform(e):e}},ol=function(e){var t=e.onRead,i=e.onRender,n=e.uncachedValues,r=n===void 0?new Set:n,s=e.useCache,a=s===void 0?!0:s;return function(o){o===void 0&&(o={});var l=nl(o,[]),u={},c=[],p=!1;function v(y,x){y.startsWith("--")&&(l.hasCSSVariable=!0);var d=u[y];u[y]=x,u[y]!==d&&(c.indexOf(y)===-1&&c.push(y),p||(p=!0,Am.render(S.render)))}var S={get:function(y,x){x===void 0&&(x=!1);var d=!x&&a&&!r.has(y)&&u[y]!==void 0;return d?u[y]:t(y,l)},set:function(y,x){if(typeof y=="string")v(y,x);else for(var d in y)v(d,y[d]);return this},render:function(y){return y===void 0&&(y=!1),(p||y===!0)&&(i(u,l,c),p=!1,c.length=0),this}};return S}},jm=/([a-z])([A-Z])/g,Lm="$1-$2",Bs=function(e){return e.replace(jm,Lm).toLowerCase()},Gd=new Map,ll=new Map,Yd=["Webkit","Moz","O","ms",""],Bm=Yd.length,Rm=typeof document!="undefined",pa,Xd=function(e,t){return ll.set(e,Bs(t))},Vm=function(e){pa=pa||document.createElement("div");for(var t=0;t<Bm;t++){var i=Yd[t],n=i==="",r=n?e:i+e.charAt(0).toUpperCase()+e.slice(1);if(r in pa.style||n){if(n&&e==="clipPath"&&ll.has(e))return;Gd.set(e,r),Xd(e,(n?"":"-")+Bs(r))}}},_m=function(e){return Xd(e,e)},Jd=function(e,t){t===void 0&&(t=!1);var i=t?ll:Gd;return i.has(e)||(Rm?Vm(e):_m(e)),i.get(e)||e},Om=["","X","Y","Z"],Um=["translate","scale","rotate","skew","transformPerspective"],Fa=Um.reduce(function(e,t){return Om.reduce(function(i,n){return i.push(t+n),i},e)},["x","y","z"]),Wm=Fa.reduce(function(e,t){return e[t]=!0,e},{});function ul(e){return Wm[e]===!0}function Hm(e,t){return Fa.indexOf(e)-Fa.indexOf(t)}var $m=new Set(["originX","originY","originZ"]);function Zm(e){return $m.has(e)}var Vu=Ee(Ee({},Ls),{transform:Math.round}),Qm={color:lt,backgroundColor:lt,outlineColor:lt,fill:lt,stroke:lt,borderColor:lt,borderTopColor:lt,borderRightColor:lt,borderBottomColor:lt,borderLeftColor:lt,borderWidth:_,borderTopWidth:_,borderRightWidth:_,borderBottomWidth:_,borderLeftWidth:_,borderRadius:_,radius:_,borderTopLeftRadius:_,borderTopRightRadius:_,borderBottomRightRadius:_,borderBottomLeftRadius:_,width:_,maxWidth:_,height:_,maxHeight:_,size:_,top:_,right:_,bottom:_,left:_,padding:_,paddingTop:_,paddingRight:_,paddingBottom:_,paddingLeft:_,margin:_,marginTop:_,marginRight:_,marginBottom:_,marginLeft:_,rotate:oi,rotateX:oi,rotateY:oi,rotateZ:oi,scale:yr,scaleX:yr,scaleY:yr,scaleZ:yr,skew:oi,skewX:oi,skewY:oi,distance:_,translateX:_,translateY:_,translateZ:_,x:_,y:_,z:_,perspective:_,opacity:Nn,originX:Bu,originY:Bu,originZ:_,zIndex:Vu,fillOpacity:Nn,strokeOpacity:Nn,numOctaves:Vu},cl=function(e){return Qm[e]},Fm=function(e,t){return t&&typeof e=="number"?t.transform(e):e},Pn="scrollLeft",Dn="scrollTop",Kd=new Set([Pn,Dn]),Gm=new Set([Pn,Dn,"transform"]),Ym={x:"translateX",y:"translateY",z:"translateZ"};function qd(e){return typeof e=="function"}function Xm(e,t,i,n,r,s){s===void 0&&(s=!0);var a="",o=!1;i.sort(Hm);for(var l=i.length,u=0;u<l;u++){var c=i[u];a+=(Ym[c]||c)+"("+t[c]+") ",o=c==="z"?!0:o}return!o&&r?a+="translateZ(0)":a=a.trim(),qd(e.transform)?a=e.transform(t,n?"":a):s&&n&&(a="none"),a}function Jm(e,t,i,n,r,s,a,o){t===void 0&&(t=!0),i===void 0&&(i={}),n===void 0&&(n={}),r===void 0&&(r={}),s===void 0&&(s=[]),a===void 0&&(a=!1),o===void 0&&(o=!0);var l=!0,u=!1,c=!1;for(var p in e){var v=e[p],S=cl(p),y=Fm(v,S);ul(p)?(u=!0,n[p]=y,s.push(p),l&&(S.default&&v!==S.default||!S.default&&v!==0)&&(l=!1)):Zm(p)?(r[p]=y,c=!0):(!Gm.has(p)||!qd(y))&&(i[Jd(p,a)]=y)}return(u||typeof e.transform=="function")&&(i.transform=Xm(e,n,s,l,t,o)),c&&(i.transformOrigin=(r.originX||"50%")+" "+(r.originY||"50%")+" "+(r.originZ||0)),i}function dl(e){var t=e===void 0?{}:e,i=t.enableHardwareAcceleration,n=i===void 0?!0:i,r=t.isDashCase,s=r===void 0?!0:r,a=t.allowTransformNone,o=a===void 0?!0:a,l={},u={},c={},p=[];return function(v){return p.length=0,Jm(v,n,l,u,c,p,s,o),l}}function Km(e,t){var i=t.element,n=t.preparseOutput,r=cl(e);if(ul(e))return r&&r.default||0;if(Kd.has(e))return i[e];var s=window.getComputedStyle(i,null).getPropertyValue(Jd(e,!0))||0;return n&&r&&r.test(s)&&r.parse?r.parse(s):s}function qm(e,t,i){var n=t.element,r=t.buildStyles,s=t.hasCSSVariable;if(Object.assign(n.style,r(e)),s)for(var a=i.length,o=0;o<a;o++){var l=i[o];l.startsWith("--")&&n.style.setProperty(l,e[l])}i.indexOf(Pn)!==-1&&(n[Pn]=e[Pn]),i.indexOf(Dn)!==-1&&(n[Dn]=e[Dn])}var ev=ol({onRead:Km,onRender:qm,uncachedValues:Kd});function tv(e,t){t===void 0&&(t={});var i=t.enableHardwareAcceleration,n=t.allowTransformNone,r=nl(t,["enableHardwareAcceleration","allowTransformNone"]);return ev(Ee({element:e,buildStyles:dl({enableHardwareAcceleration:i,allowTransformNone:n}),preparseOutput:!0},r))}var eh=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues"]),_u=.5,th=function(){return{style:{}}},fa=function(e,t){return _.transform(e*t)},iv={x:0,y:0,width:0,height:0};function Ou(e,t,i){return typeof e=="string"?e:_.transform(t+i*e)}function nv(e,t,i){return Ou(t,e.x,e.width)+" "+Ou(i,e.y,e.height)}var ih={enableHardwareAcceleration:!1,isDashCase:!1};function rv(e,t,i,n,r,s){t===void 0&&(t=iv),n===void 0&&(n=dl(ih)),r===void 0&&(r=th()),s===void 0&&(s=!0);var a=e.attrX,o=e.attrY,l=e.originX,u=e.originY,c=e.pathLength,p=e.pathSpacing,v=p===void 0?1:p,S=e.pathOffset,y=S===void 0?0:S,x=nl(e,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),d=n(x);for(var h in d)if(h==="transform")r.style.transform=d[h];else{var f=s&&!eh.has(h)?Bs(h):h;r[f]=d[h]}return(l!==void 0||u!==void 0||d.transform)&&(r.style.transformOrigin=nv(t,l!==void 0?l:_u,u!==void 0?u:_u)),a!==void 0&&(r.x=a),o!==void 0&&(r.y=o),i!==void 0&&c!==void 0&&(r[s?"stroke-dashoffset":"strokeDashoffset"]=fa(-y,i),r[s?"stroke-dasharray":"strokeDasharray"]=fa(c,i)+" "+fa(v,i)),r}function sv(e,t,i){i===void 0&&(i=!0);var n=th(),r=dl(ih);return function(s){return rv(s,e,t,r,n,i)}}var av=function(e){return typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()},ov=function(e){try{return av(e)}catch{return{x:0,y:0,width:0,height:0}}},lv=function(e){return e.tagName==="path"},uv=ol({onRead:function(e,t){var i=t.element;if(e=eh.has(e)?e:Bs(e),ul(e)){var n=cl(e);return n&&n.default||0}else return i.getAttribute(e)},onRender:function(e,t){var i=t.element,n=t.buildAttrs,r=n(e);for(var s in r)s==="style"?Object.assign(i.style,r.style):i.setAttribute(s,r[s])}}),cv=function(e){var t=ov(e),i=lv(e)&&e.getTotalLength?e.getTotalLength():void 0;return uv({element:e,buildAttrs:sv(t,i)})},dv=ol({useCache:!1,onRead:function(e){return e==="scrollTop"?window.pageYOffset:window.pageXOffset},onRender:function(e){var t=e.scrollTop,i=t===void 0?0:t,n=e.scrollLeft,r=n===void 0?0:n;return window.scrollTo(r,i)}}),Ga=new WeakMap,hv=function(e){return e instanceof HTMLElement||typeof e.click=="function"},pv=function(e){return e instanceof SVGElement||"ownerSVGElement"in e},fv=function(e,t){var i;return e===window?i=dv(e):hv(e)?i=tv(e,t):pv(e)&&(i=cv(e)),Ga.set(e,i),i},gv=function(e,t){return Ga.has(e)?Ga.get(e):fv(e,t)};function mv(e,t){var i=typeof e=="string"?document.querySelector(e):e;return gv(i,t)}var Ge=function(t,i,n,r){var s=n?n.call(r,t,i):void 0;if(s!==void 0)return!!s;if(t===i)return!0;if(typeof t!="object"||!t||typeof i!="object"||!i)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(i),u=0;u<a.length;u++){var c=a[u];if(!l(c))return!1;var p=t[c],v=i[c];if(s=n?n.call(r,p,v,c):void 0,s===!1||s===void 0&&p!==v)return!1}return!0},vv="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",wv=87,yv=20,Uu=[],hl=()=>{for(let e=0;e<yv;e++)Uu[e]=vv.charAt(Math.random()*wv);return Uu.join("")};function nh(e){try{return e()}catch(t){console.error(t)}}var Rs=class{constructor(){this.push=this.addDisposer,this.disposers=new Map}addDisposer(e,t=this.genUID()){return this.flush(t),this.disposers.set(t,Array.isArray(e)?xv(e):e),t}add(e,t=this.genUID()){const i=e();return i?this.addDisposer(i,t):t}addEventListener(e,t,i,n,r=this.genUID()){return e.addEventListener(t,i,n),this.addDisposer(()=>e.removeEventListener(t,i,n),r),r}setTimeout(e,t,i=this.genUID()){const n=window.setTimeout(()=>{this.remove(i),e()},t);return this.addDisposer(()=>window.clearTimeout(n),i)}setInterval(e,t,i=this.genUID()){const n=window.setInterval(e,t);return this.addDisposer(()=>window.clearInterval(n),i)}remove(e){const t=this.disposers.get(e);return this.disposers.delete(e),t}flush(e){const t=this.remove(e);t&&t()}flushAll(){this.disposers.forEach(nh),this.disposers.clear()}genUID(){let e;do e=hl();while(this.disposers.has(e));return e}};function xv(e){return()=>e.forEach(nh)}var Sv=Object.defineProperty,Iv=Object.defineProperties,Mv=Object.getOwnPropertyDescriptors,Wu=Object.getOwnPropertySymbols,bv=Object.prototype.hasOwnProperty,Cv=Object.prototype.propertyIsEnumerable,Ya=(e,t,i)=>t in e?Sv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,rh=(e,t)=>{for(var i in t||(t={}))bv.call(t,i)&&Ya(e,i,t[i]);if(Wu)for(var i of Wu(t))Cv.call(t,i)&&Ya(e,i,t[i]);return e},sh=(e,t)=>Iv(e,Mv(t)),Dt=(e,t,i)=>(Ya(e,typeof t!="symbol"?t+"":t,i),i);class Av{constructor(t){Dt(this,"_subscribers"),Dt(this,"_bSub"),Dt(this,"_bSubDisposer"),this._bSub=t}get size(){return this._subscribers?this._subscribers.size:0}invoke(t,i){this._subscribers&&this._subscribers.forEach(n=>n(t,i))}add(t){this._bSub&&(!this._subscribers||this._subscribers.size<=0)&&(this._bSubDisposer=this._bSub()),this._subscribers||(this._subscribers=new Set),this._subscribers.add(t)}remove(t){if(this._subscribers&&this._subscribers.delete(t),this._subscribers&&this._subscribers.size<=0&&this._bSubDisposer){const i=this._bSubDisposer;this._bSubDisposer=null,i()}}clear(){if(this._subscribers&&this._subscribers.clear(),this._bSubDisposer){const t=this._bSubDisposer;this._bSubDisposer=null,t()}}destroy(){this.clear()}}class pl{constructor(t,i){Dt(this,"_subscribers"),Dt(this,"_value"),this._value=t;let n;if(i&&(i.compare&&(this.compare=i.compare),i.beforeSubscribe)){const r=i.beforeSubscribe,s=this._setValue.bind(this);n=()=>r(s)}this._subscribers=new Av(n)}_setValue(t,i){this.compare(t,this._value)||(this._value=t,this._subscribers.invoke(t,i))}get value(){return this._value}reaction(t){return this._subscribers.add(t),()=>{this._subscribers.remove(t)}}subscribe(t,i){const n=this.reaction(t);return t(this._value,i),n}destroy(){this._subscribers.destroy()}unsubscribe(t){this._subscribers.remove(t)}get size(){return this._subscribers.size}compare(t,i){return t===i}}class U extends pl{constructor(){super(...arguments),Dt(this,"setValue",this._setValue)}}class Ev extends pl{constructor(t,i,n={}){super(i(t.value),sh(rh({},n),{beforeSubscribe:r=>{const s=t.subscribe((a,o)=>r(i(a),o));if(n.beforeSubscribe){const a=n.beforeSubscribe(r);if(a)return()=>{s(),a()}}return s}})),Dt(this,"_srcValue"),this._srcValue=()=>i(t.value)}get value(){if(this.size<=0){const t=this._srcValue();return this.compare(t,this._value)?this._value:t}return this._value}}function ah(e,t=n=>n,i={}){return new Ev(e,t,i)}class Tv extends pl{constructor(t,i,n={}){super(i(ga(t)),sh(rh({},n),{beforeSubscribe:r=>{let s=ga(t);r(i(s));const a=t.map((l,u)=>l.reaction((c,p)=>{s=s.slice(),s[u]=c,r(i(s),p)})),o=()=>a.forEach(l=>l());if(n.beforeSubscribe){const l=n.beforeSubscribe(r);if(l)return()=>{o(),l()}}return o}})),Dt(this,"_srcValue"),this._srcValue=()=>i(ga(t))}get value(){if(this.size<=0){const t=this._srcValue();return this.compare(t,this._value)?this._value:t}return this._value}}function ga(e){return e.map(Nv)}function Nv(e){return e.value}function ie(e,t=n=>n,i={}){return new Tv(e,t,i)}function oh(e){e.onValChanged||(e.onValChanged=kv)}function kv(e,t){const i=this[`_${e}$`]||this[e];if(!(i!=null&&i.reaction))throw new TypeError(`"${e}" is not related to a Val in this instance`);return i.reaction(t)}function is(e,t,i){Object.keys(t).forEach(n=>{Pv(e,n,t[n]),i&&i.attach(t[n])}),oh(e)}function Pv(e,t,i){return Object.defineProperties(e,{[t]:{get(){return i.value}},[`_${t}$`]:{value:i}}),e}function fl(e,t,i){Object.keys(t).forEach(n=>{Dv(e,n,t[n]),i&&i.attach(t[n])}),oh(e)}function Dv(e,t,i){return Object.defineProperties(e,{[t]:{get(){return i.value},set(n){i.setValue(n)}},[`_${t}$`]:{value:i},[`set${zv(t)}`]:{value:(n,r)=>i.setValue(n,r)}}),e}function zv(e){return e[0].toUpperCase()+e.slice(1)}class gl{constructor(){Dt(this,"vals",new Set)}attach(t){return this.vals.add(t),t}detach(t){return this.vals.delete(t),t}destroy(){this.vals.forEach(jv),this.vals.clear()}}function jv(e){e.destroy()}var Lv=(()=>`.tele-fancy-scrollbar {
  overscroll-behavior: contain;
  overflow: auto;
  overflow-y: scroll;
  overflow-y: overlay;
  -webkit-overflow-scrolling: touch;
  -ms-overflow-style: -ms-autohiding-scrollbar;
  scrollbar-width: auto;
}
.tele-fancy-scrollbar::-webkit-scrollbar {
  height: 8px;
  width: 8px;
}
.tele-fancy-scrollbar::-webkit-scrollbar-track {
  background-color: transparent;
}
.tele-fancy-scrollbar::-webkit-scrollbar-thumb {
  background-color: rgba(68, 78, 96, 0.1);
  background-color: transparent;
  border-radius: 4px;
  transition: background-color 0.4s;
}
.tele-fancy-scrollbar:hover::-webkit-scrollbar-thumb {
  background-color: rgba(68, 78, 96, 0.1);
}
.tele-fancy-scrollbar::-webkit-scrollbar-thumb:hover {
  background-color: rgba(68, 78, 96, 0.2);
}
.tele-fancy-scrollbar::-webkit-scrollbar-thumb:active {
  background-color: rgba(68, 78, 96, 0.2);
}
.tele-fancy-scrollbar::-webkit-scrollbar-thumb:vertical {
  min-height: 50px;
}
.tele-fancy-scrollbar::-webkit-scrollbar-thumb:horizontal {
  min-width: 50px;
}
.telebox-quarantine {
  all: initial;
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
}
.telebox-body-wrap {
  color: #191919;
  color: var(--tele-boxColor, #191919);
  flex: 1;
  width: 100%;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
}
.telebox-content {
  width: 100%;
  height: 100%;
  position: relative;
  background-color: #f5f5fc;
  background-color: var(--tele-boxContainerBackground, #f5f5fc);
}
.telebox-box-stage {
  position: absolute;
  z-index: 1;
  overflow: hidden;
  overflow-y: auto;
  background-color: #fff;
  background-color: var(--tele-boxStageBackground, #fff);
}
.telebox-footer-wrap {
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  color: #191919;
  color: var(--tele-boxFooterColor, #191919);
  background-color: #fff;
  background-color: var(--tele-boxFooterBackground, #fff);
}
.telebox-footer-wrap::before {
  content: "";
  display: block;
  flex: 1;
}
.telebox-color-scheme-dark {
  color-scheme: dark;
}
.telebox-color-scheme-dark .telebox-body-wrap {
  color: #e9e9e9;
  color: var(--tele-boxColor, #e9e9e9);
}
.telebox-color-scheme-dark .telebox-content {
  background-color: #25282e;
  background-color: var(--tele-boxContainerBackground, #25282e);
}
.telebox-color-scheme-dark .telebox-box-stage {
  background-color: #272a30;
  background-color: var(--tele-boxStageBackground, #272a30);
}
.telebox-color-scheme-dark .telebox-footer-wrap {
  color: #e9e9e9;
  color: var(--tele-boxFooterColor, #e9e9e9);
  background-color: #383b42;
  background-color: var(--tele-boxFooterBackground, #383b42);
}`)(),lh=(e=>(e.Light="light",e.Dark="dark",e.Auto="auto",e))(lh||{}),de=(e=>(e.Normal="normal",e.Minimized="minimized",e.Maximized="maximized",e))(de||{}),De=(e=>(e.DarkMode="dark_mode",e.PrefersColorScheme="prefers_color_scheme",e.Close="close",e.Focus="focus",e.Blur="blur",e.IntrinsicMove="intrinsic_move",e.IntrinsicResize="intrinsic_resize",e.ZIndex="z_index",e.State="state",e.Minimized="minimized",e.Maximized="maximized",e.Readonly="readonly",e.Destroyed="destroyed",e))(De||{}),ht=(e=>(e.Close="close",e.Maximize="maximize",e.Minimize="minimize",e))(ht||{}),ct=(e=>(e.North="n",e.South="s",e.West="w",e.East="e",e.NorthWest="nw",e.NorthEast="ne",e.SouthEast="se",e.SouthWest="sw",e))(ct||{});const ma="dh";function zi(e,t,i){return Math.min(Math.max(e,t),i)}function zn(e){e.stopPropagation(),e.cancelable&&e.preventDefault()}let Bv=1;function Rv(){return`New Box ${Bv++}`}class uh{constructor({readonly$:t,state$:i,title$:n,buttons:r,onEvent:s,onDragStart:a,namespace:o="telebox",boxId:l}){this.sideEffect=new Rs,this.lastTitleBarClick={timestamp:0,clientX:-100,clientY:-100},this.handleTitleBarClick=u=>{var c;if(!u.isPrimary||this.readonly$.value||u.button!==0||(c=u.target.dataset)!=null&&c.teleTitleBarNoDblClick)return;zn(u);const p=Date.now();p-this.lastTitleBarClick.timestamp<=500?Math.abs(u.clientX-this.lastTitleBarClick.clientX)<=5&&Math.abs(u.clientY-this.lastTitleBarClick.clientY)<=5&&this.onEvent&&this.onEvent({type:ht.Maximize,boxId:this.boxId}):this.onDragStart&&this.onDragStart(u),this.lastTitleBarClick.timestamp=p,this.lastTitleBarClick.clientX=u.clientX,this.lastTitleBarClick.clientY=u.clientY},this.readonly$=t,this.state$=i,this.title$=n,this.onEvent=s,this.onDragStart=a,this.namespace=o,this.boxId=l||"",this.buttons=r||[{type:ht.Minimize,iconClassName:this.wrapClassName("titlebar-icon-minimize")},{type:ht.Maximize,iconClassName:this.wrapClassName("titlebar-icon-maximize"),isActive:u=>u===de.Maximized},{type:ht.Close,iconClassName:this.wrapClassName("titlebar-icon-close")}],this.$dragArea=this.renderDragArea()}render(){if(!this.$titleBar){this.$titleBar=document.createElement("div"),this.$titleBar.className=this.wrapClassName("titlebar");const t=document.createElement("div");t.className=this.wrapClassName("title-area"),t.dataset.teleBoxHandle=ma;const i=document.createElement("h1");i.className=this.wrapClassName("title"),i.dataset.teleBoxHandle=ma,t.appendChild(i),t.appendChild(this.$dragArea);const n=document.createElement("div");n.className=this.wrapClassName("titlebar-btns"),this.buttons.forEach(({iconClassName:r},s)=>{const a=String(s),o=document.createElement("button");o.className=`${this.wrapClassName("titlebar-btn")} ${r}`,o.dataset.teleTitleBarBtnIndex=a,o.dataset.teleTitleBarNoDblClick="true",o.dataset.teleBoxID=this.boxId,n.appendChild(o)}),this.sideEffect.addDisposer(this.title$.subscribe(r=>{i.textContent=r,i.title=r}),"render-title"),this.sideEffect.addDisposer(this.state$.subscribe(r=>{this.buttons.forEach((s,a)=>{var o;s.isActive&&((o=n.children[a])==null||o.classList.toggle("is-active",s.isActive(r)))})}),"render-state-btns"),this.sideEffect.addEventListener(n,"click",r=>{var s;if(this.readonly$.value)return;const a=r.target,o=Number((s=a.dataset)==null?void 0:s.teleTitleBarBtnIndex);if(!Number.isNaN(o)&&o<this.buttons.length){zn(r);const l=this.buttons[o];this.onEvent&&this.onEvent({type:l.type,value:l.value,index:o,boxId:this.boxId})}},{},"render-btns-container-click"),t.appendChild(n),this.$titleBar.appendChild(t)}return this.$titleBar}renderDragArea(){const t=document.createElement("div");return t.className=this.wrapClassName("drag-area"),t.dataset.teleBoxHandle=ma,this.sideEffect.addEventListener(t,"pointerdown",this.handleTitleBarClick),t}dragHandle(){return this.$titleBar}wrapClassName(t){return`${this.namespace}-${t}`}destroy(){this.sideEffect.flushAll(),this.$titleBar&&(this.$titleBar=void 0,this.onDragStart=void 0,this.onEvent=void 0)}}function ch([e,t]){if(t<=0||e.width<=0||e.height<=0)return e;const i=e.width*t;if(i===e.height)return e;if(i<e.height)return{x:0,y:(e.height-i)/2,width:e.width,height:i};const n=e.height/t;return{x:(e.width-n)/2,y:0,width:n,height:e.height}}const Vv=window.ResizeObserver||Ko.ResizeObserver;class _v{constructor({id:t=hl(),title:i=Rv(),namespace:n="telebox",visible:r=!0,width:s=.5,height:a=.5,minWidth:o=0,minHeight:l=0,x:u=.1,y:c=.1,resizable:p=!0,draggable:v=!0,boxRatio:S=-1,focus:y=!1,zIndex:x=100,stageRatio:d=null,enableShadowDOM:h=!0,titleBar:f,content:g,stage:m,footer:w,styles:b,userStyles:E,bodyStyle:N=null,stageStyle:P=null,darkMode$:Q,fence$:K,root:z,rootRect$:me,managerMinimized$:Y,managerMaximized$:X,managerReadonly$:be,managerStageRect$:se,managerStageRatio$:ke,defaultBoxBodyStyle$:ot,defaultBoxStageStyle$:qe,collectorRect$:xt}){this.events=new jt.default,this._delegateEvents=new jt.default,this.handleTrackStart=V=>{var $;return($=this._handleTrackStart)==null?void 0:$.call(this,V)},this._sideEffect=new Rs,this.id=t,this.namespace=n,this.enableShadowDOM=h;const St=new gl;this._sideEffect.addDisposer(()=>St.destroy());const dn=new U(i),A=new U(r),j=new U(p),W=new U(v),M=new U(S),k=new U(x),ee=new U(y),q=new U(null),Oe=new U(null),ve=new U(null),vr=ie([q,X],([V,$])=>V!=null?V:$),ai=ie([Oe,Y],([V,$])=>V!=null?V:$),we=ie([ve,be],([V,$])=>V!=null?V:$),Pe=ie([ai,vr],([V,$])=>V?de.Minimized:$?de.Maximized:de.Normal),ra=new U({width:zi(o,0,1),height:zi(l,0,1)},{compare:Ge}),yg=ie([ra,se],([V,$])=>({width:V.width*$.width,height:V.height*$.height}),{compare:Ge}),wr=new U({width:s,height:a},{compare:Ge});this._sideEffect.addDisposer(ra.reaction((V,$)=>{wr.setValue({width:Math.max(s,V.width),height:Math.max(a,V.height)},$)}));const sa=new U({x:u,y:c},{compare:Ge}),aa=ie([wr,se],([V,$])=>({width:$.width*V.width,height:$.height*V.height}),{compare:Ge}),hn=ie([sa,se],([V,$])=>({x:V.x*$.width,y:V.y*$.height}),{compare:Ge}),xg=new U(N),Sg=new U(P),Ig=new U(null),Cu=new U(se.value,{compare:Ge}),Au=new U(d),Mg=ie([Au,ke],([V,$])=>V!=null?V:$),bg=ie([Cu,Mg],ch,{compare:Ge});is(this,{darkMode:Q,fence:K,rootRect:me,managerMinimized:Y,managerMaximized:X,managerReadonly:be,managerStageRect:se,managerStageRatio:ke,defaultBoxBodyStyle:ot,defaultBoxStageStyle:qe,collectorRect:xt}),is(this,{zIndex:k,focus:ee,state:Pe,minSize:ra,pxMinSize:yg,intrinsicSize:wr,intrinsicCoord:sa,pxIntrinsicSize:aa,pxIntrinsicCoord:hn,bodyRect:Cu,stageRect:bg,minimized:ai,maximized:vr,readonly:we},St),fl(this,{title:dn,visible:A,resizable:j,draggable:W,boxRatio:M,boxMinimized:Oe,boxMaximized:q,boxReadonly:ve,stageRatio:Au,bodyStyle:xg,stageStyle:Sg},St),this.titleBar=f||new uh({readonly$:we,state$:Pe,title$:dn,namespace:this.namespace,onDragStart:V=>{var $;return($=this._handleTrackStart)==null?void 0:$.call(this,V)},onEvent:V=>this._delegateEvents.emit(V.type,this.id),boxId:this.id}),this._sideEffect.addDisposer(ie([M,ai]).subscribe(([V,$])=>{!$&&V>0&&this.transform(hn.value.x,hn.value.y,aa.value.width,aa.value.height)})),this._sideEffect.addDisposer(K.subscribe(V=>{V&&this.move(hn.value.x,hn.value.y)})),this.$box=this._render(),Ig.setValue(this.$content.parentElement),g&&this.mountContent(g),m&&this.mountStage(m),w&&this.mountFooter(w),b&&this.mountStyles(b),E&&this.mountUserStyles(E),z.appendChild(this.$box);const Rt=(V,$)=>{this._sideEffect.addDisposer(V.reaction((Cg,Ag)=>{Ag||this.events.emit($,Cg)}))};Rt(Q,De.DarkMode),Rt(we,De.Readonly),Rt(k,De.ZIndex),Rt(ai,De.Minimized),Rt(vr,De.Maximized),Rt(Pe,De.State),Rt(wr,De.IntrinsicResize),Rt(sa,De.IntrinsicMove),this._sideEffect.addDisposer([A.reaction((V,$)=>{!$&&!V&&this.events.emit(De.Close)}),ee.reaction((V,$)=>{$||this.events.emit(V?De.Focus:De.Blur)})])}get minWidth(){return this._minSize$.value.width}get minHeight(){return this._minSize$.value.height}setMinWidth(t,i=!1){this._minSize$.setValue({width:t,height:this.minHeight},i)}setMinHeight(t,i=!1){this._minSize$.setValue({width:this.minWidth,height:t},i)}resize(t,i,n=!1){this._intrinsicSize$.setValue({width:Math.max(t,this.minWidth),height:Math.max(i,this.minHeight)},n)}get intrinsicX(){return this._intrinsicCoord$.value.x}get intrinsicY(){return this._intrinsicCoord$.value.y}get intrinsicWidth(){return this._intrinsicSize$.value.width}get intrinsicHeight(){return this._intrinsicSize$.value.height}move(t,i,n=!1){let r,s;const a=this.managerStageRect,o=this.pxIntrinsicSize;this.fence?(r=zi(t,0,a.width-o.width),s=zi(i,0,a.height-o.height)):(r=zi(t,-(o.width-120),0+a.width-20),s=zi(i,0,0+a.height-20)),this._intrinsicCoord$.setValue({x:r/a.width,y:s/a.height},n)}transform(t,i,n,r,s=!1){const a=this.managerStageRect;if(n=Math.max(n,this.pxMinSize.width),r=Math.max(r,this.pxMinSize.height),this.boxRatio>0){const o=this.boxRatio*n;i!==this.pxIntrinsicCoord.y&&(i-=o-r),r=o}i<0&&(i=0,r=this.pxIntrinsicSize.height),this.move(t,i,s),this._intrinsicSize$.setValue({width:n/a.width,height:r/a.height},s)}mountContent(t){var i;(i=this.$authorContent)==null||i.remove(),this.$authorContent=t,this.$content.appendChild(t)}unmountContent(){this.$authorContent&&(this.$authorContent.remove(),this.$authorContent=void 0)}mountStage(t){var i;(i=this.$authorStage)==null||i.remove(),this.$authorStage=t,this.$stage||(this.$stage=this._renderStage()),this.$stage.appendChild(t),this.$stage.parentElement||this.$body.appendChild(this.$stage)}unmountStage(){var t;this.$authorStage&&(this.$authorStage.remove(),this.$authorStage=void 0),(t=this.$stage)==null||t.remove()}mountFooter(t){var i;(i=this.$authorFooter)==null||i.remove(),this.$authorFooter=t,this.$footer.appendChild(t)}unmountFooter(){this.$authorFooter&&(this.$authorFooter.remove(),this.$authorFooter=void 0)}mountStyles(t){this.$styles.textContent=t}unmountStyles(){this.$styles.textContent=""}mountUserStyles(t){this.$userStyles.textContent=t}unmountUserStyles(){this.$userStyles.textContent=""}_render(){if(this.$box)return this.$box;const t=(d,h)=>this._sideEffect.addDisposer([this._readonly$.subscribe(f=>d.classList.toggle(this.wrapClassName("readonly"),f)),this._draggable$.subscribe(f=>d.classList.toggle(this.wrapClassName("no-drag"),!f)),this._resizable$.subscribe(f=>d.classList.toggle(this.wrapClassName("no-resize"),!f)),this._focus$.subscribe(f=>d.classList.toggle(this.wrapClassName("blur"),!f)),this._darkMode$.subscribe(f=>{d.classList.toggle(this.wrapClassName("color-scheme-dark"),f),d.classList.toggle(this.wrapClassName("color-scheme-light"),!f)})],h);this.$box=document.createElement("div"),this.$box.classList.add(this.wrapClassName("box")),t(this.$box,"bind-box-state"),this._sideEffect.add(()=>{const d=this.wrapClassName("minimized"),h=this.wrapClassName("maximized"),f="box-maximized-timer";return this._state$.subscribe(g=>{this.$box.classList.toggle(d,g===de.Minimized),g===de.Maximized?(this._sideEffect.flush(f),this.$box.classList.toggle(h,!0)):this._sideEffect.setTimeout(()=>{this.$box.classList.toggle(h,!1)},0,f)})}),this._sideEffect.addDisposer(this._visible$.subscribe(d=>{this.$box.style.display=d?"block":"none"})),this._sideEffect.addDisposer(this._zIndex$.subscribe(d=>{this.$box.style.zIndex=String(d)})),this.$box.dataset.teleBoxID=this.id;const i=mv(this.$box),n=ie([this._maximized$,this._minimized$,this._pxIntrinsicSize$,this._pxIntrinsicCoord$,this._collectorRect$,this._rootRect$,this._managerStageRect$],([d,h,f,g,m,w,b])=>{const E=d?{x:-b.x,y:-b.y,width:w.width,height:w.height,scaleX:1,scaleY:1}:{x:g.x,y:g.y,width:f.width,height:f.height,scaleX:1,scaleY:1};if(h&&m){const{width:N,height:P}=d?this.rootRect:f;E.x=m.x-N/2+m.width/2-b.x,E.y=m.y-P/2+m.height/2-b.y,E.scaleX=m.width/N,E.scaleY=m.height/P}return E},{compare:Ge}),r=n.value;this.$box.style.width=r.width+"px",this.$box.style.height=r.height+"px",this.$box.style.transform=`translate(${r.x-10}px,${r.y-10}px)`,this._sideEffect.addDisposer(n.subscribe(d=>{i.set(d)}));const s=document.createElement("div");s.className=this.wrapClassName("box-main"),this.$box.appendChild(s);const a=document.createElement("div");a.className=this.wrapClassName("titlebar-wrap"),a.appendChild(this.titleBar.render()),this.$titleBar=a;const o=document.createElement("div");o.className=this.wrapClassName("body-wrap"),this.$body=o;const l=document.createElement("style");this.$styles=l,o.appendChild(l);const u=document.createElement("style");this.$userStyles=u,o.appendChild(u);const c=document.createElement("div");c.className=this.wrapClassName("content")+" tele-fancy-scrollbar",this.$content=c,this._sideEffect.addDisposer(ie([this._bodyStyle$,this._defaultBoxBodyStyle$],([d,h])=>d!=null?d:h).subscribe(d=>c.style.cssText=d||"")),o.appendChild(c);const p=document.createElement("div");p.className=this.wrapClassName("footer-wrap"),this.$footer=p,s.appendChild(a);const v=document.createElement("div");v.className=this.wrapClassName("main"),this.$main=v,s.appendChild(v);const S=document.createElement("div");S.className=this.wrapClassName("quarantine-outer"),v.appendChild(S);const y=document.createElement("div");if(y.className=this.wrapClassName("quarantine"),y.appendChild(o),y.appendChild(p),this.enableShadowDOM){t(y,"bind-quarantine-state");const d=document.createElement("style");d.textContent=Lv,y.insertBefore(d,y.firstChild),S.attachShadow({mode:"open"}).appendChild(y)}else S.appendChild(y);this._renderResizeHandlers();const x=()=>{const d=o.getBoundingClientRect();this._bodyRect$.setValue({x:0,y:0,width:d.width,height:d.height})};return this._sideEffect.add(()=>{const d=new Vv(()=>{this.minimized||x()});return d.observe(o),()=>d.disconnect()}),this._sideEffect.addDisposer(this._minimized$.reaction(d=>{d||this._sideEffect.setTimeout(x,400,"minimized-content-rect-fix")})),this.$box}_renderStage(){const t=document.createElement("div");t.className=this.wrapClassName("box-stage");const i=n=>{t.style.top=n.y+"px",t.style.left=n.x+"px",t.style.width=n.width+"px",t.style.height=n.height+"px"};return this._sideEffect.addDisposer([ie([this._stageStyle$,this._defaultBoxStageStyle$],([n,r])=>n!=null?n:r).subscribe(n=>{t.style.cssText=n||"",i(this._stageRect$.value)}),this._stageRect$.subscribe(i)],"box-stage-styles"),t}_renderResizeHandlers(){const t=document.createElement("div");t.className=this.wrapClassName("resize-handles"),Object.values(ct).forEach(x=>{const d=document.createElement("div");d.className=this.wrapClassName(x)+" "+this.wrapClassName("resize-handle"),d.dataset.teleBoxHandle=x,t.appendChild(d)}),this.$box.appendChild(t);const i="handle-tracking-listener",n=this.wrapClassName("transforming");let r,s=0,a=0,o=0,l=0,u=0,c=0,p;const v=x=>{if(!x.isPrimary||this.state!==de.Normal)return;zn(x);let{pageX:d,pageY:h}=x;h<0&&(h=0);const f=d-u,g=h-c;let{x:m,y:w}=this.pxIntrinsicCoord,{width:b,height:E}=this.pxIntrinsicSize;switch(p){case ct.North:{w=a+g,E=l-g;break}case ct.South:{E=l+g;break}case ct.West:{m=s+f,b=o-f;break}case ct.East:{b=o+f;break}case ct.NorthWest:{m=s+f,w=a+g,b=o-f,E=l-g;break}case ct.NorthEast:{w=a+g,b=o+f,E=l-g;break}case ct.SouthEast:{b=o+f,E=l+g;break}case ct.SouthWest:{m=s+f,b=o-f,E=l+g;break}default:{this.move(s+f,a+g);return}}this.transform(m,w,b,E)},S=x=>{!x.isPrimary||(p=void 0,r&&(zn(x),this.$box.classList.toggle(n,!1),this._sideEffect.flush(i),r.remove()))},y=x=>{var d;if(!x.isPrimary||this.readonly||x.button!=null&&x.button!==0||!this.draggable||p||this.state!==de.Normal)return;const h=x.target;if((d=h.dataset)!=null&&d.teleBoxHandle){zn(x),{x:s,y:a}=this.pxIntrinsicCoord,{width:o,height:l}=this.pxIntrinsicSize,{pageX:u,pageY:c}=x,p=h.dataset.teleBoxHandle,r||(r=document.createElement("div"));const f=p?this.wrapClassName(`cursor-${p}`):"";r.className=this.wrapClassName(`track-mask${f?` ${f}`:""}`),this.$box.appendChild(r),this.$box.classList.add(n),this._sideEffect.add(()=>(window.addEventListener("pointermove",v,{passive:!1}),window.addEventListener("pointerup",S,{passive:!1}),window.addEventListener("pointercancel",S,{passive:!1}),()=>{window.removeEventListener("pointermove",v),window.removeEventListener("pointerup",S),window.removeEventListener("pointercancel",S)}),i)}};this._handleTrackStart=y,this._sideEffect.addEventListener(t,"pointerdown",y,{},"box-resizeHandles-pointerdown")}async destroy(){this.$box.remove(),this._sideEffect.flushAll(),this._sideEffect.flushAll(),await this.events.emit(De.Destroyed),this.events.clearListeners(),this._delegateEvents.clearListeners()}wrapClassName(t){return`${this.namespace}-${t}`}}var Ov="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCAyOCAyOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzFfNDQyNDQpIj4KPGcgZmlsdGVyPSJ1cmwoI2ZpbHRlcjBfZF8xXzQ0MjQ0KSI+CjxwYXRoIGQ9Ik0xNC4wMDAyIDE2LjE5NTNDMTMuODI0NyAxNi4xOTUzIDEzLjY1MjIgMTYuMTQ5MSAxMy41MDAyIDE2LjA2MTVMNC41MDAxNyAxMC44NjQzQzQuMDIxNzggMTAuNTg3OSAzLjg1Nzk2IDkuOTc2MTIgNC4xMzQyOCA5LjQ5NzczQzQuMjIyMDQgOS4zNDU3OSA0LjM0ODIzIDkuMjE5NiA0LjUwMDE3IDkuMTMxODRMMTMuNTAwMiAzLjkzODQ4QzEzLjgwOTggMy43NjA3NCAxNC4xOTA1IDMuNzYwNzQgMTQuNTAwMiAzLjkzODQ4TDIzLjUwMDIgOS4xMzE4NEMyMy45Nzg2IDkuNDA4MTYgMjQuMTQyNCAxMC4wMiAyMy44NjYxIDEwLjQ5ODRDMjMuNzc4MyAxMC42NTAzIDIzLjY1MjEgMTAuNzc2NSAyMy41MDAyIDEwLjg2NDNMMTQuNTAwMiAxNi4wNjE1QzE0LjM0ODEgMTYuMTQ5MSAxNC4xNzU3IDE2LjE5NTMgMTQuMDAwMiAxNi4xOTUzWiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZyBmaWx0ZXI9InVybCgjZmlsdGVyMV9kXzFfNDQyNDQpIj4KPHBhdGggZD0iTTIzLjUwMDIgMTMuMTMxOUwyMS41MzYxIDExLjk5ODVMMTQuNTAwMiAxNi4wNjE2QzE0LjE5MDcgMTYuMjQgMTMuODA5NiAxNi4yNCAxMy41MDAyIDE2LjA2MTZMNi40NjQyOCAxMS45OTg1TDQuNTAwMTcgMTMuMTMxOUM0LjAyMTc4IDEzLjQwODIgMy44NTc5NiAxNC4wMiA0LjEzNDI4IDE0LjQ5ODRDNC4yMjIwNCAxNC42NTA0IDQuMzQ4MjMgMTQuNzc2NiA0LjUwMDE3IDE0Ljg2NDNMMTMuNTAwMiAyMC4wNjE2QzEzLjgwOTYgMjAuMjQgMTQuMTkwNyAyMC4yNCAxNC41MDAyIDIwLjA2MTZMMjMuNTAwMiAxNC44NjQzQzIzLjk3ODYgMTQuNTg4IDI0LjE0MjQgMTMuOTc2MiAyMy44NjYxIDEzLjQ5NzhDMjMuNzc4MyAxMy4zNDU5IDIzLjY1MjEgMTMuMjE5NyAyMy41MDAyIDEzLjEzMTlaIiBmaWxsPSJ3aGl0ZSIgZmlsbC1vcGFjaXR5PSIwLjgiIHNoYXBlLXJlbmRlcmluZz0iY3Jpc3BFZGdlcyIvPgo8L2c+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIyX2RfMV80NDI0NCkiPgo8cGF0aCBkPSJNMjMuNTAwMiAxNy4xMzE5TDIxLjUzNjEgMTUuOTk4NUwxNC41MDAyIDIwLjA2MTZDMTQuMTkwNyAyMC4yNCAxMy44MDk2IDIwLjI0IDEzLjUwMDIgMjAuMDYxNkw2LjQ2NDI4IDE1Ljk5ODVMNC41MDAxNyAxNy4xMzE5QzQuMDIxNzggMTcuNDA4MiAzLjg1Nzk2IDE4LjAyIDQuMTM0MjggMTguNDk4NEM0LjIyMjA0IDE4LjY1MDQgNC4zNDgyMyAxOC43NzY2IDQuNTAwMTcgMTguODY0M0wxMy41MDAyIDI0LjA2MTZDMTMuODA5NiAyNC4yNCAxNC4xOTA3IDI0LjI0IDE0LjUwMDIgMjQuMDYxNkwyMy41MDAyIDE4Ljg2NDNDMjMuOTc4NiAxOC41ODggMjQuMTQyNCAxNy45NzYyIDIzLjg2NjEgMTcuNDk3OEMyMy43NzgzIDE3LjM0NTkgMjMuNjUyMSAxNy4yMTk3IDIzLjUwMDIgMTcuMTMxOVoiIGZpbGw9IndoaXRlIiBmaWxsLW9wYWNpdHk9IjAuNiIgc2hhcGUtcmVuZGVyaW5nPSJjcmlzcEVkZ2VzIi8+CjwvZz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kXzFfNDQyNDQiIHg9IjMiIHk9IjMuODA1MTgiIHdpZHRoPSIyMiIgaGVpZ2h0PSIxNC4zOTAxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjEiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMC41Ii8+CjxmZUNvbXBvc2l0ZSBpbjI9ImhhcmRBbHBoYSIgb3BlcmF0b3I9Im91dCIvPgo8ZmVDb2xvck1hdHJpeCB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwLjU1Mjk0MSAwIDAgMCAwIDAuNTYwNzg0IDAgMCAwIDAgMC42NTA5OCAwIDAgMCAwLjE1IDAiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJlZmZlY3QxX2Ryb3BTaGFkb3dfMV80NDI0NCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDFfZHJvcFNoYWRvd18xXzQ0MjQ0IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8ZmlsdGVyIGlkPSJmaWx0ZXIxX2RfMV80NDI0NCIgeD0iMyIgeT0iMTEuOTk4NSIgd2lkdGg9IjIyIiBoZWlnaHQ9IjEwLjE5NjgiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj4KPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29tcG9zaXRlIGluMj0iaGFyZEFscGhhIiBvcGVyYXRvcj0ib3V0Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuNTUyOTQxIDAgMCAwIDAgMC41NjA3ODQgMCAwIDAgMCAwLjY1MDk4IDAgMCAwIDAuMTUgMCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiByZXN1bHQ9ImVmZmVjdDFfZHJvcFNoYWRvd18xXzQ0MjQ0Ii8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iZWZmZWN0MV9kcm9wU2hhZG93XzFfNDQyNDQiIHJlc3VsdD0ic2hhcGUiLz4KPC9maWx0ZXI+CjxmaWx0ZXIgaWQ9ImZpbHRlcjJfZF8xXzQ0MjQ0IiB4PSIzIiB5PSIxNS45OTg1IiB3aWR0aD0iMjIiIGhlaWdodD0iMTAuMTk2OCIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiPgo8ZmVGbG9vZCBmbG9vZC1vcGFjaXR5PSIwIiByZXN1bHQ9IkJhY2tncm91bmRJbWFnZUZpeCIvPgo8ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlQWxwaGEiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIgcmVzdWx0PSJoYXJkQWxwaGEiLz4KPGZlT2Zmc2V0IGR5PSIxIi8+CjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjAuNSIvPgo8ZmVDb21wb3NpdGUgaW4yPSJoYXJkQWxwaGEiIG9wZXJhdG9yPSJvdXQiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC41NTI5NDEgMCAwIDAgMCAwLjU2MDc4NCAwIDAgMCAwIDAuNjUwOTggMCAwIDAgMC4xNSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzFfNDQyNDQiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMV80NDI0NCIgcmVzdWx0PSJzaGFwZSIvPgo8L2ZpbHRlcj4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xXzQ0MjQ0Ij4KPHJlY3Qgd2lkdGg9IjI4IiBoZWlnaHQ9IjI4IiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo=";class Uv{constructor({minimized$:t,readonly$:i,darkMode$:n,boxes$:r,namespace:s="telebox",styles:a={},root:o,onClick:l}){this._sideEffect=new Rs,this.namespace=s;const u=new gl;this._sideEffect.addDisposer(()=>u.destroy());const c=new U(void 0),p=ah(t),v=new U(a),S=new U(document.createElement("button")),y=new U(document.createElement("div")),x=new U(document.createElement("div"));fl(this,{styles:v,$collector:S},u),is(this,{rect:c,visible:p},u),S.value.className=this.wrapClassName("collector"),S.value.style.backgroundImage=`url('${Ov}')`,y.value.className=this.wrapClassName("collector-wrp"),x.value.className=this.wrapClassName("collector-count"),y.value.appendChild(x.value),this._sideEffect.addDisposer(S.subscribe(f=>{this._sideEffect.add(()=>(o.appendChild(y.value),y.value.appendChild(f),()=>f.remove()),"telebox-collector-mount"),this._sideEffect.addEventListener(f,"click",()=>{i.value||l==null||l()},{},"telebox-collector-click"),this._sideEffect.addDisposer([p.subscribe(g=>{f.classList.toggle(this.wrapClassName("collector-visible"),g),y.value.classList.toggle(this.wrapClassName("collector-visible"),g)}),r.subscribe(g=>{x.value.innerHTML=g.length.toString()}),i.subscribe(g=>{y.value.classList.toggle(this.wrapClassName("collector-readonly"),g)}),n.subscribe(g=>{f.classList.toggle(this.wrapClassName("color-scheme-dark"),g),f.classList.toggle(this.wrapClassName("color-scheme-light"),!g),y.value.classList.toggle(this.wrapClassName("color-scheme-dark"),g),y.value.classList.toggle(this.wrapClassName("color-scheme-light"),!g)}),v.subscribe(g=>{Object.keys(g).forEach(m=>{const w=g[m];w!=null&&(y.value.style[m]=w)})}),t.subscribe(g=>{if(g){const{x:m,y:w,width:b,height:E}=f.getBoundingClientRect(),N=o.getBoundingClientRect();c.setValue({x:m-N.x,y:w-N.y,width:b,height:E})}})],"telebox-collector-el")}))}destroy(){this._sideEffect.flushAll()}wrapClassName(t){return`${this.namespace}-${t}`}}var Ae=(e=>(e.Focused="focused",e.Blurred="blurred",e.Created="created",e.Removed="removed",e.State="state",e.Maximized="maximized",e.Minimized="minimized",e.IntrinsicMove="intrinsic_move",e.IntrinsicResize="intrinsic_resize",e.ZIndex="z_index",e.PrefersColorScheme="prefers_color_scheme",e.DarkMode="dark_mode",e))(Ae||{});class Wv extends uh{constructor(t){super(t),this.boxes$=t.boxes$,this.rootRect$=t.rootRect$,this.darkMode$=t.darkMode$,this.stageRect$=t.stageRect$,this.normalBoxes$=t.normalBoxes$,t.root.appendChild(this.render())}focusBox(t){var i;if(!(this.focusedBox&&this.focusedBox===t)){if(this.$titles&&this.state$.value===de.Maximized){const{children:n}=this.$titles.firstElementChild;for(let r=n.length-1;r>=0;r-=1){const s=n[r],a=(i=s.dataset)==null?void 0:i.teleBoxID;a&&(t&&a===t.id?s.classList.toggle(this.wrapClassName("titles-tab-focus"),!0):this.focusedBox&&a===this.focusedBox.id&&s.classList.toggle(this.wrapClassName("titles-tab-focus"),!1))}}this.focusedBox=t}}render(){if(this.$titleBar)return this.$titleBar;const t=super.render();t.classList.add(this.wrapClassName("max-titlebar")),this.sideEffect.addDisposer([ie([this.boxes$,this.state$]).subscribe(([n,r])=>{t.classList.toggle(this.wrapClassName("max-titlebar-active"),r===de.Maximized&&n.length>0)}),this.readonly$.subscribe(n=>{t.classList.toggle(this.wrapClassName("readonly"),n)}),this.stageRect$.subscribe(n=>{t.style.width=n.width+"px",t.style.left=n.x+4+"px"}),ie([this.state$,this.boxes$,this.normalBoxes$]).subscribe(([n,r])=>{n===de.Maximized&&(t.classList.toggle(this.wrapClassName("max-titlebar-single-title"),r.length===1),r.length!==1&&t.replaceChild(this.renderTitles(),t.firstElementChild))})],"max-render");const i=document.createElement("div");return i.classList.add(this.wrapClassName("titles-area")),t.insertBefore(i,t.firstElementChild),t}destroy(){super.destroy(),this.$titles=void 0,this.focusedBox=void 0}renderTitles(){this.$titles=document.createElement("div"),this.$titles.className=this.wrapClassName("titles"),this.sideEffect.addEventListener(this.$titles,"wheel",n=>{n.deltaX||n.currentTarget.scrollBy({left:n.deltaY>0?250:-250,behavior:"smooth"})},{passive:!1},"max-render-wheel-titles");const t=document.createElement("div");t.className=this.wrapClassName("titles-content"),this.$titles.appendChild(t);const i=this.boxes$.value.filter(n=>!this.normalBoxes$.value.includes(n.id)).map(n=>{const r=document.createElement("button");return r.className=this.wrapClassName("titles-tab"),r.textContent=n.title,r.dataset.teleBoxID=n.id,r.dataset.teleTitleBarNoDblClick="true",console.log(this.focusedBox),this.focusedBox&&n.id===this.focusedBox.id&&r.classList.add(this.wrapClassName("titles-tab-focus")),t.appendChild(r),n._title$.reaction(s=>r.textContent=s)});return this.sideEffect.addDisposer(()=>i.forEach(n=>n()),"max-render-tab-titles"),this.$titles}}const Hv=window.ResizeObserver||Ko.ResizeObserver;class $v{constructor({root:t=null,fullscreen:i=!1,prefersColorScheme:n=lh.Light,minimized:r=!1,maximized:s=!1,normalBoxes:a=[],fence:o=!0,collector:l,namespace:u="telebox",readonly:c=!1,stageRatio:p=-1,containerStyle:v="",stageStyle:S="",defaultBoxBodyStyle:y=null,defaultBoxStageStyle:x=null,theme:d=null}={}){this.events=new jt.default,this._sideEffect=new Rs,this.namespace=u;const h=new gl;this._sideEffect.addDisposer(()=>h.destroy());const f=new U(t),g=new U(c),m=new U(o),w=new U(v),b=new U(S),E=new U(p),N=new U(y),P=new U(x),Q=new U(i),K=new U(r),z=new U(s),me=ie([z,Q],([M,k])=>k?!0:M),Y=ie([K,Q],([M,k])=>k?!1:M);this.normalBoxes=new U(a),this.setMaximized=(M,k)=>z.setValue(M,k),this.setMinimized=(M,k)=>K.setValue(M,k),this.setNormalboxes=M=>this.normalBoxes.setValue(M);const X=new U({x:0,y:0,width:window.innerWidth,height:window.innerHeight},{compare:Ge});this._sideEffect.addDisposer(f.subscribe(M=>{this._sideEffect.add(()=>{if(!M)return()=>{};const k=new Hv(()=>{const ee=M.getBoundingClientRect();X.setValue({x:0,y:0,width:ee.width,height:ee.height})});return k.observe(M),()=>k.disconnect()},"calc-root-rect")}));const be=ie([X,E],ch,{compare:Ge});this.boxes$=new U([]),this.topBox$=new U(void 0),this._sideEffect.addDisposer(this.boxes$.subscribe(M=>{if(M.length>0){const k=M.reduce((ee,q)=>ee.zIndex>q.zIndex?ee:q);this.topBox$.setValue(k)}else this.topBox$.setValue(void 0)}));const se=window.matchMedia("(prefers-color-scheme: dark)"),ke=new U(!1);se&&(ke.setValue(se.matches),this._sideEffect.add(()=>{const M=k=>{ke.setValue(k.matches)};return se.addEventListener?(se.addEventListener("change",M),()=>se.removeEventListener("change",M)):(se.addListener(M),()=>se.removeListener(M))}));const ot=new U(n);this._sideEffect.addDisposer(ot.reaction((M,k)=>{k||this.events.emit(Ae.PrefersColorScheme,M)}));const qe=ie([ke,ot],([M,k])=>k==="auto"?M:k==="dark"),xt=ie([Y,me],([M,k])=>M?de.Minimized:k?de.Maximized:de.Normal),St=new U(d,{compare:Ge});is(this,{darkMode:qe,state:xt,root:f,rootRect:X,stageRect:be,minimized:Y,maximized:me},h),fl(this,{fullscreen:Q,prefersColorScheme:ot,readonly:g,fence:m,stageRatio:E,containerStyle:w,stageStyle:b,defaultBoxBodyStyle:N,defaultBoxStageStyle:P,theme:St},h);const j=this.wrapClassName("titlebar-icon-close"),W=M=>{var k;if(!M.isPrimary||g.value)return;const ee=M.target;if(!!ee.tagName)for(let q=ee;q;q=q.parentElement){if(q.classList&&q.classList.contains(j))return;const Oe=(k=q.dataset)==null?void 0:k.teleBoxID;if(Oe){const ve=this.getBox(Oe);if(ve){this.focusBox(ve),this.makeBoxTop(ve);return}}}};this._sideEffect.addEventListener(window,"pointerdown",W,!0),this.$container=document.createElement("div"),this.$container.className=this.wrapClassName("manager-container"),this.setTheme(d),this.$stage=document.createElement("div"),this.$stage.className=this.wrapClassName("manager-stage"),this.$container.appendChild(this.$stage),this._sideEffect.addDisposer([qe.subscribe(M=>{this.$container.classList.toggle(this.wrapClassName("color-scheme-dark"),M),this.$container.classList.toggle(this.wrapClassName("color-scheme-light"),!M)}),Q.subscribe(M=>{this.$container.classList.toggle(this.wrapClassName("is-fullscreen"),Boolean(M))}),ie([this.boxes$,Q],([M,k])=>k==="no-titlebar"||k===!0&&M.length<=1).subscribe(M=>{this.$container.classList.toggle(this.wrapClassName("hide-fullscreen-titlebar"),M)}),me.subscribe(M=>{this.$container.classList.toggle(this.wrapClassName("is-maximized"),M)}),Y.subscribe(M=>{this.$container.classList.toggle(this.wrapClassName("is-minimized"),M)}),ie([w,St]).subscribe(([M,k])=>{this.$container.style.cssText=M,k&&Object.keys(k).forEach(ee=>{var q;this.$container.style.setProperty(`--tele-${ee}`,(q=k[ee])!=null?q:null)})}),b.subscribe(M=>{this.$stage.style.cssText=M,this.$stage.style.width=be.value.width+"px",this.$stage.style.height=be.value.height+"px"}),be.subscribe(M=>{this.$stage.style.width=M.width+"px",this.$stage.style.height=M.height+"px"}),f.subscribe(M=>{M?M.appendChild(this.$container):this.$container.parentElement&&this.$container.remove()})]),this.collector=l!=null?l:new Uv({minimized$:Y,readonly$:g,darkMode$:qe,namespace:u,boxes$:this.boxes$,root:this.$container,onClick:()=>K.setValue(!1)}),this.titleBar=new Wv({namespace:this.namespace,title$:ah(this.topBox$,M=>(M==null?void 0:M.title)||""),boxes$:this.boxes$,darkMode$:qe,readonly$:g,state$:xt,rootRect$:X,stageRect$:be,root:this.$container,normalBoxes$:this.normalBoxes,onEvent:M=>{var k,ee,q;switch(M.type){case ht.Maximize:{if(me.value)if((k=this.titleBar.focusedBox)!=null&&k.id){const Oe=(ee=this.titleBar.focusedBox)==null?void 0:ee.id,ve=[...this.normalBoxes.value,(q=this.titleBar.focusedBox)==null?void 0:q.id].reduce((we,Pe)=>(we.includes(Pe)||we.push(Pe),we),[]),ai=this.boxes$.value.filter(we=>{var Pe;return we.id!=((Pe=this.titleBar.focusedBox)==null?void 0:Pe.id)&&!ve.includes(we.id)}).reduce((we,Pe)=>Pe._zIndex$.value>we._zIndex$.value?Pe:we);if(this.setNormalboxes(ve),ai){const we=this.boxes$.value.find(Pe=>Pe.id==Oe);we&&this.makeBoxTop(we),this.titleBar.focusBox(ai)}else this.setMaximized(!me.value)}else this.setMaximized(!me.value);else this.setMaximized(!me.value),this.setNormalboxes([]);break}case ht.Minimize:{this.setMinimized(!0);break}case De.Close:{this.removeTopBox(),this.focusTopBox();break}}}}),this._sideEffect.addDisposer([xt.reaction((M,k)=>{k||this.events.emit(Ae.State,M)}),me.reaction((M,k)=>{k||this.events.emit(Ae.Maximized,M)}),Y.reaction((M,k)=>{k||this.events.emit(Ae.Minimized,M)}),qe.reaction((M,k)=>{k||this.events.emit(Ae.DarkMode,M)})])}get boxes(){return this.boxes$.value}get topBox(){return this.topBox$.value}setState(t,i=!1){switch(t){case de.Maximized:{this.setMinimized(!1,i),this.setMaximized(!0,i);break}case de.Minimized:{this.setMinimized(!0,i),this.setMaximized(!1,i);break}default:{this.setMinimized(!1,i),this.setMaximized(!1,i);break}}return this}create(t={},i=!0){const n=t.id||hl(),r=ie([this._maximized$,this.normalBoxes],([o,l])=>o&&!l.includes(n)),s=ie([this._minimized$,this.normalBoxes],([o,l])=>o&&!l.includes(n)),a=new _v({zIndex:this.topBox?this.topBox.zIndex+1:100,...t,...i?this.smartPosition(t):{},id:n,namespace:this.namespace,root:this.$stage,darkMode$:this._darkMode$,fence$:this._fence$,rootRect$:this._rootRect$,managerStageRect$:this._stageRect$,managerStageRatio$:this._stageRatio$,managerMaximized$:r,managerMinimized$:s,managerReadonly$:this._readonly$,collectorRect$:this.collector._rect$,defaultBoxBodyStyle$:this._defaultBoxBodyStyle$,defaultBoxStageStyle$:this._defaultBoxStageStyle$});return a.focus&&(this.focusBox(a),i&&this.makeBoxTop(a)),this.boxes$.setValue([...this.boxes,a]),this._sideEffect.addDisposer([a._delegateEvents.on(ht.Maximize,()=>{var o;(o=this.normalBoxes.value)!=null&&o.length?(this.setMaximized(!0),this.makeBoxTop(a),this.titleBar.focusBox(a),this.setNormalboxes([])):this.setMaximized(!this.maximized)}),a._delegateEvents.on(ht.Minimize,()=>{this.setMinimized(!0)}),a._delegateEvents.on(ht.Close,()=>{this.remove(a),this.focusTopBox()}),a._intrinsicCoord$.reaction((o,l)=>{l||this.events.emit(Ae.IntrinsicMove,a)}),a._intrinsicSize$.reaction((o,l)=>{l||this.events.emit(Ae.IntrinsicResize,a)}),a._zIndex$.reaction((o,l)=>{if(this.boxes.length>0){const u=this.boxes.reduce((c,p)=>c.zIndex>p.zIndex?c:p);this.topBox$.setValue(u)}l||this.events.emit(Ae.ZIndex,a)})]),this.events.emit(Ae.Created,a),a}query(t){return t?this.boxes.filter(this.teleBoxMatcher(t)):[...this.boxes]}queryOne(t){return t?this.boxes.find(this.teleBoxMatcher(t)):this.boxes[0]}update(t,i,n=!1){const r=this.boxes.find(s=>s.id===t);if(r)return this.updateBox(r,i,n)}updateAll(t,i=!1){this.boxes.forEach(n=>{this.updateBox(n,t,i)})}remove(t,i=!1){const n=this.getBoxIndex(t);if(n>=0){const r=this.boxes.slice(),s=r.splice(n,1);return this.boxes$.setValue(r),s.forEach(a=>a.destroy()),i||(this.boxes.length<=0&&(this.setMaximized(!1),this.setMinimized(!1)),this.events.emit(Ae.Removed,s)),s[0]}}removeTopBox(){if(this.topBox)return this.remove(this.topBox)}removeAll(t=!1){const i=this.boxes$.value;return this.boxes$.setValue([]),i.forEach(n=>n.destroy()),t||(this.boxes.length<=0&&(this.setMaximized(!1),this.setMinimized(!1)),this.events.emit(Ae.Removed,i)),i}mount(t){this._root$.setValue(t)}unmount(){this._root$.setValue(null)}destroy(t=!1){this.events.clearListeners(),this._sideEffect.flushAll(),this.removeAll(t),this.collector.destroy(),this.titleBar.destroy()}wrapClassName(t){return`${this.namespace}-${t}`}focusBox(t,i=!1){const n=this.getBox(t);n&&(this.boxes.forEach(r=>{if(n===r){let s=!1;n.focus||(s=!0,n._focus$.setValue(!0,i)),s&&!i&&this.events.emit(Ae.Focused,n)}else r.focus&&this.blurBox(r,i)}),this.normalBoxes.value.includes(n.id)||this.titleBar.focusBox(n))}focusTopBox(){if(this.topBox&&!this.topBox.focus)return this.focusBox(this.topBox)}blurBox(t,i=!1){const n=this.getBox(t);n&&(n.focus&&(n._focus$.setValue(!1,i),i||this.events.emit(Ae.Blurred,n)),this.titleBar.focusedBox===n&&this.titleBar.focusBox())}blurAll(t=!1){this.boxes.forEach(i=>{i.focus&&(i._focus$.setValue(!1,t),t||this.events.emit(Ae.Blurred,i))}),this.titleBar.focusedBox&&this.titleBar.focusBox()}teleBoxMatcher(t){const i=Object.keys(t);return n=>i.every(r=>t[r]===n[r])}updateBox(t,i,n=!1){var r,s,a,o,l,u;(i.x!=null||i.y!=null)&&t._intrinsicCoord$.setValue({x:(r=i.x)!=null?r:t.intrinsicX,y:(s=i.y)!=null?s:t.intrinsicY},n),(i.width!=null||i.height!=null)&&t._intrinsicSize$.setValue({width:(a=i.width)!=null?a:t.intrinsicWidth,height:(o=i.height)!=null?o:t.intrinsicHeight},n),i.title!=null&&t._title$.setValue(i.title),i.visible!=null&&t._visible$.setValue(i.visible,n),i.resizable!=null&&t._resizable$.setValue(i.resizable,n),i.draggable!=null&&t._draggable$.setValue(i.draggable,n),i.boxRatio!=null&&t._boxRatio$.setValue(i.boxRatio,n),i.zIndex!=null&&t._zIndex$.setValue(i.zIndex,n),i.stageRatio!==void 0&&t.setStageRatio(i.stageRatio,n),i.content!=null&&t.mountContent(i.content),i.footer!=null&&t.mountFooter(i.footer),(i.minHeight!=null||i.minWidth!=null)&&t._minSize$.setValue({width:(l=i.minWidth)!=null?l:t.minWidth,height:(u=i.minHeight)!=null?u:t.minHeight},n)}smartPosition(t){let{x:i,y:n}=t;const{width:r=.5,height:s=.5}=t,a=this.stageRect,o=this.topBox;if(i==null){let l=20;if(o){const u=o.pxIntrinsicCoord.x+20,c=r*a.width;u+c<=a.width&&(l=u)}i=l/a.width}if(n==null){let l=20;if(o){const u=o.pxIntrinsicCoord.y+20,c=s*a.height;u+c<=a.height&&(l=u)}n=l/a.height}return{x:i,y:n,width:r,height:s}}makeBoxTop(t,i=!1){if(this.topBox&&t!==this.topBox)if(this._maximized$.value&&this.normalBoxes.value.length&&!this.normalBoxes.value.includes(t.id)){const n=this.topBox.zIndex+1,r=this.boxes$.value.filter(s=>this.normalBoxes.value.includes(s.id));t._zIndex$.setValue(n,i),r.sort((s,a)=>s._zIndex$.value-a._zIndex$.value).forEach((s,a)=>{s._zIndex$.setValue(n+1+a,i)})}else t._zIndex$.setValue(this.topBox.zIndex+1,i)}getBoxIndex(t){return typeof t=="string"?this.boxes.findIndex(i=>i.id===t):this.boxes.findIndex(i=>i===t)}getBox(t){return typeof t=="string"?this.boxes.find(i=>i.id===t):t}}const Zv=(e,t,i,n,r)=>new Qv({safeSetAttributes:s=>e.safeSetAttributes(s),getMainView:()=>e.mainView,updateAppState:(...s)=>{var a;return(a=e.appManager)==null?void 0:a.store.updateAppState(...s)},canOperate:()=>e.canOperate,notifyContainerRectUpdate:s=>{var a;return(a=e.appManager)==null?void 0:a.notifyContainerRectUpdate(s)},cleanFocus:()=>{var s;return(s=e.appManager)==null?void 0:s.store.cleanFocus()},setAppFocus:s=>{var a;return(a=e.appManager)==null?void 0:a.store.setAppFocus(s,!0)},callbacks:t,emitter:i,boxEmitter:n},r);class Qv{constructor(t,i){this.context=t,this.createTeleBoxManagerConfig=i;const{emitter:n,callbacks:r,boxEmitter:s}=t;this.teleBoxManager=this.setupBoxManager(i),this.teleBoxManager._state$.reaction(a=>{r.emit("boxStateChange",a),n.emit("boxStateChange",a)}),this.teleBoxManager._darkMode$.reaction(a=>{r.emit("darkModeChange",a)}),this.teleBoxManager._prefersColorScheme$.reaction(a=>{r.emit("prefersColorSchemeChange",a)}),this.teleBoxManager._minimized$.reaction(a=>{a||setTimeout(()=>{const o=.001*(Math.random()>.5?1:-1);this.teleBoxManager.boxes.forEach(l=>{l.resize(l.intrinsicWidth+o,l.intrinsicHeight+o,!0)})},400)}),this.teleBoxManager.events.on("minimized",a=>{if(this.context.safeSetAttributes({minimized:a}),a)this.context.cleanFocus(),this.blurAllBox();else{const o=this.getTopBox();o&&(this.context.setAppFocus(o.id),this.focusBox({appId:o.id},!1))}}),this.teleBoxManager.events.on("maximized",a=>{this.context.safeSetAttributes({maximized:a})}),this.teleBoxManager.events.on("removed",a=>{a.forEach(o=>{s.emit("close",{appId:o.id})})}),this.teleBoxManager.events.on("intrinsic_move",T.debounce(a=>{s.emit("move",{appId:a.id,x:a.intrinsicX,y:a.intrinsicY})},50)),this.teleBoxManager.events.on("intrinsic_resize",T.debounce(a=>{s.emit("resize",{appId:a.id,width:a.intrinsicWidth,height:a.intrinsicHeight})},200)),this.teleBoxManager.events.on("focused",a=>{a&&(this.canOperate?s.emit("focus",{appId:a.id}):this.teleBoxManager.blurBox(a.id))}),this.teleBoxManager.events.on("z_index",a=>{this.context.updateAppState(a.id,ze.ZIndex,a.zIndex)}),n.on("playgroundSizeChange",()=>this.updateManagerRect()),n.on("updateManagerRect",()=>this.updateManagerRect())}get mainView(){return this.context.getMainView()}get canOperate(){return this.context.canOperate()}get boxState(){return this.teleBoxManager.state}get maximized(){return this.teleBoxManager.maximized}get minimized(){return this.teleBoxManager.minimized}get darkMode(){return this.teleBoxManager.darkMode}get prefersColorScheme(){return this.teleBoxManager.prefersColorScheme}get boxSize(){return this.teleBoxManager.boxes.length}createBox(t){var u,c,p;if(!this.teleBoxManager)return;let{minwidth:i=Dg,minheight:n=zg}=(u=t.app.config)!=null?u:{};const{width:r,height:s}=(c=t.app.config)!=null?c:{},a=((p=t.options)==null?void 0:p.title)||t.appId,o=this.teleBoxManager.$container.getBoundingClientRect();i>1&&(i=i/o.width),n>1&&(n=n/o.height);const l={title:a,minWidth:i,minHeight:n,width:r,height:s,id:t.appId};this.teleBoxManager.create(l,t.smartPosition),this.context.emitter.emit(`${t.appId}${J.WindowCreated}`)}setBoxInitState(t){const i=this.teleBoxManager.queryOne({id:t});i&&i.state===de.Maximized&&this.context.boxEmitter.emit("resize",{appId:t,x:i.intrinsicCoord.x,y:i.intrinsicCoord.y,width:i.intrinsicWidth,height:i.intrinsicHeight})}setupBoxManager(t){const n={root:G.wrapper?G.wrapper:document.body,fence:!1,prefersColorScheme:t==null?void 0:t.prefersColorScheme,stageRatio:2/3},r=new $v(n);return console.log("boxmanager",r),this.teleBoxManager&&this.teleBoxManager.destroy(),this.teleBoxManager=r,r}getBox(t){return this.teleBoxManager.queryOne({id:t})}closeBox(t,i=!1){return this.teleBoxManager.remove(t,i)}boxIsFocus(t){const i=this.getBox(t);return i==null?void 0:i.focus}getFocusBox(){return this.teleBoxManager.query({focus:!0})[0]}getTopBox(){return this.teleBoxManager.topBox}updateBoxState(t){if(!t)return;const i=this.getBox(t.id);i&&(this.teleBoxManager.update(i.id,{x:t.x,y:t.y,width:t.width||.5,height:t.height||.5,zIndex:t.zIndex},!0),setTimeout(()=>{t.focus&&this.teleBoxManager.focusBox(i.id,!0),t.maximized!=null&&this.teleBoxManager.setMaximized(Boolean(t.maximized),!0),t.minimized!=null&&this.teleBoxManager.setMinimized(Boolean(t.minimized),!0)},50),this.context.callbacks.emit("boxStateChange",this.teleBoxManager.state))}updateManagerRect(){var i;const t=(i=this.mainView.divElement)==null?void 0:i.getBoundingClientRect();if(t&&t.width>0&&t.height>0){const n={x:0,y:0,width:t.width,height:t.height};this.context.notifyContainerRectUpdate(n)}}moveBox({appId:t,x:i,y:n}){this.teleBoxManager.update(t,{x:i,y:n},!0)}focusBox({appId:t},i=!0){this.teleBoxManager.focusBox(t,i)}resizeBox({appId:t,width:i,height:n,skipUpdate:r}){this.teleBoxManager.update(t,{width:i,height:n},r)}setBoxMinSize(t){this.teleBoxManager.update(t.appId,{minWidth:t.minWidth,minHeight:t.minHeight},!0)}setBoxTitle(t){this.teleBoxManager.update(t.appId,{title:t.title},!0)}blurAllBox(){this.teleBoxManager.blurAll()}updateAll(t){this.teleBoxManager.updateAll(t)}setMaximized(t,i=!0){t!==this.maximized&&this.teleBoxManager.setMaximized(t,i)}setMinimized(t,i=!0){this.teleBoxManager.setMinimized(t,i)}focusTopBox(){if(this.teleBoxManager.query().length>=1){const i=this.getTopBox();i&&this.focusBox({appId:i.id},!1)}}updateBox(t,i,n=!0){this.teleBoxManager.update(t,i,n)}setReadonly(t){this.teleBoxManager.setReadonly(t)}setPrefersColorScheme(t){this.teleBoxManager.setPrefersColorScheme(t)}setZIndex(t,i,n=!0){this.teleBoxManager.update(t,{zIndex:i},n)}destroy(){this.teleBoxManager.destroy()}}function ns(){}function dh(e){return e()}function Hu(){return Object.create(null)}function Vs(e){e.forEach(dh)}function Fv(e){return typeof e=="function"}function Gv(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let xr;function rs(e,t){return xr||(xr=document.createElement("a")),xr.href=t,e===xr.href}function Yv(e){return Object.keys(e).length===0}function Tt(e,t){e.appendChild(t)}function _s(e,t,i){e.insertBefore(t,i||null)}function rr(e){e.parentNode.removeChild(e)}function Zt(e){return document.createElement(e)}function ml(e){return document.createTextNode(e)}function Xa(){return ml(" ")}function oe(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function Xv(e){return Array.from(e.childNodes)}function hh(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function ye(e,t,i,n){e.style.setProperty(t,i,n?"important":"")}let ph;function ss(e){ph=e}const bn=[],$u=[],Or=[],Zu=[],Jv=Promise.resolve();let Ja=!1;function Kv(){Ja||(Ja=!0,Jv.then(fh))}function Ka(e){Or.push(e)}let va=!1;const wa=new Set;function fh(){if(!va){va=!0;do{for(let e=0;e<bn.length;e+=1){const t=bn[e];ss(t),qv(t.$$)}for(ss(null),bn.length=0;$u.length;)$u.pop()();for(let e=0;e<Or.length;e+=1){const t=Or[e];wa.has(t)||(wa.add(t),t())}Or.length=0}while(bn.length);for(;Zu.length;)Zu.pop()();Ja=!1,va=!1,wa.clear()}}function qv(e){if(e.fragment!==null){e.update(),Vs(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ka)}}const ew=new Set;function tw(e,t){e&&e.i&&(ew.delete(e),e.i(t))}function iw(e,t,i,n){const{fragment:r,on_mount:s,on_destroy:a,after_update:o}=e.$$;r&&r.m(t,i),n||Ka(()=>{const l=s.map(dh).filter(Fv);a?a.push(...l):Vs(l),e.$$.on_mount=[]}),o.forEach(Ka)}function nw(e,t){const i=e.$$;i.fragment!==null&&(Vs(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function rw(e,t){e.$$.dirty[0]===-1&&(bn.push(e),Kv(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function sw(e,t,i,n,r,s,a,o=[-1]){const l=ph;ss(e);const u=e.$$={fragment:null,ctx:null,props:s,update:ns,not_equal:r,bound:Hu(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:t.context||[]),callbacks:Hu(),dirty:o,skip_bound:!1,root:t.target||l.$$.root};a&&a(u.root);let c=!1;if(u.ctx=i?i(e,t.props||{},(p,v,...S)=>{const y=S.length?S[0]:v;return u.ctx&&r(u.ctx[p],u.ctx[p]=y)&&(!u.skip_bound&&u.bound[p]&&u.bound[p](y),c&&rw(e,p)),v}):[],u.update(),c=!0,Vs(u.before_update),u.fragment=n?n(u.ctx):!1,t.target){if(t.hydrate){const p=Xv(t.target);u.fragment&&u.fragment.l(p),p.forEach(rr)}else u.fragment&&u.fragment.c();t.intro&&tw(e.$$.fragment),iw(e,t.target,t.anchor,t.customElement),fh()}ss(l)}class aw{$destroy(){nw(this,1),this.$destroy=ns}$on(t,i){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(i),()=>{const r=n.indexOf(i);r!==-1&&n.splice(r,1)}}$set(t){this.$$set&&!Yv(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Qu(e){let t,i,n,r,s,a,o,l=e[18]&&Fu(e),u=e[19]&&Gu(e);return{c(){t=Zt("div"),i=Zt("div"),l&&l.c(),n=Xa(),r=Zt("span"),s=ml(e[1]),a=Xa(),u&&u.c(),ye(r,"overflow","hidden"),ye(r,"white-space","nowrap"),ye(r,"text-overflow","ellipsis"),ye(r,"max-width","80px"),oe(i,"class",e[9]),ye(i,"background-color",e[3]),ye(i,"color",e[10]),ye(i,"opacity",e[12]),oe(t,"class",o="netless-window-manager-cursor-name "+e[16]+" "+e[15])},m(c,p){_s(c,t,p),Tt(t,i),l&&l.m(i,null),Tt(i,n),Tt(i,r),Tt(r,s),Tt(i,a),u&&u.m(i,null)},p(c,p){c[18]?l?l.p(c,p):(l=Fu(c),l.c(),l.m(i,n)):l&&(l.d(1),l=null),p&2&&hh(s,c[1]),c[19]?u?u.p(c,p):(u=Gu(c),u.c(),u.m(i,null)):u&&(u.d(1),u=null),p&512&&oe(i,"class",c[9]),p&8&&ye(i,"background-color",c[3]),p&1024&&ye(i,"color",c[10]),p&4096&&ye(i,"opacity",c[12]),p&98304&&o!==(o="netless-window-manager-cursor-name "+c[16]+" "+c[15])&&oe(t,"class",o)},d(c){c&&rr(t),l&&l.d(),u&&u.d()}}}function Fu(e){let t,i;return{c(){t=Zt("img"),oe(t,"class","netless-window-manager-cursor-selector-avatar"),oe(t,"style",e[20]()),rs(t.src,i=e[8])||oe(t,"src",i),oe(t,"alt","avatar")},m(n,r){_s(n,t,r)},p(n,r){r&256&&!rs(t.src,i=n[8])&&oe(t,"src",i)},d(n){n&&rr(t)}}}function Gu(e){let t,i;return{c(){t=Zt("span"),i=ml(e[2]),oe(t,"class","netless-window-manager-cursor-tag-name"),ye(t,"background-color",e[11])},m(n,r){_s(n,t,r),Tt(t,i)},p(n,r){r&4&&hh(i,n[2]),r&2048&&ye(t,"background-color",n[11])},d(n){n&&rr(t)}}}function ow(e){let t,i,n,r,s,a,o,l=!e[14]&&Qu(e);return{c(){t=Zt("div"),l&&l.c(),i=Xa(),n=Zt("div"),r=Zt("img"),oe(r,"class",s="netless-window-manager-cursor-"+e[4]+"-image "+e[15]),rs(r.src,a=e[7])||oe(r,"src",a),oe(r,"alt",e[4]),oe(n,"class","cursor-image-wrapper"),oe(t,"class",o="netless-window-manager-cursor-mid"+(e[13]?" netless-window-manager-cursor-custom":"")),ye(t,"transform","translateX("+e[5]+"px) translateY("+e[6]+"px)"),ye(t,"display",e[17]),oe(t,"data-cursor-uid",e[0])},m(u,c){_s(u,t,c),l&&l.m(t,null),Tt(t,i),Tt(t,n),Tt(n,r)},p(u,[c]){u[14]?l&&(l.d(1),l=null):l?l.p(u,c):(l=Qu(u),l.c(),l.m(t,i)),c&32784&&s!==(s="netless-window-manager-cursor-"+u[4]+"-image "+u[15])&&oe(r,"class",s),c&128&&!rs(r.src,a=u[7])&&oe(r,"src",a),c&16&&oe(r,"alt",u[4]),c&8192&&o!==(o="netless-window-manager-cursor-mid"+(u[13]?" netless-window-manager-cursor-custom":""))&&oe(t,"class",o),c&96&&ye(t,"transform","translateX("+u[5]+"px) translateY("+u[6]+"px)"),c&131072&&ye(t,"display",u[17]),c&1&&oe(t,"data-cursor-uid",u[0])},i:ns,o:ns,d(u){u&&rr(t),l&&l.d()}}}function lw(e,t,i){let n,r,s,a,o,l,u,c,{uid:p}=t,{cursorName:v}=t,{tagName:S}=t,{backgroundColor:y}=t,{appliance:x}=t,{x:d}=t,{y:h}=t,{src:f}=t,{visible:g}=t,{avatar:m}=t,{theme:w}=t,{color:b}=t,{cursorTagBackgroundColor:E}=t,{opacity:N}=t,{pencilEraserSize:P}=t,{custom:Q}=t;const K=()=>Object.entries({width:(n?19:28)+"px",height:(n?19:28)+"px",position:n?"initial":"absolute","border-color":n?"white":y,"margin-right":(n?4:0)+"px"}).map(([z,me])=>`${z}: ${me}`).join(";");return e.$$set=z=>{"uid"in z&&i(0,p=z.uid),"cursorName"in z&&i(1,v=z.cursorName),"tagName"in z&&i(2,S=z.tagName),"backgroundColor"in z&&i(3,y=z.backgroundColor),"appliance"in z&&i(4,x=z.appliance),"x"in z&&i(5,d=z.x),"y"in z&&i(6,h=z.y),"src"in z&&i(7,f=z.src),"visible"in z&&i(21,g=z.visible),"avatar"in z&&i(8,m=z.avatar),"theme"in z&&i(9,w=z.theme),"color"in z&&i(10,b=z.color),"cursorTagBackgroundColor"in z&&i(11,E=z.cursorTagBackgroundColor),"opacity"in z&&i(12,N=z.opacity),"pencilEraserSize"in z&&i(22,P=z.pencilEraserSize),"custom"in z&&i(13,Q=z.custom)},e.$$.update=()=>{e.$$.dirty&2&&(n=!T.isEmpty(v)),e.$$.dirty&4&&i(19,r=!T.isEmpty(S)),e.$$.dirty&256&&i(18,s=!T.isEmpty(m)),e.$$.dirty&2097152&&i(17,a=g?"":"none"),e.$$.dirty&16&&i(14,o=x===C.ApplianceNames.laserPointer),e.$$.dirty&16400&&i(23,l=o||x===C.ApplianceNames.pencilEraser),e.$$.dirty&8388608&&i(16,u=l?"netless-window-manager-laserPointer-pencilEraser-offset":""),e.$$.dirty&4194304&&i(15,c=P===3?"netless-window-manager-pencilEraser-3-offset":"")},[p,v,S,y,x,d,h,f,m,w,b,E,N,Q,o,c,u,a,s,r,K,g,P,l]}class uw extends aw{constructor(t){super(),sw(this,t,lw,ow,Gv,{uid:0,cursorName:1,tagName:2,backgroundColor:3,appliance:4,x:5,y:6,src:7,visible:21,avatar:8,theme:9,color:10,cursorTagBackgroundColor:11,opacity:12,pencilEraserSize:22,custom:13})}}const gh="data:image/svg+xml,%3Csvg width='24' height='24' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Ccircle cx='12' cy='12' r='2.5' stroke='%23000' stroke-linejoin='square'/%3E%3Ccircle cx='12' cy='12' r='3.5' stroke='%23FFF'/%3E%3C/g%3E%3C/svg%3E";function mh(e){return`data:image/svg+xml,%3Csvg width='24' height='24' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Ccircle cx='12' cy='12' r='2.5' stroke='%23${e}' stroke-linejoin='square'/%3E%3Ccircle cx='12' cy='12' r='3.5' stroke='%23${e}'/%3E%3C/g%3E%3C/svg%3E`}function Bi(e){return`data:image/svg+xml,%3Csvg width='24' height='24' xmlns='http://www.w3.org/2000/svg' fill='none'%3E%3Cpath d='M5 12H19' stroke='%23${e}' stroke-linejoin='round'/%3E%3Cpath d='M12 5V19' stroke='%23${e}' stroke-linejoin='round'/%3E%3C/svg%3E`}function li(e){return`url("${e}") 12 12, auto`}function cw(e){let t="";for(const i in e)t+=`.netless-whiteboard.${i} {cursor: ${e[i]}}
`;return t}const Sr=document.createElement("style");function dw(e){const[t,i,n]=e.strokeColor,r=((1<<24)+(t<<16)+(i<<8)+n).toString(16).slice(1);return Sr.textContent=cw({"cursor-pencil":li(mh(r)),"cursor-eraser":li(gh),"cursor-rectangle":li(Bi(r)),"cursor-ellipse":li(Bi(r)),"cursor-straight":li(Bi(r)),"cursor-arrow":li(Bi(r)),"cursor-shape":li(Bi(r))}),document.head.appendChild(Sr),()=>{Sr.parentNode!=null&&document.head.removeChild(Sr)}}const hw=new Set([C.ApplianceNames.rectangle,C.ApplianceNames.ellipse,C.ApplianceNames.straight,C.ApplianceNames.arrow,C.ApplianceNames.shape]);function Yu(e,t){if(e===C.ApplianceNames.pencil)return mh(t);if(e===C.ApplianceNames.eraser)return gh;if(hw.has(e))return Bi(t)}class pw{constructor(t,i,n,r){this.manager=t,this.memberId=i,this.cursorManager=n,this.wrapper=r,this.style="default",this.move=s=>{var a;if(s.type==="main"){const o=this.cursorManager.wrapperRect;this.component&&o&&(this.autoHidden(),this.moveCursor(s,o,this.manager.mainView))}else{const o=this.cursorManager.focusView,l=(a=o==null?void 0:o.divElement)==null?void 0:a.getBoundingClientRect(),u=o==null?void 0:o.camera;o&&l&&u&&this.component&&(this.autoHidden(),this.moveCursor(s,l,o))}},this.setStyle=s=>{this.style=s,this.component&&this.component.$set({src:this.getIcon(),custom:this.isCustomIcon()})},this.leave=()=>{this.hide()},this.updateMember(),this.createCursor(),this.autoHidden(),this.setStyle(n.style)}moveCursor(t,i,n){var l,u;const{x:r,y:s,type:a}=t,o=n==null?void 0:n.screen.convertPointToScreen(r,s);if(o){let c=o.x-2,p=o.y-18;if(this.isCustomIcon()&&(c-=11,p+=4),a==="app"){const v=this.cursorManager.wrapperRect;v&&(c=c+i.x-v.x,p=p+i.y-v.y)}o.x<0||o.x>i.width||o.y<0||o.y>i.height?(l=this.component)==null||l.$set({visible:!1,x:c,y:p}):(u=this.component)==null||u.$set({visible:!0,x:c,y:p})}}get memberApplianceName(){var t,i;return(i=(t=this.member)==null?void 0:t.memberState)==null?void 0:i.currentApplianceName}get memberColor(){var i,n;return`rgb(${(n=(i=this.member)==null?void 0:i.memberState)==null?void 0:n.strokeColor.join(",")})`}get memberColorHex(){var r,s;const[t,i,n]=((s=(r=this.member)==null?void 0:r.memberState)==null?void 0:s.strokeColor)||[236,52,85];return((1<<24)+(t<<16)+(i<<8)+n).toString(16).slice(1)}get payload(){var t;return(t=this.member)==null?void 0:t.payload}get memberCursorName(){var t,i;return((t=this.payload)==null?void 0:t.nickName)||((i=this.payload)==null?void 0:i.cursorName)||this.memberId}get memberTheme(){var t;return(t=this.payload)!=null&&t.theme?"netless-window-manager-cursor-inner-mellow":"netless-window-manager-cursor-inner"}get memberCursorTextColor(){var t;return((t=this.payload)==null?void 0:t.cursorTextColor)||"#FFFFFF"}get memberCursorTagBackgroundColor(){var t;return((t=this.payload)==null?void 0:t.cursorTagBackgroundColor)||this.memberColor}get memberAvatar(){var t;return(t=this.payload)==null?void 0:t.avatar}get memberOpacity(){return!this.memberCursorName&&!this.memberAvatar?0:1}get memberTagName(){var t;return(t=this.payload)==null?void 0:t.cursorTagName}autoHidden(){this.timer&&clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.hide()},1e3*10)}async createCursor(){this.member&&this.wrapper&&(this.component=new uw({target:this.wrapper,props:this.initProps()}))}initProps(){var t;return{uid:this.memberId,x:0,y:0,appliance:this.memberApplianceName,avatar:this.memberAvatar,src:this.getIcon(),custom:this.isCustomIcon(),visible:!1,backgroundColor:this.memberColor,cursorName:this.memberCursorName,theme:this.memberTheme,color:this.memberCursorTextColor,cursorTagBackgroundColor:this.memberCursorTagBackgroundColor,opacity:this.memberOpacity,tagName:this.memberTagName,pencilEraserSize:(t=this.member)==null?void 0:t.memberState.pencilEraserSize}}getIcon(){var l;if(!this.member)return;const{memberApplianceName:t,memberColorHex:i}=this,{userApplianceIcons:n,applianceIcons:r}=this.cursorManager;let s=this.memberApplianceName;s===C.ApplianceNames.pencilEraser&&(s=`${s}${((l=this.member)==null?void 0:l.memberState.pencilEraserSize)||1}`);const a=s&&n[s];if(a)return a;if(this.style==="custom"&&t){const u=Yu(t,i);if(u)return u}return r[s||C.ApplianceNames.shape]||r[C.ApplianceNames.shape]}isCustomIcon(){var a;if(!this.member)return!1;const{memberApplianceName:t,memberColorHex:i}=this,{userApplianceIcons:n}=this.cursorManager;let r=this.memberApplianceName;return r===C.ApplianceNames.pencilEraser&&(r=`${r}${((a=this.member)==null?void 0:a.memberState.pencilEraserSize)||1}`),r&&n[r]?!1:!!(this.style==="custom"&&t&&Yu(t,i))}updateMember(){return this.member=Ha(this.manager.room,this.memberId),this.updateComponent(),this.member}updateComponent(){var t;(t=this.component)==null||t.$set(T.omit(this.initProps(),["x","y"]))}destroy(){this.component&&this.component.$destroy(),this.cursorManager.cursorInstances.delete(this.memberId),this.timer&&clearTimeout(this.timer)}hide(){this.component&&(this.component.$set({visible:!1}),this.destroy())}}var fw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYISURBVHgB7ZpNSCtXFIBPEuvz+dMGpYUKD/sWFX+Qti6kK7Hqpm6e9q0rIoIUFUShPLV10VZx4+JZqa9v20LBhdq9fyBUCtKNPH8qYl2IOw3G38Rkek4y15y5uTOZJDOWggcOSSYzN/ebc+45554JwIM8iBCPyTEP+86T4vyMfsRN4b+nQTKIJp0vzuGvlpID7os8EQNEIBD4oKio6Bm9DwaDv/v9/n/076JgbtWUYPchwrW8qD7UnOvr6wFNkpubm+/wu7f0c7y6mrnlvQufxB0Iau7V1dX3BDA/P6/V1dVpzc3N2uLiIofK1c8VYHys/wRKBUN3/hGHqaysNOjc3FwMis6hc0FtLTHuvYLxCCZgci8uLn4wg5Gh6Fy8Jk+/NkcCAlAAuUkoW4g0B+d5tLS05O/r67O8eGxsDNra2uDy8nKsoKCAwCIQDxQa0yTxgrvCYXyTk5Ml+Orf2dlJeeHIyAigFSE/P38ELfUNqNdSkjgF5FF89jL1TU1NlQwODl5gZPujp6cHWltbUw7Koc7Pz8mkZpHPFeFrJuZeqLnoMoPoZqe0JjDP/IZgnyLUG/o8NDRkuo5Ua2pjY6MC4oFCFf1cA0oKzRSOp6enRfTaGh0d/QxBt+1CUVgnOTs7+xrHfQzGyOcKkK3QTJMnQffZ6e/v/xwttmsHqqmpKXbdycnJCxy7ABLh3FEgVZ6hZJhnFZoFFMF0d3c/w7v+dyookXBnZ2c/xvHfhriVcvXfdBRItsxjnOhYqjwjoAimq6vrCysoGofk+Ph4Esd/F/UdiFtJAGUd2DygTpp5dmBUUJ2dnc9VUALm8PDwJY7/BPU9VD8k3M4RC6kskxZMKigKIMLN9vf3p3H8DyWgfEhEOwOQD9IXOTz7EObbwsLC4YWFBRgeHrY9ECXYo6MjaGlpKWlsbPxkYGDgRW1tbSEWquVlZWXBzc3Nl1VVVa8hXiXc6ioqBqGaPDk7AACJTRZ3NS9lcUp86cJwoSQ7Pj4Op6enfxUXF3/V0NCQv7q6GsCvwrqGUG/01xAD4+VQTOxaSF43d5bBOisrGBJRCtXX17+/trb268rKSgASFgmz97KFkmo6OztWuVyPweiWGc4WRkhFRQVEIpHg8vJyQAIQVlLBROVxvBYQHsXnO8tk62ZcyN0wecLBwcEvYHSzEPscBqOLCRhLC4n9uqaA8UAWAcAKhtbQ3t7eTHl5+Y9gtAp3twhT056CDMQ7MRzIFTeTYKb1yYYVQFH9VdzsqNmYKpfTJBDX3Ixgdnd3XyHMT2AMALJlBBSPaMpNngrIsTyTCgaj288YDGakictrxizvKFNOjgSSBLS+vv6UYHDb7DgMVgsChjTEgCIKGG4ZU+EWkgNBzN1qamq+pAMTExPgFMzW1tZrhHkFyWE5KxgSszx0527RaDRmOSpRshEOU11dPQPG8CwHARHJlMnTSrwSRFIlfXt7m3V5ngJGuJtqzaQtZkFBVNJezN5ZAdmwjKo2k9tVtrcI3OXk4tPgcg7ChCDZ1URgMOu72Xa5VFHOkymQhWVU60YVmjN6wiC7k6p+S1syCACOwJBYFaexV+yhBekNPsMBO6KAEeE4BMaCU67RsoYhSbXgaT//ht709vZCaWmp6YkEbLFmVJWzas04+iBL7EKpm0J7duqu0B7+CTUpNJuyvb1NCfMj1CqI9wLKUOlOUMeG+gGFkHii4HizUF4z/KFUrPsJ8WbEIyx7nnZ0dDynME6BAuce09iFHo+GrnmGltltb2//E4wVAN82y7vOjKOZXSBhJdHNiT3TYWD8OY2PTUJkdd7MkJMnT5wZVQF2RFX6yBMUdzPMvvfqxz3sXHF+GNT9ANXit/10O1sgHkZvdQAOKvs9B5L7ARELGAAXLSTvM8QExTE+YbHe+HURhZp1aRyF4CJXClbbWwGketgkW9VsY+YaiBCVhfgE+XvxRwgZSM4jUVCDZFQ9pytmXR8hUTB2gnidx4XffVWydN0yQjwmx/jkAZJBrIBI5J7ZvQGZWUgVSuU/EqmOAzicKNMVu816DdRWUV1/7xAP8n+SfwF3Du3NF2sYhwAAAABJRU5ErkJggg==",gw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAxCAYAAABznEEcAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZoSURBVHgB7VlLSCRXFL3ljNEhEXTGhMQJmOjCz8ZNVLKICz9xIYhCNi7UgINkGEk2En8hW5cBUQNxo05GAoKikuCAmvGzGMdPcCUGjDPxD/4Vv/3JvWW97luvq7ur+hMZ8MKlqrteNfe8e965970GuLVbC5kpJr53+hjHx9yY3TUxJgLMAQG4ITARfp5T4Mri4uL9q6urnxwOxz/oY5eXl1/Pzs7e195X2FX4jZsIhAK7gx5ps9m6nGj9/f3OtbU1pzAE0318fPwVjYHrrN7R3AjU/wpOBwA9Cmf/9ejoqDMtLU31iooKGdA+ATo4OMiXAEWAHhBAGEApXj4rPAik0vPt7e0vCgoKPH4gMzMTSktLIS8vD2JiYgABvcHMTZyennbHxsaOg3udOJmLzwqEYB0ZgRCZENm4u7e39yQuLq65srISZmZmvP5Ybm4u5OfnQ0lJyXWUCAgzNLS+vt6SnJz8WgvYwV5xSlcRgyVg3ha2Dkxzc3MvfZmVlQW+bGxsDBobGyE7O1u94uJPjIqKqklKSvrbbrfPnp+ff7e8vJwMnlSTKWfJjDKhywJo6wLp0YcZ+dyIUr7s4cOHLsrRlQwBTSBFuzc2NiZYhjjVAIyzZBqEwgCQv0OOM/gNzuiP/ijlDxBRjgClpqa6AF1cXDydmpoaLCws3JcAGYHyC4JMzoKaibKysvienp6FtrY2IA/WCFB5ebkqCHSvARo8Ozt7igIxwIJ2gJ+seFMnDoIyEUV+dHT0G3qWVUr5M043DdAB0m2IKZwAYpgZX+qkywR6NFbuR0iDxmAoZRUQKRxSLTMnJ8eIaqqSeVMnIYUOdu+sq6vrp4f+VCoYo8khZaNs01VRlERUu2/BrWAA7sl2Anink1Ao18JGjyY/PDx8hq1GZqgp5c2mp6chMjLy2b179x7hRzvoqeUUwXIzqq4O5nZsNUaEbIbLqPLTou/s7FTvT05OpsA9sXJG1AVsZDwjutqBIN6gUlWjxod8XRBNKXgsrqpqYZfwEqX9h8TExD7wbFm8LmzxHQ0QHSlXKZVSqFC/hkqlaKapTaGgCQTK7PHW1lb/wsLC86KiokkccoV+qV1tcE0pO7AWxmhTxBszDzqRr66ujqanp2cRpQLNBgUsCh8BwQ54bn5+/s+mpqa+4eHhfS1gb52vwuP0trPjhSZCBtLQ0NA3MDDQQIFYAUHBYhuvzjpVbJr1lZWVP3p7e19UVVXNgHumXYrI4uBx6Yqevz02b0FcRQ8CoBQF3dXVpQLZ3d39C7n+ora29vfJyclDYFnWgFyxK3cxhss/+KoT/N6DVkQpKypFGUCp3Ozo6HgSHx//GLW/BwHsg57zl5pzADajwLn52mPL1ZHPloMoRYPMFL6EhAR18e7s7MxVV1fPsAAp4Avteq7dC/c1+wKI4g+EfGzDM+EYHBw8RDrNiA2QL6upqVGvKJ2/gHu2L1nA5wwEB2YDfSYMO1x/px0cgEc2zBY+eo67u6H29vZ/wU2VC8l58JxKNjDOgojNEp08aFVfX++3l6JMEdDx8fEB0FNIBsDXBc8ArwuW1EkeI1RKdLWmCx+1DhkZGRvR0dFfSsHKxYtnW0iqvJAN9xNm6MR/QO5sfapUSkqKmqW5ubmfwVgyZdpw/vPZl2kUEAinBMSUStG+gwra0NDQSynQKyloIxnlewafjDFLJzLRBJqiFMnqyMgIbG5uDuD996Dnv8iAPOMAPmbcm5lVJwA/vZRMKZGZlpaWVtAvUL4GZMqE1fjRJrUd76LHoX+InlhcXPwZnWW2tra6jjrpiBM3UK/weQr6J+gfodMh9HtwncG7YLA3CMSsLmxx5WuDCt8B7vZeicInTjCWlpb6wc15mfey7oc9E8LElpVmMgb9AXoC+qcTExOPKRu4NlTHs6Q10GfhgfYOvRsJQZ76BWMKuDtaolQs+gfoH6Mn436gDg+e+5BKXUQx/C5Je/a+NpbeiQJPKgUdlNXx/BCBKxVdxW5Q0I3XBqFKRhU4KLtjYawi3csuTKdc4FnIXNvKUJkVEGRG20QZAAUpA5DbaYAQLmQzfzxyk/ffdnCD4NWVnGdE7kQBQvQHC5lVEDxgMaM29lkxGCNLKrDnIbFAMkFmBIaDkHstU41coGZ1TZD5UjReCGUAYbNgdNqoXZB/T67yYbFAMiGML3BhYeH8rb0t9h/zgcTBcTNGiQAAAABJRU5ErkJggg==",mw="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAgrSURBVHgB7ZprTBRXFIDP7gIt8lQppTwE5V0KaAn6o1pqNGkDDTEmTUhsgKRp+gNJw68CFkLbVC2QkDS+gD8KJdWmARvbFBNNWpuIRGPFWBXQRMPDqIki+KLATs+ZnTvcvXtnX8w2beJJToaduTP3fHPOPffcOwC8kP+2WCDwIvahGFxTuN8KmNSZmULPNjLeqF9F8rdPkIEGEn+r+vjx46LQ0NA8/Dsader58+e/h4WFDWntFO7ot6fMFAt3JLWi2lCDpqamCux2+2+KROj82NhYGrXT2lu5Z/DP/deFByElA4Pv3LlTiHY/nJ6eVnbv3q1s2bJFyc7OVrZu3arU1dUp4+PjxPUQoT+g9tp9PkMFgpo9kxljHRoaWp2Xl3duYmIiurKyEvDoclNCQgIcPnxYPc7MzHwcGRnZhaft4Ag7O9fUbRhaITCie4lgcnNzT7qDIaHz27dvh+vXr0NEREQneqoCHKFnAR+8ZCaQGGq2CxcurCGYycnJZHcwTNAzUFFRoUJFRUV1IFQ5OKBsXB9uxSwgl0TQ3d29Yt26dccwoyVXV1d7hGEiQmGi2AzOUHx/hob4K2yuYS9G987s7OwPISEh7xPM6dOnwVfBsIMjR45AZmbmo5s3b76Xnp7+J55egMVxBSAZT0v1ED+76yn66dOnLQSzd+9ev2BIyFP0MjBco1JTU/sxfFeDazp3cYgZHmKqdoaGNISHh9fv378fSJcqlPV6e3sBJ+I/goOD34VFL0k95Y+HxPHCYGxmw5DQ2NuzZw8EBQVtunXr1jvgwUP+hhz/QDXMMCNVE8zx48dNg2FCz6QQjI2N/RA8VBFmANnu3btXihnpG8pM9fX1EAi5du0aeWkVOAMBCF7yN+R0z4yOjq6NiYlpp9CgdBtIwXpPH6vgDKWLt0CygtM6MDCwBuUYZSKaOCksAiVY9wFOBePgDOOytPAGSKzNVCCC2bBhw69YdK7ypgpYimzbtk2dl7CM+hFcveOUHDylbTFO1YdhFbByx44dA1QFUP0VSJj4+Hjo6+sDq9U6iEmHKvFZTedQ50GYbN15SITVlwNlZWUnLRZL8s6dOwMOQ9UCTtKTra2ttdppt9V2kMF5cbmsjxuM43bMNrmUzc6fP6+GQiDGDoOJi4ubwb4qm5ubafyIE6nLxGqTPEsGo1cBOGNX0TyDYafC0CyOaxcVziyh53Z2dkJycvLMvn37PmpoaBgFR4jxYSbWdVIgI89Iq4CjR48CZjlYv369+tssqI6ODsjPz4f+/v668vLycxrEHHfkYdwC8SB6mGEV8Cl64cuuri5oa2tTG+EyGjZu3AiXLl1qefDgwV8lJSUFZkDV1tZCcXExXLx4sbWoqKgPFj0zx8GI9ZwO5W4M6ekZYeqpaqbqmaSqqkpNpcPDw4dwzfM9nrLduHEjEs+X0XV/Sx96LnqE1kLtBQUF3eDwCO8dGQyzV5rl+JyuegfXI29jRotiRlKnpFghHMzKyjqotVXS0tLacKPjF3bdHxjSq1evduAkepAD+ZsDYlC8V5w8ZBVg+PPq2MGMlkInqE4joTf45MmT4YyMjAPcA+ltLSQlJX2BafxnX6HI29QeK44TOTk57mCYZ0QoJ8OBM4yB6dkNkwGlSygsLFQvYtYB3BTMxFL+M+0eFgZqp4mJiU2+QKGX1fGIk/QIrn0aYXGsyDxjmAyMhO2jhaCGoUbX1NSkLSwsPMJqV8Fspu6lIZS6OYhjiOLwdU7fQM1HfRPD7wS1obZ0j0xpb4726Z49ezaJf2/S7s9ATUGNR41BjdJseRnke3WGwhrRTS9pD1mOGoeG15BxOOfoxuCkp0Ih6NeaEaSZGlieJyiCoc1FgsGldokGk8nBvAKOrWIGQ5uPsm0tt0BWDiicAaGuGhkZ+YqMw9StGzU4OKhCnT179hNsswY1FTXdE5QEJhc1S3tGogazXLOBwQSBl3tzIhQPtAL1VQJCTcNx8y1vHIUghSKFZE9PT7H2dlM1b+Wgrr1y5Uq77J75+fnplpaWMg2ch4nlYEI5z7hdensDpI4hrYNErcMMXJ32koG4ztf3pultz83NjWG99Ra2WQ0OL2VjZjwgeufUqVOqV8+cOdPIwdBLSNJeHg8TAh5WqJ6EfSmgt7IMNRJ1JThiOlnrOAMHshprmMKdoGSCpb9s3B3SYLIFGIqICJB7xisYi+RvfiypXw40DWGdlJaWRmMd141hk8V2OWm7ieYTXhBc3+BgaZyqAISjOYxSMVvXsBTNlzdiNQDgRao2AtK3pjggpmrqbGpqSsLPIN/dv38/gaBwUjTshMHcvn27JyUlpRmc5xpPMD599LIYnLNyUKKndKjGxsakXbt2deMCLIE8IVvs0YRM1fjdu3d/wrXN5+BcnzEgvor2uN3rjzAYMp5lPEoQlE5fA0fWo8GfhlCbKVFQ1pKNIfzcOHH58mWqaimVUwJI0+6n59D4pIlzmdZPMPiZzXjDjX47Le5g0Uu8x2zgPqWyKpjVe7x3+AUbq9NYjQbgp2dsBud5o8TP7d5kHAWcQchQfoEmLgn8HjOiBIF7o5hI1x6CEbLNP3bdqYAF44JzyWLzcN1i8DcT/o3awbm8Fz3DAy2A62INwPV/E3wWdx5inmBHuwChCBD6R2JwHge80TIQRQLjt7e8DTkGZgfX8cUMZTDAteFDkveaIlzjX9ySQs8X18r2t2VHUURPKoICmDR+eCO9aSdmOIub3/w9RgpgUpiJhvraXpa6jZKHGEqyusw0GLFzX+5RhN/8kYnMSNMMfyH/V/kHST6OYVElTPAAAAAASUVORK5CYII=",vw="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDAgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYwLjEgKDg4MTMzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT5zaGFwZS1jdXJzb3I8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMjAsMjEuNSBDMjAuMjQ1NDU5OSwyMS41IDIwLjQ0OTYwODQsMjEuNjc2ODc1MiAyMC40OTE5NDQzLDIxLjkxMDEyNDQgTDIwLjUsMjIgTDIwLjUsMjcgQzIwLjUsMjcuMjc2MTQyNCAyMC4yNzYxNDI0LDI3LjUgMjAsMjcuNSBDMTkuNzU0NTQwMSwyNy41IDE5LjU1MDM5MTYsMjcuMzIzMTI0OCAxOS41MDgwNTU3LDI3LjA4OTg3NTYgTDE5LjUsMjcgTDE5LjUsMjIgQzE5LjUsMjEuNzIzODU3NiAxOS43MjM4NTc2LDIxLjUgMjAsMjEuNSBaIE0yNywxOS41IEMyNy4yNzYxNDI0LDE5LjUgMjcuNSwxOS43MjM4NTc2IDI3LjUsMjAgQzI3LjUsMjAuMjQ1NDU5OSAyNy4zMjMxMjQ4LDIwLjQ0OTYwODQgMjcuMDg5ODc1NiwyMC40OTE5NDQzIEwyNywyMC41IEwyMiwyMC41IEMyMS43MjM4NTc2LDIwLjUgMjEuNSwyMC4yNzYxNDI0IDIxLjUsMjAgQzIxLjUsMTkuNzU0NTQwMSAyMS42NzY4NzUyLDE5LjU1MDM5MTYgMjEuOTEwMTI0NCwxOS41MDgwNTU3IEwyMiwxOS41IEwyNywxOS41IFogTTE4LDE5LjUgQzE4LjI3NjE0MjQsMTkuNSAxOC41LDE5LjcyMzg1NzYgMTguNSwyMCBDMTguNSwyMC4yNDU0NTk5IDE4LjMyMzEyNDgsMjAuNDQ5NjA4NCAxOC4wODk4NzU2LDIwLjQ5MTk0NDMgTDE4LDIwLjUgTDEzLDIwLjUgQzEyLjcyMzg1NzYsMjAuNSAxMi41LDIwLjI3NjE0MjQgMTIuNSwyMCBDMTIuNSwxOS43NTQ1NDAxIDEyLjY3Njg3NTIsMTkuNTUwMzkxNiAxMi45MTAxMjQ0LDE5LjUwODA1NTcgTDEzLDE5LjUgTDE4LDE5LjUgWiBNMjAsMTIuNSBDMjAuMjQ1NDU5OSwxMi41IDIwLjQ0OTYwODQsMTIuNjc2ODc1MiAyMC40OTE5NDQzLDEyLjkxMDEyNDQgTDIwLjUsMTMgTDIwLjUsMTggQzIwLjUsMTguMjc2MTQyNCAyMC4yNzYxNDI0LDE4LjUgMjAsMTguNSBDMTkuNzU0NTQwMSwxOC41IDE5LjU1MDM5MTYsMTguMzIzMTI0OCAxOS41MDgwNTU3LDE4LjA4OTg3NTYgTDE5LjUsMTggTDE5LjUsMTMgQzE5LjUsMTIuNzIzODU3NiAxOS43MjM4NTc2LDEyLjUgMjAsMTIuNSBaIiBpZD0icGF0aC0xIj48L3BhdGg+CiAgICAgICAgPGZpbHRlciB4PSItNjQuNiUiIHk9Ii01OS41JSIgd2lkdGg9IjIyOS4zJSIgaGVpZ2h0PSIyNDYuMSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0yIj4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjEiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dTcHJlYWRPdXRlcjEiPjwvZmVNb3JwaG9sb2d5PgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIyIiBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMyIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlR2F1c3NpYW5CbHVyPgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd0JsdXJPdXRlcjEiIGluMj0iU291cmNlQWxwaGEiIG9wZXJhdG9yPSJvdXQiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbXBvc2l0ZT4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgICAwIDAgMCAwIDAgICAwIDAgMCAwIDAgIDAgMCAwIDAuMTYgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9Iumhtemdoi00IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iV2hpdGVib2FyZC1HdWlkZWxpbmVzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ0LjAwMDAwMCwgLTc1MS4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9InNoYXBlLWN1cnNvciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgNzUxLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9ouWkh+S7vS00NCIgZmlsbD0iI0ZGRkZGRiIgb3BhY2l0eT0iMC4wMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgPGcgaWQ9IuW9oueKtue7k+WQiCIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIxIiBkPSJNMjAsMjEgQzIwLjQ4NTQxMDMsMjEgMjAuODk4MDg1LDIxLjM0Nzk5OTMgMjAuOTg5OTQ3OSwyMS44NjU0ODc3IEwyMSwyMiBMMjEsMjcgQzIxLDI3LjU1MjI4NDcgMjAuNTUyMjg0NywyOCAyMCwyOCBDMTkuNTE0NTg5NywyOCAxOS4xMDE5MTUsMjcuNjUyMDAwNyAxOS4wMTAwNTIxLDI3LjEzNDUxMjMgTDE5LDI3IEwxOSwyMiBDMTksMjEuNDQ3NzE1MyAxOS40NDc3MTUzLDIxIDIwLDIxIFogTTI3LDE5IEMyNy41NTIyODQ3LDE5IDI4LDE5LjQ0NzcxNTMgMjgsMjAgQzI4LDIwLjQ4NTQxMDMgMjcuNjUyMDAwNywyMC44OTgwODUgMjcuMTM0NTEyMywyMC45ODk5NDc5IEwyNywyMSBMMjIsMjEgQzIxLjQ0NzcxNTMsMjEgMjEsMjAuNTUyMjg0NyAyMSwyMCBDMjEsMTkuNTE0NTg5NyAyMS4zNDc5OTkzLDE5LjEwMTkxNSAyMS44NjU0ODc3LDE5LjAxMDA1MjEgTDIyLDE5IEwyNywxOSBaIE0xOCwxOSBDMTguNTUyMjg0NywxOSAxOSwxOS40NDc3MTUzIDE5LDIwIEMxOSwyMC40ODU0MTAzIDE4LjY1MjAwMDcsMjAuODk4MDg1IDE4LjEzNDUxMjMsMjAuOTg5OTQ3OSBMMTgsMjEgTDEzLDIxIEMxMi40NDc3MTUzLDIxIDEyLDIwLjU1MjI4NDcgMTIsMjAgQzEyLDE5LjUxNDU4OTcgMTIuMzQ3OTk5MywxOS4xMDE5MTUgMTIuODY1NDg3NywxOS4wMTAwNTIxIEwxMywxOSBMMTgsMTkgWiBNMjAsMTIgQzIwLjQ4NTQxMDMsMTIgMjAuODk4MDg1LDEyLjM0Nzk5OTMgMjAuOTg5OTQ3OSwxMi44NjU0ODc3IEwyMSwxMyBMMjEsMTggQzIxLDE4LjU1MjI4NDcgMjAuNTUyMjg0NywxOSAyMCwxOSBDMTkuNTE0NTg5NywxOSAxOS4xMDE5MTUsMTguNjUyMDAwNyAxOS4wMTAwNTIxLDE4LjEzNDUxMjMgTDE5LDE4IEwxOSwxMyBDMTksMTIuNDQ3NzE1MyAxOS40NDc3MTUzLDEyIDIwLDEyIFoiIGZpbGw9IiMyMTIzMjQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9oiIgZmlsbD0iI0ZGRkZGRiIgeD0iMTguNSIgeT0iMTciIHdpZHRoPSIzIiBoZWlnaHQ9IjYiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiNGRkZGRkYiIHg9IjE3IiB5PSIxOC41IiB3aWR0aD0iNiIgaGVpZ2h0PSIzIj48L3JlY3Q+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMjAsMjEuNSBDMjAuMjQ1NDU5OSwyMS41IDIwLjQ0OTYwODQsMjEuNjc2ODc1MiAyMC40OTE5NDQzLDIxLjkxMDEyNDQgTDIwLjUsMjIgTDIwLjUsMjcgQzIwLjUsMjcuMjc2MTQyNCAyMC4yNzYxNDI0LDI3LjUgMjAsMjcuNSBDMTkuNzU0NTQwMSwyNy41IDE5LjU1MDM5MTYsMjcuMzIzMTI0OCAxOS41MDgwNTU3LDI3LjA4OTg3NTYgTDE5LjUsMjcgTDE5LjUsMjIgQzE5LjUsMjEuNzIzODU3NiAxOS43MjM4NTc2LDIxLjUgMjAsMjEuNSBaIE0yNywxOS41IEMyNy4yNzYxNDI0LDE5LjUgMjcuNSwxOS43MjM4NTc2IDI3LjUsMjAgQzI3LjUsMjAuMjQ1NDU5OSAyNy4zMjMxMjQ4LDIwLjQ0OTYwODQgMjcuMDg5ODc1NiwyMC40OTE5NDQzIEwyNywyMC41IEwyMiwyMC41IEMyMS43MjM4NTc2LDIwLjUgMjEuNSwyMC4yNzYxNDI0IDIxLjUsMjAgQzIxLjUsMTkuNzU0NTQwMSAyMS42NzY4NzUyLDE5LjU1MDM5MTYgMjEuOTEwMTI0NCwxOS41MDgwNTU3IEwyMiwxOS41IEwyNywxOS41IFogTTE4LDE5LjUgQzE4LjI3NjE0MjQsMTkuNSAxOC41LDE5LjcyMzg1NzYgMTguNSwyMCBDMTguNSwyMC4yNDU0NTk5IDE4LjMyMzEyNDgsMjAuNDQ5NjA4NCAxOC4wODk4NzU2LDIwLjQ5MTk0NDMgTDE4LDIwLjUgTDEzLDIwLjUgQzEyLjcyMzg1NzYsMjAuNSAxMi41LDIwLjI3NjE0MjQgMTIuNSwyMCBDMTIuNSwxOS43NTQ1NDAxIDEyLjY3Njg3NTIsMTkuNTUwMzkxNiAxMi45MTAxMjQ0LDE5LjUwODA1NTcgTDEzLDE5LjUgTDE4LDE5LjUgWiBNMjAsMTIuNSBDMjAuMjQ1NDU5OSwxMi41IDIwLjQ0OTYwODQsMTIuNjc2ODc1MiAyMC40OTE5NDQzLDEyLjkxMDEyNDQgTDIwLjUsMTMgTDIwLjUsMTggQzIwLjUsMTguMjc2MTQyNCAyMC4yNzYxNDI0LDE4LjUgMjAsMTguNSBDMTkuNzU0NTQwMSwxOC41IDE5LjU1MDM5MTYsMTguMzIzMTI0OCAxOS41MDgwNTU3LDE4LjA4OTg3NTYgTDE5LjUsMTggTDE5LjUsMTMgQzE5LjUsMTIuNzIzODU3NiAxOS43MjM4NTc2LDEyLjUgMjAsMTIuNSBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjMjEyMzI0IiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+",ww="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDdweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDcgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYwLjEgKDg4MTMzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT50ZXh0LWN1cnNvcjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGQ9Ik0xNiwyNi41IEMxNS43MjM4NTc2LDI2LjUgMTUuNSwyNi4yNzYxNDI0IDE1LjUsMjYgQzE1LjUsMjUuNzU0NTQwMSAxNS42NzY4NzUyLDI1LjU1MDM5MTYgMTUuOTEwMTI0NCwyNS41MDgwNTU3IEwxNiwyNS41IEwxOS41LDI1LjUgTDE5LjUsMTQuNSBMMTYsMTQuNSBDMTUuNzIzODU3NiwxNC41IDE1LjUsMTQuMjc2MTQyNCAxNS41LDE0IEMxNS41LDEzLjc1NDU0MDEgMTUuNjc2ODc1MiwxMy41NTAzOTE2IDE1LjkxMDEyNDQsMTMuNTA4MDU1NyBMMTYsMTMuNSBMMjQsMTMuNSBDMjQuMjc2MTQyNCwxMy41IDI0LjUsMTMuNzIzODU3NiAyNC41LDE0IEMyNC41LDE0LjI0NTQ1OTkgMjQuMzIzMTI0OCwxNC40NDk2MDg0IDI0LjA4OTg3NTYsMTQuNDkxOTQ0MyBMMjQsMTQuNSBMMjAuNSwxNC41IEwyMC41LDI1LjUgTDI0LDI1LjUgQzI0LjI3NjE0MjQsMjUuNSAyNC41LDI1LjcyMzg1NzYgMjQuNSwyNiBDMjQuNSwyNi4yNDU0NTk5IDI0LjMyMzEyNDgsMjYuNDQ5NjA4NCAyNC4wODk4NzU2LDI2LjQ5MTk0NDMgTDI0LDI2LjUgTDE2LDI2LjUgWiIgaWQ9InBhdGgtMSI+PC9wYXRoPgogICAgICAgIDxmaWx0ZXIgeD0iLTI4NC4wJSIgeT0iLTgxLjUlIiB3aWR0aD0iNjY4LjElIiBoZWlnaHQ9IjI5My45JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPgogICAgICAgICAgICA8ZmVNb3JwaG9sb2d5IHJhZGl1cz0iMSIgb3BlcmF0b3I9ImRpbGF0ZSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd1NwcmVhZE91dGVyMSI+PC9mZU1vcnBob2xvZ3k+CiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjIiIGluPSJzaGFkb3dTcHJlYWRPdXRlcjEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbXBvc2l0ZSBpbj0ic2hhZG93Qmx1ck91dGVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29tcG9zaXRlPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC4xNiAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0i6aG16Z2iLTQiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJXaGl0ZWJvYXJkLUd1aWRlbGluZXMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zODguMDAwMDAwLCAtNjcyLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0idGV4dC1jdXJzb3IiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5Mi4wMDAwMDAsIDY3Mi4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaLlpIfku70tNDAiIGZpbGw9IiNGRkZGRkYiIG9wYWNpdHk9IjAuMDEiIHg9IjAiIHk9IjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcng9IjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxnIGlkPSLlvaLnirbnu5PlkIgiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTIpIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMSIgZD0iTTE5LDI1IEwxOSwxNSBMMTYsMTUgQzE1LjQ0NzcxNTMsMTUgMTUsMTQuNTUyMjg0NyAxNSwxNCBDMTUsMTMuNTE0NTg5NyAxNS4zNDc5OTkzLDEzLjEwMTkxNSAxNS44NjU0ODc3LDEzLjAxMDA1MjEgTDE2LDEzIEwyNCwxMyBDMjQuNTUyMjg0NywxMyAyNSwxMy40NDc3MTUzIDI1LDE0IEMyNSwxNC40ODU0MTAzIDI0LjY1MjAwMDcsMTQuODk4MDg1IDI0LjEzNDUxMjMsMTQuOTg5OTQ3OSBMMjQsMTUgTDIxLDE1IEwyMSwyNSBMMjQsMjUgQzI0LjU1MjI4NDcsMjUgMjUsMjUuNDQ3NzE1MyAyNSwyNiBDMjUsMjYuNDg1NDEwMyAyNC42NTIwMDA3LDI2Ljg5ODA4NSAyNC4xMzQ1MTIzLDI2Ljk4OTk0NzkgTDI0LDI3IEwxNiwyNyBDMTUuNDQ3NzE1MywyNyAxNSwyNi41NTIyODQ3IDE1LDI2IEMxNSwyNS41MTQ1ODk3IDE1LjM0Nzk5OTMsMjUuMTAxOTE1IDE1Ljg2NTQ4NzcsMjUuMDEwMDUyMSBMMTYsMjUgTDE5LDI1IFoiIGZpbGw9IiMyMTIzMjQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=",yw="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjhweCIgaGVpZ2h0PSIyOHB4IiB2aWV3Qm94PSIwIDAgMjggMjgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT7nvJbnu4QgMjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxmaWx0ZXIgeD0iLTEyMC4wJSIgeT0iLTEyMC4wJSIgd2lkdGg9IjM0MC4wJSIgaGVpZ2h0PSIzNDAuMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0xIj4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iNCIgaW49IlNvdXJjZUdyYXBoaWMiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0i6aG16Z2iMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Iue8lue7hC0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5LjAwMDAwMCwgOS4wMDAwMDApIiBmaWxsPSIjRkYwMTAwIj4KICAgICAgICAgICAgPGNpcmNsZSBpZD0i5qSt5ZyG5b2iIiBmaWx0ZXI9InVybCgjZmlsdGVyLTEpIiBjeD0iNSIgY3k9IjUiIHI9IjUiPjwvY2lyY2xlPgogICAgICAgICAgICA8cGF0aCBkPSJNNSw4IEM2LjY1Njg1NDI1LDggOCw2LjY1Njg1NDI1IDgsNSBDOCwzLjM0MzE0NTc1IDYuNjU2ODU0MjUsMiA1LDIgQzMuMzQzMTQ1NzUsMiAyLDMuMzQzMTQ1NzUgMiw1IEMyLDYuNjU2ODU0MjUgMy4zNDMxNDU3NSw4IDUsOCBaIE01LDYuMjg1NzE0MjkgQzQuMjg5OTE5NjEsNi4yODU3MTQyOSAzLjcxNDI4NTcxLDUuNzEwMDgwMzkgMy43MTQyODU3MSw1IEMzLjcxNDI4NTcxLDQuMjg5OTE5NjEgNC4yODk5MTk2MSwzLjcxNDI4NTcxIDUsMy43MTQyODU3MSBDNS43MTAwODAzOSwzLjcxNDI4NTcxIDYuMjg1NzE0MjksNC4yODk5MTk2MSA2LjI4NTcxNDI5LDUgQzYuMjg1NzE0MjksNS43MTAwODAzOSA1LjcxMDA4MDM5LDYuMjg1NzE0MjkgNSw2LjI4NTcxNDI5IFoiIGlkPSLmpK3lnIblvaIiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+",xw="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCAxOCAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMC41IiB5PSIwLjUiIHdpZHRoPSIxNyIgaGVpZ2h0PSIyNSIgcng9IjMuNSIgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMC4zNSIgc3Ryb2tlPSJ3aGl0ZSIvPgo8L3N2Zz4K",Sw="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMzQiIHZpZXdCb3g9IjAgMCAyNiAzNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMC41IiB5PSIwLjUiIHdpZHRoPSIyNSIgaGVpZ2h0PSIzMyIgcng9IjMuNSIgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMC4zNSIgc3Ryb2tlPSJ3aGl0ZSIvPgo8L3N2Zz4K",Iw="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzQiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCAzNCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMC41IiB5PSIwLjUiIHdpZHRoPSIzMyIgaGVpZ2h0PSI0OSIgcng9IjMuNSIgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMC4zNSIgc3Ryb2tlPSJ3aGl0ZSIvPgo8L3N2Zz4K";const Mw={[C.ApplianceNames.pencil]:fw,[C.ApplianceNames.selector]:gw,[C.ApplianceNames.eraser]:mw,[C.ApplianceNames.shape]:vw,[C.ApplianceNames.text]:ww,[C.ApplianceNames.laserPointer]:yw,pencilEraser1:xw,pencilEraser2:Sw,pencilEraser3:Iw},Xu="local-cursor";class bw{constructor(t,i,n,r){var o;this.manager=t,this.enableCursor=i,this.cursorInstances=new Map,this.userApplianceIcons={},this.sideEffectManager=new nr,this.store=this.manager.store,this.leaveFlag=!0,this._style="default",this.onCursorMove=l=>{const u=this.initCursorInstance(l.uid);if(l.state===Oa.Leave)u.leave();else{const c=u.updateMember();this.canMoveCursor(c)&&u.move(l.position)}},this.initCursorInstance=l=>{let u=this.cursorInstances.get(l);return u||(u=new pw(this.manager,l,this,G.wrapper),this.cursorInstances.set(l,u)),u},this.mouseMoveListener_=(l,u)=>{const c=this.getType(l);this.updateCursor(c,l.clientX,l.clientY),u&&this.showPencilEraserIfNeeded(c,l.clientX,l.clientY)},this.mouseMoveTimer=0,this.mouseMoveListener=l=>{const u=l.pointerType==="touch";if(u&&!l.isPrimary)return;const c=Date.now();if(c-this.mouseMoveTimer>48){if(this.mouseMoveTimer=c,G.supportAppliancePlugin&&C.isRoom(G.displayer)&&G.displayer.disableDeviceInputs){this.leaveFlag&&(this.manager.dispatchInternalEvent(J.CursorMove,{uid:this.manager.uid,state:Oa.Leave}),this.leaveFlag=!1);return}this.mouseMoveListener_(l,u),this.leaveFlag=!0}},this.mouseLeaveListener=()=>{this.hideCursor(this.manager.uid)},this.getPoint=(l,u,c)=>{var v;const p=(v=l==null?void 0:l.divElement)==null?void 0:v.getBoundingClientRect();if(p)return l==null?void 0:l.convertToPointInWorld({x:u-p.x,y:c-p.y})},this.getType=l=>{var p;const u=l.target,c=this.manager.focusApp;switch(u.parentElement){case this.mainViewElement:return{type:"main"};case((p=c==null?void 0:c.view)==null?void 0:p.divElement):return{type:"app"};default:return{type:"main"}}},this.roomMembers=(o=this.manager.room)==null?void 0:o.state.roomMembers;const s=G.wrapper;s&&this.setupWrapper(s),this.sideEffectManager.add(()=>L.on("cursorMove",this.onCursorMove)),this.sideEffectManager.add(()=>L.on("playgroundSizeChange",()=>this.updateContainerRect()));const a=this.manager.room;a&&this.sideEffectManager.add(()=>{const l=u=>{this.style==="custom"&&u.memberState&&this.enableCustomCursor()};return a.callbacks.on("onRoomStateChanged",l),()=>a.callbacks.off("onRoomStateChanged",l)}),r&&(this.userApplianceIcons=r),this.style=(n==null?void 0:n.style)||"default"}get applianceIcons(){return{...Mw,...this.userApplianceIcons}}get style(){return this._style}set style(t){this._style!==t&&(this._style=t,this.cursorInstances.forEach(i=>{i.setStyle(t)}),t==="custom"?this.enableCustomCursor():this.sideEffectManager.flush(Xu))}enableCustomCursor(){this.sideEffectManager.add(()=>dw(this.manager.getMemberState()),Xu)}canMoveCursor(t){const i=(t==null?void 0:t.memberState.currentApplianceName)===C.ApplianceNames.laserPointer;return this.enableCursor||i}setupWrapper(t){this.sideEffectManager.add(()=>(t.addEventListener("pointerenter",this.mouseMoveListener),t.addEventListener("pointermove",this.mouseMoveListener),t.addEventListener("pointerleave",this.mouseLeaveListener),()=>{t.removeEventListener("pointerenter",this.mouseMoveListener),t.removeEventListener("pointermove",this.mouseMoveListener),t.removeEventListener("pointerleave",this.mouseLeaveListener)})),this.wrapperRect=t.getBoundingClientRect()}setMainViewDivElement(t){this.mainViewElement=t}get boxState(){return this.store.getBoxState()}get focusView(){var t;return(t=this.manager.focusApp)==null?void 0:t.view}showPencilEraserIfNeeded(t,i,n){const r=Ha(this.manager.room,this.manager.uid),s=(r==null?void 0:r.memberState.currentApplianceName)===C.ApplianceNames.pencilEraser;if(this.wrapperRect&&this.manager.canOperate&&this.canMoveCursor(r)&&s){const a=t.type==="main"?this.manager.mainView:this.focusView,o=this.getPoint(a,i,n);o&&this.onCursorMove({uid:this.manager.uid,position:{x:o.x,y:o.y,type:t.type}})}}updateCursor(t,i,n){const r=Ha(this.manager.room,this.manager.uid);if(this.wrapperRect&&this.manager.canOperate&&this.canMoveCursor(r)){const s=t.type==="main"?this.manager.mainView:this.focusView,a=this.getPoint(s,i,n);a&&this.manager.dispatchInternalEvent(J.CursorMove,{uid:this.manager.uid,position:{x:a.x,y:a.y,type:t.type}})}}updateContainerRect(){var t,i;this.containerRect=(t=G.container)==null?void 0:t.getBoundingClientRect(),this.wrapperRect=(i=G.wrapper)==null?void 0:i.getBoundingClientRect()}deleteCursor(t){this.store.cleanCursor(t);const i=this.cursorInstances.get(t);i&&i.destroy()}hideCursor(t){const i=this.cursorInstances.get(t);i&&i.hide()}destroy(){this.sideEffectManager.flushAll(),this.cursorInstances.size&&(this.cursorInstances.forEach(t=>{t.destroy()}),this.cursorInstances.clear())}}class Cw{constructor(t){this.manager=t,L.on("changePageState",()=>{Z.emit("pageStateChange",this.toObject())})}get index(){return this.manager.store.getMainViewSceneIndex()||0}get length(){return this.manager.mainViewScenesLength||0}toObject(){return{index:this.index>=this.length?this.length-1:this.index,length:this.length}}}class Aw{constructor(t){this.ctx=t,this.reactors=new Map,this.disposers=new Map,this.onPhaseChanged=async i=>{var n,r;i===C.RoomPhase.Reconnecting&&this.ctx.emitter.emit("startReconnect"),i===C.RoomPhase.Connected&&this.phase===C.RoomPhase.Reconnecting&&((n=this.room)!=null&&n.isWritable?(r=this.room)==null||r.dispatchMagixEvent(oa,{}):(await kd(500),this.onReconnected())),this.phase=i},this.onReconnected=T.debounce(()=>{this._onReconnected()},1e3),this._onReconnected=()=>{nt("onReconnected refresh reactors"),this.releaseDisposers(),this.reactors.forEach((i,n)=>{T.isFunction(i)&&this.disposers.set(n,i())}),this.ctx.emitter.emit("onReconnected")}}setRoom(t){this.room=t,this.phase=t==null?void 0:t.phase,t&&(t.callbacks.off("onPhaseChanged",this.onPhaseChanged),t.callbacks.on("onPhaseChanged",this.onPhaseChanged),t.addMagixEventListener(oa,i=>{i.authorId===t.observerId&&this.onReconnected()},{fireSelfEventAfterCommit:!0}))}setContext(t){this.ctx=t}releaseDisposers(){this.disposers.forEach(t=>{T.isFunction(t)&&t()}),this.disposers.clear()}refresh(){this._onReconnected()}add(t,i){const n=this.disposers.get(t);n&&T.isFunction(n)&&n(),T.isFunction(i)&&(this.reactors.set(t,i),this.disposers.set(t,i()))}remove(t){this.reactors.has(t)&&this.reactors.delete(t);const i=this.disposers.get(t);i&&(T.isFunction(i)&&i(),this.disposers.delete(t))}hasReactor(t){return this.reactors.has(t)}destroy(){var t,i;(t=this.room)==null||t.callbacks.off("onPhaseChanged",this.onPhaseChanged),(i=this.room)==null||i.removeMagixEventListener(oa,this.onReconnected),this.releaseDisposers()}}const Ew=(e,t)=>{if(C.isPlayer(e))Nw(e);else{if(e=e,Object.getOwnPropertyDescriptor(e,"disableCameraTransform"))return;Object.defineProperty(e,"disableCameraTransform",{get(){return t.mainView.disableCameraTransform},set(n){t.mainView.disableCameraTransform=n}}),Object.defineProperty(e,"canUndoSteps",{get(){return t.canUndoSteps}}),Object.defineProperty(e,"canRedoSteps",{get(){return t.canRedoSteps}}),e.moveCamera=n=>t.moveCamera(n),e.moveCameraToContain=(...n)=>t.moveCameraToContain(...n),e.convertToPointInWorld=(...n)=>t.mainView.convertToPointInWorld(...n),e.setCameraBound=(...n)=>t.mainView.setCameraBound(...n),e.scenePreview=(...n)=>t.mainView.scenePreview(...n),e.fillSceneSnapshot=(...n)=>t.mainView.fillSceneSnapshot(...n),e.generateScreenshot=(...n)=>t.mainView.generateScreenshot(...n),e.setMemberState=(...n)=>t.mainView.setMemberState(...n),e.redo=()=>t.redo(),e.undo=()=>t.undo(),e.cleanCurrentScene=()=>t.cleanCurrentScene(),e.delete=()=>t.delete(),e.copy=()=>t.copy(),e.paste=()=>t.paste(),e.duplicate=()=>t.duplicate(),e.insertImage=(...n)=>t.insertImage(...n),e.completeImageUpload=(...n)=>t.completeImageUpload(...n),e.insertText=(...n)=>t.insertText(...n),e.lockImage=(...n)=>t.lockImage(...n),e.lockImages=(...n)=>t.lockImages(...n),Tw(e,t)}},Tw=(e,t)=>{const i=e.removeScenes;e.removeScenes=(n,r)=>{var a;n===He&&((a=t.appManager)==null||a.updateRootDirRemoving(!0));const s=i.call(e,n);return L.emit("removeScenes",{scenePath:n,index:r}),s}},Nw=e=>{const t=e.seekToProgressTime;async function i(n){await L.emit("seekStart");const r=await t.call(e,n);return L.emit("seek",n),r}e.seekToProgressTime=i};var kw=`.netless-app-docs-viewer-content{position:relative;height:100%;overflow:hidden}.netless-app-docs-viewer-preview-mask{display:none;position:absolute;z-index:200;top:0;left:0;width:100%;height:100%}.netless-app-docs-viewer-preview{display:flex;flex-direction:column;align-items:center;position:absolute;z-index:300;top:0;left:0;width:33%;max-width:200px;height:100%;padding-top:10px;transform:translate(-100%);background:rgba(237,237,240,.9);box-shadow:inset -1px 0 #0000001c;transition:transform .4s}.netless-app-docs-viewer-preview-active .netless-app-docs-viewer-preview-mask{display:block}.netless-app-docs-viewer-preview-active .netless-app-docs-viewer-preview{transform:translate(0)}.netless-app-docs-viewer-preview-page{position:relative;display:block;width:55%;margin-bottom:10px;font-size:0;color:transparent;outline:none;border:7px solid transparent;border-radius:4px;transition:border-color .3s;user-select:none}.netless-app-docs-viewer-preview-page:hover,.netless-app-docs-viewer-preview-page.netless-app-docs-viewer-preview-page-active{border-color:#444e601a}.netless-app-docs-viewer-preview-page>img{width:100%;height:auto;box-sizing:border-box;border:1px solid rgba(0,0,0,.5);border-radius:1px;background-color:#fff;box-shadow:0 2px 8px #0000004d}.netless-app-docs-viewer-preview-page-name{position:absolute;top:1px;left:-10px;transform:translate(-100%);text-align:right;font-size:12px;color:#5f5f5f;user-select:none}.netless-app-docs-viewer-footer{box-sizing:border-box;height:26px;display:flex;align-items:center;padding:0 16px;border-top:1px solid #eeeef7;color:#191919}.netless-app-docs-viewer-float-footer{width:100%;min-height:26px;position:absolute;left:0;bottom:0;z-index:2000;background:rgba(249,249,252,.9);transition:opacity .4s}.netless-app-docs-viewer-footer-btn{box-sizing:border-box;width:26px;height:26px;font-size:0;margin:0;padding:3px;border:none;border-radius:1px;outline:none;color:currentColor;background:transparent;transition:background .4s;cursor:pointer;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-docs-viewer-footer-btn:hover{background:rgba(237,237,240,.9)}@media (hover: none){.netless-app-docs-viewer-footer-btn:hover{background:transparent!important}}.netless-app-docs-viewer-footer-btn>svg{width:100%;height:100%}.netless-app-docs-viewer-footer-btn>svg:nth-of-type(2){display:none}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-playing>svg:nth-of-type(1){display:none}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-playing>svg:nth-of-type(2){display:initial}.netless-app-docs-viewer-footer-btn~.netless-app-docs-viewer-footer-btn{margin-left:15px}.netless-app-docs-viewer-page-jumps{flex:1;display:flex;justify-content:center;align-items:center}.netless-app-docs-viewer-page-number{margin-left:auto;font-size:13px;user-select:none;white-space:nowrap;word-break:keep-all}.netless-app-docs-viewer-page-number-input{border:none;outline:none;width:3em;margin:0;padding:0 2px;text-align:right;font-size:13px;line-height:1;font-weight:400;font-family:inherit;border-radius:2px;color:currentColor;background:transparent;transition:background .4s;user-select:text;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-docs-viewer-page-number-input:hover,.netless-app-docs-viewer-page-number-input:focus,.netless-app-docs-viewer-page-number-input:active{background:#fff;box-shadow:#63636333 0 2px 8px}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-footer-btn{cursor:not-allowed}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-footer-btn:hover{background:transparent}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input{cursor:not-allowed}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:hover,.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:focus,.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:active{background:transparent;box-shadow:none}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:disabled{color:inherit}.netless-app-docs-viewer-readonly.netless-app-docs-viewer-float-footer{display:none}.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input{color:#a6a6a8}.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:active,.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:focus,.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:hover{color:#222}.telebox-color-scheme-dark .netless-app-docs-viewer-footer{color:#a6a6a8;background:#2d2d33;border-top:none}.telebox-color-scheme-dark .netless-app-docs-viewer-footer-btn:hover{background:#212126}.telebox-color-scheme-dark .netless-app-docs-viewer-preview{background:rgba(50,50,50,.9)}.netless-app-docs-viewer-static-scrollbar{position:absolute;top:0;right:0;z-index:2147483647;width:8px;min-height:30px;margin:0;padding:0;border:none;outline:none;border-radius:4px;background:rgba(68,78,96,.4);box-shadow:1px 1px 8px #ffffffb3;opacity:0;transition:background .4s,opacity .4s 3s,transform .2s;user-select:none}.netless-app-docs-viewer-static-scrollbar.netless-app-docs-viewer-static-scrollbar-dragging{background:rgba(68,78,96,.6);opacity:1;transition:background .4s,opacity .4s 3s!important}.netless-app-docs-viewer-static-scrollbar:hover,.netless-app-docs-viewer-static-scrollbar:focus{background:rgba(68,78,96,.5)}.netless-app-docs-viewer-static-scrollbar:active{background:rgba(68,78,96,.6)}.netless-app-docs-viewer-content:hover .netless-app-docs-viewer-static-scrollbar{opacity:1;transition:background .4s,opacity .4s,transform .2s}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-static-scrollbar{display:none}.netless-app-docs-viewer-static-pages:hover .netless-app-docs-viewer-static-scrollbar{opacity:1;transition:background .4s,opacity .4s,transform .2s}.page-renderer-pages-container{position:relative;overflow:hidden}.page-renderer-page{position:absolute;top:0;left:0;background-position:center;background-size:cover;background-repeat:no-repeat}.page-renderer-pages-container.is-hwa .page-renderer-page{will-change:transform}.page-renderer-page-img{display:block;width:100%;height:auto;user-select:none}.netless-app-docs-viewer-static-pages{overflow:hidden;position:relative;height:100%;user-select:none}.netless-app-docs-viewer-static-page{display:block;width:100%;height:auto;user-select:none}.netless-app-docs-viewer-static-wb-view,.netless-app-docs-viewer-dynamic-wb-view{position:absolute;top:0;left:0;width:100%;height:100%;z-index:100;overflow:hidden}.netless-app-docs-viewer-dynamic-wb-view .cursor-clicker .ppt-event-source{cursor:pointer}
`;const Pw=(e,t,i,n)=>{if(i==="length"||i==="prototype"||i==="arguments"||i==="caller")return;const r=Object.getOwnPropertyDescriptor(e,i),s=Object.getOwnPropertyDescriptor(t,i);!Dw(r,s)&&n||Object.defineProperty(e,i,s)},Dw=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},zw=(e,t)=>{const i=Object.getPrototypeOf(t);i!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,i)},jw=(e,t)=>`/* Wrapped ${e}*/
${t}`,Lw=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Bw=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Rw=(e,t,i)=>{const n=i===""?"":`with ${i.trim()}() `,r=jw.bind(null,n,t.toString());Object.defineProperty(r,"name",Bw),Object.defineProperty(e,"toString",{...Lw,value:r})};function Vw(e,t,{ignoreNonConfigurable:i=!1}={}){const{name:n}=e;for(const r of Reflect.ownKeys(t))Pw(e,t,r,i);return zw(e,t),Rw(e,t,n),e}const _w=(e,t={})=>{if(typeof e!="function")throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:i=0,maxWait:n=Number.POSITIVE_INFINITY,before:r=!1,after:s=!0}=t;if(!r&&!s)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let a,o,l;const u=function(...c){const p=this,v=()=>{a=void 0,o&&(clearTimeout(o),o=void 0),s&&(l=e.apply(p,c))},S=()=>{o=void 0,a&&(clearTimeout(a),a=void 0),s&&(l=e.apply(p,c))},y=r&&!a;return clearTimeout(a),a=setTimeout(v,i),n>0&&n!==Number.POSITIVE_INFINITY&&!o&&(o=setTimeout(S,n)),y&&(l=e.apply(p,c)),l};return Vw(u,e),u.cancel=()=>{a&&(clearTimeout(a),a=void 0),o&&(clearTimeout(o),o=void 0)},u};var Ow="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Uw=87,Ww=20,Ju=[],Hw=()=>{for(let e=0;e<Ww;e++)Ju[e]=Ow.charAt(Math.random()*Uw);return Ju.join("")};function vh(e){try{return e()}catch(t){console.error(t)}}var Os=class{constructor(){this.push=this.addDisposer,this.disposers=new Map}addDisposer(e,t=this.genUID()){return this.flush(t),this.disposers.set(t,Array.isArray(e)?$w(e):e),t}add(e,t=this.genUID()){const i=e();return i?this.addDisposer(i,t):t}addEventListener(e,t,i,n,r=this.genUID()){return e.addEventListener(t,i,n),this.addDisposer(()=>e.removeEventListener(t,i,n),r),r}setTimeout(e,t,i=this.genUID()){const n=window.setTimeout(()=>{this.remove(i),e()},t);return this.addDisposer(()=>window.clearTimeout(n),i)}setInterval(e,t,i=this.genUID()){const n=window.setInterval(e,t);return this.addDisposer(()=>window.clearInterval(n),i)}remove(e){const t=this.disposers.get(e);return this.disposers.delete(e),t}flush(e){const t=this.remove(e);t&&t()}flushAll(){this.disposers.forEach(vh),this.disposers.clear()}genUID(){let e;do e=Hw();while(this.disposers.has(e));return e}};function $w(e){return()=>e.forEach(vh)}var mi=[],Zw=function(){return mi.some(function(e){return e.activeTargets.length>0})},Qw=function(){return mi.some(function(e){return e.skippedTargets.length>0})},Ku="ResizeObserver loop completed with undelivered notifications.",Fw=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:Ku}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=Ku),window.dispatchEvent(e)},Zn;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Zn||(Zn={}));var vi=function(e){return Object.freeze(e)},Gw=function(){function e(t,i){this.inlineSize=t,this.blockSize=i,vi(this)}return e}(),wh=function(){function e(t,i,n,r){return this.x=t,this.y=i,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,vi(this)}return e.prototype.toJSON=function(){var t=this,i=t.x,n=t.y,r=t.top,s=t.right,a=t.bottom,o=t.left,l=t.width,u=t.height;return{x:i,y:n,top:r,right:s,bottom:a,left:o,width:l,height:u}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),vl=function(e){return e instanceof SVGElement&&"getBBox"in e},yh=function(e){if(vl(e)){var t=e.getBBox(),i=t.width,n=t.height;return!i&&!n}var r=e,s=r.offsetWidth,a=r.offsetHeight;return!(s||a||e.getClientRects().length)},qu=function(e){var t;if(e instanceof Element)return!0;var i=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(i&&e instanceof i.Element)},Yw=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},jn=typeof window!="undefined"?window:{},Ir=new WeakMap,ec=/auto|scroll/,Xw=/^tb|vertical/,Jw=/msie|trident/i.test(jn.navigator&&jn.navigator.userAgent),ut=function(e){return parseFloat(e||"0")},$i=function(e,t,i){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=!1),new Gw((i?t:e)||0,(i?e:t)||0)},tc=vi({devicePixelContentBoxSize:$i(),borderBoxSize:$i(),contentBoxSize:$i(),contentRect:new wh(0,0,0,0)}),xh=function(e,t){if(t===void 0&&(t=!1),Ir.has(e)&&!t)return Ir.get(e);if(yh(e))return Ir.set(e,tc),tc;var i=getComputedStyle(e),n=vl(e)&&e.ownerSVGElement&&e.getBBox(),r=!Jw&&i.boxSizing==="border-box",s=Xw.test(i.writingMode||""),a=!n&&ec.test(i.overflowY||""),o=!n&&ec.test(i.overflowX||""),l=n?0:ut(i.paddingTop),u=n?0:ut(i.paddingRight),c=n?0:ut(i.paddingBottom),p=n?0:ut(i.paddingLeft),v=n?0:ut(i.borderTopWidth),S=n?0:ut(i.borderRightWidth),y=n?0:ut(i.borderBottomWidth),x=n?0:ut(i.borderLeftWidth),d=p+u,h=l+c,f=x+S,g=v+y,m=o?e.offsetHeight-g-e.clientHeight:0,w=a?e.offsetWidth-f-e.clientWidth:0,b=r?d+f:0,E=r?h+g:0,N=n?n.width:ut(i.width)-b-w,P=n?n.height:ut(i.height)-E-m,Q=N+d+w+f,K=P+h+m+g,z=vi({devicePixelContentBoxSize:$i(Math.round(N*devicePixelRatio),Math.round(P*devicePixelRatio),s),borderBoxSize:$i(Q,K,s),contentBoxSize:$i(N,P,s),contentRect:new wh(p,l,N,P)});return Ir.set(e,z),z},Sh=function(e,t,i){var n=xh(e,i),r=n.borderBoxSize,s=n.contentBoxSize,a=n.devicePixelContentBoxSize;switch(t){case Zn.DEVICE_PIXEL_CONTENT_BOX:return a;case Zn.BORDER_BOX:return r;default:return s}},Kw=function(){function e(t){var i=xh(t);this.target=t,this.contentRect=i.contentRect,this.borderBoxSize=vi([i.borderBoxSize]),this.contentBoxSize=vi([i.contentBoxSize]),this.devicePixelContentBoxSize=vi([i.devicePixelContentBoxSize])}return e}(),Ih=function(e){if(yh(e))return 1/0;for(var t=0,i=e.parentNode;i;)t+=1,i=i.parentNode;return t},qw=function(){var e=1/0,t=[];mi.forEach(function(a){if(a.activeTargets.length!==0){var o=[];a.activeTargets.forEach(function(u){var c=new Kw(u.target),p=Ih(u.target);o.push(c),u.lastReportedSize=Sh(u.target,u.observedBox),p<e&&(e=p)}),t.push(function(){a.callback.call(a.observer,o,a.observer)}),a.activeTargets.splice(0,a.activeTargets.length)}});for(var i=0,n=t;i<n.length;i++){var r=n[i];r()}return e},ic=function(e){mi.forEach(function(i){i.activeTargets.splice(0,i.activeTargets.length),i.skippedTargets.splice(0,i.skippedTargets.length),i.observationTargets.forEach(function(r){r.isActive()&&(Ih(r.target)>e?i.activeTargets.push(r):i.skippedTargets.push(r))})})},ey=function(){var e=0;for(ic(e);Zw();)e=qw(),ic(e);return Qw()&&Fw(),e>0},ya,Mh=[],ty=function(){return Mh.splice(0).forEach(function(e){return e()})},iy=function(e){if(!ya){var t=0,i=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return ty()}).observe(i,n),ya=function(){i.textContent="".concat(t?t--:t++)}}Mh.push(e),ya()},ny=function(e){iy(function(){requestAnimationFrame(e)})},Ur=0,ry=function(){return!!Ur},sy=250,ay={attributes:!0,characterData:!0,childList:!0,subtree:!0},nc=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],rc=function(e){return e===void 0&&(e=0),Date.now()+e},xa=!1,oy=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var i=this;if(t===void 0&&(t=sy),!xa){xa=!0;var n=rc(t);ny(function(){var r=!1;try{r=ey()}finally{if(xa=!1,t=n-rc(),!ry())return;r?i.run(1e3):t>0?i.run(t):i.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,i=function(){return t.observer&&t.observer.observe(document.body,ay)};document.body?i():jn.addEventListener("DOMContentLoaded",i)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),nc.forEach(function(i){return jn.addEventListener(i,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),nc.forEach(function(i){return jn.removeEventListener(i,t.listener,!0)}),this.stopped=!0)},e}(),qa=new oy,sc=function(e){!Ur&&e>0&&qa.start(),Ur+=e,!Ur&&qa.stop()},ly=function(e){return!vl(e)&&!Yw(e)&&getComputedStyle(e).display==="inline"},uy=function(){function e(t,i){this.target=t,this.observedBox=i||Zn.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=Sh(this.target,this.observedBox,!0);return ly(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),cy=function(){function e(t,i){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=i}return e}(),Mr=new WeakMap,ac=function(e,t){for(var i=0;i<e.length;i+=1)if(e[i].target===t)return i;return-1},br=function(){function e(){}return e.connect=function(t,i){var n=new cy(t,i);Mr.set(t,n)},e.observe=function(t,i,n){var r=Mr.get(t),s=r.observationTargets.length===0;ac(r.observationTargets,i)<0&&(s&&mi.push(r),r.observationTargets.push(new uy(i,n&&n.box)),sc(1),qa.schedule())},e.unobserve=function(t,i){var n=Mr.get(t),r=ac(n.observationTargets,i),s=n.observationTargets.length===1;r>=0&&(s&&mi.splice(mi.indexOf(n),1),n.observationTargets.splice(r,1),sc(-1))},e.disconnect=function(t){var i=this,n=Mr.get(t);n.observationTargets.slice().forEach(function(r){return i.unobserve(t,r.target)}),n.activeTargets.splice(0,n.activeTargets.length)},e}(),dy=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");br.connect(this,t)}return e.prototype.observe=function(t,i){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!qu(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");br.observe(this,t,i)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!qu(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");br.unobserve(this,t)},e.prototype.disconnect=function(){br.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();function hy(e){const t="http://www.w3.org/2000/svg",i=document.createElementNS(t,"svg");i.setAttribute("class",`${e}-footer-icon-sidebar`),i.setAttribute("viewBox","0 0 64 64");const n=document.createElementNS(t,"path");return n.setAttribute("fill","currentColor"),n.setAttribute("d","M50 8H14c-3.309 0-6 2.691-6 6v36c0 3.309 2.691 6 6 6h36c3.309 0 6-2.691 6-6V14c0-3.309-2.691-6-6-6zM12 50V14c0-1.103.897-2 2-2h8v40h-8c-1.103 0-2-.897-2-2zm40 0c0 1.103-.897 2-2 2H26V12h24c1.103 0 2 .897 2 2z"),i.appendChild(n),i}function py(e){const t="http://www.w3.org/2000/svg",i=document.createElementNS(t,"svg");i.setAttribute("class",`${e}-footer-icon-arrow-left`),i.setAttribute("viewBox","0 0 500 500");const n=document.createElementNS(t,"path");return n.setAttribute("fill","currentColor"),n.setAttribute("d","M177.81 249.959L337.473 90.295c2.722-2.865 2.651-7.378-.143-10.1-2.793-2.65-7.163-2.65-9.956 0l-164.75 164.75c-2.793 2.793-2.793 7.306 0 10.1l164.75 164.75c2.865 2.722 7.378 2.65 10.099-.143 2.651-2.794 2.651-7.163 0-9.957L177.809 249.959z"),i.appendChild(n),i}function fy(e){const t="http://www.w3.org/2000/svg",i=document.createElementNS(t,"svg");i.setAttribute("class",`${e}-footer-icon-arrow-right`),i.setAttribute("viewBox","0 0 500 500");const n=document.createElementNS(t,"path");return n.setAttribute("fill","currentColor"),n.setAttribute("d","M322.19 250.041L162.527 409.705c-2.722 2.865-2.651 7.378.143 10.1 2.793 2.65 7.163 2.65 9.956 0l164.75-164.75c2.793-2.793 2.793-7.306 0-10.1l-164.75-164.75c-2.865-2.722-7.378-2.65-10.099.143-2.651 2.794-2.651 7.163 0 9.957l159.664 159.736z"),i.appendChild(n),i}function gy(e){const t="http://www.w3.org/2000/svg",i=document.createElementNS(t,"svg");i.setAttribute("class",`${e}-footer-icon-play`),i.setAttribute("viewBox","0 0 500 500");const n=document.createElementNS(t,"path");return n.setAttribute("fill","currentColor"),n.setAttribute("d","M418.158 257.419L174.663 413.33c-6.017 3.919-15.708 3.772-21.291-.29-2.791-2.018-4.295-4.483-4.295-7.084V94.109c0-5.65 6.883-10.289 15.271-10.289 4.298 0 8.391 1.307 11.181 3.332l242.629 155.484c6.016 3.917 6.451 10.292.649 14.491-.216.154-.432.154-.649.292zM170.621 391.288l223.116-141.301L170.71 107.753l-.089 283.535z"),i.appendChild(n),i}function my(e){const t="http://www.w3.org/2000/svg",i=document.createElementNS(t,"svg");i.setAttribute("class",`${e}-footer-icon-pause`),i.setAttribute("viewBox","0 0 500 500");const n=document.createElementNS(t,"path");return n.setAttribute("fill","currentColor"),n.setAttribute("d","M312.491 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261zM165.257 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261z"),i.appendChild(n),i}const ni=typeof window!="undefined",bh=ni&&!("onscroll"in window)||typeof navigator!="undefined"&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),Ch=ni&&"IntersectionObserver"in window,Ah=ni&&"classList"in document.createElement("p"),Eh=ni&&window.devicePixelRatio>1,vy={elements_selector:".lazy",container:bh||ni?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},Th=e=>Object.assign({},vy,e),oc=function(e,t){let i;const n="LazyLoad::Initialized",r=new e(t);try{i=new CustomEvent(n,{detail:{instance:r}})}catch{i=document.createEvent("CustomEvent"),i.initCustomEvent(n,!1,!1,{instance:r})}window.dispatchEvent(i)},wy=(e,t)=>{if(!!t)if(!t.length)oc(e,t);else for(let i=0,n;n=t[i];i+=1)oc(e,n)},Lt="src",wl="srcset",yl="sizes",Nh="poster",sr="llOriginalAttrs",kh="data",xl="loading",Ph="loaded",Dh="applied",yy="entered",Sl="error",zh="native",jh="data-",Lh="ll-status",Le=(e,t)=>e.getAttribute(jh+t),xy=(e,t,i)=>{const n=jh+t;if(i===null){e.removeAttribute(n);return}e.setAttribute(n,i)},ar=e=>Le(e,Lh),Ni=(e,t)=>xy(e,Lh,t),Us=e=>Ni(e,null),Il=e=>ar(e)===null,Sy=e=>ar(e)===xl,Iy=e=>ar(e)===Sl,Ml=e=>ar(e)===zh,My=[xl,Ph,Dh,Sl],by=e=>My.indexOf(ar(e))>=0,ri=(e,t,i,n)=>{if(!(!e||typeof e!="function")){if(n!==void 0){e(t,i,n);return}if(i!==void 0){e(t,i);return}e(t)}},on=(e,t)=>{if(t!==""){if(Ah){e.classList.add(t);return}e.className+=(e.className?" ":"")+t}},dt=(e,t)=>{if(t!==""){if(Ah){e.classList.remove(t);return}e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")}},Cy=e=>{e.llTempImage=document.createElement("IMG")},Ay=e=>{delete e.llTempImage},Bh=e=>e.llTempImage,Ws=(e,t)=>{if(!t)return;const i=t._observer;!i||i.unobserve(e)},Ey=e=>{e.disconnect()},Ty=(e,t,i)=>{t.unobserve_entered&&Ws(e,i)},bl=(e,t)=>{!e||(e.loadingCount+=t)},Ny=e=>{!e||(e.toLoadCount-=1)},Rh=(e,t)=>{!e||(e.toLoadCount=t)},ky=e=>e.loadingCount>0,Py=e=>e.toLoadCount>0,Vh=e=>{let t=[];for(let i=0,n;n=e.children[i];i+=1)n.tagName==="SOURCE"&&t.push(n);return t},Cl=(e,t)=>{const i=e.parentNode;if(!i||i.tagName!=="PICTURE")return;Vh(i).forEach(t)},_h=(e,t)=>{Vh(e).forEach(t)},Hs=[Lt],Oh=[Lt,Nh],Qn=[Lt,wl,yl],Uh=[kh],$s=e=>!!e[sr],Wh=e=>e[sr],Hh=e=>delete e[sr],Ki=(e,t)=>{if($s(e))return;const i={};t.forEach(n=>{i[n]=e.getAttribute(n)}),e[sr]=i},Dy=e=>{$s(e)||(e[sr]={backgroundImage:e.style.backgroundImage})},zy=(e,t,i)=>{if(!i){e.removeAttribute(t);return}e.setAttribute(t,i)},bi=(e,t)=>{if(!$s(e))return;const i=Wh(e);t.forEach(n=>{zy(e,n,i[n])})},jy=e=>{if(!$s(e))return;const t=Wh(e);e.style.backgroundImage=t.backgroundImage},$h=(e,t,i)=>{on(e,t.class_applied),Ni(e,Dh),i&&(t.unobserve_completed&&Ws(e,t),ri(t.callback_applied,e,i))},Zh=(e,t,i)=>{on(e,t.class_loading),Ni(e,xl),i&&(bl(i,1),ri(t.callback_loading,e,i))},Qt=(e,t,i)=>{!i||e.setAttribute(t,i)},lc=(e,t)=>{Qt(e,yl,Le(e,t.data_sizes)),Qt(e,wl,Le(e,t.data_srcset)),Qt(e,Lt,Le(e,t.data_src))},Ly=(e,t)=>{Cl(e,i=>{Ki(i,Qn),lc(i,t)}),Ki(e,Qn),lc(e,t)},By=(e,t)=>{Ki(e,Hs),Qt(e,Lt,Le(e,t.data_src))},Ry=(e,t)=>{_h(e,i=>{Ki(i,Hs),Qt(i,Lt,Le(i,t.data_src))}),Ki(e,Oh),Qt(e,Nh,Le(e,t.data_poster)),Qt(e,Lt,Le(e,t.data_src)),e.load()},Vy=(e,t)=>{Ki(e,Uh),Qt(e,kh,Le(e,t.data_src))},_y=(e,t,i)=>{const n=Le(e,t.data_bg),r=Le(e,t.data_bg_hidpi),s=Eh&&r?r:n;!s||(e.style.backgroundImage=`url("${s}")`,Bh(e).setAttribute(Lt,s),Zh(e,t,i))},Oy=(e,t,i)=>{const n=Le(e,t.data_bg_multi),r=Le(e,t.data_bg_multi_hidpi),s=Eh&&r?r:n;!s||(e.style.backgroundImage=s,$h(e,t,i))},Uy=(e,t,i)=>{const n=Le(e,t.data_bg_set);if(!n)return;const r=n.split("|");let s=r.map(a=>`image-set(${a})`);e.style.backgroundImage=s.join(),e.style.backgroundImage===""&&(s=r.map(a=>`-webkit-image-set(${a})`),e.style.backgroundImage=s.join()),$h(e,t,i)},Qh={IMG:Ly,IFRAME:By,VIDEO:Ry,OBJECT:Vy},Wy=(e,t)=>{const i=Qh[e.tagName];!i||i(e,t)},Hy=(e,t,i)=>{const n=Qh[e.tagName];!n||(n(e,t),Zh(e,t,i))},$y=["IMG","IFRAME","VIDEO","OBJECT"],Zy=e=>$y.indexOf(e.tagName)>-1,Fh=(e,t)=>{t&&!ky(t)&&!Py(t)&&ri(e.callback_finish,t)},uc=(e,t,i)=>{e.addEventListener(t,i),e.llEvLisnrs[t]=i},Qy=(e,t,i)=>{e.removeEventListener(t,i)},Al=e=>!!e.llEvLisnrs,Fy=(e,t,i)=>{Al(e)||(e.llEvLisnrs={});const n=e.tagName==="VIDEO"?"loadeddata":"load";uc(e,n,t),uc(e,"error",i)},eo=e=>{if(!Al(e))return;const t=e.llEvLisnrs;for(let i in t){const n=t[i];Qy(e,i,n)}delete e.llEvLisnrs},Gh=(e,t,i)=>{Ay(e),bl(i,-1),Ny(i),dt(e,t.class_loading),t.unobserve_completed&&Ws(e,i)},Gy=(e,t,i,n)=>{const r=Ml(t);Gh(t,i,n),on(t,i.class_loaded),Ni(t,Ph),ri(i.callback_loaded,t,n),r||Fh(i,n)},Yy=(e,t,i,n)=>{const r=Ml(t);Gh(t,i,n),on(t,i.class_error),Ni(t,Sl),ri(i.callback_error,t,n),i.restore_on_error&&bi(t,Qn),r||Fh(i,n)},El=(e,t,i)=>{const n=Bh(e)||e;if(Al(n))return;Fy(n,a=>{Gy(a,e,t,i),eo(n)},a=>{Yy(a,e,t,i),eo(n)})},Xy=(e,t,i)=>{Cy(e),El(e,t,i),Dy(e),_y(e,t,i),Oy(e,t,i),Uy(e,t,i)},Jy=(e,t,i)=>{El(e,t,i),Hy(e,t,i)},Tl=(e,t,i)=>{Zy(e)?Jy(e,t,i):Xy(e,t,i)},Ky=(e,t,i)=>{e.setAttribute("loading","lazy"),El(e,t,i),Wy(e,t),Ni(e,zh)},cc=e=>{e.removeAttribute(Lt),e.removeAttribute(wl),e.removeAttribute(yl)},qy=e=>{Cl(e,t=>{cc(t)}),cc(e)},Yh=e=>{Cl(e,t=>{bi(t,Qn)}),bi(e,Qn)},e0=e=>{_h(e,t=>{bi(t,Hs)}),bi(e,Oh),e.load()},t0=e=>{bi(e,Hs)},i0=e=>{bi(e,Uh)},n0={IMG:Yh,IFRAME:t0,VIDEO:e0,OBJECT:i0},r0=e=>{const t=n0[e.tagName];if(!t){jy(e);return}t(e)},s0=(e,t)=>{Il(e)||Ml(e)||(dt(e,t.class_entered),dt(e,t.class_exited),dt(e,t.class_applied),dt(e,t.class_loading),dt(e,t.class_loaded),dt(e,t.class_error))},a0=(e,t)=>{r0(e),s0(e,t),Us(e),Hh(e)},o0=(e,t,i,n)=>{!i.cancel_on_exit||!Sy(e)||e.tagName==="IMG"&&(eo(e),qy(e),Yh(e),dt(e,i.class_loading),bl(n,-1),Us(e),ri(i.callback_cancel,e,t,n))},l0=(e,t,i,n)=>{const r=by(e);Ni(e,yy),on(e,i.class_entered),dt(e,i.class_exited),Ty(e,i,n),ri(i.callback_enter,e,t,n),!r&&Tl(e,i,n)},u0=(e,t,i,n)=>{Il(e)||(on(e,i.class_exited),o0(e,t,i,n),ri(i.callback_exit,e,t,n))},c0=["IMG","IFRAME","VIDEO"],Xh=e=>e.use_native&&"loading"in HTMLImageElement.prototype,d0=(e,t,i)=>{e.forEach(n=>{c0.indexOf(n.tagName)!==-1&&Ky(n,t,i)}),Rh(i,0)},h0=e=>e.isIntersecting||e.intersectionRatio>0,p0=e=>({root:e.container===document?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}),f0=(e,t,i)=>{e.forEach(n=>h0(n)?l0(n.target,n,t,i):u0(n.target,n,t,i))},g0=(e,t)=>{t.forEach(i=>{e.observe(i)})},m0=(e,t)=>{Ey(e),g0(e,t)},v0=(e,t)=>{!Ch||Xh(e)||(t._observer=new IntersectionObserver(i=>{f0(i,e,t)},p0(e)))},Jh=e=>Array.prototype.slice.call(e),as=e=>e.container.querySelectorAll(e.elements_selector),w0=e=>Jh(e).filter(Il),y0=e=>Iy(e),x0=e=>Jh(e).filter(y0),dc=(e,t)=>w0(e||as(t)),S0=(e,t)=>{x0(as(e)).forEach(n=>{dt(n,e.class_error),Us(n)}),t.update()},I0=(e,t)=>{!ni||(t._onlineHandler=()=>{S0(e,t)},window.addEventListener("online",t._onlineHandler))},M0=e=>{!ni||window.removeEventListener("online",e._onlineHandler)},or=function(e,t){const i=Th(e);this._settings=i,this.loadingCount=0,v0(i,this),I0(i,this),this.update(t)};or.prototype={update:function(e){const t=this._settings,i=dc(e,t);if(Rh(this,i.length),bh||!Ch){this.loadAll(i);return}if(Xh(t)){d0(i,t,this);return}m0(this._observer,i)},destroy:function(){this._observer&&this._observer.disconnect(),M0(this),as(this._settings).forEach(e=>{Hh(e)}),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){const t=this._settings;dc(e,t).forEach(n=>{Ws(n,this),Tl(n,t,this)})},restoreAll:function(){const e=this._settings;as(e).forEach(t=>{a0(t,e)})}};or.load=(e,t)=>{const i=Th(t);Tl(e,i)};or.resetStatus=e=>{Us(e)};ni&&wy(or,window.lazyLoadOptions);class Kh{constructor({readonly:t,box:i,pages:n,onNewPageIndex:r,onPlay:s}){if(this.pageIndex=0,this.namespace="netless-app-docs-viewer",this.isShowPreview=!1,this.isSmallBox=!1,this.sideEffect=new Os,n.length<=0)throw new Error("[DocsViewer] Empty pages.");this.readonly=t,this.box=i,this.pages=n,this.onNewPageIndex=r,this.onPlay=s,this.onPageIndexChanged=()=>{},this.render()}mount(){this.box.mountContent(this.$content),this.box.mountFooter(this.$footer),this.sideEffect.add(()=>{const t=new or({container:this.$preview,elements_selector:`.${this.wrapClassName("preview-page>img")}`});return()=>t.destroy()},"preview-lazyload")}unmount(){this.$content.remove(),this.$footer.remove()}setReadonly(t){this.readonly!==t&&(this.readonly=t,this.$content.classList.toggle(this.wrapClassName("readonly"),t),this.$footer.classList.toggle(this.wrapClassName("readonly"),t),this.$pageNumberInput.disabled=t)}destroy(){this.sideEffect.flushAll(),this.unmount()}setPageIndex(t){Number.isNaN(t)||(this.pageIndex=t,this.$pageNumberInput.value=String(t+1),this.onPageIndexChanged(t))}setSmallBox(t){this.isSmallBox!==t&&(this.isSmallBox=t,this.$footer.classList.toggle(this.wrapClassName("float-footer"),t))}render(){return this.renderContent(),this.renderFooter(),this.$content}renderContent(){if(!this.$content){const t=document.createElement("div");t.className=this.wrapClassName("content"),this.$content=t,this.readonly&&t.classList.add(this.wrapClassName("readonly")),t.appendChild(this.renderPreviewMask()),t.appendChild(this.renderPreview())}return this.$content}renderPreview(){if(!this.$preview){const t=document.createElement("div");t.className=this.wrapClassName("preview")+" tele-fancy-scrollbar",this.$preview=t;const i=this.wrapClassName("preview-page"),n=this.wrapClassName("preview-page-name");this.pages.forEach((r,s)=>{var a;const o=(a=r.thumbnail)!=null?a:r.src.startsWith("ppt")?void 0:r.src;if(!o)return;const l=String(s),u=document.createElement("a");u.className=i+" "+this.wrapClassName(`preview-page-${s}`),u.setAttribute("href","#"),u.dataset.pageIndex=l;const c=document.createElement("span");c.className=n,c.textContent=String(s+1),c.dataset.pageIndex=l;const p=document.createElement("img");p.width=r.width,p.height=r.height,p.dataset.src=o,p.dataset.pageIndex=l,u.appendChild(p),u.appendChild(c),t.appendChild(u)}),this.sideEffect.addEventListener(t,"click",r=>{var s;if(this.readonly)return;const a=(s=r.target.dataset)==null?void 0:s.pageIndex;a&&(r.preventDefault(),r.stopPropagation(),r.stopImmediatePropagation(),this.onNewPageIndex(Number(a)),this.togglePreview(!1))})}return this.$preview}renderPreviewMask(){return this.$previewMask||(this.$previewMask=document.createElement("div"),this.$previewMask.className=this.wrapClassName("preview-mask"),this.sideEffect.addEventListener(this.$previewMask,"click",t=>{this.readonly||t.target===this.$previewMask&&this.togglePreview(!1)})),this.$previewMask}renderFooter(){if(!this.$footer){const t=document.createElement("div");if(t.className=this.wrapClassName("footer"),this.$footer=t,this.readonly&&t.classList.add(this.wrapClassName("readonly")),this.isSmallBox&&t.classList.add(this.wrapClassName("float-footer")),this.pages.some(l=>l.thumbnail||!l.src.startsWith("ppt"))){const l=this.renderFooterBtn("btn-sidebar",hy(this.namespace));this.sideEffect.addEventListener(l,"click",()=>{this.readonly||this.togglePreview()}),this.$footer.appendChild(l)}const i=document.createElement("div");i.className=this.wrapClassName("page-jumps");const n=this.renderFooterBtn("btn-page-back",py(this.namespace));if(this.sideEffect.addEventListener(n,"click",()=>{this.readonly||this.onNewPageIndex(this.pageIndex-1)}),i.appendChild(n),this.onPlay){const l=this.renderFooterBtn("btn-page-play",gy(this.namespace),my(this.namespace)),u=()=>{this.sideEffect.setTimeout(()=>{l.classList.toggle(this.wrapClassName("footer-btn-playing"),!1)},500,"returnPlay")};this.sideEffect.addEventListener(l,"click",()=>{this.readonly||(l.classList.toggle(this.wrapClassName("footer-btn-playing"),!0),this.onPlay&&this.onPlay(),u())}),i.appendChild(l)}const r=this.renderFooterBtn("btn-page-next",fy(this.namespace));this.sideEffect.addEventListener(r,"click",()=>{this.readonly||this.onNewPageIndex(this.pageIndex+1)}),i.appendChild(r);const s=document.createElement("div");s.className=this.wrapClassName("page-number");const a=document.createElement("input");a.className=this.wrapClassName("page-number-input"),a.value=String(this.pageIndex+1),this.readonly&&(a.disabled=!0),this.$pageNumberInput=a,this.sideEffect.addEventListener(a,"focus",()=>{a.select()}),this.sideEffect.addEventListener(a,"change",()=>{this.readonly||a.value&&this.onNewPageIndex(Number(a.value)-1)});const o=document.createElement("span");o.textContent=" / "+this.pages.length,s.appendChild(a),s.appendChild(o),this.$footer.appendChild(i),this.$footer.appendChild(s)}return this.$footer}renderFooterBtn(t,i,n){const r=document.createElement("button");return r.className=this.wrapClassName("footer-btn")+" "+this.wrapClassName(t),r.appendChild(i),n&&r.appendChild(n),r}togglePreview(t){if(this.isShowPreview=t!=null?t:!this.isShowPreview,this.$content.classList.toggle(this.wrapClassName("preview-active"),this.isShowPreview),this.isShowPreview){const i=this.$preview.querySelector("."+this.wrapClassName(`preview-page-${this.pageIndex}`));i&&this.$preview.scrollTo({top:i.offsetTop-16})}}wrapClassName(t){return`${this.namespace}-${t}`}}function qi(e,t,i){return Math.min(Math.max(e,t),i)}function hc(e){return e.touches?e.touches[0]:e}function qh(e){e.stopPropagation(),e.cancelable&&e.preventDefault()}function ep(e){if(!e)return!1;const t=e.tagName;return t==="INPUT"||t==="TEXTAREA"||t==="SELECT"}class b0{constructor(t){var i,n,r;this.velocity=0,this.paused=!0,this._animationFrameID=null,this._loopTimestamp=0,this.looper=s=>{if(this.paused)return;let a=Math.floor((s-this._loopTimestamp)/1e3*60)+1;for(this._loopTimestamp=s;a-- >0;)this.stepper();this.onStep(this.current,this),!this.paused&&this.current!==this.target&&window.requestAnimationFrame(this.looper)},this.current=(i=t.start)!=null?i:0,this.target=this.current,this.stiffness=(n=t.stiffness)!=null?n:170,this.damping=(r=t.damping)!=null?r:26,this.onStep=t.onStep}stepTo(t,i){this.paused&&i!=null&&(this.current=i),this.paused=!1,this.target=t,this.onStep(this.current,this),this._loopTimestamp=Date.now(),window.requestAnimationFrame(this.looper)}pause(){this.paused=!0}destroy(){this.pause()}stepper(){const t=-this.stiffness*(this.current-this.target),i=-this.damping*this.velocity,n=this.velocity+(t+i)/60,r=this.current+n/60;Math.abs(n-0)<.01&&Math.abs(r-this.target)<.01?(this.current=this.target,this.velocity=0):(this.current=r,this.velocity=n)}}class C0{constructor(t,i,n,r){this.scale=1,this.lastVisit=Date.now(),this.pageOffsetY=0,this.pageOffsetX=0,this.visible=!0,this.index=t,this.page=i,this.scale=n,this.pageOffsetX=(r-i.width)/2;const s=document.createElement("div");s.className="page-renderer-page",s.dataset.index=`${t}`,s.style.width=`${i.width*n}px`,s.style.height=`${i.height*n}px`,i.thumbnail&&(s.style.backgroundImage=`url("${i.thumbnail}")`);const a=document.createElement("img");a.className="page-renderer-page-img",a.width=i.width,a.height=i.height,a.src=i.src,s.appendChild(a),this.$page=s}translateY(t){Math.abs(t-this.pageOffsetY)>=.001&&(this.pageOffsetY=t,this.$page.style.transform=`translate(${this.pageOffsetX*this.scale}px, ${this.pageOffsetY*this.scale}px)`)}setScale(t){Math.abs(t-this.scale)>=.001&&(this.scale=t,this.$page.style.width=`${this.page.width*this.scale}px`,this.$page.style.height=`${this.page.height*this.scale}px`,this.$page.style.transform=`translate(${this.pageOffsetX*this.scale}px, ${this.pageOffsetY*this.scale}px)`)}setVisible(t){t!==this.visible&&(this.visible=t,this.$page.style.opacity=t?"1":"0")}}const A0=window.requestIdleCallback||(e=>window.setTimeout(e,5e3)),E0=window.cancelIdleCallback||window.clearTimeout;class T0{constructor(t,i,n){this.pages=t,this.pagesIntrinsicWidth=i,this.scale=n,this.els=new Map,this.maxElCount=200,this.gcTimer=null,this.gc=()=>{if(this.gcTimer=null,this.els.size>this.maxElCount){const r=[...this.els.values()].sort((s,a)=>a.lastVisit-s.lastVisit);for(let s=Math.floor(this.maxElCount/4);s<r.length;s++)this.els.delete(r[s].index)}}}getEl(t){let i=this.els.get(t);return i||(i=new C0(t,this.pages[t],this.scale,this.pagesIntrinsicWidth),this.els.set(t,i)),i.lastVisit=Date.now(),this.els.size>this.maxElCount&&this.gcTimer===null&&(this.gcTimer=A0(this.gc)),i}setScale(t){t!==this.scale&&(this.scale=t,this.els.forEach(i=>i.setScale(t)))}destroy(){this.els.clear(),this.gcTimer!==null&&(E0(this.gcTimer),this.gcTimer=null)}}class N0{constructor(t){this._hwaTimeout=NaN,this._turnOffHWA=()=>{window.clearTimeout(this._hwaTimeout),this._hwaTimeout=NaN,this.$pages.classList.toggle("is-hwa",!1)},this.pagesScrollTop=t.pagesScrollTop||0,this.containerWidth=t.containerWidth||1,this.containerHeight=t.containerHeight||1,this.pages=t.pages.map(s=>{if(s.thumbnail)return s;try{const a=new URL(s.src);return a.searchParams.set("x-oss-process","image/resize,l_50"),{...s,thumbnail:a.toString()}}catch(a){return console.error(a),s}});const i=Array(this.pages.length);let n=1/0,r=0;this.pagesIntrinsicHeight=this.pages.reduce((s,a,o)=>(i[o]=s,a.width>r&&(r=a.width),a.height<=n&&(n=a.height),s+a.height),0),this.pagesIntrinsicWidth=r,this.pagesMinHeight=n,this.pagesIntrinsicYs=i,this.scale=this._calcScale(),this.threshold=this._calcThreshold(),this.onPageIndexChanged=t.onPageIndexChanged,this.pageScrollIndex=0,this.pagesScrollTop!==0&&(this.pageScrollIndex=this.findScrollPageIndex(),this.onPageIndexChanged&&this.pageScrollIndex>0&&this.onPageIndexChanged(this.pageScrollIndex)),this.pageElManager=new T0(this.pages,r,this.scale),this.$pages=this.renderPages()}setContainerSize(t,i){t>0&&i>0&&(t!==this.containerWidth||i!==this.containerHeight)&&(this.containerWidth=t,this.containerHeight=i,this.$pages.style.width=`${this.containerWidth}px`,this.$pages.style.height=`${this.containerHeight}px`,this.scale=this._calcScale(),this.threshold=this._calcThreshold(),this.pageElManager.setScale(this.scale),this.$pages.parentElement&&this.pagesScrollTo(this.pagesScrollTop,!0))}renderPages(){const t=document.createElement("div");return t.className="page-renderer-pages-container",t.style.width=`${this.containerWidth}px`,t.style.height=`${this.containerHeight}px`,t}pagesScrollTo(t,i){if(t=qi(t,0,this.pagesIntrinsicHeight-this.containerHeight/this.scale),i||Math.abs(t-this.pagesScrollTop)>=.001){this._turnOnHWA(),this.pagesScrollTop=t;const n=this.findScrollPageIndex(),r=Math.max(n-this.threshold,0),s=Math.min(n+this.threshold,this.pages.length-1);for(let a=0;a<this.$pages.children.length;a++){const o=this.$pages.children[a],l=Number(o.dataset.index);l>=r&&l<=s||(o.remove(),a--)}for(let a=r;a<=s;a++){const o=this.pageElManager.getEl(a);o.$page.parentElement!==this.$pages&&this.$pages.appendChild(o.$page),o.translateY(this.pagesIntrinsicYs[a]-this.pagesScrollTop)}n!==this.pageScrollIndex&&(this.pageScrollIndex=n,this.onPageIndexChanged&&this.onPageIndexChanged(n))}}findScrollPageIndex(){for(let t=0;t<this.pagesIntrinsicYs.length;t++)if(this.pagesIntrinsicYs[t]+this.pages[t].height-this.pagesScrollTop>=.001)return t;return this.pagesIntrinsicYs.length-1}mount(t){t.appendChild(this.$pages),this.pagesScrollTo(this.pagesScrollTop,!0)}unmount(){this.$pages.remove()}destroy(){this.unmount(),this.onPageIndexChanged=void 0,this.pageElManager.destroy(),this._hwaTimeout&&(window.clearTimeout(this._hwaTimeout),this._hwaTimeout=NaN)}_calcScale(){return this.containerWidth/this.pagesIntrinsicWidth||1}_calcThreshold(){return qi(Math.ceil(this.containerHeight/this.scale/this.pagesMinHeight/2),1,this.pages.length)}_turnOnHWA(){this._hwaTimeout?window.clearTimeout(this._hwaTimeout):this.$pages.classList.toggle("is-hwa",!0),this._hwaTimeout=window.setTimeout(this._turnOffHWA,1e3)}}const k0=30;class P0{constructor(t){this.sideEffect=new Os,this.pagesScrollTop=t.pagesScrollTop||0,this.containerWidth=t.containerWidth||1,this.containerHeight=t.containerHeight||1,this.pagesWidth=t.pagesWidth||1,this.pagesHeight=t.pagesHeight||1,this.scale=this._calcScale(),this.scrollbarMinHeight=t.scrollbarMinHeight||k0,this.scrollbarHeight=this._calcScrollbarHeight(),this.readonly=t.readonly,this.wrapClassName=t.wrapClassName,this.onDragScroll=t.onDragScroll,this.$scrollbar=this.renderScrollbar()}mount(t){t.appendChild(this.$scrollbar),this.pagesScrollTo(this.pagesScrollTop,!0)}unmount(){this.$scrollbar.remove()}setReadonly(t){this.readonly=t}setContainerSize(t,i){t>0&&i>0&&(t!==this.containerWidth||i!==this.containerHeight)&&(this.containerWidth=t,this.containerHeight=i,this.scale=this._calcScale(),this._updateScrollbarHeight(),this.$scrollbar.parentElement&&this.pagesScrollTo(this.pagesScrollTop,!0))}pagesScrollTo(t,i){if(t=qi(t,0,this.pagesHeight-this.containerHeight/this.scale),i||Math.abs(t-this.pagesScrollTop)>=.001){this.pagesScrollTop=t;const n=this.pagesScrollTop*this.scale,r=this.pagesHeight*this.scale,s=n/(r-this.containerHeight)*(this.containerHeight-this.scrollbarHeight);window.requestAnimationFrame?window.requestAnimationFrame(()=>{this.$scrollbar.style.transform=`translateY(${s}px)`}):this.$scrollbar.style.transform=`translateY(${s}px)`}}destroy(){this.unmount(),this.onDragScroll=void 0,this.sideEffect.flushAll()}renderScrollbar(){const t=document.createElement("button");t.className=this.wrapClassName("scrollbar"),t.style.minHeight=`${this.scrollbarMinHeight}px`,t.style.height=`${this.scrollbarHeight}px`;const i=n=>{if(this.readonly||n.button!=null&&n.button!==0)return;qh(n);const r=this.wrapClassName("scrollbar-dragging");t.classList.toggle(r,!0);const s=this.pagesScrollTop,{clientY:a}=hc(n),o=u=>{if(this.readonly)return;const{clientY:c}=hc(u),p=(c-a)/this.scale;Math.abs(p)>0&&this.onDragScroll&&this.onDragScroll(s+p*(this.pagesHeight*this.scale/this.containerHeight))},l=()=>{t.classList.toggle(r,!1),window.removeEventListener("mousemove",o,!0),window.removeEventListener("touchmove",o,!0),window.removeEventListener("mouseup",l,!0),window.removeEventListener("touchend",l,!0),window.removeEventListener("touchcancel",l,!0)};window.addEventListener("mousemove",o,!0),window.addEventListener("touchmove",o,!0),window.addEventListener("mouseup",l,!0),window.addEventListener("touchend",l,!0),window.addEventListener("touchcancel",l,!0)};return this.sideEffect.addEventListener(t,"mousedown",i),this.sideEffect.addEventListener(t,"touchstart",i),t}_calcScale(){return this.containerWidth/this.pagesWidth||1}_calcScrollbarHeight(){return qi(this.containerHeight/(this.pagesHeight*this.scale)*this.containerHeight,this.scrollbarMinHeight,this.containerHeight)}_updateScrollbarHeight(){const t=this._calcScrollbarHeight();Math.abs(t-this.scrollbarHeight)>.001&&(this.scrollbarHeight=t,this.$scrollbar.style.height=`${t}px`)}}const D0=window.ResizeObserver||dy,pn=640;class z0{constructor({context:t,whiteboardView:i,readonly:n,box:r,pages:s,pageScrollTop:a=0,mountWhiteboard:o,onUserScroll:l,baseScenePath:u,appId:c}){this.sideEffect=new Os,this.userScrolling=!1,this.onNewPageIndex=y=>{this.scrollToPage(y)},this.toPdf=async()=>{const y=document.createElement("canvas"),x=y.getContext("2d");if(!x||!this.baseScenePath){this.reportProgress(100,null);return}const d=this.whiteboardView.focusScenePath||`${this.baseScenePath}/1`,h=this.pages[0],{jsPDF:f}=await Promise.resolve().then(function(){return Pg(require("jspdf"))}),g=new f({format:[h.width,h.height],orientation:h.width>h.height?"l":"p",compress:!0});for(const[w,b]of this.pages.entries()){const{width:E,height:N,src:P}=b;y.width=E,y.height=N;const Q=E>N?"l":"p";w>0&&g.addPage([E,N],Q);const K=await this.getBase64FromUrl(P),z=document.createElement("img");z.src=K,await new Promise(ke=>z.onload=ke),x.drawImage(z,0,0);const me=y.toDataURL("image/jpeg",.6);x.clearRect(0,0,E,N);const Y={centerX:E/2,centerY:N/2+w*N,scale:1},X=this.context.manager.windowManger;X._appliancePlugin?await X._appliancePlugin.screenshotToCanvasAsync(x,d,E,N,Y):this.whiteboardView.screenshotToCanvas(x,d,E,N,Y);const be=y.toDataURL("image/png");g.addImage(me,"JPEG",0,0,E,N,"","FAST"),g.addImage(be,"PNG",0,0,E,N,"","FAST"),x.clearRect(0,0,E,N),Math.ceil((w+1)/this.pages.length*100)<100&&this.reportProgress(Math.ceil((w+1)/this.pages.length*100),null)}const m=g.output("arraybuffer");this.reportProgress(100,{pdf:m,title:this.box.title})},this.context=t,this.whiteboardView=i,this.readonly=n,this.box=r,this.pages=s,this.baseScenePath=u,this.appId=c,this.mountWhiteboard=o,this._onUserScroll=l;const p=this.debounce(()=>{this.userScrolling=!1,this._onUserScroll&&this._onUserScroll(this.pageRenderer.pagesScrollTop)},{wait:80},"debounce-updateUserScroll");this.updateUserScroll=()=>{this.userScrolling=!0,p()},this.viewer=new Kh({readonly:n,box:r,pages:s,onNewPageIndex:this.onNewPageIndex});const{width:v,height:S}=this.whiteboardView.size;this.pageRenderer=new N0({pagesScrollTop:a,pages:this.pages,containerWidth:v,containerHeight:S,onPageIndexChanged:this.viewer.setPageIndex.bind(this.viewer)}),this.scrollbar=new P0({pagesScrollTop:this.pageRenderer.pagesScrollTop,containerWidth:v,containerHeight:S,pagesWidth:this.pageRenderer.pagesIntrinsicWidth,pagesHeight:this.pageRenderer.pagesIntrinsicHeight,readonly:this.readonly,wrapClassName:this.wrapClassName.bind(this),onDragScroll:y=>{this.pageScrollTo(y),this.updateUserScroll()}}),this.pageScrollStepper=new b0({start:this.pageRenderer.pagesScrollTop,onStep:y=>{this.pageScrollTo(y)}}),this.render()}mount(){this.viewer.mount(),this.setupScrollListener();const t=this.debounce(this.renderRatioHeight.bind(this),{wait:80});return this.sideEffect.add(()=>{const i=new D0(t);return i.observe(this.viewer.$content),()=>i.disconnect()}),this.sideEffect.setTimeout(()=>{this.userScrolling||this.pageScrollTo(this.pageRenderer.pagesScrollTop)},100),this.sideEffect.add(()=>{const i=n=>{n.data.type==="@netless/_request_save_pdf_"&&n.data.appId===this.appId&&this.toPdf().catch(()=>this.reportProgress(100,null))};return window.addEventListener("message",i),()=>{window.removeEventListener("message",i)}}),this}unmount(){return this.viewer.unmount(),this}setReadonly(t){this.readonly!==t&&(this.readonly=t,this.viewer.setReadonly(t),this.scrollbar.setReadonly(t))}destroy(){this.sideEffect.flushAll(),this.pageScrollStepper.destroy(),this._onUserScroll=void 0,this.unmount(),this.viewer.destroy(),this.pageRenderer.destroy(),this.scrollbar.destroy()}syncPageScrollTop(t){!this.userScrolling&&t>=0&&Math.abs(this.pageRenderer.pagesScrollTop-t)>.01&&this.pageScrollStepper.stepTo(t,this.pageRenderer.pagesScrollTop)}render(){this.pageRenderer.mount(this.viewer.$content),this.viewer.$content.appendChild(this.renderWhiteboardView()),this.scrollbar.mount(this.viewer.$content),this.renderRatioHeight()}renderRatioHeight(){const t=this.box.absoluteHeight,i=t<=pn;if(this.viewer.setSmallBox(i),i){const n=26/pn,r=26/t,s=26/pn,a=0,o=Math.max((n+s-(r+a))/2,0);if(this.box.$titleBar){const l=r+o;this.box.$titleBar.style.height=`${l*100}%`}if(this.box.$footer){const l=a+o;this.box.$footer.style.height=`${l*100}%`}}else{if(this.box.$titleBar){const n=Math.max(26/pn,26/t);this.box.$titleBar.style.height=`${n*100}%`}if(this.box.$footer){const n=Math.max(26/pn,26/t);this.box.$footer.style.height=`${n*100}%`}}}renderWhiteboardView(){return this.$whiteboardView||(this.$whiteboardView=document.createElement("div"),this.$whiteboardView.className=this.wrapClassName("wb-view"),this.mountWhiteboard(this.$whiteboardView),this.sideEffect.addEventListener(this.$whiteboardView,"wheel",t=>{qh(t),this.readonly||(this.pageScrollTo(this.pageRenderer.pagesScrollTop+t.deltaY),this.updateUserScroll())},{passive:!1,capture:!0}),this.sideEffect.addEventListener(this.$whiteboardView,"touchmove",t=>{this.readonly||t.touches.length<=1||this.updateUserScroll()},{passive:!0,capture:!0})),this.$whiteboardView}scrollTopPageToEl(t){return t*this.pageRenderer.scale}scrollTopElToPage(t){return t/this.pageRenderer.scale}elScrollTo(t){this.pageScrollTo(this.scrollTopElToPage(t))}pageScrollTo(t){const i=this.scrollTopElToPage(this.whiteboardView.size.height/2);this.whiteboardView.moveCamera({centerY:qi(t+i,i,this.pageRenderer.pagesIntrinsicHeight-i),animationMode:"immediately"})}scrollToPage(t){if(!this.readonly&&!Number.isNaN(t)){const i=this.pageRenderer.pagesIntrinsicYs[t];i>=0&&(this.pageScrollTo(i+5/this.pageRenderer.scale),this.updateUserScroll())}}setupScrollListener(){this.sideEffect.add(()=>{const t=i=>{const{width:n,height:r}=this.whiteboardView.size;if(n<=0||r<=0)return;const s=i.centerY-this.pageRenderer.containerHeight/this.pageRenderer.scale/2;this.pageRenderer.pagesScrollTo(s),this.scrollbar.pagesScrollTo(s)};return this.whiteboardView.callbacks.on("onCameraUpdated",t),()=>this.whiteboardView.callbacks.off("onCameraUpdated",t)}),this.sideEffect.add(()=>{const{updateUserScroll:t}=this;return this.whiteboardView.callbacks.on("onCameraUpdatedByDevice",t),()=>this.whiteboardView.callbacks.off("onCameraUpdatedByDevice",t)}),this.sideEffect.add(()=>{const t=({width:i,height:n})=>{if(i<=0||n<=0)return;this.pageRenderer.setContainerSize(i,n),this.scrollbar.setContainerSize(i,n);const{pagesIntrinsicWidth:r,pagesIntrinsicHeight:s}=this.pageRenderer;this.whiteboardView.moveCameraToContain({originX:0,originY:this.pageRenderer.pagesScrollTop,width:r,height:n/this.pageRenderer.scale,animationMode:"immediately"}),this.whiteboardView.setCameraBound({damping:1,maxContentMode:()=>this.pageRenderer.scale,minContentMode:()=>this.pageRenderer.scale,centerX:r/2,centerY:s/2,width:r,height:s})};return this.whiteboardView.callbacks.on("onSizeUpdated",t),()=>{this.whiteboardView.callbacks.off("onSizeUpdated",t)}},"whiteboard-size-update"),this.sideEffect.addEventListener(window,"keyup",t=>{if(this.readonly||!this.box.focus||this.box.minimized||ep(t.target))return;let i=null;switch(t.key){case"PageDown":{i=this.pageRenderer.pagesScrollTop+this.pageRenderer.containerHeight/this.pageRenderer.scale;break}case"PageUp":{i=this.pageRenderer.pagesScrollTop-this.pageRenderer.containerHeight/this.pageRenderer.scale;break}case"ArrowDown":{i=this.pageRenderer.pagesScrollTop+this.pageRenderer.containerHeight/4/this.pageRenderer.scale;break}case"ArrowUp":{i=this.pageRenderer.pagesScrollTop-this.pageRenderer.containerHeight/4/this.pageRenderer.scale;break}}i!==null&&(this._onUserScroll?this._onUserScroll(i):(this.pageScrollTo(i),this.updateUserScroll()))},{capture:!0})}debounce(t,i,n){const r=_w(t,i);return this.sideEffect.addDisposer(()=>r.cancel(),n),r}wrapClassName(t){return"netless-app-docs-viewer-static-"+t}async getBase64FromUrl(t){const n=await(await fetch(this._invalidate(t))).blob();return new Promise(r=>{const s=new FileReader;s.readAsDataURL(n),s.onloadend=()=>{const a=s.result;r(a)}})}_invalidate(t){try{const i=new URL(t);return i.searchParams.set("t",Date.now().toString()),i.toString()}catch{return t}}reportProgress(t,i){window.postMessage({type:"@netless/_result_save_pdf_",appId:this.appId,progress:t,result:i})}}class j0{constructor({context:t,whiteboardView:i,box:n,pages:r}){this.sideEffect=new Os,this.onPlayPPT=()=>{const s=this.context.getRoom();s&&s.pptNextStep()},this._scaleDocsToFitImpl=()=>{const s=this.pages[this.getPageIndex()];s&&(this.whiteboardView.moveCameraToContain({originX:-s.width/2,originY:-s.height/2,width:s.width,height:s.height,animationMode:"immediately"}),this.whiteboardView.setCameraBound({damping:1,maxContentMode:()=>this.whiteboardView.camera.scale,minContentMode:()=>this.whiteboardView.camera.scale,centerX:0,centerY:0,width:s.width,height:s.height}))},this._scaleDocsToFitDebounced=()=>{this.sideEffect.setTimeout(this._scaleDocsToFitImpl,1e3,"_scaleDocsToFitDebounced")},this.scaleDocsToFit=()=>{this._scaleDocsToFitImpl(),this._scaleDocsToFitDebounced()},this.onNewPageIndex=s=>{this.jumpToPage(s,!0)},this.context=t,this.whiteboardView=i,this.box=n,this.pages=r,this.displayer=t.getDisplayer(),this.viewer=new Kh({readonly:!t.getIsWritable(),box:n,pages:r,onNewPageIndex:this.onNewPageIndex,onPlay:this.onPlayPPT}),this.render(),this.sideEffect.add(()=>{const s=a=>{this.viewer.setReadonly(!a)};return this.context.emitter.on("writableChange",s),()=>this.context.emitter.off("writableChange",s)}),this.sideEffect.add(()=>{const s=a=>{this.jumpToPage(a.index)};return this.context.emitter.on("sceneStateChange",s),()=>this.context.emitter.off("sceneStateChange",s)})}mount(){this.viewer.mount();const t=this.getPageIndex();return t!==0&&this.jumpToPage(t),this.scaleDocsToFit(),this.sideEffect.add(()=>(this.whiteboardView.callbacks.on("onSizeUpdated",this.scaleDocsToFit),()=>{this.whiteboardView.callbacks.off("onSizeUpdated",this.scaleDocsToFit)})),this}unmount(){return this.viewer.unmount(),this}destroy(){this.sideEffect.flushAll(),this.unmount(),this.viewer.destroy()}getPageIndex(){return this.displayer.state.sceneState.index}jumpToPage(t,i){var n,r;if(t=qi(t,0,this.pages.length-1),t!==this.getPageIndex()&&this.context.getIsWritable()){const s=this.context.getInitScenePath(),a=(r=(n=this.context.getScenes())==null?void 0:n[t])==null?void 0:r.name;s&&a&&this.context.setScenePath(`${s}/${a}`),this.scaleDocsToFit()}if(t!==this.viewer.pageIndex&&this.viewer.setPageIndex(t),i){const s=this.context.getRoom();if(s){const a=s.state.globalState.__pptState;s.setGlobalState({__pptState:a&&{uuid:a.uuid,pageIndex:t,disableAutoPlay:a.disableAutoPlay}})}}}render(){this.viewer.$content.appendChild(this.renderMask()),this.viewer.$content.appendChild(this.renderWhiteboardView()),this.sideEffect.addEventListener(window,"keydown",t=>{var i;if(this.box.focus&&!ep(t.target))switch(t.key){case"ArrowUp":case"ArrowLeft":{this.jumpToPage(this.getPageIndex()-1,!0);break}case"ArrowRight":case"ArrowDown":{(i=this.context.getRoom())==null||i.pptNextStep();break}}})}renderMask(){if(!this.$mask){const t=document.createElement("div");t.className=this.wrapClassName("mask"),this.$mask=t;const i=document.createElement("button");i.className=this.wrapClassName("back");const n=document.createElement("button");n.className=this.wrapClassName("next")}return this.$mask}renderWhiteboardView(){return this.$whiteboardView||(this.$whiteboardView=document.createElement("div"),this.$whiteboardView.className=this.wrapClassName("wb-view"),this.sideEffect.addEventListener(this.$whiteboardView,"click",t=>{var i;const n=this.context.getRoom();if(n&&n.state.memberState.currentApplianceName==="clicker"){for(let r=t.target;r;r=r.parentElement)if((i=r.classList)!=null&&i.contains("ppt-event-source"))return;n.pptNextStep()}}),this.context.mountView(this.$whiteboardView)),this.$whiteboardView}wrapClassName(t){return"netless-app-docs-viewer-dynamic-"+t}}const L0="DocsViewer",to={kind:L0,setup(e){const t=e.getBox(),i=e.getScenes();if(!i)throw new Error("[Docs Viewer]: scenes not found.");const n=e.getView();if(!n)throw new Error("[Docs Viewer]: no whiteboard view.");const r=i.map(({ppt:s})=>s?{width:s.width,height:s.height,src:s.src,thumbnail:s.previewURL}:null).filter(s=>Boolean(s));if(r.length<=0)throw new Error("[Docs Viewer]: empty scenes.");t.mountStyles(kw),r[0].src.startsWith("ppt")?R0(e,n,t,r):B0(e,n,t,r)}};function B0(e,t,i,n){var r;t.disableCameraTransform=!e.getIsWritable();const s=new z0({context:e,whiteboardView:t,readonly:!e.getIsWritable(),box:i,pages:n,pageScrollTop:(r=e.getAttributes())==null?void 0:r.pageScrollTop,mountWhiteboard:e.mountView.bind(e),onUserScroll:a=>{var o;((o=e.getAttributes())==null?void 0:o.pageScrollTop)!==a&&!i.readonly&&e.updateAttributes(["pageScrollTop"],a)},baseScenePath:e.getInitScenePath(),appId:e.appId}).mount();s.viewer.onPageIndexChanged=a=>{e.dispatchAppEvent("pageStateChange",{index:a,length:n.length})},e.dispatchAppEvent("pageStateChange",{index:s.viewer.pageIndex,length:n.length}),e.emitter.on("attributesUpdate",a=>{a&&a.pageScrollTop!=null&&s.syncPageScrollTop(a.pageScrollTop)}),e.emitter.on("writableChange",a=>{s.setReadonly(!a),t.disableCameraTransform=!a})}function R0(e,t,i,n){t.disableCameraTransform=!0;const r=new j0({context:e,whiteboardView:t,box:i,pages:n}).mount();r.viewer.onPageIndexChanged=s=>{e.dispatchAppEvent("pageStateChange",{index:s,length:n.length})},e.dispatchAppEvent("pageStateChange",{index:r.getPageIndex(),length:n.length}),e.mountView(r.$whiteboardView),e.isAddApp&&t.callbacks.once("onSizeUpdated",({width:s,height:a})=>{if(n.length>0&&i.state!=="maximized"){const{width:o,height:l}=n[0],c=l/o*s-a;c!==0&&e.getIsWritable()&&e.emitter.emit("setBoxSize",{width:i.width,height:i.height+c/i.containerRect.height})}})}var ki={exports:{}},F={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var pc=Object.getOwnPropertySymbols,V0=Object.prototype.hasOwnProperty,_0=Object.prototype.propertyIsEnumerable;function O0(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function U0(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;var n=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(n.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(s){r[s]=s}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var tp=U0()?Object.assign:function(e,t){for(var i,n=O0(e),r,s=1;s<arguments.length;s++){i=Object(arguments[s]);for(var a in i)V0.call(i,a)&&(n[a]=i[a]);if(pc){r=pc(i);for(var o=0;o<r.length;o++)_0.call(i,r[o])&&(n[r[o]]=i[r[o]])}}return n};/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nl=tp,at=typeof Symbol=="function"&&Symbol.for,lr=at?Symbol.for("react.element"):60103,W0=at?Symbol.for("react.portal"):60106,H0=at?Symbol.for("react.fragment"):60107,$0=at?Symbol.for("react.strict_mode"):60108,Z0=at?Symbol.for("react.profiler"):60114,Q0=at?Symbol.for("react.provider"):60109,F0=at?Symbol.for("react.context"):60110,G0=at?Symbol.for("react.forward_ref"):60112,Y0=at?Symbol.for("react.suspense"):60113,X0=at?Symbol.for("react.memo"):60115,J0=at?Symbol.for("react.lazy"):60116,fc=typeof Symbol=="function"&&Symbol.iterator;function ur(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ip={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},np={};function ln(e,t,i){this.props=e,this.context=t,this.refs=np,this.updater=i||ip}ln.prototype.isReactComponent={};ln.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(ur(85));this.updater.enqueueSetState(this,e,t,"setState")};ln.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function rp(){}rp.prototype=ln.prototype;function kl(e,t,i){this.props=e,this.context=t,this.refs=np,this.updater=i||ip}var Pl=kl.prototype=new rp;Pl.constructor=kl;Nl(Pl,ln.prototype);Pl.isPureReactComponent=!0;var Dl={current:null},sp=Object.prototype.hasOwnProperty,ap={key:!0,ref:!0,__self:!0,__source:!0};function op(e,t,i){var n,r={},s=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)sp.call(t,n)&&!ap.hasOwnProperty(n)&&(r[n]=t[n]);var o=arguments.length-2;if(o===1)r.children=i;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)r[n]===void 0&&(r[n]=o[n]);return{$$typeof:lr,type:e,key:s,ref:a,props:r,_owner:Dl.current}}function K0(e,t){return{$$typeof:lr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function zl(e){return typeof e=="object"&&e!==null&&e.$$typeof===lr}function q0(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(i){return t[i]})}var lp=/\/+/g,os=[];function up(e,t,i,n){if(os.length){var r=os.pop();return r.result=e,r.keyPrefix=t,r.func=i,r.context=n,r.count=0,r}return{result:e,keyPrefix:t,func:i,context:n,count:0}}function cp(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>os.length&&os.push(e)}function io(e,t,i,n){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(r){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case lr:case W0:s=!0}}if(s)return i(n,e,t===""?"."+Sa(e,0):t),1;if(s=0,t=t===""?".":t+":",Array.isArray(e))for(var a=0;a<e.length;a++){r=e[a];var o=t+Sa(r,a);s+=io(r,o,i,n)}else if(e===null||typeof e!="object"?o=null:(o=fc&&e[fc]||e["@@iterator"],o=typeof o=="function"?o:null),typeof o=="function")for(e=o.call(e),a=0;!(r=e.next()).done;)r=r.value,o=t+Sa(r,a++),s+=io(r,o,i,n);else if(r==="object")throw i=""+e,Error(ur(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i,""));return s}function no(e,t,i){return e==null?0:io(e,"",t,i)}function Sa(e,t){return typeof e=="object"&&e!==null&&e.key!=null?q0(e.key):t.toString(36)}function ex(e,t){e.func.call(e.context,t,e.count++)}function tx(e,t,i){var n=e.result,r=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?ro(e,n,i,function(s){return s}):e!=null&&(zl(e)&&(e=K0(e,r+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(lp,"$&/")+"/")+i)),n.push(e))}function ro(e,t,i,n,r){var s="";i!=null&&(s=(""+i).replace(lp,"$&/")+"/"),t=up(t,s,n,r),no(e,tx,t),cp(t)}var dp={current:null};function Bt(){var e=dp.current;if(e===null)throw Error(ur(321));return e}var ix={ReactCurrentDispatcher:dp,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:Dl,IsSomeRendererActing:{current:!1},assign:Nl};F.Children={map:function(e,t,i){if(e==null)return e;var n=[];return ro(e,n,null,t,i),n},forEach:function(e,t,i){if(e==null)return e;t=up(null,null,t,i),no(e,ex,t),cp(t)},count:function(e){return no(e,function(){return null},null)},toArray:function(e){var t=[];return ro(e,t,null,function(i){return i}),t},only:function(e){if(!zl(e))throw Error(ur(143));return e}};F.Component=ln;F.Fragment=H0;F.Profiler=Z0;F.PureComponent=kl;F.StrictMode=$0;F.Suspense=Y0;F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ix;F.cloneElement=function(e,t,i){if(e==null)throw Error(ur(267,e));var n=Nl({},e.props),r=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=Dl.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)sp.call(t,l)&&!ap.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=i;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:lr,type:e.type,key:r,ref:s,props:n,_owner:a}};F.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:F0,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:Q0,_context:e},e.Consumer=e};F.createElement=op;F.createFactory=function(e){var t=op.bind(null,e);return t.type=e,t};F.createRef=function(){return{current:null}};F.forwardRef=function(e){return{$$typeof:G0,render:e}};F.isValidElement=zl;F.lazy=function(e){return{$$typeof:J0,_ctor:e,_status:-1,_result:null}};F.memo=function(e,t){return{$$typeof:X0,type:e,compare:t===void 0?null:t}};F.useCallback=function(e,t){return Bt().useCallback(e,t)};F.useContext=function(e,t){return Bt().useContext(e,t)};F.useDebugValue=function(){};F.useEffect=function(e,t){return Bt().useEffect(e,t)};F.useImperativeHandle=function(e,t,i){return Bt().useImperativeHandle(e,t,i)};F.useLayoutEffect=function(e,t){return Bt().useLayoutEffect(e,t)};F.useMemo=function(e,t){return Bt().useMemo(e,t)};F.useReducer=function(e,t,i){return Bt().useReducer(e,t,i)};F.useRef=function(e){return Bt().useRef(e)};F.useState=function(e){return Bt().useState(e)};F.version="16.14.0";ki.exports=F;var H=ki.exports,hp={exports:{}},Ke={},pp={exports:{}},fp={};/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,i,n,r,s;if(typeof window=="undefined"||typeof MessageChannel!="function"){var a=null,o=null,l=function(){if(a!==null)try{var A=e.unstable_now();a(!0,A),a=null}catch(j){throw setTimeout(l,0),j}},u=Date.now();e.unstable_now=function(){return Date.now()-u},t=function(A){a!==null?setTimeout(t,0,A):(a=A,setTimeout(l,0))},i=function(A,j){o=setTimeout(A,j)},n=function(){clearTimeout(o)},r=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var c=window.performance,p=window.Date,v=window.setTimeout,S=window.clearTimeout;if(typeof console!="undefined"){var y=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),typeof y!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if(typeof c=="object"&&typeof c.now=="function")e.unstable_now=function(){return c.now()};else{var x=p.now();e.unstable_now=function(){return p.now()-x}}var d=!1,h=null,f=-1,g=5,m=0;r=function(){return e.unstable_now()>=m},s=function(){},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):g=0<A?Math.floor(1e3/A):5};var w=new MessageChannel,b=w.port2;w.port1.onmessage=function(){if(h!==null){var A=e.unstable_now();m=A+g;try{h(!0,A)?b.postMessage(null):(d=!1,h=null)}catch(j){throw b.postMessage(null),j}}else d=!1},t=function(A){h=A,d||(d=!0,b.postMessage(null))},i=function(A,j){f=v(function(){A(e.unstable_now())},j)},n=function(){S(f),f=-1}}function E(A,j){var W=A.length;A.push(j);e:for(;;){var M=W-1>>>1,k=A[M];if(k!==void 0&&0<Q(k,j))A[M]=j,A[W]=k,W=M;else break e}}function N(A){return A=A[0],A===void 0?null:A}function P(A){var j=A[0];if(j!==void 0){var W=A.pop();if(W!==j){A[0]=W;e:for(var M=0,k=A.length;M<k;){var ee=2*(M+1)-1,q=A[ee],Oe=ee+1,ve=A[Oe];if(q!==void 0&&0>Q(q,W))ve!==void 0&&0>Q(ve,q)?(A[M]=ve,A[Oe]=W,M=Oe):(A[M]=q,A[ee]=W,M=ee);else if(ve!==void 0&&0>Q(ve,W))A[M]=ve,A[Oe]=W,M=Oe;else break e}}return j}return null}function Q(A,j){var W=A.sortIndex-j.sortIndex;return W!==0?W:A.id-j.id}var K=[],z=[],me=1,Y=null,X=3,be=!1,se=!1,ke=!1;function ot(A){for(var j=N(z);j!==null;){if(j.callback===null)P(z);else if(j.startTime<=A)P(z),j.sortIndex=j.expirationTime,E(K,j);else break;j=N(z)}}function qe(A){if(ke=!1,ot(A),!se)if(N(K)!==null)se=!0,t(xt);else{var j=N(z);j!==null&&i(qe,j.startTime-A)}}function xt(A,j){se=!1,ke&&(ke=!1,n()),be=!0;var W=X;try{for(ot(j),Y=N(K);Y!==null&&(!(Y.expirationTime>j)||A&&!r());){var M=Y.callback;if(M!==null){Y.callback=null,X=Y.priorityLevel;var k=M(Y.expirationTime<=j);j=e.unstable_now(),typeof k=="function"?Y.callback=k:Y===N(K)&&P(K),ot(j)}else P(K);Y=N(K)}if(Y!==null)var ee=!0;else{var q=N(z);q!==null&&i(qe,q.startTime-j),ee=!1}return ee}finally{Y=null,X=W,be=!1}}function St(A){switch(A){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var dn=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){se||be||(se=!0,t(xt))},e.unstable_getCurrentPriorityLevel=function(){return X},e.unstable_getFirstCallbackNode=function(){return N(K)},e.unstable_next=function(A){switch(X){case 1:case 2:case 3:var j=3;break;default:j=X}var W=X;X=j;try{return A()}finally{X=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=dn,e.unstable_runWithPriority=function(A,j){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var W=X;X=A;try{return j()}finally{X=W}},e.unstable_scheduleCallback=function(A,j,W){var M=e.unstable_now();if(typeof W=="object"&&W!==null){var k=W.delay;k=typeof k=="number"&&0<k?M+k:M,W=typeof W.timeout=="number"?W.timeout:St(A)}else W=St(A),k=M;return W=k+W,A={id:me++,callback:j,priorityLevel:A,startTime:k,expirationTime:W,sortIndex:-1},k>M?(A.sortIndex=k,E(z,A),N(K)===null&&A===N(z)&&(ke?n():ke=!0,i(qe,k-M))):(A.sortIndex=W,E(K,A),se||be||(se=!0,t(xt))),A},e.unstable_shouldYield=function(){var A=e.unstable_now();ot(A);var j=N(K);return j!==Y&&Y!==null&&j!==null&&j.callback!==null&&j.startTime<=A&&j.expirationTime<Y.expirationTime||r()},e.unstable_wrapCallback=function(A){var j=X;return function(){var W=X;X=j;try{return A.apply(this,arguments)}finally{X=W}}}})(fp);pp.exports=fp;/** @license React v16.14.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zs=ki.exports,Te=tp,fe=pp.exports;function I(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Zs)throw Error(I(227));function nx(e,t,i,n,r,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(i,u)}catch(c){this.onError(c)}}var Ln=!1,ls=null,us=!1,so=null,rx={onError:function(e){Ln=!0,ls=e}};function sx(e,t,i,n,r,s,a,o,l){Ln=!1,ls=null,nx.apply(rx,arguments)}function ax(e,t,i,n,r,s,a,o,l){if(sx.apply(this,arguments),Ln){if(Ln){var u=ls;Ln=!1,ls=null}else throw Error(I(198));us||(us=!0,so=u)}}var jl=null,gp=null,mp=null;function gc(e,t,i){var n=e.type||"unknown-event";e.currentTarget=mp(i),ax(n,t,void 0,e),e.currentTarget=null}var cs=null,Ri={};function vp(){if(cs)for(var e in Ri){var t=Ri[e],i=cs.indexOf(e);if(!(-1<i))throw Error(I(96,e));if(!ds[i]){if(!t.extractEvents)throw Error(I(97,e));ds[i]=t,i=t.eventTypes;for(var n in i){var r=void 0,s=i[n],a=t,o=n;if(ao.hasOwnProperty(o))throw Error(I(99,o));ao[o]=s;var l=s.phasedRegistrationNames;if(l){for(r in l)l.hasOwnProperty(r)&&mc(l[r],a,o);r=!0}else s.registrationName?(mc(s.registrationName,a,o),r=!0):r=!1;if(!r)throw Error(I(98,n,e))}}}}function mc(e,t,i){if(en[e])throw Error(I(100,e));en[e]=t,Ll[e]=t.eventTypes[i].dependencies}var ds=[],ao={},en={},Ll={};function wp(e){var t=!1,i;for(i in e)if(e.hasOwnProperty(i)){var n=e[i];if(!Ri.hasOwnProperty(i)||Ri[i]!==n){if(Ri[i])throw Error(I(102,i));Ri[i]=n,t=!0}}t&&vp()}var si=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),oo=null,Zi=null,Qi=null;function vc(e){if(e=gp(e)){if(typeof oo!="function")throw Error(I(280));var t=e.stateNode;t&&(t=jl(t),oo(e.stateNode,e.type,t))}}function yp(e){Zi?Qi?Qi.push(e):Qi=[e]:Zi=e}function xp(){if(Zi){var e=Zi,t=Qi;if(Qi=Zi=null,vc(e),t)for(e=0;e<t.length;e++)vc(t[e])}}function Bl(e,t){return e(t)}function Sp(e,t,i,n,r){return e(t,i,n,r)}function Rl(){}var Ip=Bl,di=!1,Ia=!1;function Vl(){(Zi!==null||Qi!==null)&&(Rl(),xp())}function Mp(e,t,i){if(Ia)return e(t,i);Ia=!0;try{return Ip(e,t,i)}finally{Ia=!1,Vl()}}var ox=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wc=Object.prototype.hasOwnProperty,yc={},xc={};function lx(e){return wc.call(xc,e)?!0:wc.call(yc,e)?!1:ox.test(e)?xc[e]=!0:(yc[e]=!0,!1)}function ux(e,t,i,n){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function cx(e,t,i,n){if(t===null||typeof t=="undefined"||ux(e,t,i,n))return!0;if(n)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ne(e,t,i,n,r,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=s}var ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ge[e]=new Ne(e,0,!1,e,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ge[t]=new Ne(t,1,!1,e[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ge[e]=new Ne(e,2,!1,e.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ge[e]=new Ne(e,2,!1,e,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ge[e]=new Ne(e,3,!1,e.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(e){ge[e]=new Ne(e,3,!0,e,null,!1)});["capture","download"].forEach(function(e){ge[e]=new Ne(e,4,!1,e,null,!1)});["cols","rows","size","span"].forEach(function(e){ge[e]=new Ne(e,6,!1,e,null,!1)});["rowSpan","start"].forEach(function(e){ge[e]=new Ne(e,5,!1,e.toLowerCase(),null,!1)});var _l=/[\-:]([a-z])/g;function Ol(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_l,Ol);ge[t]=new Ne(t,1,!1,e,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_l,Ol);ge[t]=new Ne(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_l,Ol);ge[t]=new Ne(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(e){ge[e]=new Ne(e,1,!1,e.toLowerCase(),null,!1)});ge.xlinkHref=new Ne("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(e){ge[e]=new Ne(e,1,!1,e.toLowerCase(),null,!0)});var rt=Zs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;rt.hasOwnProperty("ReactCurrentDispatcher")||(rt.ReactCurrentDispatcher={current:null});rt.hasOwnProperty("ReactCurrentBatchConfig")||(rt.ReactCurrentBatchConfig={suspense:null});function Ul(e,t,i,n){var r=ge.hasOwnProperty(t)?ge[t]:null,s=r!==null?r.type===0:n?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");s||(cx(t,i,r,n)&&(i=null),n||r===null?lx(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):r.mustUseProperty?e[r.propertyName]=i===null?r.type===3?!1:"":i:(t=r.attributeName,n=r.attributeNamespace,i===null?e.removeAttribute(t):(r=r.type,i=r===3||r===4&&i===!0?"":""+i,n?e.setAttributeNS(n,t,i):e.setAttribute(t,i))))}var dx=/^(.*)[\\\/]/,_e=typeof Symbol=="function"&&Symbol.for,Cr=_e?Symbol.for("react.element"):60103,Vi=_e?Symbol.for("react.portal"):60106,ci=_e?Symbol.for("react.fragment"):60107,bp=_e?Symbol.for("react.strict_mode"):60108,Wr=_e?Symbol.for("react.profiler"):60114,Cp=_e?Symbol.for("react.provider"):60109,Ap=_e?Symbol.for("react.context"):60110,hx=_e?Symbol.for("react.concurrent_mode"):60111,Wl=_e?Symbol.for("react.forward_ref"):60112,Hr=_e?Symbol.for("react.suspense"):60113,lo=_e?Symbol.for("react.suspense_list"):60120,Hl=_e?Symbol.for("react.memo"):60115,Ep=_e?Symbol.for("react.lazy"):60116,Tp=_e?Symbol.for("react.block"):60121,Sc=typeof Symbol=="function"&&Symbol.iterator;function fn(e){return e===null||typeof e!="object"?null:(e=Sc&&e[Sc]||e["@@iterator"],typeof e=="function"?e:null)}function px(e){if(e._status===-1){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then(function(i){e._status===0&&(i=i.default,e._status=1,e._result=i)},function(i){e._status===0&&(e._status=2,e._result=i)})}}function zt(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ci:return"Fragment";case Vi:return"Portal";case Wr:return"Profiler";case bp:return"StrictMode";case Hr:return"Suspense";case lo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ap:return"Context.Consumer";case Cp:return"Context.Provider";case Wl:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case Hl:return zt(e.type);case Tp:return zt(e.render);case Ep:if(e=e._status===1?e._result:null)return zt(e)}return null}function $l(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var i="";break e;default:var n=e._debugOwner,r=e._debugSource,s=zt(e.type);i=null,n&&(i=zt(n.type)),n=s,s="",r?s=" (at "+r.fileName.replace(dx,"")+":"+r.lineNumber+")":i&&(s=" (created by "+i+")"),i=`
    in `+(n||"Unknown")+s}t+=i,e=e.return}while(e);return t}function ei(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Np(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fx(e){var t=Np(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof i!="undefined"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ar(e){e._valueTracker||(e._valueTracker=fx(e))}function kp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=Np(e)?e.checked?"true":"false":e.value),e=n,e!==i?(t.setValue(e),!0):!1}function uo(e,t){var i=t.checked;return Te({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i!=null?i:e._wrapperState.initialChecked})}function Ic(e,t){var i=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;i=ei(t.value!=null?t.value:i),e._wrapperState={initialChecked:n,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Pp(e,t){t=t.checked,t!=null&&Ul(e,"checked",t,!1)}function co(e,t){Pp(e,t);var i=ei(t.value),n=t.type;if(i!=null)n==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ho(e,t.type,i):t.hasOwnProperty("defaultValue")&&ho(e,t.type,ei(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Mc(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function ho(e,t,i){(t!=="number"||e.ownerDocument.activeElement!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}function gx(e){var t="";return Zs.Children.forEach(e,function(i){i!=null&&(t+=i)}),t}function po(e,t){return e=Te({children:void 0},t),(t=gx(t.children))&&(e.children=t),e}function Fi(e,t,i,n){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&n&&(e[i].defaultSelected=!0)}else{for(i=""+ei(i),t=null,r=0;r<e.length;r++){if(e[r].value===i){e[r].selected=!0,n&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function fo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(I(91));return Te({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function bc(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(I(92));if(Array.isArray(i)){if(!(1>=i.length))throw Error(I(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:ei(i)}}function Dp(e,t){var i=ei(t.value),n=ei(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),n!=null&&(e.defaultValue=""+n)}function Cc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var zp={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function jp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function go(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?jp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Er,Lp=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,i,n,r){MSApp.execUnsafeLocalFunction(function(){return e(t,i,n,r)})}:e}(function(e,t){if(e.namespaceURI!==zp.svg||"innerHTML"in e)e.innerHTML=t;else{for(Er=Er||document.createElement("div"),Er.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Er.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fn(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}function Tr(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var _i={animationend:Tr("Animation","AnimationEnd"),animationiteration:Tr("Animation","AnimationIteration"),animationstart:Tr("Animation","AnimationStart"),transitionend:Tr("Transition","TransitionEnd")},Ma={},Bp={};si&&(Bp=document.createElement("div").style,"AnimationEvent"in window||(delete _i.animationend.animation,delete _i.animationiteration.animation,delete _i.animationstart.animation),"TransitionEvent"in window||delete _i.transitionend.transition);function Qs(e){if(Ma[e])return Ma[e];if(!_i[e])return e;var t=_i[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Bp)return Ma[e]=t[i];return e}var Rp=Qs("animationend"),Vp=Qs("animationiteration"),_p=Qs("animationstart"),Op=Qs("transitionend"),Cn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ac=new(typeof WeakMap=="function"?WeakMap:Map);function Zl(e){var t=Ac.get(e);return t===void 0&&(t=new Map,Ac.set(e,t)),t}function Pi(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.effectTag&1026)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function Up(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ec(e){if(Pi(e)!==e)throw Error(I(188))}function mx(e){var t=e.alternate;if(!t){if(t=Pi(e),t===null)throw Error(I(188));return t!==e?null:e}for(var i=e,n=t;;){var r=i.return;if(r===null)break;var s=r.alternate;if(s===null){if(n=r.return,n!==null){i=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===i)return Ec(r),e;if(s===n)return Ec(r),t;s=s.sibling}throw Error(I(188))}if(i.return!==n.return)i=r,n=s;else{for(var a=!1,o=r.child;o;){if(o===i){a=!0,i=r,n=s;break}if(o===n){a=!0,n=r,i=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===i){a=!0,i=s,n=r;break}if(o===n){a=!0,n=s,i=r;break}o=o.sibling}if(!a)throw Error(I(189))}}if(i.alternate!==n)throw Error(I(190))}if(i.tag!==3)throw Error(I(188));return i.stateNode.current===i?e:t}function Wp(e){if(e=mx(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function tn(e,t){if(t==null)throw Error(I(30));return e==null?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function Ql(e,t,i){Array.isArray(e)?e.forEach(t,i):e&&t.call(i,e)}var gn=null;function vx(e){if(e){var t=e._dispatchListeners,i=e._dispatchInstances;if(Array.isArray(t))for(var n=0;n<t.length&&!e.isPropagationStopped();n++)gc(e,t[n],i[n]);else t&&gc(e,t,i);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function Fs(e){if(e!==null&&(gn=tn(gn,e)),e=gn,gn=null,e){if(Ql(e,vx),gn)throw Error(I(95));if(us)throw e=so,us=!1,so=null,e}}function Fl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}function Hp(e){if(!si)return!1;e="on"+e;var t=e in document;return t||(t=document.createElement("div"),t.setAttribute(e,"return;"),t=typeof t[e]=="function"),t}var hs=[];function $p(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>hs.length&&hs.push(e)}function Zp(e,t,i,n){if(hs.length){var r=hs.pop();return r.topLevelType=e,r.eventSystemFlags=n,r.nativeEvent=t,r.targetInst=i,r}return{topLevelType:e,eventSystemFlags:n,nativeEvent:t,targetInst:i,ancestors:[]}}function Qp(e){var t=e.targetInst,i=t;do{if(!i){e.ancestors.push(i);break}var n=i;if(n.tag===3)n=n.stateNode.containerInfo;else{for(;n.return;)n=n.return;n=n.tag!==3?null:n.stateNode.containerInfo}if(!n)break;t=i.tag,t!==5&&t!==6||e.ancestors.push(i),i=dr(n)}while(i);for(i=0;i<e.ancestors.length;i++){t=e.ancestors[i];var r=Fl(e.nativeEvent);n=e.topLevelType;var s=e.nativeEvent,a=e.eventSystemFlags;i===0&&(a|=64);for(var o=null,l=0;l<ds.length;l++){var u=ds[l];u&&(u=u.extractEvents(n,t,s,r,a))&&(o=tn(o,u))}Fs(o)}}function mo(e,t,i){if(!i.has(e)){switch(e){case"scroll":An(t,"scroll",!0);break;case"focus":case"blur":An(t,"focus",!0),An(t,"blur",!0),i.set("blur",null),i.set("focus",null);break;case"cancel":case"close":Hp(e)&&An(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:Cn.indexOf(e)===-1&&re(e,t)}i.set(e,null)}}var Fp,Gl,Gp,vo=!1,pt=[],Ft=null,Gt=null,Yt=null,Gn=new Map,Yn=new Map,mn=[],wo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),wx="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function yx(e,t){var i=Zl(t);wo.forEach(function(n){mo(n,t,i)}),wx.forEach(function(n){mo(n,t,i)})}function yo(e,t,i,n,r){return{blockedOn:e,topLevelType:t,eventSystemFlags:i|32,nativeEvent:r,container:n}}function Tc(e,t){switch(e){case"focus":case"blur":Ft=null;break;case"dragenter":case"dragleave":Gt=null;break;case"mouseover":case"mouseout":Yt=null;break;case"pointerover":case"pointerout":Gn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yn.delete(t.pointerId)}}function vn(e,t,i,n,r,s){return e===null||e.nativeEvent!==s?(e=yo(t,i,n,r,s),t!==null&&(t=hr(t),t!==null&&Gl(t)),e):(e.eventSystemFlags|=n,e)}function xx(e,t,i,n,r){switch(t){case"focus":return Ft=vn(Ft,e,t,i,n,r),!0;case"dragenter":return Gt=vn(Gt,e,t,i,n,r),!0;case"mouseover":return Yt=vn(Yt,e,t,i,n,r),!0;case"pointerover":var s=r.pointerId;return Gn.set(s,vn(Gn.get(s)||null,e,t,i,n,r)),!0;case"gotpointercapture":return s=r.pointerId,Yn.set(s,vn(Yn.get(s)||null,e,t,i,n,r)),!0}return!1}function Sx(e){var t=dr(e.target);if(t!==null){var i=Pi(t);if(i!==null){if(t=i.tag,t===13){if(t=Up(i),t!==null){e.blockedOn=t,fe.unstable_runWithPriority(e.priority,function(){Gp(i)});return}}else if(t===3&&i.stateNode.hydrate){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $r(e){if(e.blockedOn!==null)return!1;var t=Jl(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(t!==null){var i=hr(t);return i!==null&&Gl(i),e.blockedOn=t,!1}return!0}function Nc(e,t,i){$r(e)&&i.delete(t)}function Ix(){for(vo=!1;0<pt.length;){var e=pt[0];if(e.blockedOn!==null){e=hr(e.blockedOn),e!==null&&Fp(e);break}var t=Jl(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);t!==null?e.blockedOn=t:pt.shift()}Ft!==null&&$r(Ft)&&(Ft=null),Gt!==null&&$r(Gt)&&(Gt=null),Yt!==null&&$r(Yt)&&(Yt=null),Gn.forEach(Nc),Yn.forEach(Nc)}function wn(e,t){e.blockedOn===t&&(e.blockedOn=null,vo||(vo=!0,fe.unstable_scheduleCallback(fe.unstable_NormalPriority,Ix)))}function Yp(e){function t(r){return wn(r,e)}if(0<pt.length){wn(pt[0],e);for(var i=1;i<pt.length;i++){var n=pt[i];n.blockedOn===e&&(n.blockedOn=null)}}for(Ft!==null&&wn(Ft,e),Gt!==null&&wn(Gt,e),Yt!==null&&wn(Yt,e),Gn.forEach(t),Yn.forEach(t),i=0;i<mn.length;i++)n=mn[i],n.blockedOn===e&&(n.blockedOn=null);for(;0<mn.length&&(i=mn[0],i.blockedOn===null);)Sx(i),i.blockedOn===null&&mn.shift()}var Xp={},Jp=new Map,Yl=new Map,Mx=["abort","abort",Rp,"animationEnd",Vp,"animationIteration",_p,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Op,"transitionEnd","waiting","waiting"];function Xl(e,t){for(var i=0;i<e.length;i+=2){var n=e[i],r=e[i+1],s="on"+(r[0].toUpperCase()+r.slice(1));s={phasedRegistrationNames:{bubbled:s,captured:s+"Capture"},dependencies:[n],eventPriority:t},Yl.set(n,t),Jp.set(n,s),Xp[r]=s}}Xl("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Xl("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Xl(Mx,2);for(var kc="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ba=0;ba<kc.length;ba++)Yl.set(kc[ba],0);var bx=fe.unstable_UserBlockingPriority,Cx=fe.unstable_runWithPriority,Zr=!0;function re(e,t){An(t,e,!1)}function An(e,t,i){var n=Yl.get(t);switch(n===void 0?2:n){case 0:n=Ax.bind(null,t,1,e);break;case 1:n=Ex.bind(null,t,1,e);break;default:n=Gs.bind(null,t,1,e)}i?e.addEventListener(t,n,!0):e.addEventListener(t,n,!1)}function Ax(e,t,i,n){di||Rl();var r=Gs,s=di;di=!0;try{Sp(r,e,t,i,n)}finally{(di=s)||Vl()}}function Ex(e,t,i,n){Cx(bx,Gs.bind(null,e,t,i,n))}function Gs(e,t,i,n){if(Zr)if(0<pt.length&&-1<wo.indexOf(e))e=yo(null,e,t,i,n),pt.push(e);else{var r=Jl(e,t,i,n);if(r===null)Tc(e,n);else if(-1<wo.indexOf(e))e=yo(r,e,t,i,n),pt.push(e);else if(!xx(r,e,t,i,n)){Tc(e,n),e=Zp(e,n,null,t);try{Mp(Qp,e)}finally{$p(e)}}}}function Jl(e,t,i,n){if(i=Fl(n),i=dr(i),i!==null){var r=Pi(i);if(r===null)i=null;else{var s=r.tag;if(s===13){if(i=Up(r),i!==null)return i;i=null}else if(s===3){if(r.stateNode.hydrate)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}e=Zp(e,n,i,t);try{Mp(Qp,e)}finally{$p(e)}return null}var Bn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tx=["Webkit","ms","Moz","O"];Object.keys(Bn).forEach(function(e){Tx.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Bn[t]=Bn[e]})});function Kp(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Bn.hasOwnProperty(e)&&Bn[e]?(""+t).trim():t+"px"}function qp(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var n=i.indexOf("--")===0,r=Kp(i,t[i],n);i==="float"&&(i="cssFloat"),n?e.setProperty(i,r):e[i]=r}}var Nx=Te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xo(e,t){if(t){if(Nx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(I(137,e,""));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(I(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(I(61))}if(t.style!=null&&typeof t.style!="object")throw Error(I(62,""))}}function So(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pc=zp.html;function Mt(e,t){e=e.nodeType===9||e.nodeType===11?e:e.ownerDocument;var i=Zl(e);t=Ll[t];for(var n=0;n<t.length;n++)mo(t[n],e,i)}function ps(){}function Io(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function Dc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zc(e,t){var i=Dc(e);e=0;for(var n;i;){if(i.nodeType===3){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Dc(i)}}function ef(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ef(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jc(){for(var e=window,t=Io();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Io(e.document)}return t}function Mo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var tf="$",nf="/$",Kl="$?",ql="$!",Ca=null,Aa=null;function rf(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function bo(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ea=typeof setTimeout=="function"?setTimeout:void 0,kx=typeof clearTimeout=="function"?clearTimeout:void 0;function Gi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function Lc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i===tf||i===ql||i===Kl){if(t===0)return e;t--}else i===nf&&t++}e=e.previousSibling}return null}var eu=Math.random().toString(36).slice(2),Ot="__reactInternalInstance$"+eu,fs="__reactEventHandlers$"+eu,cr="__reactContainere$"+eu;function dr(e){var t=e[Ot];if(t)return t;for(var i=e.parentNode;i;){if(t=i[cr]||i[Ot]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Lc(e);e!==null;){if(i=e[Ot])return i;e=Lc(e)}return t}e=i,i=e.parentNode}return null}function hr(e){return e=e[Ot]||e[cr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ci(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(I(33))}function tu(e){return e[fs]||null}function bt(e){do e=e.return;while(e&&e.tag!==5);return e||null}function sf(e,t){var i=e.stateNode;if(!i)return null;var n=jl(i);if(!n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(I(231,t,typeof i));return i}function Bc(e,t,i){(t=sf(e,i.dispatchConfig.phasedRegistrationNames[t]))&&(i._dispatchListeners=tn(i._dispatchListeners,t),i._dispatchInstances=tn(i._dispatchInstances,e))}function Px(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,i=[];t;)i.push(t),t=bt(t);for(t=i.length;0<t--;)Bc(i[t],"captured",e);for(t=0;t<i.length;t++)Bc(i[t],"bubbled",e)}}function Co(e,t,i){e&&i&&i.dispatchConfig.registrationName&&(t=sf(e,i.dispatchConfig.registrationName))&&(i._dispatchListeners=tn(i._dispatchListeners,t),i._dispatchInstances=tn(i._dispatchInstances,e))}function Dx(e){e&&e.dispatchConfig.registrationName&&Co(e._targetInst,null,e)}function nn(e){Ql(e,Px)}var Ut=null,iu=null,Qr=null;function af(){if(Qr)return Qr;var e,t=iu,i=t.length,n,r="value"in Ut?Ut.value:Ut.textContent,s=r.length;for(e=0;e<i&&t[e]===r[e];e++);var a=i-e;for(n=1;n<=a&&t[i-n]===r[s-n];n++);return Qr=r.slice(e,1<n?1-n:void 0)}function Fr(){return!0}function gs(){return!1}function Fe(e,t,i,n){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=i,e=this.constructor.Interface;for(var r in e)e.hasOwnProperty(r)&&((t=e[r])?this[r]=t(i):r==="target"?this.target=n:this[r]=i[r]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Fr:gs,this.isPropagationStopped=gs,this}Te(Fe.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=Fr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=Fr)},persist:function(){this.isPersistent=Fr},isPersistent:gs,destructor:function(){var e=this.constructor.Interface,t;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=gs,this._dispatchInstances=this._dispatchListeners=null}});Fe.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};Fe.extend=function(e){function t(){}function i(){return n.apply(this,arguments)}var n=this;t.prototype=n.prototype;var r=new t;return Te(r,i.prototype),i.prototype=r,i.prototype.constructor=i,i.Interface=Te({},n.Interface,e),i.extend=n.extend,of(i),i};of(Fe);function zx(e,t,i,n){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,e,t,i,n),r}return new this(e,t,i,n)}function jx(e){if(!(e instanceof this))throw Error(I(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function of(e){e.eventPool=[],e.getPooled=zx,e.release=jx}var Lx=Fe.extend({data:null}),Bx=Fe.extend({data:null}),Rx=[9,13,27,32],nu=si&&"CompositionEvent"in window,Rn=null;si&&"documentMode"in document&&(Rn=document.documentMode);var Vx=si&&"TextEvent"in window&&!Rn,lf=si&&(!nu||Rn&&8<Rn&&11>=Rn),Rc=String.fromCharCode(32),It={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Vc=!1;function uf(e,t){switch(e){case"keyup":return Rx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function cf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Oi=!1;function _x(e,t){switch(e){case"compositionend":return cf(t);case"keypress":return t.which!==32?null:(Vc=!0,Rc);case"textInput":return e=t.data,e===Rc&&Vc?null:e;default:return null}}function Ox(e,t){if(Oi)return e==="compositionend"||!nu&&uf(e,t)?(e=af(),Qr=iu=Ut=null,Oi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lf&&t.locale!=="ko"?null:t.data;default:return null}}var Ux={eventTypes:It,extractEvents:function(e,t,i,n){var r;if(nu)e:{switch(e){case"compositionstart":var s=It.compositionStart;break e;case"compositionend":s=It.compositionEnd;break e;case"compositionupdate":s=It.compositionUpdate;break e}s=void 0}else Oi?uf(e,i)&&(s=It.compositionEnd):e==="keydown"&&i.keyCode===229&&(s=It.compositionStart);return s?(lf&&i.locale!=="ko"&&(Oi||s!==It.compositionStart?s===It.compositionEnd&&Oi&&(r=af()):(Ut=n,iu="value"in Ut?Ut.value:Ut.textContent,Oi=!0)),s=Lx.getPooled(s,t,i,n),r?s.data=r:(r=cf(i),r!==null&&(s.data=r)),nn(s),r=s):r=null,(e=Vx?_x(e,i):Ox(e,i))?(t=Bx.getPooled(It.beforeInput,t,i,n),t.data=e,nn(t)):t=null,r===null?t:t===null?r:[r,t]}},Wx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function df(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Wx[e.type]:t==="textarea"}var hf={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function pf(e,t,i){return e=Fe.getPooled(hf.change,e,t,i),e.type="change",yp(i),nn(e),e}var Vn=null,Xn=null;function Hx(e){Fs(e)}function Ys(e){var t=Ci(e);if(kp(t))return e}function $x(e,t){if(e==="change")return t}var Ao=!1;si&&(Ao=Hp("input")&&(!document.documentMode||9<document.documentMode));function _c(){Vn&&(Vn.detachEvent("onpropertychange",ff),Xn=Vn=null)}function ff(e){if(e.propertyName==="value"&&Ys(Xn))if(e=pf(Xn,e,Fl(e)),di)Fs(e);else{di=!0;try{Bl(Hx,e)}finally{di=!1,Vl()}}}function Zx(e,t,i){e==="focus"?(_c(),Vn=t,Xn=i,Vn.attachEvent("onpropertychange",ff)):e==="blur"&&_c()}function Qx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ys(Xn)}function Fx(e,t){if(e==="click")return Ys(t)}function Gx(e,t){if(e==="input"||e==="change")return Ys(t)}var Yx={eventTypes:hf,_isInputEventSupported:Ao,extractEvents:function(e,t,i,n){var r=t?Ci(t):window,s=r.nodeName&&r.nodeName.toLowerCase();if(s==="select"||s==="input"&&r.type==="file")var a=$x;else if(df(r))if(Ao)a=Gx;else{a=Qx;var o=Zx}else(s=r.nodeName)&&s.toLowerCase()==="input"&&(r.type==="checkbox"||r.type==="radio")&&(a=Fx);if(a&&(a=a(e,t)))return pf(a,i,n);o&&o(e,r,t),e==="blur"&&(e=r._wrapperState)&&e.controlled&&r.type==="number"&&ho(r,"number",r.value)}},pr=Fe.extend({view:null,detail:null}),Xx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Xx[e])?!!t[e]:!1}function ru(){return Jx}var Oc=0,Uc=0,Wc=!1,Hc=!1,fr=pr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:ru,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Oc;return Oc=e.screenX,Wc?e.type==="mousemove"?e.screenX-t:0:(Wc=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Uc;return Uc=e.screenY,Hc?e.type==="mousemove"?e.screenY-t:0:(Hc=!0,0)}}),gf=fr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),yn={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Kx={eventTypes:yn,extractEvents:function(e,t,i,n,r){var s=e==="mouseover"||e==="pointerover",a=e==="mouseout"||e==="pointerout";if(s&&(r&32)===0&&(i.relatedTarget||i.fromElement)||!a&&!s)return null;if(s=n.window===n?n:(s=n.ownerDocument)?s.defaultView||s.parentWindow:window,a){if(a=t,t=(t=i.relatedTarget||i.toElement)?dr(t):null,t!==null){var o=Pi(t);(t!==o||t.tag!==5&&t.tag!==6)&&(t=null)}}else a=null;if(a===t)return null;if(e==="mouseout"||e==="mouseover")var l=fr,u=yn.mouseLeave,c=yn.mouseEnter,p="mouse";else(e==="pointerout"||e==="pointerover")&&(l=gf,u=yn.pointerLeave,c=yn.pointerEnter,p="pointer");if(e=a==null?s:Ci(a),s=t==null?s:Ci(t),u=l.getPooled(u,a,i,n),u.type=p+"leave",u.target=e,u.relatedTarget=s,i=l.getPooled(c,t,i,n),i.type=p+"enter",i.target=s,i.relatedTarget=e,n=a,p=t,n&&p)e:{for(l=n,c=p,a=0,e=l;e;e=bt(e))a++;for(e=0,t=c;t;t=bt(t))e++;for(;0<a-e;)l=bt(l),a--;for(;0<e-a;)c=bt(c),e--;for(;a--;){if(l===c||l===c.alternate)break e;l=bt(l),c=bt(c)}l=null}else l=null;for(c=l,l=[];n&&n!==c&&(a=n.alternate,!(a!==null&&a===c));)l.push(n),n=bt(n);for(n=[];p&&p!==c&&(a=p.alternate,!(a!==null&&a===c));)n.push(p),p=bt(p);for(p=0;p<l.length;p++)Co(l[p],"bubbled",u);for(p=n.length;0<p--;)Co(n[p],"captured",i);return(r&64)===0?[u]:[u,i]}};function qx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ai=typeof Object.is=="function"?Object.is:qx,eS=Object.prototype.hasOwnProperty;function Jn(e,t){if(Ai(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++)if(!eS.call(t,i[n])||!Ai(e[i[n]],t[i[n]]))return!1;return!0}var tS=si&&"documentMode"in document&&11>=document.documentMode,mf={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Ui=null,Eo=null,_n=null,To=!1;function $c(e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;return To||Ui==null||Ui!==Io(i)?null:(i=Ui,"selectionStart"in i&&Mo(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),_n&&Jn(_n,i)?null:(_n=i,e=Fe.getPooled(mf.select,Eo,e,t),e.type="select",e.target=Ui,nn(e),e))}var iS={eventTypes:mf,extractEvents:function(e,t,i,n,r,s){if(r=s||(n.window===n?n.document:n.nodeType===9?n:n.ownerDocument),!(s=!r)){e:{r=Zl(r),s=Ll.onSelect;for(var a=0;a<s.length;a++)if(!r.has(s[a])){r=!1;break e}r=!0}s=!r}if(s)return null;switch(r=t?Ci(t):window,e){case"focus":(df(r)||r.contentEditable==="true")&&(Ui=r,Eo=t,_n=null);break;case"blur":_n=Eo=Ui=null;break;case"mousedown":To=!0;break;case"contextmenu":case"mouseup":case"dragend":return To=!1,$c(i,n);case"selectionchange":if(tS)break;case"keydown":case"keyup":return $c(i,n)}return null}},nS=Fe.extend({animationName:null,elapsedTime:null,pseudoElement:null}),rS=Fe.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sS=pr.extend({relatedTarget:null});function Gr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}var aS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lS=pr.extend({key:function(e){if(e.key){var t=aS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?oS[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:ru,charCode:function(e){return e.type==="keypress"?Gr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),uS=fr.extend({dataTransfer:null}),cS=pr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:ru}),dS=Fe.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),hS=fr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),pS={eventTypes:Xp,extractEvents:function(e,t,i,n){var r=Jp.get(e);if(!r)return null;switch(e){case"keypress":if(Gr(i)===0)return null;case"keydown":case"keyup":e=lS;break;case"blur":case"focus":e=sS;break;case"click":if(i.button===2)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=uS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=cS;break;case Rp:case Vp:case _p:e=nS;break;case Op:e=dS;break;case"scroll":e=pr;break;case"wheel":e=hS;break;case"copy":case"cut":case"paste":e=rS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=gf;break;default:e=Fe}return t=e.getPooled(r,t,i,n),nn(t),t}};if(cs)throw Error(I(101));cs=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));vp();var fS=hr;jl=tu;gp=fS;mp=Ci;wp({SimpleEventPlugin:pS,EnterLeaveEventPlugin:Kx,ChangeEventPlugin:Yx,SelectEventPlugin:iS,BeforeInputEventPlugin:Ux});var No=[],Wi=-1;function ne(e){0>Wi||(e.current=No[Wi],No[Wi]=null,Wi--)}function le(e,t){Wi++,No[Wi]=e.current,e.current=t}var ti={},Me={current:ti},Be={current:!1},Ei=ti;function rn(e,t){var i=e.type.contextTypes;if(!i)return ti;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in i)r[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Re(e){return e=e.childContextTypes,e!=null}function ms(){ne(Be),ne(Me)}function Zc(e,t,i){if(Me.current!==ti)throw Error(I(168));le(Me,t),le(Be,i)}function vf(e,t,i){var n=e.stateNode;if(e=t.childContextTypes,typeof n.getChildContext!="function")return i;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(I(108,zt(t)||"Unknown",r));return Te({},i,{},n)}function Yr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ti,Ei=Me.current,le(Me,e),le(Be,Be.current),!0}function Qc(e,t,i){var n=e.stateNode;if(!n)throw Error(I(169));i?(e=vf(e,t,Ei),n.__reactInternalMemoizedMergedChildContext=e,ne(Be),ne(Me),le(Me,e)):ne(Be),le(Be,i)}var gS=fe.unstable_runWithPriority,su=fe.unstable_scheduleCallback,wf=fe.unstable_cancelCallback,Fc=fe.unstable_requestPaint,ko=fe.unstable_now,mS=fe.unstable_getCurrentPriorityLevel,Xs=fe.unstable_ImmediatePriority,yf=fe.unstable_UserBlockingPriority,xf=fe.unstable_NormalPriority,Sf=fe.unstable_LowPriority,If=fe.unstable_IdlePriority,Mf={},vS=fe.unstable_shouldYield,wS=Fc!==void 0?Fc:function(){},Et=null,Xr=null,Ta=!1,Gc=ko(),Ye=1e4>Gc?ko:function(){return ko()-Gc};function Js(){switch(mS()){case Xs:return 99;case yf:return 98;case xf:return 97;case Sf:return 96;case If:return 95;default:throw Error(I(332))}}function bf(e){switch(e){case 99:return Xs;case 98:return yf;case 97:return xf;case 96:return Sf;case 95:return If;default:throw Error(I(332))}}function ii(e,t){return e=bf(e),gS(e,t)}function Cf(e,t,i){return e=bf(e),su(e,t,i)}function Yc(e){return Et===null?(Et=[e],Xr=su(Xs,Af)):Et.push(e),Mf}function yt(){if(Xr!==null){var e=Xr;Xr=null,wf(e)}Af()}function Af(){if(!Ta&&Et!==null){Ta=!0;var e=0;try{var t=Et;ii(99,function(){for(;e<t.length;e++){var i=t[e];do i=i(!0);while(i!==null)}}),Et=null}catch(i){throw Et!==null&&(Et=Et.slice(e+1)),su(Xs,yt),i}finally{Ta=!1}}}function Jr(e,t,i){return i/=10,1073741821-(((1073741821-e+t/10)/i|0)+1)*i}function it(e,t){if(e&&e.defaultProps){t=Te({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i])}return t}var vs={current:null},ws=null,Hi=null,ys=null;function au(){ys=Hi=ws=null}function ou(e){var t=vs.current;ne(vs),e.type._context._currentValue=t}function Ef(e,t){for(;e!==null;){var i=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,i!==null&&i.childExpirationTime<t&&(i.childExpirationTime=t);else if(i!==null&&i.childExpirationTime<t)i.childExpirationTime=t;else break;e=e.return}}function Yi(e,t){ws=e,ys=Hi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.expirationTime>=t&&(ft=!0),e.firstContext=null)}function Je(e,t){if(ys!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(ys=e,t=1073741823),t={context:e,observedBits:t,next:null},Hi===null){if(ws===null)throw Error(I(308));Hi=t,ws.dependencies={expirationTime:0,firstContext:t,responders:null}}else Hi=Hi.next=t;return e._currentValue}var _t=!1;function lu(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function uu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function Xt(e,t){return e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null},e.next=e}function Jt(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}}function Xc(e,t){var i=e.alternate;i!==null&&uu(i,e),e=e.updateQueue,i=e.baseQueue,i===null?(e.baseQueue=t.next=t,t.next=t):(t.next=i.next,i.next=t)}function Kn(e,t,i,n){var r=e.updateQueue;_t=!1;var s=r.baseQueue,a=r.shared.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}s=a,r.shared.pending=null,o=e.alternate,o!==null&&(o=o.updateQueue,o!==null&&(o.baseQueue=a))}if(s!==null){o=s.next;var l=r.baseState,u=0,c=null,p=null,v=null;if(o!==null){var S=o;do{if(a=S.expirationTime,a<n){var y={expirationTime:S.expirationTime,suspenseConfig:S.suspenseConfig,tag:S.tag,payload:S.payload,callback:S.callback,next:null};v===null?(p=v=y,c=l):v=v.next=y,a>u&&(u=a)}else{v!==null&&(v=v.next={expirationTime:1073741823,suspenseConfig:S.suspenseConfig,tag:S.tag,payload:S.payload,callback:S.callback,next:null}),ng(a,S.suspenseConfig);e:{var x=e,d=S;switch(a=t,y=i,d.tag){case 1:if(x=d.payload,typeof x=="function"){l=x.call(y,l,a);break e}l=x;break e;case 3:x.effectTag=x.effectTag&-4097|64;case 0:if(x=d.payload,a=typeof x=="function"?x.call(y,l,a):x,a==null)break e;l=Te({},l,a);break e;case 2:_t=!0}}S.callback!==null&&(e.effectTag|=32,a=r.effects,a===null?r.effects=[S]:a.push(S))}if(S=S.next,S===null||S===o){if(a=r.shared.pending,a===null)break;S=s.next=a.next,a.next=o,r.baseQueue=s=a,r.shared.pending=null}}while(1)}v===null?c=l:v.next=p,r.baseState=c,r.baseQueue=v,ia(u),e.expirationTime=u,e.memoizedState=l}}function Jc(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(r!==null){if(n.callback=null,n=r,r=i,typeof n!="function")throw Error(I(191,n));n.call(r)}}}var On=rt.ReactCurrentBatchConfig,Tf=new Zs.Component().refs;function xs(e,t,i,n){t=e.memoizedState,i=i(n,t),i=i==null?t:Te({},t,i),e.memoizedState=i,e.expirationTime===0&&(e.updateQueue.baseState=i)}var Ks={isMounted:function(e){return(e=e._reactInternalFiber)?Pi(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternalFiber;var n=vt(),r=On.suspense;n=Si(n,e,r),r=Xt(n,r),r.payload=t,i!=null&&(r.callback=i),Jt(e,r),qt(e,n)},enqueueReplaceState:function(e,t,i){e=e._reactInternalFiber;var n=vt(),r=On.suspense;n=Si(n,e,r),r=Xt(n,r),r.tag=1,r.payload=t,i!=null&&(r.callback=i),Jt(e,r),qt(e,n)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var i=vt(),n=On.suspense;i=Si(i,e,n),n=Xt(i,n),n.tag=2,t!=null&&(n.callback=t),Jt(e,n),qt(e,i)}};function Kc(e,t,i,n,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,a):t.prototype&&t.prototype.isPureReactComponent?!Jn(i,n)||!Jn(r,s):!0}function Nf(e,t,i){var n=!1,r=ti,s=t.contextType;return typeof s=="object"&&s!==null?s=Je(s):(r=Re(t)?Ei:Me.current,n=t.contextTypes,s=(n=n!=null)?rn(e,r):ti),t=new t(i,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ks,e.stateNode=t,t._reactInternalFiber=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function qc(e,t,i,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&Ks.enqueueReplaceState(t,t.state,null)}function Po(e,t,i,n){var r=e.stateNode;r.props=i,r.state=e.memoizedState,r.refs=Tf,lu(e);var s=t.contextType;typeof s=="object"&&s!==null?r.context=Je(s):(s=Re(t)?Ei:Me.current,r.context=rn(e,s)),Kn(e,i,r,n),r.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(xs(e,t,s,i),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&Ks.enqueueReplaceState(r,r.state,null),Kn(e,i,r,n),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.effectTag|=4)}var Nr=Array.isArray;function xn(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(I(309));var n=i.stateNode}if(!n)throw Error(I(147,e));var r=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(s){var a=n.refs;a===Tf&&(a=n.refs={}),s===null?delete a[r]:a[r]=s},t._stringRef=r,t)}if(typeof e!="string")throw Error(I(284));if(!i._owner)throw Error(I(290,e))}return e}function kr(e,t){if(e.type!=="textarea")throw Error(I(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function kf(e){function t(d,h){if(e){var f=d.lastEffect;f!==null?(f.nextEffect=h,d.lastEffect=h):d.firstEffect=d.lastEffect=h,h.nextEffect=null,h.effectTag=8}}function i(d,h){if(!e)return null;for(;h!==null;)t(d,h),h=h.sibling;return null}function n(d,h){for(d=new Map;h!==null;)h.key!==null?d.set(h.key,h):d.set(h.index,h),h=h.sibling;return d}function r(d,h){return d=Ti(d,h),d.index=0,d.sibling=null,d}function s(d,h,f){return d.index=f,e?(f=d.alternate,f!==null?(f=f.index,f<h?(d.effectTag=2,h):f):(d.effectTag=2,h)):h}function a(d){return e&&d.alternate===null&&(d.effectTag=2),d}function o(d,h,f,g){return h===null||h.tag!==6?(h=ja(f,d.mode,g),h.return=d,h):(h=r(h,f),h.return=d,h)}function l(d,h,f,g){return h!==null&&h.elementType===f.type?(g=r(h,f.props),g.ref=xn(d,h,f),g.return=d,g):(g=ts(f.type,f.key,f.props,null,d.mode,g),g.ref=xn(d,h,f),g.return=d,g)}function u(d,h,f,g){return h===null||h.tag!==4||h.stateNode.containerInfo!==f.containerInfo||h.stateNode.implementation!==f.implementation?(h=La(f,d.mode,g),h.return=d,h):(h=r(h,f.children||[]),h.return=d,h)}function c(d,h,f,g,m){return h===null||h.tag!==7?(h=$t(f,d.mode,g,m),h.return=d,h):(h=r(h,f),h.return=d,h)}function p(d,h,f){if(typeof h=="string"||typeof h=="number")return h=ja(""+h,d.mode,f),h.return=d,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Cr:return f=ts(h.type,h.key,h.props,null,d.mode,f),f.ref=xn(d,null,h),f.return=d,f;case Vi:return h=La(h,d.mode,f),h.return=d,h}if(Nr(h)||fn(h))return h=$t(h,d.mode,f,null),h.return=d,h;kr(d,h)}return null}function v(d,h,f,g){var m=h!==null?h.key:null;if(typeof f=="string"||typeof f=="number")return m!==null?null:o(d,h,""+f,g);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Cr:return f.key===m?f.type===ci?c(d,h,f.props.children,g,m):l(d,h,f,g):null;case Vi:return f.key===m?u(d,h,f,g):null}if(Nr(f)||fn(f))return m!==null?null:c(d,h,f,g,null);kr(d,f)}return null}function S(d,h,f,g,m){if(typeof g=="string"||typeof g=="number")return d=d.get(f)||null,o(h,d,""+g,m);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Cr:return d=d.get(g.key===null?f:g.key)||null,g.type===ci?c(h,d,g.props.children,m,g.key):l(h,d,g,m);case Vi:return d=d.get(g.key===null?f:g.key)||null,u(h,d,g,m)}if(Nr(g)||fn(g))return d=d.get(f)||null,c(h,d,g,m,null);kr(h,g)}return null}function y(d,h,f,g){for(var m=null,w=null,b=h,E=h=0,N=null;b!==null&&E<f.length;E++){b.index>E?(N=b,b=null):N=b.sibling;var P=v(d,b,f[E],g);if(P===null){b===null&&(b=N);break}e&&b&&P.alternate===null&&t(d,b),h=s(P,h,E),w===null?m=P:w.sibling=P,w=P,b=N}if(E===f.length)return i(d,b),m;if(b===null){for(;E<f.length;E++)b=p(d,f[E],g),b!==null&&(h=s(b,h,E),w===null?m=b:w.sibling=b,w=b);return m}for(b=n(d,b);E<f.length;E++)N=S(b,d,E,f[E],g),N!==null&&(e&&N.alternate!==null&&b.delete(N.key===null?E:N.key),h=s(N,h,E),w===null?m=N:w.sibling=N,w=N);return e&&b.forEach(function(Q){return t(d,Q)}),m}function x(d,h,f,g){var m=fn(f);if(typeof m!="function")throw Error(I(150));if(f=m.call(f),f==null)throw Error(I(151));for(var w=m=null,b=h,E=h=0,N=null,P=f.next();b!==null&&!P.done;E++,P=f.next()){b.index>E?(N=b,b=null):N=b.sibling;var Q=v(d,b,P.value,g);if(Q===null){b===null&&(b=N);break}e&&b&&Q.alternate===null&&t(d,b),h=s(Q,h,E),w===null?m=Q:w.sibling=Q,w=Q,b=N}if(P.done)return i(d,b),m;if(b===null){for(;!P.done;E++,P=f.next())P=p(d,P.value,g),P!==null&&(h=s(P,h,E),w===null?m=P:w.sibling=P,w=P);return m}for(b=n(d,b);!P.done;E++,P=f.next())P=S(b,d,E,P.value,g),P!==null&&(e&&P.alternate!==null&&b.delete(P.key===null?E:P.key),h=s(P,h,E),w===null?m=P:w.sibling=P,w=P);return e&&b.forEach(function(K){return t(d,K)}),m}return function(d,h,f,g){var m=typeof f=="object"&&f!==null&&f.type===ci&&f.key===null;m&&(f=f.props.children);var w=typeof f=="object"&&f!==null;if(w)switch(f.$$typeof){case Cr:e:{for(w=f.key,m=h;m!==null;){if(m.key===w){switch(m.tag){case 7:if(f.type===ci){i(d,m.sibling),h=r(m,f.props.children),h.return=d,d=h;break e}break;default:if(m.elementType===f.type){i(d,m.sibling),h=r(m,f.props),h.ref=xn(d,m,f),h.return=d,d=h;break e}}i(d,m);break}else t(d,m);m=m.sibling}f.type===ci?(h=$t(f.props.children,d.mode,g,f.key),h.return=d,d=h):(g=ts(f.type,f.key,f.props,null,d.mode,g),g.ref=xn(d,h,f),g.return=d,d=g)}return a(d);case Vi:e:{for(m=f.key;h!==null;){if(h.key===m)if(h.tag===4&&h.stateNode.containerInfo===f.containerInfo&&h.stateNode.implementation===f.implementation){i(d,h.sibling),h=r(h,f.children||[]),h.return=d,d=h;break e}else{i(d,h);break}else t(d,h);h=h.sibling}h=La(f,d.mode,g),h.return=d,d=h}return a(d)}if(typeof f=="string"||typeof f=="number")return f=""+f,h!==null&&h.tag===6?(i(d,h.sibling),h=r(h,f),h.return=d,d=h):(i(d,h),h=ja(f,d.mode,g),h.return=d,d=h),a(d);if(Nr(f))return y(d,h,f,g);if(fn(f))return x(d,h,f,g);if(w&&kr(d,f),typeof f=="undefined"&&!m)switch(d.tag){case 1:case 0:throw d=d.type,Error(I(152,d.displayName||d.name||"Component"))}return i(d,h)}}var sn=kf(!0),cu=kf(!1),gr={},mt={current:gr},qn={current:gr},er={current:gr};function hi(e){if(e===gr)throw Error(I(174));return e}function Do(e,t){switch(le(er,t),le(qn,e),le(mt,gr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:go(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=go(t,e)}ne(mt),le(mt,t)}function an(){ne(mt),ne(qn),ne(er)}function ed(e){hi(er.current);var t=hi(mt.current),i=go(t,e.type);t!==i&&(le(qn,e),le(mt,i))}function du(e){qn.current===e&&(ne(mt),ne(qn))}var ae={current:0};function Ss(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data===Kl||i.data===ql))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.effectTag&64)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function hu(e,t){return{responder:e,props:t}}var Kr=rt.ReactCurrentDispatcher,Xe=rt.ReactCurrentBatchConfig,Wt=0,ue=null,Se=null,Ie=null,Is=!1;function Ue(){throw Error(I(321))}function pu(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Ai(e[i],t[i]))return!1;return!0}function fu(e,t,i,n,r,s){if(Wt=s,ue=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Kr.current=e===null||e.memoizedState===null?yS:xS,e=i(n,r),t.expirationTime===Wt){s=0;do{if(t.expirationTime=0,!(25>s))throw Error(I(301));s+=1,Ie=Se=null,t.updateQueue=null,Kr.current=SS,e=i(n,r)}while(t.expirationTime===Wt)}if(Kr.current=Cs,t=Se!==null&&Se.next!==null,Wt=0,Ie=Se=ue=null,Is=!1,t)throw Error(I(300));return e}function Xi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?ue.memoizedState=Ie=e:Ie=Ie.next=e,Ie}function un(){if(Se===null){var e=ue.alternate;e=e!==null?e.memoizedState:null}else e=Se.next;var t=Ie===null?ue.memoizedState:Ie.next;if(t!==null)Ie=t,Se=e;else{if(e===null)throw Error(I(310));Se=e,e={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Ie===null?ue.memoizedState=Ie=e:Ie=Ie.next=e}return Ie}function wi(e,t){return typeof t=="function"?t(e):t}function Pr(e){var t=un(),i=t.queue;if(i===null)throw Error(I(311));i.lastRenderedReducer=e;var n=Se,r=n.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}n.baseQueue=r=s,i.pending=null}if(r!==null){r=r.next,n=n.baseState;var o=a=s=null,l=r;do{var u=l.expirationTime;if(u<Wt){var c={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};o===null?(a=o=c,s=n):o=o.next=c,u>ue.expirationTime&&(ue.expirationTime=u,ia(u))}else o!==null&&(o=o.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),ng(u,l.suspenseConfig),n=l.eagerReducer===e?l.eagerState:e(n,l.action);l=l.next}while(l!==null&&l!==r);o===null?s=n:o.next=a,Ai(n,t.memoizedState)||(ft=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=o,i.lastRenderedState=n}return[t.memoizedState,i.dispatch]}function Dr(e){var t=un(),i=t.queue;if(i===null)throw Error(I(311));i.lastRenderedReducer=e;var n=i.dispatch,r=i.pending,s=t.memoizedState;if(r!==null){i.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);Ai(s,t.memoizedState)||(ft=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),i.lastRenderedState=s}return[s,n]}function Na(e){var t=Xi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:wi,lastRenderedState:e},e=e.dispatch=Bf.bind(null,ue,e),[t.memoizedState,e]}function zo(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},t=ue.updateQueue,t===null?(t={lastEffect:null},ue.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e)),e}function Pf(){return un().memoizedState}function jo(e,t,i,n){var r=Xi();ue.effectTag|=e,r.memoizedState=zo(1|t,i,void 0,n===void 0?null:n)}function gu(e,t,i,n){var r=un();n=n===void 0?null:n;var s=void 0;if(Se!==null){var a=Se.memoizedState;if(s=a.destroy,n!==null&&pu(n,a.deps)){zo(t,i,s,n);return}}ue.effectTag|=e,r.memoizedState=zo(1|t,i,s,n)}function td(e,t){return jo(516,4,e,t)}function Ms(e,t){return gu(516,4,e,t)}function Df(e,t){return gu(4,2,e,t)}function zf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jf(e,t,i){return i=i!=null?i.concat([e]):null,gu(4,2,zf.bind(null,t,e),i)}function mu(){}function id(e,t){return Xi().memoizedState=[e,t===void 0?null:t],e}function bs(e,t){var i=un();t=t===void 0?null:t;var n=i.memoizedState;return n!==null&&t!==null&&pu(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function Lf(e,t){var i=un();t=t===void 0?null:t;var n=i.memoizedState;return n!==null&&t!==null&&pu(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)}function vu(e,t,i){var n=Js();ii(98>n?98:n,function(){e(!0)}),ii(97<n?97:n,function(){var r=Xe.suspense;Xe.suspense=t===void 0?null:t;try{e(!1),i()}finally{Xe.suspense=r}})}function Bf(e,t,i){var n=vt(),r=On.suspense;n=Si(n,e,r),r={expirationTime:n,suspenseConfig:r,action:i,eagerReducer:null,eagerState:null,next:null};var s=t.pending;if(s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r,s=e.alternate,e===ue||s!==null&&s===ue)Is=!0,r.expirationTime=Wt,ue.expirationTime=Wt;else{if(e.expirationTime===0&&(s===null||s.expirationTime===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,i);if(r.eagerReducer=s,r.eagerState=o,Ai(o,a))return}catch{}finally{}qt(e,n)}}var Cs={readContext:Je,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useLayoutEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useResponder:Ue,useDeferredValue:Ue,useTransition:Ue},yS={readContext:Je,useCallback:id,useContext:Je,useEffect:td,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,jo(4,2,zf.bind(null,t,e),i)},useLayoutEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var i=Xi();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=Xi();return t=i!==void 0?i(t):t,n.memoizedState=n.baseState=t,e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=Bf.bind(null,ue,e),[n.memoizedState,e]},useRef:function(e){var t=Xi();return e={current:e},t.memoizedState=e},useState:Na,useDebugValue:mu,useResponder:hu,useDeferredValue:function(e,t){var i=Na(e),n=i[0],r=i[1];return td(function(){var s=Xe.suspense;Xe.suspense=t===void 0?null:t;try{r(e)}finally{Xe.suspense=s}},[e,t]),n},useTransition:function(e){var t=Na(!1),i=t[0];return t=t[1],[id(vu.bind(null,t,e),[t,e]),i]}},xS={readContext:Je,useCallback:bs,useContext:Je,useEffect:Ms,useImperativeHandle:jf,useLayoutEffect:Df,useMemo:Lf,useReducer:Pr,useRef:Pf,useState:function(){return Pr(wi)},useDebugValue:mu,useResponder:hu,useDeferredValue:function(e,t){var i=Pr(wi),n=i[0],r=i[1];return Ms(function(){var s=Xe.suspense;Xe.suspense=t===void 0?null:t;try{r(e)}finally{Xe.suspense=s}},[e,t]),n},useTransition:function(e){var t=Pr(wi),i=t[0];return t=t[1],[bs(vu.bind(null,t,e),[t,e]),i]}},SS={readContext:Je,useCallback:bs,useContext:Je,useEffect:Ms,useImperativeHandle:jf,useLayoutEffect:Df,useMemo:Lf,useReducer:Dr,useRef:Pf,useState:function(){return Dr(wi)},useDebugValue:mu,useResponder:hu,useDeferredValue:function(e,t){var i=Dr(wi),n=i[0],r=i[1];return Ms(function(){var s=Xe.suspense;Xe.suspense=t===void 0?null:t;try{r(e)}finally{Xe.suspense=s}},[e,t]),n},useTransition:function(e){var t=Dr(wi),i=t[0];return t=t[1],[bs(vu.bind(null,t,e),[t,e]),i]}},kt=null,Ht=null,yi=!1;function Rf(e,t){var i=gt(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=t,i.return=e,i.effectTag=8,e.lastEffect!==null?(e.lastEffect.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i}function nd(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function Lo(e){if(yi){var t=Ht;if(t){var i=t;if(!nd(e,t)){if(t=Gi(i.nextSibling),!t||!nd(e,t)){e.effectTag=e.effectTag&-1025|2,yi=!1,kt=e;return}Rf(kt,i)}kt=e,Ht=Gi(t.firstChild)}else e.effectTag=e.effectTag&-1025|2,yi=!1,kt=e}}function rd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;kt=e}function zr(e){if(e!==kt)return!1;if(!yi)return rd(e),yi=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!bo(t,e.memoizedProps))for(t=Ht;t;)Rf(e,t),t=Gi(t.nextSibling);if(rd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i===nf){if(t===0){Ht=Gi(e.nextSibling);break e}t--}else i!==tf&&i!==ql&&i!==Kl||t++}e=e.nextSibling}Ht=null}}else Ht=kt?Gi(e.stateNode.nextSibling):null;return!0}function ka(){Ht=kt=null,yi=!1}var IS=rt.ReactCurrentOwner,ft=!1;function We(e,t,i,n){t.child=e===null?cu(t,null,i,n):sn(t,e.child,i,n)}function sd(e,t,i,n,r){i=i.render;var s=t.ref;return Yi(t,r),n=fu(e,t,i,n,s,r),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),Pt(e,t,r)):(t.effectTag|=1,We(e,t,n,r),t.child)}function ad(e,t,i,n,r,s){if(e===null){var a=i.type;return typeof a=="function"&&!Iu(a)&&a.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=a,Vf(e,t,a,n,r,s)):(e=ts(i.type,null,n,null,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}return a=e.child,r<s&&(r=a.memoizedProps,i=i.compare,i=i!==null?i:Jn,i(r,n)&&e.ref===t.ref)?Pt(e,t,s):(t.effectTag|=1,e=Ti(a,n),e.ref=t.ref,e.return=t,t.child=e)}function Vf(e,t,i,n,r,s){return e!==null&&Jn(e.memoizedProps,n)&&e.ref===t.ref&&(ft=!1,r<s)?(t.expirationTime=e.expirationTime,Pt(e,t,s)):Bo(e,t,i,n,s)}function _f(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.effectTag|=128)}function Bo(e,t,i,n,r){var s=Re(i)?Ei:Me.current;return s=rn(t,s),Yi(t,r),i=fu(e,t,i,n,s,r),e!==null&&!ft?(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),Pt(e,t,r)):(t.effectTag|=1,We(e,t,i,r),t.child)}function od(e,t,i,n,r){if(Re(i)){var s=!0;Yr(t)}else s=!1;if(Yi(t,r),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Nf(t,i,n),Po(t,i,n,r),n=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=i.contextType;typeof u=="object"&&u!==null?u=Je(u):(u=Re(i)?Ei:Me.current,u=rn(t,u));var c=i.getDerivedStateFromProps,p=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&qc(t,a,n,u),_t=!1;var v=t.memoizedState;a.state=v,Kn(t,n,a,r),l=t.memoizedState,o!==n||v!==l||Be.current||_t?(typeof c=="function"&&(xs(t,i,c,n),l=t.memoizedState),(o=_t||Kc(t,i,o,n,v,l,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.effectTag|=4)):(typeof a.componentDidMount=="function"&&(t.effectTag|=4),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(t.effectTag|=4),n=!1)}else a=t.stateNode,uu(e,t),o=t.memoizedProps,a.props=t.type===t.elementType?o:it(t.type,o),l=a.context,u=i.contextType,typeof u=="object"&&u!==null?u=Je(u):(u=Re(i)?Ei:Me.current,u=rn(t,u)),c=i.getDerivedStateFromProps,(p=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&qc(t,a,n,u),_t=!1,l=t.memoizedState,a.state=l,Kn(t,n,a,r),v=t.memoizedState,o!==n||l!==v||Be.current||_t?(typeof c=="function"&&(xs(t,i,c,n),v=t.memoizedState),(c=_t||Kc(t,i,o,n,l,v,u))?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,u)),typeof a.componentDidUpdate=="function"&&(t.effectTag|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.effectTag|=256)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=n,t.memoizedState=v),a.props=n,a.state=v,a.context=u,n=c):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),n=!1);return Ro(e,t,i,n,s,r)}function Ro(e,t,i,n,r,s){_f(e,t);var a=(t.effectTag&64)!==0;if(!n&&!a)return r&&Qc(t,i,!1),Pt(e,t,s);n=t.stateNode,IS.current=t;var o=a&&typeof i.getDerivedStateFromError!="function"?null:n.render();return t.effectTag|=1,e!==null&&a?(t.child=sn(t,e.child,null,s),t.child=sn(t,null,o,s)):We(e,t,o,s),t.memoizedState=n.state,r&&Qc(t,i,!0),t.child}function ld(e){var t=e.stateNode;t.pendingContext?Zc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Zc(e,t.context,!1),Do(e,t.containerInfo)}var Pa={dehydrated:null,retryTime:0};function ud(e,t,i){var n=t.mode,r=t.pendingProps,s=ae.current,a=!1,o;if((o=(t.effectTag&64)!==0)||(o=(s&2)!==0&&(e===null||e.memoizedState!==null)),o?(a=!0,t.effectTag&=-65):e!==null&&e.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(s|=1),le(ae,s&1),e===null){if(r.fallback!==void 0&&Lo(t),a){if(a=r.fallback,r=$t(null,n,0,null),r.return=t,(t.mode&2)===0)for(e=t.memoizedState!==null?t.child.child:t.child,r.child=e;e!==null;)e.return=r,e=e.sibling;return i=$t(a,n,i,null),i.return=t,r.sibling=i,t.memoizedState=Pa,t.child=r,i}return n=r.children,t.memoizedState=null,t.child=cu(t,null,n,i)}if(e.memoizedState!==null){if(e=e.child,n=e.sibling,a){if(r=r.fallback,i=Ti(e,e.pendingProps),i.return=t,(t.mode&2)===0&&(a=t.memoizedState!==null?t.child.child:t.child,a!==e.child))for(i.child=a;a!==null;)a.return=i,a=a.sibling;return n=Ti(n,r),n.return=t,i.sibling=n,i.childExpirationTime=0,t.memoizedState=Pa,t.child=i,n}return i=sn(t,e.child,r.children,i),t.memoizedState=null,t.child=i}if(e=e.child,a){if(a=r.fallback,r=$t(null,n,0,null),r.return=t,r.child=e,e!==null&&(e.return=r),(t.mode&2)===0)for(e=t.memoizedState!==null?t.child.child:t.child,r.child=e;e!==null;)e.return=r,e=e.sibling;return i=$t(a,n,i,null),i.return=t,r.sibling=i,i.effectTag|=2,r.childExpirationTime=0,t.memoizedState=Pa,t.child=r,i}return t.memoizedState=null,t.child=sn(t,e,r.children,i)}function cd(e,t){e.expirationTime<t&&(e.expirationTime=t);var i=e.alternate;i!==null&&i.expirationTime<t&&(i.expirationTime=t),Ef(e.return,t)}function Da(e,t,i,n,r,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailExpiration:0,tailMode:r,lastEffect:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=i,a.tailExpiration=0,a.tailMode=r,a.lastEffect=s)}function dd(e,t,i){var n=t.pendingProps,r=n.revealOrder,s=n.tail;if(We(e,t,n.children,i),n=ae.current,(n&2)!==0)n=n&1|2,t.effectTag|=64;else{if(e!==null&&(e.effectTag&64)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cd(e,i);else if(e.tag===19)cd(e,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(le(ae,n),(t.mode&2)===0)t.memoizedState=null;else switch(r){case"forwards":for(i=t.child,r=null;i!==null;)e=i.alternate,e!==null&&Ss(e)===null&&(r=i),i=i.sibling;i=r,i===null?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),Da(t,!1,r,i,s,t.lastEffect);break;case"backwards":for(i=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Ss(e)===null){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}Da(t,!0,i,null,s,t.lastEffect);break;case"together":Da(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Pt(e,t,i){e!==null&&(t.dependencies=e.dependencies);var n=t.expirationTime;if(n!==0&&ia(n),t.childExpirationTime<i)return null;if(e!==null&&t.child!==e.child)throw Error(I(153));if(t.child!==null){for(e=t.child,i=Ti(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Ti(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}var Of,Vo,Uf,Wf;Of=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Vo=function(){};Uf=function(e,t,i,n,r){var s=e.memoizedProps;if(s!==n){var a=t.stateNode;switch(hi(mt.current),e=null,i){case"input":s=uo(a,s),n=uo(a,n),e=[];break;case"option":s=po(a,s),n=po(a,n),e=[];break;case"select":s=Te({},s,{value:void 0}),n=Te({},n,{value:void 0}),e=[];break;case"textarea":s=fo(a,s),n=fo(a,n),e=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(a.onclick=ps)}xo(i,n);var o,l;i=null;for(o in s)if(!n.hasOwnProperty(o)&&s.hasOwnProperty(o)&&s[o]!=null)if(o==="style")for(l in a=s[o],a)a.hasOwnProperty(l)&&(i||(i={}),i[l]="");else o!=="dangerouslySetInnerHTML"&&o!=="children"&&o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(en.hasOwnProperty(o)?e||(e=[]):(e=e||[]).push(o,null));for(o in n){var u=n[o];if(a=s!=null?s[o]:void 0,n.hasOwnProperty(o)&&u!==a&&(u!=null||a!=null))if(o==="style")if(a){for(l in a)!a.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(i||(i={}),i[l]="");for(l in u)u.hasOwnProperty(l)&&a[l]!==u[l]&&(i||(i={}),i[l]=u[l])}else i||(e||(e=[]),e.push(o,i)),i=u;else o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(e=e||[]).push(o,u)):o==="children"?a===u||typeof u!="string"&&typeof u!="number"||(e=e||[]).push(o,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&(en.hasOwnProperty(o)?(u!=null&&Mt(r,o),e||a===u||(e=[])):(e=e||[]).push(o,u))}i&&(e=e||[]).push("style",i),r=e,(t.updateQueue=r)&&(t.effectTag|=4)}};Wf=function(e,t,i,n){i!==n&&(t.effectTag|=4)};function jr(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function MS(e,t,i){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Re(t.type)&&ms(),null;case 3:return an(),ne(Be),ne(Me),i=t.stateNode,i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),e!==null&&e.child!==null||!zr(t)||(t.effectTag|=4),Vo(t),null;case 5:du(t),i=hi(er.current);var r=t.type;if(e!==null&&t.stateNode!=null)Uf(e,t,r,n,i),e.ref!==t.ref&&(t.effectTag|=128);else{if(!n){if(t.stateNode===null)throw Error(I(166));return null}if(e=hi(mt.current),zr(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[Ot]=t,n[fs]=s,r){case"iframe":case"object":case"embed":re("load",n);break;case"video":case"audio":for(e=0;e<Cn.length;e++)re(Cn[e],n);break;case"source":re("error",n);break;case"img":case"image":case"link":re("error",n),re("load",n);break;case"form":re("reset",n),re("submit",n);break;case"details":re("toggle",n);break;case"input":Ic(n,s),re("invalid",n),Mt(i,"onChange");break;case"select":n._wrapperState={wasMultiple:!!s.multiple},re("invalid",n),Mt(i,"onChange");break;case"textarea":bc(n,s),re("invalid",n),Mt(i,"onChange")}xo(r,s),e=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(e=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(e=["children",""+o]):en.hasOwnProperty(a)&&o!=null&&Mt(i,a)}switch(r){case"input":Ar(n),Mc(n,s,!0);break;case"textarea":Ar(n),Cc(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=ps)}i=e,t.updateQueue=i,i!==null&&(t.effectTag|=4)}else{switch(a=i.nodeType===9?i:i.ownerDocument,e===Pc&&(e=jp(r)),e===Pc?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[Ot]=t,e[fs]=n,Of(e,t,!1,!1),t.stateNode=e,a=So(r,n),r){case"iframe":case"object":case"embed":re("load",e),o=n;break;case"video":case"audio":for(o=0;o<Cn.length;o++)re(Cn[o],e);o=n;break;case"source":re("error",e),o=n;break;case"img":case"image":case"link":re("error",e),re("load",e),o=n;break;case"form":re("reset",e),re("submit",e),o=n;break;case"details":re("toggle",e),o=n;break;case"input":Ic(e,n),o=uo(e,n),re("invalid",e),Mt(i,"onChange");break;case"option":o=po(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=Te({},n,{value:void 0}),re("invalid",e),Mt(i,"onChange");break;case"textarea":bc(e,n),o=fo(e,n),re("invalid",e),Mt(i,"onChange");break;default:o=n}xo(r,o);var l=o;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?qp(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Lp(e,u)):s==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Fn(e,u):typeof u=="number"&&Fn(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(en.hasOwnProperty(s)?u!=null&&Mt(i,s):u!=null&&Ul(e,s,u,a))}switch(r){case"input":Ar(e),Mc(e,n,!1);break;case"textarea":Ar(e),Cc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ei(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Fi(e,!!n.multiple,i,!1):n.defaultValue!=null&&Fi(e,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=ps)}rf(r,n)&&(t.effectTag|=4)}t.ref!==null&&(t.effectTag|=128)}return null;case 6:if(e&&t.stateNode!=null)Wf(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(I(166));i=hi(er.current),hi(mt.current),zr(t)?(i=t.stateNode,n=t.memoizedProps,i[Ot]=t,i.nodeValue!==n&&(t.effectTag|=4)):(i=(i.nodeType===9?i:i.ownerDocument).createTextNode(n),i[Ot]=t,t.stateNode=i)}return null;case 13:return ne(ae),n=t.memoizedState,(t.effectTag&64)!==0?(t.expirationTime=i,t):(i=n!==null,n=!1,e===null?t.memoizedProps.fallback!==void 0&&zr(t):(r=e.memoizedState,n=r!==null,i||r===null||(r=e.child.sibling,r!==null&&(s=t.firstEffect,s!==null?(t.firstEffect=r,r.nextEffect=s):(t.firstEffect=t.lastEffect=r,r.nextEffect=null),r.effectTag=8))),i&&!n&&(t.mode&2)!==0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(ae.current&1)!==0?he===xi&&(he=Ts):((he===xi||he===Ts)&&(he=qs),ir!==0&&Ze!==null&&(gi(Ze,Ve),lg(Ze,ir)))),(i||n)&&(t.effectTag|=4),null);case 4:return an(),Vo(t),null;case 10:return ou(t),null;case 17:return Re(t.type)&&ms(),null;case 19:if(ne(ae),n=t.memoizedState,n===null)return null;if(r=(t.effectTag&64)!==0,s=n.rendering,s===null){if(r)jr(n,!1);else if(he!==xi||e!==null&&(e.effectTag&64)!==0)for(s=t.child;s!==null;){if(e=Ss(s),e!==null){for(t.effectTag|=64,jr(n,!1),r=e.updateQueue,r!==null&&(t.updateQueue=r,t.effectTag|=4),n.lastEffect===null&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=t.child;n!==null;)r=n,s=i,r.effectTag&=2,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null,e=r.alternate,e===null?(r.childExpirationTime=0,r.expirationTime=s,r.child=null,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null):(r.childExpirationTime=e.childExpirationTime,r.expirationTime=e.expirationTime,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,s=e.dependencies,r.dependencies=s===null?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),n=n.sibling;return le(ae,ae.current&1|2),t.child}s=s.sibling}}else{if(!r)if(e=Ss(s),e!==null){if(t.effectTag|=64,r=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.effectTag|=4),jr(n,!0),n.tail===null&&n.tailMode==="hidden"&&!s.alternate)return t=t.lastEffect=n.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Ye()-n.renderingStartTime>n.tailExpiration&&1<i&&(t.effectTag|=64,r=!0,jr(n,!1),t.expirationTime=t.childExpirationTime=i-1);n.isBackwards?(s.sibling=t.child,t.child=s):(i=n.last,i!==null?i.sibling=s:t.child=s,n.last=s)}return n.tail!==null?(n.tailExpiration===0&&(n.tailExpiration=Ye()+500),i=n.tail,n.rendering=i,n.tail=i.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=Ye(),i.sibling=null,t=ae.current,le(ae,r?t&1|2:t&1),i):null}throw Error(I(156,t.tag))}function bS(e){switch(e.tag){case 1:Re(e.type)&&ms();var t=e.effectTag;return t&4096?(e.effectTag=t&-4097|64,e):null;case 3:if(an(),ne(Be),ne(Me),t=e.effectTag,(t&64)!==0)throw Error(I(285));return e.effectTag=t&-4097|64,e;case 5:return du(e),null;case 13:return ne(ae),t=e.effectTag,t&4096?(e.effectTag=t&-4097|64,e):null;case 19:return ne(ae),null;case 4:return an(),null;case 10:return ou(e),null;default:return null}}function wu(e,t){return{value:e,source:t,stack:$l(t)}}var CS=typeof WeakSet=="function"?WeakSet:Set;function _o(e,t){var i=t.source,n=t.stack;n===null&&i!==null&&(n=$l(i)),i!==null&&zt(i.type),t=t.value,e!==null&&e.tag===1&&zt(e.type);try{console.error(t)}catch(r){setTimeout(function(){throw r})}}function AS(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(i){Ii(e,i)}}function hd(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Ii(e,i)}else t.current=null}function ES(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.effectTag&256&&e!==null){var i=e.memoizedProps,n=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?i:it(t.type,i),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(I(163))}function Hf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var n=i.destroy;i.destroy=void 0,n!==void 0&&n()}i=i.next}while(i!==t)}}function $f(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var n=i.create;i.destroy=n()}i=i.next}while(i!==t)}}function TS(e,t,i){switch(i.tag){case 0:case 11:case 15:case 22:$f(3,i);return;case 1:if(e=i.stateNode,i.effectTag&4)if(t===null)e.componentDidMount();else{var n=i.elementType===i.type?t.memoizedProps:it(i.type,t.memoizedProps);e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}t=i.updateQueue,t!==null&&Jc(i,t,e);return;case 3:if(t=i.updateQueue,t!==null){if(e=null,i.child!==null)switch(i.child.tag){case 5:e=i.child.stateNode;break;case 1:e=i.child.stateNode}Jc(i,t,e)}return;case 5:e=i.stateNode,t===null&&i.effectTag&4&&rf(i.type,i.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:i.memoizedState===null&&(i=i.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&Yp(i))));return;case 19:case 17:case 20:case 21:return}throw Error(I(163))}function pd(e,t,i){switch(typeof Fo=="function"&&Fo(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var n=e.next;ii(97<i?97:i,function(){var r=n;do{var s=r.destroy;if(s!==void 0){var a=t;try{s()}catch(o){Ii(a,o)}}r=r.next}while(r!==n)})}break;case 1:hd(t),i=t.stateNode,typeof i.componentWillUnmount=="function"&&AS(t,i);break;case 5:hd(t);break;case 4:Qf(e,t,i)}}function Zf(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,t!==null&&Zf(t)}function fd(e){return e.tag===5||e.tag===3||e.tag===4}function gd(e){e:{for(var t=e.return;t!==null;){if(fd(t)){var i=t;break e}t=t.return}throw Error(I(160))}switch(t=i.stateNode,i.tag){case 5:var n=!1;break;case 3:t=t.containerInfo,n=!0;break;case 4:t=t.containerInfo,n=!0;break;default:throw Error(I(161))}i.effectTag&16&&(Fn(t,""),i.effectTag&=-17);e:t:for(i=e;;){for(;i.sibling===null;){if(i.return===null||fd(i.return)){i=null;break e}i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.effectTag&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.effectTag&2)){i=i.stateNode;break e}}n?Oo(e,i,t):Uo(e,i,t)}function Oo(e,t,i){var n=e.tag,r=n===5||n===6;if(r)e=r?e.stateNode:e.stateNode.instance,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=ps));else if(n!==4&&(e=e.child,e!==null))for(Oo(e,t,i),e=e.sibling;e!==null;)Oo(e,t,i),e=e.sibling}function Uo(e,t,i){var n=e.tag,r=n===5||n===6;if(r)e=r?e.stateNode:e.stateNode.instance,t?i.insertBefore(e,t):i.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Uo(e,t,i),e=e.sibling;e!==null;)Uo(e,t,i),e=e.sibling}function Qf(e,t,i){for(var n=t,r=!1,s,a;;){if(!r){r=n.return;e:for(;;){if(r===null)throw Error(I(160));switch(s=r.stateNode,r.tag){case 5:a=!1;break e;case 3:s=s.containerInfo,a=!0;break e;case 4:s=s.containerInfo,a=!0;break e}r=r.return}r=!0}if(n.tag===5||n.tag===6){e:for(var o=e,l=n,u=i,c=l;;)if(pd(o,c,u),c.child!==null&&c.tag!==4)c.child.return=c,c=c.child;else{if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}a?(o=s,l=n.stateNode,o.nodeType===8?o.parentNode.removeChild(l):o.removeChild(l)):s.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){s=n.stateNode.containerInfo,a=!0,n.child.return=n,n=n.child;continue}}else if(pd(e,n,i),n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return,n.tag===4&&(r=!1)}n.sibling.return=n.return,n=n.sibling}}function za(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:Hf(3,t);return;case 1:return;case 5:var i=t.stateNode;if(i!=null){var n=t.memoizedProps,r=e!==null?e.memoizedProps:n;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,s!==null){for(i[fs]=n,e==="input"&&n.type==="radio"&&n.name!=null&&Pp(i,n),So(e,r),t=So(e,n),r=0;r<s.length;r+=2){var a=s[r],o=s[r+1];a==="style"?qp(i,o):a==="dangerouslySetInnerHTML"?Lp(i,o):a==="children"?Fn(i,o):Ul(i,a,o,t)}switch(e){case"input":co(i,n);break;case"textarea":Dp(i,n);break;case"select":t=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!n.multiple,e=n.value,e!=null?Fi(i,!!n.multiple,e,!1):t!==!!n.multiple&&(n.defaultValue!=null?Fi(i,!!n.multiple,n.defaultValue,!0):Fi(i,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(I(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:t=t.stateNode,t.hydrate&&(t.hydrate=!1,Yp(t.containerInfo));return;case 12:return;case 13:if(i=t,t.memoizedState===null?n=!1:(n=!0,i=t.child,Su=Ye()),i!==null)e:for(e=i;;){if(e.tag===5)s=e.stateNode,n?(s=s.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(s=e.stateNode,r=e.memoizedProps.style,r=r!=null&&r.hasOwnProperty("display")?r.display:null,s.style.display=Kp("display",r));else if(e.tag===6)e.stateNode.nodeValue=n?"":e.memoizedProps;else if(e.tag===13&&e.memoizedState!==null&&e.memoizedState.dehydrated===null){s=e.child.sibling,s.return=e,e=s;continue}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}md(t);return;case 19:md(t);return;case 17:return}throw Error(I(163))}function md(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new CS),t.forEach(function(n){var r=VS.bind(null,e,n);i.has(n)||(i.add(n),n.then(r,r))})}}var NS=typeof WeakMap=="function"?WeakMap:Map;function Ff(e,t,i){i=Xt(i,null),i.tag=3,i.payload={element:null};var n=t.value;return i.callback=function(){Ps||(Ps=!0,Wo=n),_o(e,t)},i}function Gf(e,t,i){i=Xt(i,null),i.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var r=t.value;i.payload=function(){return _o(e,t),n(r)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(i.callback=function(){typeof n!="function"&&(Kt===null?Kt=new Set([this]):Kt.add(this),_o(e,t));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),i}var kS=Math.ceil,As=rt.ReactCurrentDispatcher,Yf=rt.ReactCurrentOwner,pe=0,yu=8,st=16,wt=32,xi=0,Es=1,Xf=2,Ts=3,qs=4,xu=5,B=pe,Ze=null,O=null,Ve=0,he=xi,ea=null,Nt=1073741823,tr=1073741823,Ns=null,ir=0,ks=!1,Su=0,Jf=500,D=null,Ps=!1,Wo=null,Kt=null,Ds=!1,Un=null,En=90,pi=null,Wn=0,Ho=null,qr=0;function vt(){return(B&(st|wt))!==pe?1073741821-(Ye()/10|0):qr!==0?qr:qr=1073741821-(Ye()/10|0)}function Si(e,t,i){if(t=t.mode,(t&2)===0)return 1073741823;var n=Js();if((t&4)===0)return n===99?1073741823:1073741822;if((B&st)!==pe)return Ve;if(i!==null)e=Jr(e,i.timeoutMs|0||5e3,250);else switch(n){case 99:e=1073741823;break;case 98:e=Jr(e,150,100);break;case 97:case 96:e=Jr(e,5e3,250);break;case 95:e=2;break;default:throw Error(I(326))}return Ze!==null&&e===Ve&&--e,e}function qt(e,t){if(50<Wn)throw Wn=0,Ho=null,Error(I(185));if(e=ta(e,t),e!==null){var i=Js();t===1073741823?(B&yu)!==pe&&(B&(st|wt))===pe?$o(e):(Qe(e),B===pe&&yt()):Qe(e),(B&4)===pe||i!==98&&i!==99||(pi===null?pi=new Map([[e,t]]):(i=pi.get(e),(i===void 0||i>t)&&pi.set(e,t)))}}function ta(e,t){e.expirationTime<t&&(e.expirationTime=t);var i=e.alternate;i!==null&&i.expirationTime<t&&(i.expirationTime=t);var n=e.return,r=null;if(n===null&&e.tag===3)r=e.stateNode;else for(;n!==null;){if(i=n.alternate,n.childExpirationTime<t&&(n.childExpirationTime=t),i!==null&&i.childExpirationTime<t&&(i.childExpirationTime=t),n.return===null&&n.tag===3){r=n.stateNode;break}n=n.return}return r!==null&&(Ze===r&&(ia(t),he===qs&&gi(r,Ve)),lg(r,t)),r}function es(e){var t=e.lastExpiredTime;if(t!==0||(t=e.firstPendingTime,!og(e,t)))return t;var i=e.lastPingedTime;return e=e.nextKnownPendingLevel,e=i>e?i:e,2>=e&&t!==e?0:e}function Qe(e){if(e.lastExpiredTime!==0)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Yc($o.bind(null,e));else{var t=es(e),i=e.callbackNode;if(t===0)i!==null&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var n=vt();if(t===1073741823?n=99:t===1||t===2?n=95:(n=10*(1073741821-t)-10*(1073741821-n),n=0>=n?99:250>=n?98:5250>=n?97:95),i!==null){var r=e.callbackPriority;if(e.callbackExpirationTime===t&&r>=n)return;i!==Mf&&wf(i)}e.callbackExpirationTime=t,e.callbackPriority=n,t=t===1073741823?Yc($o.bind(null,e)):Cf(n,Kf.bind(null,e),{timeout:10*(1073741821-t)-Ye()}),e.callbackNode=t}}}function Kf(e,t){if(qr=0,t)return t=vt(),Go(e,t),Qe(e),null;var i=es(e);if(i!==0){if(t=e.callbackNode,(B&(st|wt))!==pe)throw Error(I(327));if(cn(),e===Ze&&i===Ve||fi(e,i),O!==null){var n=B;B|=st;var r=ig();do try{zS();break}catch(o){tg(e,o)}while(1);if(au(),B=n,As.current=r,he===Es)throw t=ea,fi(e,i),gi(e,i),Qe(e),t;if(O===null)switch(r=e.finishedWork=e.current.alternate,e.finishedExpirationTime=i,n=he,Ze=null,n){case xi:case Es:throw Error(I(345));case Xf:Go(e,2<i?2:i);break;case Ts:if(gi(e,i),n=e.lastSuspendedTime,i===n&&(e.nextKnownPendingLevel=Zo(r)),Nt===1073741823&&(r=Su+Jf-Ye(),10<r)){if(ks){var s=e.lastPingedTime;if(s===0||s>=i){e.lastPingedTime=i,fi(e,i);break}}if(s=es(e),s!==0&&s!==i)break;if(n!==0&&n!==i){e.lastPingedTime=n;break}e.timeoutHandle=Ea(ui.bind(null,e),r);break}ui(e);break;case qs:if(gi(e,i),n=e.lastSuspendedTime,i===n&&(e.nextKnownPendingLevel=Zo(r)),ks&&(r=e.lastPingedTime,r===0||r>=i)){e.lastPingedTime=i,fi(e,i);break}if(r=es(e),r!==0&&r!==i)break;if(n!==0&&n!==i){e.lastPingedTime=n;break}if(tr!==1073741823?n=10*(1073741821-tr)-Ye():Nt===1073741823?n=0:(n=10*(1073741821-Nt)-5e3,r=Ye(),i=10*(1073741821-i)-r,n=r-n,0>n&&(n=0),n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*kS(n/1960))-n,i<n&&(n=i)),10<n){e.timeoutHandle=Ea(ui.bind(null,e),n);break}ui(e);break;case xu:if(Nt!==1073741823&&Ns!==null){s=Nt;var a=Ns;if(n=a.busyMinDurationMs|0,0>=n?n=0:(r=a.busyDelayMs|0,s=Ye()-(10*(1073741821-s)-(a.timeoutMs|0||5e3)),n=s<=r?0:r+n-s),10<n){gi(e,i),e.timeoutHandle=Ea(ui.bind(null,e),n);break}}ui(e);break;default:throw Error(I(329))}if(Qe(e),e.callbackNode===t)return Kf.bind(null,e)}}return null}function $o(e){var t=e.lastExpiredTime;if(t=t!==0?t:1073741823,(B&(st|wt))!==pe)throw Error(I(327));if(cn(),e===Ze&&t===Ve||fi(e,t),O!==null){var i=B;B|=st;var n=ig();do try{DS();break}catch(r){tg(e,r)}while(1);if(au(),B=i,As.current=n,he===Es)throw i=ea,fi(e,t),gi(e,t),Qe(e),i;if(O!==null)throw Error(I(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Ze=null,ui(e),Qe(e)}return null}function PS(){if(pi!==null){var e=pi;pi=null,e.forEach(function(t,i){Go(i,t),Qe(i)}),yt()}}function qf(e,t){var i=B;B|=1;try{return e(t)}finally{B=i,B===pe&&yt()}}function eg(e,t){var i=B;B&=-2,B|=yu;try{return e(t)}finally{B=i,B===pe&&yt()}}function fi(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,kx(i)),O!==null)for(i=O.return;i!==null;){var n=i;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&ms();break;case 3:an(),ne(Be),ne(Me);break;case 5:du(n);break;case 4:an();break;case 13:ne(ae);break;case 19:ne(ae);break;case 10:ou(n)}i=i.return}Ze=e,O=Ti(e.current,null),Ve=t,he=xi,ea=null,tr=Nt=1073741823,Ns=null,ir=0,ks=!1}function tg(e,t){do{try{if(au(),Kr.current=Cs,Is)for(var i=ue.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}if(Wt=0,Ie=Se=ue=null,Is=!1,O===null||O.return===null)return he=Es,ea=t,O=null;e:{var r=e,s=O.return,a=O,o=t;if(t=Ve,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,o!==null&&typeof o=="object"&&typeof o.then=="function"){var l=o;if((a.mode&2)===0){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.expirationTime=u.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var c=(ae.current&1)!==0,p=s;do{var v;if(v=p.tag===13){var S=p.memoizedState;if(S!==null)v=S.dehydrated!==null;else{var y=p.memoizedProps;v=y.fallback===void 0?!1:y.unstable_avoidThisFallback!==!0?!0:!c}}if(v){var x=p.updateQueue;if(x===null){var d=new Set;d.add(l),p.updateQueue=d}else x.add(l);if((p.mode&2)===0){if(p.effectTag|=64,a.effectTag&=-2981,a.tag===1)if(a.alternate===null)a.tag=17;else{var h=Xt(1073741823,null);h.tag=2,Jt(a,h)}a.expirationTime=1073741823;break e}o=void 0,a=t;var f=r.pingCache;if(f===null?(f=r.pingCache=new NS,o=new Set,f.set(l,o)):(o=f.get(l),o===void 0&&(o=new Set,f.set(l,o))),!o.has(a)){o.add(a);var g=RS.bind(null,r,l,a);l.then(g,g)}p.effectTag|=4096,p.expirationTime=t;break e}p=p.return}while(p!==null);o=Error((zt(a.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`+$l(a))}he!==xu&&(he=Xf),o=wu(o,a),p=s;do{switch(p.tag){case 3:l=o,p.effectTag|=4096,p.expirationTime=t;var m=Ff(p,l,t);Xc(p,m);break e;case 1:l=o;var w=p.type,b=p.stateNode;if((p.effectTag&64)===0&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Kt===null||!Kt.has(b)))){p.effectTag|=4096,p.expirationTime=t;var E=Gf(p,l,t);Xc(p,E);break e}}p=p.return}while(p!==null)}O=sg(O)}catch(N){t=N;continue}break}while(1)}function ig(){var e=As.current;return As.current=Cs,e===null?Cs:e}function ng(e,t){e<Nt&&2<e&&(Nt=e),t!==null&&e<tr&&2<e&&(tr=e,Ns=t)}function ia(e){e>ir&&(ir=e)}function DS(){for(;O!==null;)O=rg(O)}function zS(){for(;O!==null&&!vS();)O=rg(O)}function rg(e){var t=ag(e.alternate,e,Ve);return e.memoizedProps=e.pendingProps,t===null&&(t=sg(e)),Yf.current=null,t}function sg(e){O=e;do{var t=O.alternate;if(e=O.return,(O.effectTag&2048)===0){if(t=MS(t,O,Ve),Ve===1||O.childExpirationTime!==1){for(var i=0,n=O.child;n!==null;){var r=n.expirationTime,s=n.childExpirationTime;r>i&&(i=r),s>i&&(i=s),n=n.sibling}O.childExpirationTime=i}if(t!==null)return t;e!==null&&(e.effectTag&2048)===0&&(e.firstEffect===null&&(e.firstEffect=O.firstEffect),O.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=O.firstEffect),e.lastEffect=O.lastEffect),1<O.effectTag&&(e.lastEffect!==null?e.lastEffect.nextEffect=O:e.firstEffect=O,e.lastEffect=O))}else{if(t=bS(O),t!==null)return t.effectTag&=2047,t;e!==null&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(t=O.sibling,t!==null)return t;O=e}while(O!==null);return he===xi&&(he=xu),null}function Zo(e){var t=e.expirationTime;return e=e.childExpirationTime,t>e?t:e}function ui(e){var t=Js();return ii(99,jS.bind(null,e,t)),null}function jS(e,t){do cn();while(Un!==null);if((B&(st|wt))!==pe)throw Error(I(327));var i=e.finishedWork,n=e.finishedExpirationTime;if(i===null)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,i===e.current)throw Error(I(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var r=Zo(i);if(e.firstPendingTime=r,n<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:n<=e.firstSuspendedTime&&(e.firstSuspendedTime=n-1),n<=e.lastPingedTime&&(e.lastPingedTime=0),n<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Ze&&(O=Ze=null,Ve=0),1<i.effectTag?i.lastEffect!==null?(i.lastEffect.nextEffect=i,r=i.firstEffect):r=i:r=i.firstEffect,r!==null){var s=B;B|=wt,Yf.current=null,Ca=Zr;var a=jc();if(Mo(a)){if("selectionStart"in a)var o={start:a.selectionStart,end:a.selectionEnd};else e:{o=(o=a.ownerDocument)&&o.defaultView||window;var l=o.getSelection&&o.getSelection();if(l&&l.rangeCount!==0){o=l.anchorNode;var u=l.anchorOffset,c=l.focusNode;l=l.focusOffset;try{o.nodeType,c.nodeType}catch{o=null;break e}var p=0,v=-1,S=-1,y=0,x=0,d=a,h=null;t:for(;;){for(var f;d!==o||u!==0&&d.nodeType!==3||(v=p+u),d!==c||l!==0&&d.nodeType!==3||(S=p+l),d.nodeType===3&&(p+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===a)break t;if(h===o&&++y===u&&(v=p),h===c&&++x===l&&(S=p),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}o=v===-1||S===-1?null:{start:v,end:S}}else o=null}o=o||{start:0,end:0}}else o=null;Aa={activeElementDetached:null,focusedElem:a,selectionRange:o},Zr=!1,D=r;do try{LS()}catch(P){if(D===null)throw Error(I(330));Ii(D,P),D=D.nextEffect}while(D!==null);D=r;do try{for(a=e,o=t;D!==null;){var g=D.effectTag;if(g&16&&Fn(D.stateNode,""),g&128){var m=D.alternate;if(m!==null){var w=m.ref;w!==null&&(typeof w=="function"?w(null):w.current=null)}}switch(g&1038){case 2:gd(D),D.effectTag&=-3;break;case 6:gd(D),D.effectTag&=-3,za(D.alternate,D);break;case 1024:D.effectTag&=-1025;break;case 1028:D.effectTag&=-1025,za(D.alternate,D);break;case 4:za(D.alternate,D);break;case 8:u=D,Qf(a,u,o),Zf(u)}D=D.nextEffect}}catch(P){if(D===null)throw Error(I(330));Ii(D,P),D=D.nextEffect}while(D!==null);if(w=Aa,m=jc(),g=w.focusedElem,o=w.selectionRange,m!==g&&g&&g.ownerDocument&&ef(g.ownerDocument.documentElement,g)){for(o!==null&&Mo(g)&&(m=o.start,w=o.end,w===void 0&&(w=m),"selectionStart"in g?(g.selectionStart=m,g.selectionEnd=Math.min(w,g.value.length)):(w=(m=g.ownerDocument||document)&&m.defaultView||window,w.getSelection&&(w=w.getSelection(),u=g.textContent.length,a=Math.min(o.start,u),o=o.end===void 0?a:Math.min(o.end,u),!w.extend&&a>o&&(u=o,o=a,a=u),u=zc(g,a),c=zc(g,o),u&&c&&(w.rangeCount!==1||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==c.node||w.focusOffset!==c.offset)&&(m=m.createRange(),m.setStart(u.node,u.offset),w.removeAllRanges(),a>o?(w.addRange(m),w.extend(c.node,c.offset)):(m.setEnd(c.node,c.offset),w.addRange(m)))))),m=[],w=g;w=w.parentNode;)w.nodeType===1&&m.push({element:w,left:w.scrollLeft,top:w.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<m.length;g++)w=m[g],w.element.scrollLeft=w.left,w.element.scrollTop=w.top}Zr=!!Ca,Aa=Ca=null,e.current=i,D=r;do try{for(g=e;D!==null;){var b=D.effectTag;if(b&36&&TS(g,D.alternate,D),b&128){m=void 0;var E=D.ref;if(E!==null){var N=D.stateNode;switch(D.tag){case 5:m=N;break;default:m=N}typeof E=="function"?E(m):E.current=m}}D=D.nextEffect}}catch(P){if(D===null)throw Error(I(330));Ii(D,P),D=D.nextEffect}while(D!==null);D=null,wS(),B=s}else e.current=i;if(Ds)Ds=!1,Un=e,En=t;else for(D=r;D!==null;)t=D.nextEffect,D.nextEffect=null,D=t;if(t=e.firstPendingTime,t===0&&(Kt=null),t===1073741823?e===Ho?Wn++:(Wn=0,Ho=e):Wn=0,typeof Qo=="function"&&Qo(i.stateNode,n),Qe(e),Ps)throw Ps=!1,e=Wo,Wo=null,e;return(B&yu)!==pe||yt(),null}function LS(){for(;D!==null;){var e=D.effectTag;(e&256)!==0&&ES(D.alternate,D),(e&512)===0||Ds||(Ds=!0,Cf(97,function(){return cn(),null})),D=D.nextEffect}}function cn(){if(En!==90){var e=97<En?97:En;return En=90,ii(e,BS)}}function BS(){if(Un===null)return!1;var e=Un;if(Un=null,(B&(st|wt))!==pe)throw Error(I(331));var t=B;for(B|=wt,e=e.current.firstEffect;e!==null;){try{var i=e;if((i.effectTag&512)!==0)switch(i.tag){case 0:case 11:case 15:case 22:Hf(5,i),$f(5,i)}}catch(n){if(e===null)throw Error(I(330));Ii(e,n)}i=e.nextEffect,e.nextEffect=null,e=i}return B=t,yt(),!0}function vd(e,t,i){t=wu(i,t),t=Ff(e,t,1073741823),Jt(e,t),e=ta(e,1073741823),e!==null&&Qe(e)}function Ii(e,t){if(e.tag===3)vd(e,e,t);else for(var i=e.return;i!==null;){if(i.tag===3){vd(i,e,t);break}else if(i.tag===1){var n=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Kt===null||!Kt.has(n))){e=wu(t,e),e=Gf(i,e,1073741823),Jt(i,e),i=ta(i,1073741823),i!==null&&Qe(i);break}}i=i.return}}function RS(e,t,i){var n=e.pingCache;n!==null&&n.delete(t),Ze===e&&Ve===i?he===qs||he===Ts&&Nt===1073741823&&Ye()-Su<Jf?fi(e,Ve):ks=!0:og(e,i)&&(t=e.lastPingedTime,t!==0&&t<i||(e.lastPingedTime=i,Qe(e)))}function VS(e,t){var i=e.stateNode;i!==null&&i.delete(t),t=0,t===0&&(t=vt(),t=Si(t,e,null)),e=ta(e,t),e!==null&&Qe(e)}var ag;ag=function(e,t,i){var n=t.expirationTime;if(e!==null){var r=t.pendingProps;if(e.memoizedProps!==r||Be.current)ft=!0;else{if(n<i){switch(ft=!1,t.tag){case 3:ld(t),ka();break;case 5:if(ed(t),t.mode&4&&i!==1&&r.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:Re(t.type)&&Yr(t);break;case 4:Do(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value,r=t.type._context,le(vs,r._currentValue),r._currentValue=n;break;case 13:if(t.memoizedState!==null)return n=t.child.childExpirationTime,n!==0&&n>=i?ud(e,t,i):(le(ae,ae.current&1),t=Pt(e,t,i),t!==null?t.sibling:null);le(ae,ae.current&1);break;case 19:if(n=t.childExpirationTime>=i,(e.effectTag&64)!==0){if(n)return dd(e,t,i);t.effectTag|=64}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null),le(ae,ae.current),!n)return null}return Pt(e,t,i)}ft=!1}}else ft=!1;switch(t.expirationTime=0,t.tag){case 2:if(n=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,r=rn(t,Me.current),Yi(t,i),r=fu(null,t,n,e,r,i),t.effectTag|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Re(n)){var s=!0;Yr(t)}else s=!1;t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,lu(t);var a=n.getDerivedStateFromProps;typeof a=="function"&&xs(t,n,a,e),r.updater=Ks,t.stateNode=r,r._reactInternalFiber=t,Po(t,n,e,i),t=Ro(null,t,n,!0,s,i)}else t.tag=0,We(null,t,r,i),t=t.child;return t;case 16:e:{if(r=t.elementType,e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,px(r),r._status!==1)throw r._result;switch(r=r._result,t.type=r,s=t.tag=US(r),e=it(r,e),s){case 0:t=Bo(null,t,r,e,i);break e;case 1:t=od(null,t,r,e,i);break e;case 11:t=sd(null,t,r,e,i);break e;case 14:t=ad(null,t,r,it(r.type,e),n,i);break e}throw Error(I(306,r,""))}return t;case 0:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:it(n,r),Bo(e,t,n,r,i);case 1:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:it(n,r),od(e,t,n,r,i);case 3:if(ld(t),n=t.updateQueue,e===null||n===null)throw Error(I(282));if(n=t.pendingProps,r=t.memoizedState,r=r!==null?r.element:null,uu(e,t),Kn(t,n,null,i),n=t.memoizedState.element,n===r)ka(),t=Pt(e,t,i);else{if((r=t.stateNode.hydrate)&&(Ht=Gi(t.stateNode.containerInfo.firstChild),kt=t,r=yi=!0),r)for(i=cu(t,null,n,i),t.child=i;i;)i.effectTag=i.effectTag&-3|1024,i=i.sibling;else We(e,t,n,i),ka();t=t.child}return t;case 5:return ed(t),e===null&&Lo(t),n=t.type,r=t.pendingProps,s=e!==null?e.memoizedProps:null,a=r.children,bo(n,r)?a=null:s!==null&&bo(n,s)&&(t.effectTag|=16),_f(e,t),t.mode&4&&i!==1&&r.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(We(e,t,a,i),t=t.child),t;case 6:return e===null&&Lo(t),null;case 13:return ud(e,t,i);case 4:return Do(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=sn(t,null,n,i):We(e,t,n,i),t.child;case 11:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:it(n,r),sd(e,t,n,r,i);case 7:return We(e,t,t.pendingProps,i),t.child;case 8:return We(e,t,t.pendingProps.children,i),t.child;case 12:return We(e,t,t.pendingProps.children,i),t.child;case 10:e:{n=t.type._context,r=t.pendingProps,a=t.memoizedProps,s=r.value;var o=t.type._context;if(le(vs,o._currentValue),o._currentValue=s,a!==null)if(o=a.value,s=Ai(o,s)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(o,s):1073741823)|0,s===0){if(a.children===r.children&&!Be.current){t=Pt(e,t,i);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var u=l.firstContext;u!==null;){if(u.context===n&&(u.observedBits&s)!==0){o.tag===1&&(u=Xt(i,null),u.tag=2,Jt(o,u)),o.expirationTime<i&&(o.expirationTime=i),u=o.alternate,u!==null&&u.expirationTime<i&&(u.expirationTime=i),Ef(o.return,i),l.expirationTime<i&&(l.expirationTime=i);break}u=u.next}}else a=o.tag===10&&o.type===t.type?null:o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}We(e,t,r.children,i),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps,n=s.children,Yi(t,i),r=Je(r,s.unstable_observedBits),n=n(r),t.effectTag|=1,We(e,t,n,i),t.child;case 14:return r=t.type,s=it(r,t.pendingProps),s=it(r.type,s),ad(e,t,r,s,n,i);case 15:return Vf(e,t,t.type,t.pendingProps,n,i);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:it(n,r),e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Re(n)?(e=!0,Yr(t)):e=!1,Yi(t,i),Nf(t,n,r),Po(t,n,r,i),Ro(null,t,n,!0,e,i);case 19:return dd(e,t,i)}throw Error(I(156,t.tag))};var Qo=null,Fo=null;function _S(e){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var i=t.inject(e);Qo=function(n){try{t.onCommitFiberRoot(i,n,void 0,(n.current.effectTag&64)===64)}catch{}},Fo=function(n){try{t.onCommitFiberUnmount(i,n)}catch{}}}catch{}return!0}function OS(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function gt(e,t,i,n){return new OS(e,t,i,n)}function Iu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function US(e){if(typeof e=="function")return Iu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Wl)return 11;if(e===Hl)return 14}return 2}function Ti(e,t){var i=e.alternate;return i===null?(i=gt(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.effectTag=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childExpirationTime=e.childExpirationTime,i.expirationTime=e.expirationTime,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function ts(e,t,i,n,r,s){var a=2;if(n=e,typeof e=="function")Iu(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case ci:return $t(i.children,r,s,t);case hx:a=8,r|=7;break;case bp:a=8,r|=1;break;case Wr:return e=gt(12,i,t,r|8),e.elementType=Wr,e.type=Wr,e.expirationTime=s,e;case Hr:return e=gt(13,i,t,r),e.type=Hr,e.elementType=Hr,e.expirationTime=s,e;case lo:return e=gt(19,i,t,r),e.elementType=lo,e.expirationTime=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Cp:a=10;break e;case Ap:a=9;break e;case Wl:a=11;break e;case Hl:a=14;break e;case Ep:a=16,n=null;break e;case Tp:a=22;break e}throw Error(I(130,e==null?e:typeof e,""))}return t=gt(a,i,t,r),t.elementType=e,t.type=n,t.expirationTime=s,t}function $t(e,t,i,n){return e=gt(7,e,n,t),e.expirationTime=i,e}function ja(e,t,i){return e=gt(6,e,null,t),e.expirationTime=i,e}function La(e,t,i){return t=gt(4,e.children!==null?e.children:[],e.key,t),t.expirationTime=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function WS(e,t,i){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function og(e,t){var i=e.firstSuspendedTime;return e=e.lastSuspendedTime,i!==0&&i>=t&&e<=t}function gi(e,t){var i=e.firstSuspendedTime,n=e.lastSuspendedTime;i<t&&(e.firstSuspendedTime=t),(n>t||i===0)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function lg(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var i=e.firstSuspendedTime;i!==0&&(t>=i?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Go(e,t){var i=e.lastExpiredTime;(i===0||i>t)&&(e.lastExpiredTime=t)}function zs(e,t,i,n){var r=t.current,s=vt(),a=On.suspense;s=Si(s,r,a);e:if(i){i=i._reactInternalFiber;t:{if(Pi(i)!==i||i.tag!==1)throw Error(I(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(Re(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(o!==null);throw Error(I(171))}if(i.tag===1){var l=i.type;if(Re(l)){i=vf(i,l,o);break e}}i=o}else i=ti;return t.context===null?t.context=i:t.pendingContext=i,t=Xt(s,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),Jt(r,t),qt(r,s),s}function Ba(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function wd(e,t){e=e.memoizedState,e!==null&&e.dehydrated!==null&&e.retryTime<t&&(e.retryTime=t)}function Mu(e,t){wd(e,t),(e=e.alternate)&&wd(e,t)}function bu(e,t,i){i=i!=null&&i.hydrate===!0;var n=new WS(e,t,i),r=gt(3,null,null,t===2?7:t===1?3:0);n.current=r,r.stateNode=n,lu(r),e[cr]=n.current,i&&t!==0&&yx(e,e.nodeType===9?e:e.ownerDocument),this._internalRoot=n}bu.prototype.render=function(e){zs(e,this._internalRoot,null,null)};bu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;zs(null,e,null,function(){t[cr]=null})};function mr(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function HS(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var i;i=e.lastChild;)e.removeChild(i);return new bu(e,0,t?{hydrate:!0}:void 0)}function na(e,t,i,n,r){var s=i._reactRootContainer;if(s){var a=s._internalRoot;if(typeof r=="function"){var o=r;r=function(){var u=Ba(a);o.call(u)}}zs(t,a,e,r)}else{if(s=i._reactRootContainer=HS(i,n),a=s._internalRoot,typeof r=="function"){var l=r;r=function(){var u=Ba(a);l.call(u)}}eg(function(){zs(t,a,e,r)})}return Ba(a)}function $S(e,t,i){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vi,key:n==null?null:""+n,children:e,containerInfo:t,implementation:i}}Fp=function(e){if(e.tag===13){var t=Jr(vt(),150,100);qt(e,t),Mu(e,t)}};Gl=function(e){e.tag===13&&(qt(e,3),Mu(e,3))};Gp=function(e){if(e.tag===13){var t=vt();t=Si(t,e,null),qt(e,t),Mu(e,t)}};oo=function(e,t,i){switch(t){case"input":if(co(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var r=tu(n);if(!r)throw Error(I(90));kp(n),co(n,r)}}}break;case"textarea":Dp(e,i);break;case"select":t=i.value,t!=null&&Fi(e,!!i.multiple,t,!1)}};Bl=qf;Sp=function(e,t,i,n,r){var s=B;B|=4;try{return ii(98,e.bind(null,t,i,n,r))}finally{B=s,B===pe&&yt()}};Rl=function(){(B&(1|st|wt))===pe&&(PS(),cn())};Ip=function(e,t){var i=B;B|=2;try{return e(t)}finally{B=i,B===pe&&yt()}};function ug(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mr(t))throw Error(I(200));return $S(e,t,null,i)}var ZS={Events:[hr,Ci,tu,wp,ao,nn,function(e){Ql(e,Dx)},yp,xp,Gs,Fs,cn,{current:!1}]};(function(e){var t=e.findFiberByHostInstance;return _S(Te({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rt.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Wp(i),i===null?null:i.stateNode},findFiberByHostInstance:function(i){return t?t(i):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:dr,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZS;Ke.createPortal=ug;Ke.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternalFiber;if(t===void 0)throw typeof e.render=="function"?Error(I(188)):Error(I(268,Object.keys(e)));return e=Wp(t),e=e===null?null:e.stateNode,e};Ke.flushSync=function(e,t){if((B&(st|wt))!==pe)throw Error(I(187));var i=B;B|=1;try{return ii(99,e.bind(null,t))}finally{B=i,yt()}};Ke.hydrate=function(e,t,i){if(!mr(t))throw Error(I(200));return na(null,e,t,!0,i)};Ke.render=function(e,t,i){if(!mr(t))throw Error(I(200));return na(null,e,t,!1,i)};Ke.unmountComponentAtNode=function(e){if(!mr(e))throw Error(I(40));return e._reactRootContainer?(eg(function(){na(null,null,e,!1,function(){e._reactRootContainer=null,e[cr]=null})}),!0):!1};Ke.unstable_batchedUpdates=qf;Ke.unstable_createPortal=function(e,t){return ug(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Ke.unstable_renderSubtreeIntoContainer=function(e,t,i,n){if(!mr(i))throw Error(I(200));if(e==null||e._reactInternalFiber===void 0)throw Error(I(38));return na(e,t,i,!1,n)};Ke.version="16.14.0";function cg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cg)}catch(e){console.error(e)}}cg(),hp.exports=Ke;var yd=hp.exports,QS=Object.defineProperty,FS=Object.defineProperties,GS=Object.getOwnPropertyDescriptors,xd=Object.getOwnPropertySymbols,YS=Object.prototype.hasOwnProperty,XS=Object.prototype.propertyIsEnumerable,Sd=(e,t,i)=>t in e?QS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,$e=(e,t)=>{for(var i in t||(t={}))YS.call(t,i)&&Sd(e,i,t[i]);if(xd)for(var i of xd(t))XS.call(t,i)&&Sd(e,i,t[i]);return e};const dg={src:"",currentTime:0,hostTime:0,muted:!1,paused:!0,volume:1},hg={currentTimeMaxError:1,syncInterval:1e3,retryInterval:15e3,verbose:!1,log:console.log.bind(console)};let At=hg;function pg(e){At=$e($e({},hg),e)}function Lr(e,t){if(e.paused)return e.currentTime;const i=function(n){if(n.player)return n.player.beginTimestamp+n.player.progressTime;if(n.room)return n.room.calibrationTimestamp}(t);return i?e.currentTime+(i-e.hostTime)/1e3:e.currentTime}const JS=navigator.userAgent.includes("Safari"),KS=[".aac",".mid",".midi",".mp3",".ogg",".oga",".wav",".weba"];var qS=typeof global=="object"&&global&&global.Object===Object&&global,eI=typeof self=="object"&&self&&self.Object===Object&&self,fg=qS||eI||Function("return this")(),js=fg.Symbol,gg=Object.prototype,tI=gg.hasOwnProperty,iI=gg.toString,Sn=js?js.toStringTag:void 0,nI=Object.prototype.toString,Id=js?js.toStringTag:void 0;function rI(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Id&&Id in Object(e)?function(t){var i=tI.call(t,Sn),n=t[Sn];try{t[Sn]=void 0;var r=!0}catch{}var s=iI.call(t);return r&&(i?t[Sn]=n:delete t[Sn]),s}(e):function(t){return nI.call(t)}(e)}var sI=/\s/,aI=/^\s+/;function oI(e){return e&&e.slice(0,function(t){for(var i=t.length;i--&&sI.test(t.charAt(i)););return i}(e)+1).replace(aI,"")}function Yo(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var lI=/^[-+]0x[0-9a-f]+$/i,uI=/^0b[01]+$/i,cI=/^0o[0-7]+$/i,dI=parseInt;function Md(e){if(typeof e=="number")return e;if(function(n){return typeof n=="symbol"||function(r){return r!=null&&typeof r=="object"}(n)&&rI(n)=="[object Symbol]"}(e))return NaN;if(Yo(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Yo(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=oI(e);var i=uI.test(e);return i||cI.test(e)?dI(e.slice(2),i?2:8):lI.test(e)?NaN:+e}var Ra=function(){return fg.Date.now()},hI=Math.max,pI=Math.min;function Br(e,t,i){var n,r,s,a,o,l,u=0,c=!1,p=!1,v=!0;if(typeof e!="function")throw new TypeError("Expected a function");function S(g){var m=n,w=r;return n=r=void 0,u=g,a=e.apply(w,m)}function y(g){return u=g,o=setTimeout(d,t),c?S(g):a}function x(g){var m=g-l;return l===void 0||m>=t||m<0||p&&g-u>=s}function d(){var g=Ra();if(x(g))return h(g);o=setTimeout(d,function(m){var w=t-(m-l);return p?pI(w,s-(m-u)):w}(g))}function h(g){return o=void 0,v&&n?S(g):(n=r=void 0,a)}function f(){var g=Ra(),m=x(g);if(n=arguments,r=this,l=g,m){if(o===void 0)return y(l);if(p)return clearTimeout(o),o=setTimeout(d,t),S(l)}return o===void 0&&(o=setTimeout(d,t)),a}return t=Md(t)||0,Yo(i)&&(c=!!i.leading,s=(p="maxWait"in i)?hI(Md(i.maxWait)||0,t):s,v="trailing"in i?!!i.trailing:v),f.cancel=function(){o!==void 0&&clearTimeout(o),u=0,n=l=r=o=void 0},f.flush=function(){return o===void 0?a:h(Ra())},f}class bd extends ki.exports.Component{constructor(t){super(t),this.seeking=!1,this.mobileSeeking=!1,this.track=null,this.hoverTime=null,this.offset=0,this.secondsPrefix="00:00:",this.minutesPrefix="00:",this.seekPause=!1,this.handleTouchSeeking=i=>{let n=0;for(let r=0;r<i.changedTouches.length;r++)n=i.changedTouches[r].pageX;n=n<0?0:n,this.mobileSeeking&&this.changeCurrentTimePosition(n)},this.handleSeeking=i=>{this.seeking&&this.changeCurrentTimePosition(i.pageX)},this.setTrackWidthState=()=>{this.track&&this.setState({trackWidth:this.track.offsetWidth})},this.handleTrackHover=(i,n)=>{if(this.track){const r=this.props.scale||1;let s;s=i?0:(n.pageX-this.track.getBoundingClientRect().left)/r,this.setState({seekHoverPosition:s,trackWidth:this.track.offsetWidth})}},this.mouseSeekingHandler=i=>{this.setSeeking(!1,i),this.onMouseUp()},this.setSeeking=(i,n)=>{n.preventDefault(),this.handleSeeking(n),this.seeking=i,this.setState({seekHoverPosition:i?this.state.seekHoverPosition:0})},this.mobileTouchSeekingHandler=()=>{this.setMobileSeeking(!1)},this.setMobileSeeking=i=>{this.mobileSeeking=i,this.setState({seekHoverPosition:i?this.state.seekHoverPosition:0})},this.renderBufferProgress=()=>{if(this.props.buffered){const i=$e($e({},this.getPositionStyle(this.props.buffered)),this.props.bufferColor&&{backgroundColor:this.props.bufferColor});return H.createElement("div",{className:"buffered",style:i})}return null},this.renderProgress=()=>{const i=$e($e({},this.getPositionStyle(this.props.current)),this.props.sliderColor&&{backgroundColor:this.props.sliderColor});return H.createElement("div",{className:"connect",style:i})},this.renderHoverProgress=()=>{const i=$e($e({},this.getSeekHoverPosition()),this.props.sliderHoverColor&&{backgroundColor:this.props.sliderHoverColor});return H.createElement("div",{className:"seek-hover",style:i})},this.renderThumb=()=>H.createElement("div",{className:this.isThumbActive()?"thumb active":"thumb",style:this.getThumbHandlerPosition()},H.createElement("div",{style:{backgroundColor:this.props.thumbColor},className:"handler"})),this.onMouseDown=i=>{var n,r;this.props.pause&&!this.props.paused&&(this.props.pause(),this.seekPause=!0),this.setSeeking(!0,i),(r=(n=this.props).onSeekStart)==null||r.call(n)},this.onMouseUp=()=>{var i,n;this.props.play&&this.seekPause&&(this.props.play(),this.seekPause=!1),(n=(i=this.props).onSeekEnd)==null||n.call(i)},this.props.secondsPrefix&&(this.secondsPrefix=this.props.secondsPrefix),this.props.minutesPrefix&&(this.minutesPrefix=this.props.minutesPrefix),this.state={ready:!1,trackWidth:0,seekHoverPosition:0}}componentDidMount(){this.setTrackWidthState(),window.addEventListener("resize",this.setTrackWidthState),window.addEventListener("mousemove",this.handleSeeking),window.addEventListener("mouseup",this.mouseSeekingHandler),window.addEventListener("touchmove",this.handleTouchSeeking),window.addEventListener("touchend",this.mobileTouchSeekingHandler)}componentWillUnmount(){window.removeEventListener("resize",this.setTrackWidthState),window.removeEventListener("mousemove",this.handleSeeking),window.removeEventListener("mouseup",this.mouseSeekingHandler),window.removeEventListener("touchmove",this.handleTouchSeeking),window.removeEventListener("touchend",this.mobileTouchSeekingHandler)}changeCurrentTimePosition(t){if(this.track){const i=this.props.scale||1;let n=(t-this.track.getBoundingClientRect().left)/i;n=Math.min(this.state.trackWidth,Math.max(0,n)),this.setState({seekHoverPosition:n});const r=+(n/this.state.trackWidth*this.props.total).toFixed(0);this.props.onChange(r)}}getPositionStyle(t){return{transform:`scaleX(${100*t/this.props.total/100})`}}getThumbHandlerPosition(){return{transform:`translateX(${this.state.trackWidth/(this.props.total/this.props.current)}px)`}}getSeekHoverPosition(){return{transform:`scaleX(${100*this.state.seekHoverPosition/this.state.trackWidth/100})`}}getHoverTimePosition(){let t=0;return this.hoverTime&&(t=this.state.seekHoverPosition-this.hoverTime.offsetWidth/2,this.props.limitTimeTooltipBySides&&(t<0?t=0:t+this.hoverTime.offsetWidth>this.state.trackWidth&&(t=this.state.trackWidth-this.hoverTime.offsetWidth))),{transform:`translateX(${t}px)`}}secondsToTime(t){t=Math.round(t+this.offset);const i=Math.floor(t/3600),n=t%3600,r=Math.floor(n/60),s=Math.ceil(n%60);return{hh:i.toString(),mm:r<10?"0"+r:r.toString(),ss:s<10?"0"+s:s.toString()}}getHoverTime(){const t=100*this.state.seekHoverPosition/this.state.trackWidth,i=Math.floor(+t*(this.props.total/100)),n=this.secondsToTime(i);return this.props.total+this.offset<60?this.secondsPrefix+n.ss:this.props.total+this.offset<3600?this.minutesPrefix+n.mm+":"+n.ss:n.hh+":"+n.mm+":"+n.ss}isThumbActive(){return this.state.seekHoverPosition>0||this.seeking}drawHoverTime(){return this.props.hideHoverTime?null:H.createElement("div",{className:this.isThumbActive()?"hover-time active":"hover-time",style:this.getHoverTimePosition(),ref:t=>this.hoverTime=t},this.getHoverTime())}render(){return H.createElement("div",{className:"seek-slider"},H.createElement("div",{className:"track",ref:t=>this.track=t,onMouseMove:t=>this.handleTrackHover(!1,t),onMouseLeave:t=>this.handleTrackHover(!0,t),onMouseDown:this.onMouseDown,onTouchStart:t=>{this.setMobileSeeking(!0),this.onMouseDown(t)},onMouseUp:this.onMouseUp,onTouchEnd:this.onMouseUp},H.createElement("div",{className:"main"},this.renderBufferProgress(),this.renderHoverProgress(),this.renderProgress())),this.drawHoverTime(),this.renderThumb())}}class fI extends ki.exports.Component{constructor(t){super(t),this.stageVolume=0,this.updateVolumeTimer=0,this.onVolumeSeeking=!1,this.onClickOperationButton=()=>{const{paused:i}=this.props;i?this.props.play():this.props.pause()},this.operationButton=()=>{const{paused:i}=this.props;return i?H.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNOCA1LjE0djE0bDExLTdsLTExLTd6IiBmaWxsPSIjZmZmIj48L3BhdGg+PC9zdmc+Cg=="}):H.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTQgMTloNFY1aC00TTYgMTloNFY1SDZ2MTR6IiBmaWxsPSIjZmZmIj48L3BhdGg+PC9zdmc+Cg=="})},this.operationVolumeButton=()=>this.props.volume>.9?H.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTQgMy4yM3YyLjA2YzIuODkuODYgNSAzLjU0IDUgNi43MXMtMi4xMSA1Ljg0LTUgNi43djIuMDdjNC0uOTEgNy00LjQ5IDctOC43N2MwLTQuMjgtMy03Ljg2LTctOC43N00xNi41IDEyYzAtMS43Ny0xLTMuMjktMi41LTQuMDNWMTZjMS41LS43MSAyLjUtMi4yNCAyLjUtNE0zIDl2Nmg0bDUgNVY0TDcgOUgzeiIgZmlsbD0iI2ZmZiI+PC9wYXRoPjwvc3ZnPgo="}):this.props.volume===0?H.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNNyA5djZoNGw1IDVWNGwtNSA1SDd6IiBmaWxsPSIjZmZmIj48L3BhdGg+PC9zdmc+Cg=="}):H.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNNSA5djZoNGw1IDVWNEw5IDltOS41IDNjMC0xLjc3LTEtMy4yOS0yLjUtNC4wM1YxNmMxLjUtLjcxIDIuNS0yLjI0IDIuNS00eiIgZmlsbD0iI2ZmZiI+PC9wYXRoPjwvc3ZnPgo="}),this.handleClickVolume=()=>{this.props.volume===0?this.stageVolume!==0?this.props.setVolume(this.stageVolume):this.props.setVolume(1):(this.stageVolume=this.props.volume,this.props.setVolume(0))},this.onChange=i=>{this.setState({currentTime:i}),i&&this.changeTime(i)},this.changeTime=Br(i=>{this.props.setCurrentTime(i)},50),this.onVolumeChange=i=>{this.changeVolume(i),this.setState({seekVolume:i/100})},this.changeVolume=Br(i=>{this.props.setVolume(i/100)},50),this.onVolumeSeekStart=()=>{this.onVolumeSeeking=!0},this.onVolumeSeekEnd=Br(()=>{this.onVolumeSeeking=!1},500),this.onProgressSeekStart=()=>this.setState({isPlayerSeeking:!0}),this.onProgressSeekEnd=Br(()=>{this.setState({isPlayerSeeking:!1})},500),this.state={isPlayerSeeking:!1,isVolumeHover:!1,seekVolume:1,visible:!0,currentTime:0},this.stageVolume=t.volume}componentDidMount(){this.updateVolumeTimer=setInterval(()=>{this.onVolumeSeeking||this.setState({seekVolume:this.props.volume}),this.state.isPlayerSeeking||this.setState({currentTime:this.props.currentTime})},100)}componentWillUnmount(){this.updateVolumeTimer&&clearInterval(this.updateVolumeTimer)}render(){const{duration:t,currentTime:i}=this.props;return H.createElement("div",{className:"player-controller",style:{opacity:this.props.visible?"1":"0"}},H.createElement("div",{className:"player-controller-progress"},H.createElement(bd,{total:t,current:this.state.currentTime,onChange:this.onChange,buffered:this.props.buffered,bufferColor:"rgba(255,255,255,0.3)",hideHoverTime:!0,limitTimeTooltipBySides:!0,onSeekStart:this.onProgressSeekStart,onSeekEnd:this.onProgressSeekEnd,play:this.props.play,pause:this.props.pause,paused:this.props.paused,scale:this.props.scale})),H.createElement("div",{className:"player-controller-actions"},H.createElement("div",{className:"player-controller-actions-left"},H.createElement("div",{onClick:this.onClickOperationButton,className:"player-controller-play"},this.operationButton()),H.createElement("div",{className:"player-volume-box",onMouseEnter:()=>this.setState({isVolumeHover:!0}),onMouseLeave:()=>this.setState({isVolumeHover:!1})},H.createElement("div",{onClick:this.handleClickVolume,className:"player-volume"},this.operationVolumeButton()),H.createElement("div",{className:"player-volume-slider"},H.createElement(bd,{total:100,current:100*this.state.seekVolume,onChange:this.onVolumeChange,onSeekStart:this.onVolumeSeekStart,onSeekEnd:this.onVolumeSeekEnd,scale:this.props.scale,limitTimeTooltipBySides:!0,hideHoverTime:!0})))),H.createElement("div",{className:"player-mid-box-time"},Cd(Math.floor(i/1e3))," /"," ",Cd(Math.floor(t/1e3)))))}}function Cd(e){const t=e%60,i=(e-t)/60;if(i>=60){const n=i%60;return`${In((i-n)/60)}:${In(n)}:${In(t)}`}return`${In(i)}:${In(t)}`}function In(e){return e<=9?`0${e}`:`${e}`}let gI=99999;var Xo,ji;(ji=Xo||(Xo={}))[ji.Idle=0]="Idle",ji[ji.Playing=1]="Playing",ji[ji.Paused=2]="Paused";let Ce={};function ce(e,...t){At.verbose&&console.log(`[RTCEffect] ${e}`,...t)}function mI(e,t,i){function n(s){Ce[s].playState===0?(e.playEffect(s,i,0,1,0,100,!1,0).then(()=>{ce(">>> Play Success",{playingId:s})}),Ce[s].playState=1):ce(">>> Skip Play",{playingId:s,state:Ce[s].playState})}function r(s){Ce[s].playState=0,Ce[s].previousVideoJSAdvance=0,Ce[s].previousSeekTargetTime=0,Ce[s].previousBeginSeekTime=0}t.one("ready",()=>{var s;const a=((s=t==null?void 0:t.tagAttributes)==null?void 0:s.src)||"";a.endsWith("mp3")||a.endsWith("wav")||a.endsWith("m4a")||(ce(">>> Mute js player",{src:a}),t.muted(!0),t.muted=l=>!1);const o=function(){const l=gI--,u={playState:Xo.Idle,previousVideoJSAdvance:0,previousSeekTargetTime:0,previousBeginSeekTime:0};return Ce[l]=u,l}();ce(">>> Setup",{playingId:o,src:a}),e.addListener("error",l=>{ce(">>> Error",{soundId:l}),r(l)}),e.addListener("effectFinished",l=>{ce(">>> Finished",{soundId:l}),r(l)}),t.on("play",()=>{switch(Ce[o].playState){case 0:ce(">>> Start play",{playingId:o}),n(o);break;case 2:ce(">>> Resume play",{playingId:o}),e.resumeEffect(o),Ce[o].playState=1}}),t.on("pause",()=>{const l=Ce[o].playState;switch(l){case 1:ce(">>> Pause play",{playingId:o}),e.pauseEffect(o),Ce[o].playState=2;break;default:ce(">>> Skip Pause",{playingId:o,currenState:l})}}),t.on("timeupdate",()=>{e.getEffectCurrentPosition(o).then(l=>{const u=Ce[o],c=l/1e3,p=t.currentTime(),v=u.previousSeekTargetTime!==0&&u.previousBeginSeekTime!==0;if(ce(`>>> EffectSecond rtc: ${c} js: ${p} seeking: ${v}`,{playingId:o}),u.playState==0)return void(t.paused()||(ce(">>> Play effect due to time update.",{playingId:o}),n(o)));if(v&&c<u.previousSeekTargetTime)return;if(u.playState!==1)return void ce(">>> Skip timupdate",{playingId:o,state:u.playState,jsTime:t.currentTime(),rtcEffectTime:c});function S(x,d){e.setEffectPosition(d,1e3*x),u.previousBeginSeekTime=Date.now()/1e3,u.previousSeekTargetTime=x}const y=u.previousBeginSeekTime;if(l>0){const x=p-c,d=Math.abs(x),h=.5;if(d>h)if(v){const f=u.previousSeekTargetTime-c,g=Date.now()/1e3-y,m=g+(x>0?x:0),w=p+m;S(w,o),ce(">>> Start seeking after seeking lag",{jsPlayerTime:p,rtcEffectTime:c,jsPlayerTimerAdvance:x,lastSeekingCost:g,estimatedRTCLag:m,targetRTCSeekTime:w,previousBeginSeekTime:y,timeElapse:f})}else if(d>10)S(p,o),ce(">>> DirectSeek",{time:p,rtcEffectTime:c,jsPlayerTimerAdvance:x});else{const f=u.previousVideoJSAdvance,g=0,m=p+g;u.previousVideoJSAdvance=g,S(m,o),ce(">>> Start seeking with lag",{jsPlayerTime:p,rtcEffectTime:c,jsPlayerTimerAdvance:x,previousAdvance:f,estimatedRTCLag:g,targetRTCSeekTime:m})}else v&&(ce(">>> SeekingFinish no lag",{jsPlayerTime:p,rtcEffectTime:c,jsPlayerTimerAdvance:x,previousBeginSeekTime:y,rtcLagTolerance:h}),u.previousBeginSeekTime=0,u.previousSeekTargetTime=0)}})}),t.on("dispose",()=>{Ce[o].playState&&(e.stopEffect(o),delete Ce[o],ce(">>> Dispose",{playingId:o}))})})}class vI extends ki.exports.Component{constructor(){super(...arguments),this.putAttributes=t=>{const{context:i}=this.props,n=i.getAttributes()||{};for(const r in t)n[r]!==t[r]&&i.updateAttributes([r],t[r])}}render(){const{context:t}=this.props,i=t.getRoom(),n=i?void 0:t.getDisplayer(),r=this.putAttributes;return H.createElement(wI,{room:i,player:n,context:t,plugin:{putAttributes:r}})}}class wI extends ki.exports.Component{constructor(t){super(t),this.alertMask=null,this.container=H.createRef(),this.controllerHiddenTimer=0,this.syncPlayerTimer=0,this.retryCount=0,this.decreaseRetryTimer=0,this.noSoundSyncCount=0,this.showController=()=>{this.setState({controllerVisible:!0}),this.debounceHidingController()},this.play=()=>{var i;const n=(i=this.props.room)==null?void 0:i.calibrationTimestamp;this.debug(">>> play",{paused:!1,hostTime:n}),this.isEnabled()&&this.props.plugin.putAttributes({paused:!1,hostTime:n})},this.pause=()=>{const i=Lr(this.getAttributes(),this.props);this.debug(">>> pause",{paused:!0,currentTime:i}),this.isEnabled()&&this.props.plugin.putAttributes({paused:!0,currentTime:i})},this.setVolume=i=>{this.debug(">>> volume",{volume:i}),this.isEnabled()&&this.props.plugin.putAttributes({volume:i}),this.isEnabled()&&this.props.plugin.putAttributes({volume:i,muted:i===0})},this.setCurrentTime=i=>{var n;const r=(n=this.props.room)==null?void 0:n.calibrationTimestamp;this.debug(">>> seek",{currentTime:i/1e3,hostTime:r}),this.isEnabled()&&this.props.plugin.putAttributes({currentTime:i/1e3,hostTime:r})},this.resetPlayer=()=>{var i;(i=this.player)==null||i.autoplay(!1),this.state.NoSound||(this.debug(">>> ended",{paused:!0,currentTime:0}),this.isEnabled()&&this.props.plugin.putAttributes({paused:!0,currentTime:0}))},this.syncPlayerWithAttributes=()=>{var i;const n=this.getAttributes();if(!n)return;const r=this.player;if(!r||this.state.NoSound&&(this.noSoundSyncCount+=1)%8!=0)return;r.paused()!==n.paused&&(this.debug("<<< paused -> %o",n.paused),n.paused?r.pause():(i=r.play())==null||i.catch(this.catchPlayFail)),r.muted()!==n.muted&&(this.debug("<<< muted -> %o",n.muted),r.muted(n.muted)),r.volume()!==n.volume&&(this.debug("<<< volume -> %o",n.volume),r.volume(n.volume));const s=Lr(n,this.props);let a=At.currentTimeMaxError;this.state.NoSound&&(a*=3),s>r.duration()?this.resetPlayer():Math.abs(r.currentTime()-s)>a&&(this.debug("<<< currentTime -> %o",s),r.currentTime(s))},this.debounceHidingController=()=>{this.controllerHiddenTimer&&(clearTimeout(this.controllerHiddenTimer),this.controllerHiddenTimer=0),this.controllerHiddenTimer=setTimeout(()=>{this.setState({controllerVisible:!1}),this.controllerHiddenTimer=0},3e3)},this.decreaseRetryCount=()=>{this.player&&this.retryCount>0&&(this.retryCount=this.retryCount-1)},this.catchPlayFail=i=>{var n,r;const s=String(i);if(JS&&s.includes("NotAllowedError")||s.includes("interact"))(n=this.player)==null||n.autoplay("any"),this.setState({NoSound:!0});else{const a=(r=this.player)==null?void 0:r.error();a&&(this.retryCount<=3?(this.initPlayer(),this.retryCount=this.retryCount+1):(this.debug("catch videojs media error",a),this.setState({MediaError:!0}))),this.debug("catch error",i)}},this.fixPlayFail=()=>{this.debug("try to fix play state"),this.setState({NoSound:!1});const{muted:i,volume:n}=this.getAttributes();this.player&&(this.player.muted(i),this.player.volume(n))},this.initPlayer=async()=>{var i;(i=this.player)==null||i.dispose(),this.player=void 0,this.debug("creating elements ...");const{type:n,src:r,poster:s}=this.getAttributes(),a=document.createElement("div");a.setAttribute("data-vjs-player","");const o=document.createElement("video");o.className="video-js",s&&(o.poster=s),o.setAttribute("playsInline",""),o.setAttribute("webkit-playsinline","");const l=document.createElement("source");new URL(r).pathname.endsWith(".m3u8")?l.type="application/x-mpegURL":o.src=r,l.src=r,n&&(l.type=n),o.appendChild(l),a.appendChild(o),this.container.current.appendChild(a),await new Promise(p=>(window.requestAnimationFrame||window.setTimeout)(p)),this.debug("initializing videojs() ...");const u=Eu.default(o);this.player=u,window.player=u,u.one("loadedmetadata",this.gracefullyUpdate);const c=window.__mediaPlayerAudioEffectClient;c!==void 0&&mI(c,u,r),u.on("ready",()=>{var p;(p=At.onPlayer)==null||p.call(At,u),u.on("timeupdate",this.gracefullyUpdate),u.on("volumechange",this.gracefullyUpdate),u.on("seeked",this.gracefullyUpdate),u.on("play",this.gracefullyUpdate),u.on("pause",this.gracefullyUpdate),u.on("ended",this.resetPlayer)}),u.on("error",this.catchPlayFail),this.setState({MediaError:!1})},this.gracefullyUpdate=()=>this.setState({updater:!this.state.updater}),this.setupAlert=i=>{i&&(i.addEventListener("touchstart",this.fixPlayFail),i.addEventListener("click",this.fixPlayFail)),this.alertMask=i},this.setupReload=i=>{i&&(i.addEventListener("touchstart",this.initPlayer),i.addEventListener("click",this.initPlayer))},this.state={NoSound:!1,MediaError:!1,updater:!1,controllerVisible:!1},t.room&&function(i){if(!i.calibrationTimestamp)throw new Error("@netless/app-media-player@0.1.0-alpha.5 requires white-web-sdk@^2.13.8 to work properly.")}(t.room)}getAttributes(){const{context:t}=this.props;let i=t.getAttributes();if(i){if(i=$e($e({},dg),i),this.player){let r=Lr(i,this.props),s=this.player.duration();!i.paused&&r>s&&(n=$e({},i),i=FS(n,GS({currentTime:0,paused:!0})),this.resetPlayer())}var n;return i}}isShowingPoster(){const t=this.getAttributes();return!(t!=null&&t.src)||KS.some(i=>t.src.endsWith(i))}render(){var t,i;if(!this.props.room&&!this.props.player)return null;const n=this.getAttributes();if(!n)return null;const r=1e3*(((t=this.player)==null?void 0:t.duration())||1e3),s=((i=this.player)==null?void 0:i.bufferedPercent())||0;return H.createElement("div",{className:this.isEnabled()?"vjs-p":"vjs-p disabled",onMouseEnter:this.showController,onMouseMove:this.showController},H.createElement("div",{className:"video-js-plugin-player",ref:this.container}),this.isShowingPoster()&&H.createElement("div",{className:"video-js-plugin-poster"},n.poster&&H.createElement("img",{src:n.poster,alt:"",draggable:!1})),H.createElement(fI,{duration:r,volume:n.volume,setVolume:this.setVolume,paused:n.paused,play:this.play,pause:this.pause,currentTime:1e3*Lr(n,this.props),setCurrentTime:this.setCurrentTime,buffered:r*s,visible:!0}),this.state.NoSound&&H.createElement("div",{ref:this.setupAlert,className:"videojs-plugin-muted-alert"}),this.state.MediaError&&H.createElement("div",{className:"videojs-plugin-recovery-mode"},H.createElement("button",{ref:this.setupReload},"Reload Player")))}debug(t,...i){At.verbose&&At.log(`[MediaPlayer] ${t}`,...i)}componentDidMount(){this.debug("app version =","0.1.0-alpha.5"),this.debug("video.js version =",Eu.default.VERSION),this.initPlayer(),this.props.context.emitter.on("attributesUpdate",this.syncPlayerWithAttributes),this.syncPlayerTimer=setInterval(this.syncPlayerWithAttributes,At.syncInterval),this.decreaseRetryTimer=setInterval(this.decreaseRetryCount,At.retryInterval)}componentWillUnmount(){var t;this.debug("unmount"),this.props.context.emitter.off("attributesUpdate",this.syncPlayerWithAttributes),(t=this.player)==null||t.dispose(),clearInterval(this.syncPlayerTimer),clearInterval(this.decreaseRetryTimer)}isEnabled(){return this.props.context.getIsWritable()}}const Jo={kind:"MediaPlayer",setup(e){let t=e.getAttributes();if(!t||!t.src)return e.emitter.emit("destroy",{error:new Error("[MediaPlayer]: Missing 'attributes'.'src'.")});t=$e($e({},dg),t);const i=e.getBox();i.mountStyles(`.vjs-p{display:flex;flex-grow:1}.vjs-p *{pointer-events:auto}.vjs-p.disabled *{pointer-events:none}.vjs-p .video-js-plugin-poster{position:absolute;top:0;left:0;right:0;bottom:0;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgQAAACACAYAAAB0vHFxAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAACBKADAAQAAAABAAAAgAAAAACE3oPTAAAKXUlEQVR4Ae3dYW4ktxEG0LW9FwkC2McycokAOUGAXMLwtQwYvomdP4akHUnNnm6SVUU+/xqpe8ji+yiDWz3a/e7L5v/98se//3pL8K9//O+7t19Hv85eX7RP9vnllz2h4/rkd+wz+ir/0cLfjv/9t1/6igABAgQIENhRwIFgx9StmQABAgQIPAg4EDyA+JIAAQIECOwo8HXHRVvzPIHRzwBHjz9PKudMo31Hj59TdZ2qsueXvb5sO0GHIFsi6iFAgAABAgECOgQB6KbsJ5Dtt0L6rWyPkeRXO+fs+WWvL1v6OgTZElEPAQIECBAIENAhCEA3ZT8Bzwj7WUaMJL8I9X5zZs8ve339kugzkg5BH0ejECBAgACB0gIOBKXjUzwBAgQIEOgj4EDQx9EoBAgQIECgtIADQen4FE+AAAECBPoIOBD0cTQKAQIECBAoLeC3DErHp/iWgE8Zt4RyX5df7nxa1Y3Ob/T4rfWtdl2HYLVErYcAAQIECFwQWL5DsPoJcvX1XdjTpd4iv1JxvStWfu9IfCORwLP7U4cgUXhKIUCAAAECUQIOBFHy5iVAgAABAokEHAgShaEUAgQIECAQJXD7MwTPPqOIWujVeUevb/T4V9ftfecE5HfOKetd8suajLoiBHQIItTNSYAAAQIEkgnc7hAkW0/3ckb/e9qjx+8OYsBvBOT3DUe5L+RXLjIFDxTQIRiIa2gCBAgQIFBFoNkh2P0Z2+j1jx4/+0asvv7q9d/dH9XXX73+3fO7u/7W+3fbHzoErR3hOgECBAgQ2ECg2SHwjG2DXRC4xOj9tdufAHpHLb/eonPHk9+xd7TPcXX9r+oQ9Dc1IgECBAgQKCfgQFAuMgUTIECAAIH+Ag4E/U2NSIAAAQIEygk0P0MQvaLsz3hb9bWu840WOJ5ffsc+2a/KL3tC6jsSmL1/dQiO0nCNAAECBAhsItDsEMw+oTzrHl1f61OorevPrvfZ+6N9WvVmr09+xwnKr7ZP9vyOdcdfze7Tuz4dgvF7ygwECBAgQCC9QLNDkH0F0X+C45NdoHZ99rf8aguofqRA7/8/6BCMTMvYBAgQIECgiED5DkHvZyhFcjtdJp/TVClvlF/KWE4XJb/TVG68INB7f+kQXAjBWwgQIECAwGoCDgSrJWo9BAgQIEDggoADwQU0byFAgAABAqsJfO39DGI1IOuJFbA/Y/3vzi6/u4Kx7189v7vru/v+2HTfz65D8N7EdwgQIECAwHYCw3/LYLUT1HY7pLFg+TaAkl+WX/KAGuXJrwEUfLlaPjoEwRvG9AQIECBAIIPA8A5B779JKQOaGl4F5PtqUfGV/Cqm9lqz/F4tMr6qlo8OQcZdpCYCBAgQIDBZYHiHoNozlMn+5aeTb+0I5Se/2gK5q6/286VDkHs/qY4AAQIECEwRcCCYwmwSAgQIECCQW8CBIHc+qiNAgAABAlMEhn+GYMoqTEKAAAEC7wSqPcN+twDfmCqgQzCV22QECBAgQCCnQHiHoPoJtlV/63rObfFaVfX6X1dy7VX19Vev/1pqr++qvv7q9b8m4dVHAtny1SH4KCXfI0CAAAECmwmEdwiq/U1Om+2PL/Kpnbj85FdbYO3qs/186hCsvd+sjgABAgQInBJwIDjF5CYCBAgQILC2gAPB2vlaHQECBAgQOCUQ/hmCbJ+yPKW20U3yqR22/ORXW2Dt6qN/Ph/n1yFYe79ZHQECBAgQOCXgQHCKyU0ECBAgQGBtAQeCtfO1OgIECBAgcErAgeAUk5sIECBAgMDaAg4Ea+drdQQIECBA4JTA1+///OGnoztd52N/fC7g58PPx+e748sX+8P+qLQ/dAiO0nKNAAECBAhsIuBAsEnQlkmAAAECBI4EHAiOdFwjQIAAAQKbCDgQbBK0ZRIgQIAAgSMBB4IjHdcIECBAgMAmAuH/lsHP//zvb5tYl1ymfErG9lK0/F4oSr6QX8nYThcdne/j/DoEp6NzIwECBAgQWFfAgWDdbK2MAAECBAicFnAgOE3lRgIECBAgsK5A+GcIfv39Pz++5X18pvH2mtfzBeQz37znjPLrqTl/LPnNN585Y7Z8dQhmpm8uAgQIECCQVCC8Q1C9I9Cqv3U96b54Kat6/S8Lufii+vqr138xtpe3VV9/9fpfgvDiQ4Fs+eoQfBiTbxIgQIAAgb0EwjsEe3FbLQECBOYJZPsT6LyVm+mKgA7BFTXvIUCAAAECiwk4ECwWqOUQIECAAIErAg4EV9S8hwABAgQILCYw/DMEnmEttmMeliPfB5BiX8qvWGAP5crvASTZl9Xy0SFItoGUQ4AAAQIEIgSGdwiy/U1MEcgrzynf2unKT361BXJXX+3nS4cg935SHQECBAgQmCIwvENQ7RnKFPWFJpFv7TDlJ7/aArmrr/bzpUOQez+pjgABAgQITBH4Wu0EM0XFJGkE7M80UVwqRH6X2NK8afX87q7v7vvTBP13IToE2RJRDwECBAgQCBBwIAhANyUBAgQIEMgm4ECQLRH1ECBAgACBAIHhv2Uwek2rPcPp7cWnt+jc8eQ317v3bPLrLWq8twK995cOwVtdrwkQIECAwKYC5TsE1f4mqNn7jM9s8b7zya+v5+zR5DdbfK/5eu8vHYK99o/VEiBAgACBDwWaHYLezyg+rOLGN6Pra53QWtdvLP3UW6N9WkVmr09+xwnKr7ZP9vyOdcdfze7Tuz4dgvF7ygwECBAgQCC9QLNDEL2C3ieg3utp1de63rueZ8fLXt+z6+l9f3af7PX1zuPZ8bL7ZK/vWW/39xWYvT90CPrmZzQCBAgQIFBSwIGgZGyKJkCAAAECfQUcCPp6Go0AAQIECJQUaH6GIPpT1iVVFX1aIHp/zX5GdxqmyI3yKxLUJ2XK7xOYv78d7XNcXf+rOgT9TY1IgAABAgTKCTQ7BLv/CWr0+kePn31HVl9/9frv7o/q669e/+753V1/6/277Q8dgtaOcJ0AAQIECGwg0OwQbGBwuMTRz5BGj3+4OBdvC8jvNmHoAPIL5Td5MgEdgmSBKIcAAQIECEQI3O4QrP6MZfT6Ro8fsal2mlN+tdOWX+38VN9XQIegr6fRCBAgQIBASQEHgpKxKZoAAQIECPQVcCDo62k0AgQIECBQUuD2Zwiyr3r1Z4Srry/7/rpbn/zuCsa+X36x/mY/Fnh2f+oQHHu6SoAAAQIEthBYvkOwRYoW+anAsyfkTwdyIURAfiHs3SYdnd/o8btBFBlIh6BIUMokQIAAAQIjBRwIRuoamwABAgQIFBFwICgSlDIJECBAgMBIAQeCkbrGJkCAAAECRQQcCIoEpUwCBAgQIDBSwG8ZjNQ19nABnzIeTjx0AvkN5R0+ePb8stc3PKAnJ9AheBLM7QQIECBAYEUBHYIVU91oTf49+9phy09+IwXsr+d0dQie83I3AQIECBBYUkCHYMlY8yxq9DO80ePnkYypZLTv6PFj1PaZNXt+2evLtlN0CLIloh4CBAgQIBAg4EAQgG5KAgQIECCQTcCBIFsi6iFAgAABAgEC/wdVfx9UuC8B6AAAAABJRU5ErkJggg==);background-repeat:repeat-x;background-position:0 50%;display:flex;align-items:center;justify-content:center}.vjs-p .video-js-plugin-poster img{box-shadow:0 0 5px 10px #0006}.vjs-p .player-controller,.vjs-p .videojs-plugin-muted-alert{pointer-events:auto}.vjs-p.disabled .videojs-plugin-close-icon,.vjs-p.disabled .player-controller{pointer-events:none}.vjs-p .video-js-plugin-player{position:absolute;top:0;left:0;right:0;bottom:0}.video-js,[data-vjs-player]{width:100%;height:100%}.vjs-p .videojs-plugin-muted-alert{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:43}.vjs-p .videojs-plugin-muted-alert:before{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:43;content:"\\f104";background:rgba(0,0,0,.3);font-family:VideoJS;font-size:2em;display:flex;align-items:center;justify-content:center;color:#fff}.vjs-p .videojs-plugin-recovery-mode{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:44}.vjs-p .videojs-plugin-recovery-mode button{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.vjs-p .seek-slider{position:relative;width:100%}.vjs-p .seek-slider:focus{outline:none}.vjs-p .seek-slider .track{padding:10px 0;cursor:pointer;outline:none}.vjs-p .seek-slider .track:focus{border:0;outline:none}.vjs-p .seek-slider .track .main{width:100%;height:3px;background-color:#ffffff4d;border-radius:30px;position:absolute;left:0;top:8.5px;transition:transform .4s;outline:none}.vjs-p .seek-slider .track .main:focus{border:0;outline:none}.vjs-p .seek-slider .track .main .buffered{position:absolute;background-color:#ffffff4d;width:100%;height:100%;transform:scaleX(.8);z-index:2;transform-origin:0 0}.vjs-p .seek-slider .track .main .seek-hover{position:absolute;background-color:#ffffff80;width:100%;height:100%;z-index:1;transform:scaleX(.6);transform-origin:0 0;opacity:0;transition:opacity .4s}.vjs-p .seek-slider .track .main .connect{position:absolute;background-color:#fff;width:100%;height:100%;z-index:3;left:0;transform:scaleX(.13);transform-origin:0 0}.vjs-p .seek-slider .track.active .main{transform:scaleY(2)}.vjs-p .seek-slider .thumb{pointer-events:none;position:absolute;width:12px;height:12px;left:-6px;top:4px;z-index:4;transform:translate(100px)}.vjs-p .seek-slider .thumb .handler{border-radius:100%;width:100%;height:100%;background-color:#fff;opacity:0;transform:scale(.4);cursor:pointer;transition:transform .2s;pointer-events:none}.vjs-p .seek-slider .thumb.active .handler{opacity:1;transform:scale(1)}.vjs-p .seek-slider .hover-time{position:absolute;background-color:#0000004d;line-height:18px;font-size:16px;color:#ddd;top:-25px;left:0;padding:5px 10px;border-radius:5px;box-shadow:0 0 5px #0000004d;opacity:0;transform:translate(150px);pointer-events:none}.vjs-p .seek-slider .hover-time.active{opacity:1}.vjs-p .seek-slider:hover .track .main .seek-hover{opacity:1}.vjs-p .player-controller{position:absolute;z-index:100;bottom:0px;left:0;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:stretch;height:64px;background-image:linear-gradient(0deg,#000,transparent);transition:opacity .2s;color:#fff}.vjs-p .player-menu-box{display:flex;align-items:center;justify-content:center;flex-direction:column;margin-bottom:40px}.vjs-p .player-menu-cell{width:100%;text-align:center;font-size:12px;color:#7a7b7c}.vjs-p .player-multiple-play{width:64px;height:120px}.vjs-p .player-controller-actions-left{display:flex;justify-content:center;align-items:center;flex-shrink:0}.vjs-p .player-right-box{font-size:14px;color:#7a7b7c;cursor:pointer;margin-right:12px}.vjs-p .player-controller-actions{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:8px;padding-right:8px;margin-top:2px}.vjs-p .player-mid-box-time{font-size:9px;display:flex;justify-content:center;align-items:center;color:#fff;flex-shrink:0;margin-right:8px;font-family:monospace}.vjs-p .player-controller-play{display:flex;align-items:center;justify-content:center;cursor:pointer;padding-right:4px}.vjs-p .player-controller-progress{width:calc(100% - 28px);margin-left:14px;display:flex;align-items:center;justify-content:center;margin-top:8px}.vjs-p .player-volume{display:flex;align-items:center;justify-content:center;cursor:pointer;margin-right:16px;margin-left:8px}.vjs-p .player-volume-slider{width:60px;margin-right:12px;display:flex;align-items:center}.vjs-p .player-volume-box{display:flex;flex-direction:row}.netless-app-media-player-container{display:flex;position:relative;height:100%}
`);const n=document.createElement("div");n.classList.add("netless-app-media-player-container"),yd.render(H.createElement(vI,{context:e}),n),i.mountContent(n),e.emitter.on("destroy",()=>{console.log("[MediaPlayer]: destroy"),yd.unmountComponentAtNode(n)})}},yI=()=>{G.debug&&pg({verbose:!0}),G.register({kind:to.kind,src:to}),G.register({kind:Jo.kind,src:Jo})},xI={DocsViewer:to.kind,MediaPlayer:Jo.kind};var mg=(e=>(e.Init="Init",e.AttributesUpdate="AttributesUpdate",e.SetAttributes="SetAttributes",e.RegisterMagixEvent="RegisterMagixEvent",e.RemoveMagixEvent="RemoveMagixEvent",e.RemoveAllMagixEvent="RemoveAllMagixEvent",e.RoomStateChanged="RoomStateChanged",e.DispatchMagixEvent="DispatchMagixEvent",e.ReciveMagixEvent="ReciveMagixEvent",e.NextPage="NextPage",e.PrevPage="PrevPage",e.SDKCreate="SDKCreate",e.OnCreate="OnCreate",e.SetPage="SetPage",e.GetAttributes="GetAttributes",e.Ready="Ready",e.Destory="Destory",e.StartCreate="StartCreate",e.WrapperDidUpdate="WrapperDidUpdate",e.DispayIframe="DispayIframe",e.HideIframe="HideIframe",e.GetRootRect="GetRootRect",e.ReplayRootRect="ReplayRootRect",e.PageTo="PageTo",e))(mg||{}),vg=(e=>(e.WrapperDidMount="WrapperDidMount",e.IframeLoad="IframeLoad",e))(vg||{});const Vt={Ready:"Ready",RootRect:"ReplayRootRect",Message:"message",ComputeStyle:"computeStyle",Load:"load",DisplayerState:"displayerState",Show:"show",Hide:"hide"},SI=(e,t)=>new Array(e).fill(0).map((i,n)=>t(n)),te=class{constructor(e,t){this.manager=e,this.appManager=t,this.magixEventMap=new Map,this.cssList=[],this.allowAppliances=["clicker"],this.bridgeDisposer=T.noop,this.rootRect=null,this.sideEffectManager=new nr,this.execListenIframe=T.debounce(i=>{this.listenIframe(i)},50),this.onPhaseChangedListener=i=>{i===C.PlayerPhase.Playing&&this.computedStyleAndIframeDisplay()},this.stateChangeListener=i=>{i={...i},i.cameraState=this.manager.cameraState,this.postMessage({kind:"RoomStateChanged",payload:i}),i.cameraState&&(te.emitter.emit("GetRootRect"),this.computedStyle(i)),i.memberState&&(this.computedZindex(),this.updateStyle()),i.sceneState&&this.computedIframeDisplay(i,this.attributes)},this.displayer=te.displayer=t.displayer,this.iframe=this._createIframe(),this.sideEffectManager.addDisposer(te.emitter.on("ReplayRootRect",i=>{this.rootRect=i}),Vt.RootRect),this.sideEffectManager.addDisposer(te.emitter.on("HideIframe",()=>{this.iframe.className=te.hiddenClass}),Vt.Hide),this.sideEffectManager.addDisposer(te.emitter.on("DispayIframe",()=>{this.iframe.className=""}),Vt.Show),this.sideEffectManager.addDisposer(te.emitter.on("created",()=>{this.bridgeDisposer(),this.bridgeDisposer=C.autorun(()=>{var n;const i=this.attributes;if(i.url){const r=(n=this.iframe)==null?void 0:n.src;r&&r!==i.url&&this.execListenIframe(i)}i.displaySceneDir&&this.computedIframeDisplay(this.displayer.state,i),(i.width||i.height)&&this.iframe&&(this.iframe.width=`${i.width}px`,this.iframe.height=`${i.height}px`),this.postMessage({kind:"AttributesUpdate",payload:i})})})),this.sideEffectManager.addDisposer(e.emitter.on("cameraStateChange",()=>{this.computedStyle(this.displayer.state)})),te.onCreate(this)}static onCreate(e){te.emitter.emit("StartCreate"),te.emitter.emit("OnCreate",e),te.emitter.emit("created")}insert(e){const t={url:e.url,width:e.width,height:e.height,displaySceneDir:e.displaySceneDir,useClicker:e.useClicker||!1,useSelector:e.useSelector};this.setAttributes(t);const i=()=>{this.getIframe(),this.listenIframe(this.attributes),this.listenDisplayerState(),te.emitter.emit("GetRootRect")};if(this.getIframe())i();else{const n=this.sideEffectManager.addDisposer(te.emitter.on("WrapperDidMount",()=>{i(),this.sideEffectManager.flush(n)})),r=this.sideEffectManager.addDisposer(te.emitter.on("WrapperDidUpdate",()=>{i(),this.sideEffectManager.flush(r)}))}return this.attributes.useSelector&&this.allowAppliances.push("selector"),this.computedStyle(this.displayer.state),this.listenDisplayerCallbacks(),this.getComputedIframeStyle(),this.sideEffectManager.addEventListener(window,"message",this.messageListener.bind(this),void 0,Vt.Message),te.alreadyCreate=!0,this}getComputedIframeStyle(){this.sideEffectManager.setTimeout(()=>{this.iframe&&getComputedStyle(this.iframe)},200,Vt.ComputeStyle)}destroy(){this.sideEffectManager.flushAll(),te.emitter.emit("Destory"),te.alreadyCreate=!1,te.emitter.clearListeners()}getIframe(){return this.iframe||(this.iframe=this._createIframe()),this.iframe}setIframeSize(e){this.iframe&&(this.iframe.width=`${e.width}px`,this.iframe.height=`${e.height}px`,this.setAttributes({width:e.width,height:e.height}))}get attributes(){return this.appManager.store.getIframeBridge()}setAttributes(e){this.appManager.store.setIframeBridge(e)}_createIframe(){const e=document.createElement("iframe");return e.id="IframeBridge",e.className=te.hiddenClass,this.appManager.mainView.divElement&&this.appManager.mainView.divElement.appendChild(e),e}scaleIframeToFit(e=C.AnimationMode.Immediately){if(!this.inDisplaySceneDir)return;const{width:t=1280,height:i=720}=this.attributes,n=t?-t/2:0,r=i?-i/2:0;this.manager.moveCameraToContain({originX:n,originY:r,width:t,height:i,animationMode:e})}get isReplay(){return this.manager.isReplay}handleSetPage(e){if(this.isReplay||!this.attributes.displaySceneDir)return;const t=e.payload,i=this.displayer,n=i.entireScenes()[this.attributes.displaySceneDir];if(!n||n.length!==t){const r=SI(t,s=>({name:String(s+1)}));i.putScenes(this.attributes.displaySceneDir,r),this.manager.setMainViewScenePath(this.attributes.displaySceneDir)}}listenIframe(e){const t=i=>{var n;this.postMessage({kind:"Init",payload:{attributes:this.attributes,roomState:(n=te.displayer)==null?void 0:n.state,currentPage:this.currentPage,observerId:this.displayer.observerId}}),te.emitter.emit("IframeLoad",i),this.sideEffectManager.addDisposer(te.emitter.on("Ready",()=>{var r;this.postMessage((r=this.attributes.lastEvent)==null?void 0:r.payload)}),Vt.Ready),this.computedStyleAndIframeDisplay()};e.url&&this.iframe.src!==e.url&&(this.src_url_equal_anchor||(this.src_url_equal_anchor=document.createElement("a")),this.src_url_equal_anchor.href=e.url,this.src_url_equal_anchor.href!==this.iframe.src&&(this.iframe.src=e.url)),this.iframe.width=`${e.width}px`,this.iframe.height=`${e.height}px`,this.sideEffectManager.addEventListener(this.iframe,"load",t,void 0,Vt.Load)}listenDisplayerState(){this.isReplay&&(this.displayer._phase===C.PlayerPhase.Playing&&this.computedStyleAndIframeDisplay(),this.sideEffectManager.add(()=>(this.displayer.callbacks.on("onPhaseChanged",this.onPhaseChangedListener),()=>this.displayer.callbacks.off("onPhaseChanged",this.onPhaseChangedListener)),Vt.DisplayerState)),this.computedStyleAndIframeDisplay()}computedStyleAndIframeDisplay(){this.computedStyle(this.displayer.state),this.computedIframeDisplay(this.displayer.state,this.attributes)}listenDisplayerCallbacks(){this.displayer.callbacks.on(this.callbackName,this.stateChangeListener)}get callbackName(){return this.isReplay?"onPlayerStateChanged":"onRoomStateChanged"}computedStyle(e){const t=this.manager.cameraState,i=this.attributes.width||1280,n=this.attributes.height||720;if(this.iframe){const{width:r,height:s,scale:a,centerX:o,centerY:l}=t,u=this.rootRect||{x:0,y:0},c=`${r/2+u.x}px`,p=`${s/2+u.y}px`,v=`transform-origin: ${c} ${p};`,S=(r-i)/2*a,y=(s-n)/2*a,x=-(o*a)+S,d=-(l*a)+y,h=`transform: translate(${x}px,${d}px) scale(${a}, ${a});`,b=["position: absolute;","border: 0.1px solid rgba(0,0,0,0);","top: 0px;","left: 0px;",v,h];this.cssList=b,this.computedZindex(),this.updateStyle()}}computedIframeDisplay(e,t){this.inDisplaySceneDir?te.emitter.emit("DispayIframe"):te.emitter.emit("HideIframe")}computedZindex(){const e="z-index: -1;",t=this.cssList.findIndex(i=>i===e);t!==-1&&this.cssList.splice(t,1),(!this.isClicker()||this.isDisableInput)&&this.cssList.push(e)}updateStyle(){this.iframe.style.cssText=this.cssList.join(" ")}get iframeOrigin(){if(this.iframe)try{return new URL(this.iframe.src).origin}catch(e){console.warn(e)}}messageListener(e){if(nt("<<<",JSON.stringify(e.data)),e.origin!==this.iframeOrigin)return;const t=e.data;switch(t.kind){case"SetAttributes":{this.handleSetAttributes(t);break}case"RegisterMagixEvent":{this.handleRegisterMagixEvent(t);break}case"RemoveMagixEvent":{this.handleRemoveMagixEvent(t);break}case"DispatchMagixEvent":{this.handleDispatchMagixEvent(t);break}case"RemoveAllMagixEvent":{this.handleRemoveAllMagixEvent();break}case"NextPage":{this.handleNextPage();break}case"PrevPage":{this.handlePrevPage();break}case"SDKCreate":{this.handleSDKCreate();break}case"SetPage":{this.handleSetPage(t);break}case"GetAttributes":{this.handleGetAttributes();break}case"PageTo":{this.handlePageTo(t);break}default:{nt(`${t.kind} not allow event.`);break}}}handleSDKCreate(){this.postMessage({kind:"Init",payload:{attributes:this.attributes,roomState:this.displayer.state,currentPage:this.currentPage,observerId:this.displayer.observerId}})}handleDispatchMagixEvent(e){const t=e.payload;this.appManager.safeDispatchMagixEvent(t.event,t.payload)}handleSetAttributes(e){this.setAttributes(e.payload)}handleRegisterMagixEvent(e){const t=e.payload,i=n=>{n.authorId!==this.displayer.observerId&&this.postMessage({kind:"ReciveMagixEvent",payload:n})};this.magixEventMap.set(t,i),this.displayer.addMagixEventListener(t,i)}handleRemoveMagixEvent(e){const t=e.payload,i=this.magixEventMap.get(t);this.displayer.removeMagixEventListener(t,i)}handleNextPage(){this.manager.canOperate&&(this.manager.nextPage(),this.dispatchMagixEvent("NextPage",{}))}handlePrevPage(){this.manager.canOperate&&(this.manager.prevPage(),this.dispatchMagixEvent("PrevPage",{}))}handlePageTo(e){if(this.manager.canOperate){const t=e.payload;if(!Number.isSafeInteger(t)||t<=0)return;this.manager.setMainViewSceneIndex(t-1),this.dispatchMagixEvent("PageTo",t-1)}}handleRemoveAllMagixEvent(){this.magixEventMap.forEach((e,t)=>{this.displayer.removeMagixEventListener(t,e)}),this.magixEventMap.clear()}handleGetAttributes(){this.postMessage({kind:"GetAttributes",payload:this.attributes})}postMessage(e){var t;this.iframe&&((t=this.iframe.contentWindow)==null||t.postMessage(JSON.parse(JSON.stringify(e)),"*"))}dispatchMagixEvent(e,t){this.manager.canOperate&&(this.setAttributes({lastEvent:{name:e,payload:t}}),this.displayer.dispatchMagixEvent(e,t))}get currentIndex(){return this.manager.mainViewSceneIndex}get currentPage(){return this.currentIndex+1}get totalPage(){return this.manager.mainViewScenesLength}get readonly(){return!this.displayer.isWritable}get inDisplaySceneDir(){return this.manager.mainViewSceneDir===this.attributes.displaySceneDir}isClicker(){if(this.readonly)return!1;const e=this.displayer.state.memberState.currentApplianceName;return this.allowAppliances.includes(e)}get isDisableInput(){return"disableDeviceInputs"in this.displayer?this.displayer.disableDeviceInputs:!0}};let Di=te;Di.kind="IframeBridge";Di.hiddenClass="netless-iframe-brdige-hidden";Di.emitter=new jt.default;Di.displayer=null;Di.alreadyCreate=!1;const wg=new Aw({emitter:L}),R=class extends C.InvisiblePlugin{constructor(e){super(e),this.version="1.0.1",this.dependencies={dependencies:{"@juggle/resize-observer":"^3.3.1","@netless/telebox-insider":"github:veytu/telebox-insider",emittery:"^0.9.2",lodash:"^4.17.21","p-retry":"^4.6.1",uuid:"^7.0.3","video.js":">=7"},peerDependencies:{jspdf:"2.5.1","white-web-sdk":"^2.16.52"},devDependencies:{"@hyrious/dts":"^0.2.2","@netless/app-docs-viewer":"^0.2.18","@netless/app-media-player":"0.1.0-beta.9","@rollup/plugin-commonjs":"^20.0.0","@rollup/plugin-node-resolve":"^13.0.4","@rollup/plugin-url":"^6.1.0","@sveltejs/vite-plugin-svelte":"^1.0.0-next.22","@tsconfig/svelte":"^2.0.1","@types/debug":"^4.1.7","@types/lodash":"^4.14.182","@types/lodash-es":"^4.17.4","@types/uuid":"^8.3.1","@typescript-eslint/eslint-plugin":"^4.30.0","@typescript-eslint/parser":"^4.30.0","@vitest/ui":"^0.14.1",cypress:"^8.7.0",dotenv:"^10.0.0",eslint:"^7.32.0","eslint-config-prettier":"^8.3.0","eslint-plugin-svelte3":"^3.2.0",jsdom:"^19.0.0",jspdf:"^2.5.1",less:"^4.1.1",prettier:"^2.3.2","prettier-plugin-svelte":"^2.4.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-styles":"^3.14.1","side-effect-manager":"0.1.5",svelte:"^3.42.4",typescript:"^4.5.5",vite:"^2.9.9",vitest:"^0.14.1","white-web-sdk":"2.16.52"}},this.emitter=Z,this.viewMode=C.ViewMode.Broadcaster,this.isReplay=C.isPlayer(this.displayer),this._cursorUIDs=[],this.containerSizeRatio=R.containerSizeRatio,R.displayer=e.displayer,window.NETLESS_DEPS={dependencies:{"@juggle/resize-observer":"^3.3.1","@netless/telebox-insider":"github:veytu/telebox-insider",emittery:"^0.9.2",lodash:"^4.17.21","p-retry":"^4.6.1",uuid:"^7.0.3","video.js":">=7"},peerDependencies:{jspdf:"2.5.1","white-web-sdk":"^2.16.52"},devDependencies:{"@hyrious/dts":"^0.2.2","@netless/app-docs-viewer":"^0.2.18","@netless/app-media-player":"0.1.0-beta.9","@rollup/plugin-commonjs":"^20.0.0","@rollup/plugin-node-resolve":"^13.0.4","@rollup/plugin-url":"^6.1.0","@sveltejs/vite-plugin-svelte":"^1.0.0-next.22","@tsconfig/svelte":"^2.0.1","@types/debug":"^4.1.7","@types/lodash":"^4.14.182","@types/lodash-es":"^4.17.4","@types/uuid":"^8.3.1","@typescript-eslint/eslint-plugin":"^4.30.0","@typescript-eslint/parser":"^4.30.0","@vitest/ui":"^0.14.1",cypress:"^8.7.0",dotenv:"^10.0.0",eslint:"^7.32.0","eslint-config-prettier":"^8.3.0","eslint-plugin-svelte3":"^3.2.0",jsdom:"^19.0.0",jspdf:"^2.5.1",less:"^4.1.1",prettier:"^2.3.2","prettier-plugin-svelte":"^2.4.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-styles":"^3.14.1","side-effect-manager":"0.1.5",svelte:"^3.42.4",typescript:"^4.5.5",vite:"^2.9.9",vitest:"^0.14.1","white-web-sdk":"2.16.52"}}}static onCreate(e){R._resolve(e)}static async mount(e){const t=e.room;R.container=e.container,R.supportAppliancePlugin=e.supportAppliancePlugin;const i=e.containerSizeRatio,n=e.debug,r=e.cursor;R.params=e,R.displayer=e.room,ym();let s;if(C.isRoom(t)){if(t.phase!==C.RoomPhase.Connected)throw new Error("[WindowManager]: Room only Connected can be mount");t.phase===C.RoomPhase.Connected&&t.isWritable&&(t.disableSerialization=!1),s=await this.initManager(t)}if(R.isCreated)throw new Error("[WindowManager]: Already created cannot be created again");if(this.debug=Boolean(n),this.debug&&pg({verbose:!0}),nt("Already insert room",s),C.isRoom(this.displayer)){if(!s)throw new Error("[WindowManager]: init InvisiblePlugin failed")}else await Ad.default(async a=>{if(s=t.getInvisiblePlugin(R.kind),!s)throw nt(`manager is empty. retrying ${a}`),new Error},{retries:10,maxTimeout:5e3});if(!s)throw new Error("[WindowManager]: create manager failed");i&&(R.containerSizeRatio=i),await s.ensureAttributes(),s._fullscreen=e.fullscreen,s.appManager=new vm(s),s.appManager.polling=e.polling||!1,s._pageState=new Cw(s.appManager),s.cursorManager=new bw(s.appManager,Boolean(r),e.cursorOptions,e.applianceIcons),i&&(s.containerSizeRatio=i),e.container&&s.bindContainer(e.container),Ew(t,s),L.emit("onCreated"),R.isCreated=!0;try{await Rg()}catch(a){console.warn("[WindowManager]: indexedDB open failed"),console.log(a)}return s}static initManager(e){return xm(e)}static initContainer(e,t,i){const{chessboard:n,overwriteStyles:r,fullscreen:s}=i;R.container||(R.container=t);const{playground:a,wrapper:o,sizer:l,mainViewElement:u}=wm(t);if(R.playground=a,n&&l.classList.add("netless-window-manager-chess-sizer"),s&&l.classList.add("netless-window-manager-fullscreen"),r){const c=document.createElement("style");c.textContent=r,a.appendChild(c)}return e.containerResizeObserver=il.create(a,l,o,L),R.wrapper=o,R.sizer=l,u}static get registered(){return je.registered}bindContainer(e){var t,i,n,r,s,a;if(C.isRoom(this.displayer)&&this.room.phase!==C.RoomPhase.Connected)throw new Rd;if(R.isCreated&&R.container)R.container.firstChild&&e.appendChild(R.container.firstChild);else if(R.params){const o=R.params,l=R.initContainer(this,e,o);this.boxManager&&this.boxManager.destroy();const u=Zv(this,Z,L,Ct,{collectorContainer:o.collectorContainer,collectorStyles:o.collectorStyles,prefersColorScheme:o.prefersColorScheme});this.boxManager=u,(t=this.appManager)==null||t.setBoxManager(u),this.bindMainView(l,o.disableCameraTransform),R.wrapper&&((i=this.cursorManager)==null||i.setupWrapper(R.wrapper))}L.emit("updateManagerRect"),(n=this.appManager)==null||n.refresh(),(r=this.appManager)==null||r.resetMaximized(),(s=this.appManager)==null||s.resetMinimized(),(a=this.appManager)==null||a.displayerWritableListener(!this.room.isWritable),R.container=e}bindCollectorContainer(e){R.isCreated&&this.boxManager||R.params&&(R.params.collectorContainer=e)}static register(e){return je.register(e)}static unregister(e){return je.unregister(e)}async addApp(e){if(this.appManager)return this.appManager.rootDirRemoving?new Promise((t,i)=>{L.once("rootDirRemoved").then(async()=>{try{const n=await this._addApp(e);t(n)}catch(n){i(n.message)}})}):this._addApp(e);throw new tt}async _addApp(e){var t,i,n;if(this.appManager){if(!e.kind||typeof e.kind!="string")throw new zd;e.src&&typeof e.src=="string"&&je.register({kind:e.kind,src:e.src});const r=await((t=je.appClasses.get(e.kind))==null?void 0:t());if(r&&((i=r.config)==null?void 0:i.singleton)&&this.appManager.appProxies.has(e.kind))throw new Pd;const s=this.setupScenePath(e,this.appManager);return s===void 0?void 0:((n=e==null?void 0:e.options)!=null&&n.scenePath&&(e.options.scenePath=tm(e.options.scenePath)),await this.appManager.addApp(e,Boolean(s)))}else throw new tt}setupScenePath(e,t){let i=!1;if(e.options){const{scenePath:n,scenes:r}=e.options;if(n){if(!em(n))throw new Ld;const s=Object.keys(this.apps||{});for(const a of s){const o=t.store.getAppScenePath(a);if(o&&o===n){if(console.warn(`[WindowManager]: ScenePath "${n}" already opened`),this.boxManager){const l=this.boxManager.getTopBox();l&&(this.boxManager.setZIndex(a,l.zIndex+1,!1),this.boxManager.focusBox({appId:a},!1))}return}}}n&&r&&r.length>0&&(this.isDynamicPPT(r)?(i=!0,Ji(this.displayer)[n]||Tn(this.room,n,r)):Ji(this.displayer)[n]||Tn(this.room,n,[{name:r[0].name}])),n&&r===void 0&&Tn(this.room,n,[{}])}return i}async setMainViewScenePath(e){this.appManager&&await this.appManager.setMainViewScenePath(e)}async setMainViewSceneIndex(e){this.appManager&&await this.appManager.setMainViewSceneIndex(e)}async nextPage(){if(this.appManager){const e=this.mainViewSceneIndex+1;return e>=this.mainViewScenesLength?(console.warn("[WindowManager]: current page is the last page"),!1):(await this.appManager.setMainViewSceneIndex(e),!0)}else return!1}async prevPage(){if(this.appManager){const e=this.mainViewSceneIndex-1;return e<0?(console.warn("[WindowManager]: current page is the first page"),!1):(await this.appManager.setMainViewSceneIndex(e),!0)}else return!1}async jumpPage(e){return this.appManager?e<0||e>=this.pageState.length?(console.warn(`[WindowManager]: index ${e} out of range`),!1):(await this.appManager.setMainViewSceneIndex(e),!0):!1}async addPage(e){if(this.appManager){const t=e==null?void 0:e.after,i=e==null?void 0:e.scene;if(t){const n=this.mainViewSceneIndex+1;this.room.putScenes(He,[i||{}],n)}else this.room.putScenes(He,[i||{}])}}async removePage(e){if(this.appManager){const t=e===void 0?this.pageState.index:e;return this.pageState.length===1?(console.warn("[WindowManager]: can not remove the last page"),!1):t<0||t>=this.pageState.length?(console.warn(`[WindowManager]: index ${e} out of range`),!1):this.appManager.removeSceneByIndex(t)}else return!1}getMainViewScenePath(){var e;return(e=this.appManager)==null?void 0:e.store.getMainViewScenePath()}getMainViewSceneIndex(){var e;return(e=this.appManager)==null?void 0:e.store.getMainViewSceneIndex()}setReadonly(e){var t;this.readonly=e,(t=this.boxManager)==null||t.setReadonly(e),L.emit("setReadonly",e)}switchMainViewToWriter(){var e;return(e=this.appManager)==null?void 0:e.mainViewProxy.mainViewClickHandler()}onAppDestroy(e,t){Kg(`destroy-${e}`,t)}onAppEvent(e,t){return L.on(`custom-${e}`,t)}setViewMode(e){var t,i,n,r;(e===C.ViewMode.Broadcaster||e===C.ViewMode.Follower)&&(this.canOperate&&e===C.ViewMode.Broadcaster&&((t=this.appManager)==null||t.mainViewProxy.setCameraAndSize()),(i=this.appManager)==null||i.mainViewProxy.start()),e===C.ViewMode.Freedom&&((n=this.appManager)==null||n.mainViewProxy.stop()),this.viewMode=e,(r=this.appManager)==null||r.mainViewProxy.setViewMode(e)}setBoxState(e){if(!!this.canOperate)switch(e){case"normal":this.setMaximized(!1),this.setMinimized(!1);break;case"maximized":this.setMaximized(!0),this.setMinimized(!1);break;case"minimized":this.setMinimized(!0);break}}setMaximized(e){var t;!this.canOperate||(t=this.boxManager)==null||t.setMaximized(e,!1)}setMinimized(e){var t;!this.canOperate||(t=this.boxManager)==null||t.setMinimized(e,!1)}setFullscreen(e){var t;this._fullscreen!==e&&(this._fullscreen=e,(t=R.sizer)==null||t.classList.toggle("netless-window-manager-fullscreen",e),Z.emit("fullscreenChange",e))}get cursorUIDs(){return this._cursorUIDs}setCursorUIDs(e){var t,i;if(this._cursorUIDs=e||[],this._cursorUIDs.length===0)(t=this._cursorUIDsStyleDOM)==null||t.remove();else{this._cursorUIDsStyleDOM||(this._cursorUIDsStyleDOM=document.createElement("style")),(i=R.playground)==null||i.appendChild(this._cursorUIDsStyleDOM);let n="[data-cursor-uid] { display: none }";for(const r of this._cursorUIDs)n+=`
[data-cursor-uid="${r}"] { display: flex }`;this._cursorUIDsStyleDOM.textContent=n}}get mainView(){if(this.appManager)return this.appManager.mainViewProxy.view;throw new tt}get camera(){if(this.appManager)return this.appManager.mainViewProxy.view.camera;throw new tt}get cameraState(){if(this.appManager)return this.appManager.mainViewProxy.cameraState;throw new tt}get apps(){var e;return(e=this.appManager)==null?void 0:e.store.apps()}get boxState(){var e;if(this.appManager)return(e=this.appManager.boxManager)==null?void 0:e.boxState;throw new tt}get darkMode(){var e,t;return Boolean((t=(e=this.appManager)==null?void 0:e.boxManager)==null?void 0:t.darkMode)}get prefersColorScheme(){var e;if(this.appManager)return(e=this.appManager.boxManager)==null?void 0:e.prefersColorScheme;throw new tt}get focused(){return this.attributes.focus}get focusedView(){var e,t;return((t=(e=this.appManager)==null?void 0:e.focusApp)==null?void 0:t.view)||this.mainView}get polling(){var e;return((e=this.appManager)==null?void 0:e.polling)||!1}set polling(e){this.appManager&&(this.appManager.polling=e)}get cursorStyle(){var e;return((e=this.cursorManager)==null?void 0:e.style)||"default"}set cursorStyle(e){if(!this.cursorManager)throw new Error("[WindowManager]: cursor is not enabled, please set { cursor: true }.");this.cursorManager.style=e}get mainViewSceneIndex(){var e;return((e=this._pageState)==null?void 0:e.index)||0}get mainViewSceneDir(){var e;if(this.appManager)return(e=this.appManager)==null?void 0:e.getMainViewSceneDir();throw new tt}get topApp(){var e,t;return(t=(e=this.boxManager)==null?void 0:e.getTopBox())==null?void 0:t.id}get mainViewScenesLength(){var e;return((e=this._pageState)==null?void 0:e.length)||0}get canRedoSteps(){var e;return((e=this.focusedView)==null?void 0:e.canRedoSteps)||0}get canUndoSteps(){var e;return((e=this.focusedView)==null?void 0:e.canUndoSteps)||0}get sceneState(){if(this.appManager)return this.appManager.sceneState;throw new tt}get pageState(){if(this._pageState)return this._pageState.toObject();throw new tt}get fullscreen(){return Boolean(this._fullscreen)}queryAll(){var e;return Array.from(((e=this.appManager)==null?void 0:e.appProxies.values())||[])}queryOne(e){var t;return(t=this.appManager)==null?void 0:t.appProxies.get(e)}async closeApp(e){var t;return(t=this.appManager)==null?void 0:t.closeApp(e)}focusApp(e){var i,n,r;const t=(i=this.boxManager)==null?void 0:i.getBox(e);t&&((n=this.boxManager)==null||n.focusBox({appId:e},!1),((r=this.boxManager)==null?void 0:r.teleBoxManager).makeBoxTop(t,!1))}moveCamera(e){var n;const t=T.omit(e,["animationMode"]),i={...this.mainView.camera};T.isEqual({...i,...t},i)||(this.mainView.moveCamera(e),(n=this.appManager)==null||n.dispatchInternalEvent(J.MoveCamera,e),setTimeout(()=>{var r;(r=this.appManager)==null||r.mainViewProxy.setCameraAndSize()},500))}moveCameraToContain(e){var t;this.mainView.moveCameraToContain(e),(t=this.appManager)==null||t.dispatchInternalEvent(J.MoveCameraToContain,e),setTimeout(()=>{var i;(i=this.appManager)==null||i.mainViewProxy.setCameraAndSize()},500)}convertToPointInWorld(e){return this.mainView.convertToPointInWorld(e)}setCameraBound(e){this.mainView.setCameraBound(e)}onDestroy(){this._destroy()}destroy(){this._destroy()}_destroy(){var e,t,i,n,r;(e=this.containerResizeObserver)==null||e.disconnect(),(t=this.appManager)==null||t.destroy(),(i=this.cursorManager)==null||i.destroy(),R.container=void 0,R.wrapper=void 0,R.sizer=void 0,R.isCreated=!1,R.playground&&((n=R.playground.parentNode)==null||n.removeChild(R.playground)),R.params=void 0,(r=this._iframeBridge)==null||r.destroy(),this._iframeBridge=void 0,nt("Destroyed")}bindMainView(e,t){var i;this.appManager&&(this.appManager.bindMainView(e,Boolean(t)),(i=this.cursorManager)==null||i.setMainViewDivElement(e))}get canOperate(){return C.isRoom(this.displayer)?this.displayer.isWritable&&this.displayer.phase===C.RoomPhase.Connected:!1}get room(){return this.displayer}safeSetAttributes(e){this.canOperate&&this.setAttributes(e)}safeUpdateAttributes(e,t){this.canOperate&&this.updateAttributes(e,t)}setPrefersColorScheme(e){var t,i;(i=(t=this.appManager)==null?void 0:t.boxManager)==null||i.setPrefersColorScheme(e)}cleanCurrentScene(){var e;nt("clean current scene"),(e=this.focusedView)==null||e.cleanCurrentScene()}redo(){var e;return((e=this.focusedView)==null?void 0:e.redo())||0}undo(){var e;return((e=this.focusedView)==null?void 0:e.undo())||0}delete(){var e;(e=this.focusedView)==null||e.delete()}copy(){var e;(e=this.focusedView)==null||e.copy()}paste(){var e;(e=this.focusedView)==null||e.paste()}duplicate(){var e;(e=this.focusedView)==null||e.duplicate()}insertText(e,t,i){var n;return((n=this.focusedView)==null?void 0:n.insertText(e,t,i))||""}insertImage(e){var t;return(t=this.focusedView)==null?void 0:t.insertImage(e)}completeImageUpload(e,t){var i;return(i=this.focusedView)==null?void 0:i.completeImageUpload(e,t)}lockImage(e,t){var i;return(i=this.focusedView)==null?void 0:i.lockImage(e,t)}lockImages(e){var t;return(t=this.focusedView)==null?void 0:t.lockImages(e)}refresh(){var e;this._refresh(),(e=this.appManager)==null||e.dispatchInternalEvent(J.Refresh)}_refresh(){var e,t;(e=this.appManager)==null||e.mainViewProxy.rebind(),R.container&&this.bindContainer(R.container),(t=this.appManager)==null||t.refresher.refresh()}setContainerSizeRatio(e){if(!T.isNumber(e)||!(e>0))throw new Error(`[WindowManager]: updateContainerSizeRatio error, ratio must be a positive number. but got ${e}`);R.containerSizeRatio=e,this.containerSizeRatio=e,L.emit("containerSizeRatioUpdate",e)}isDynamicPPT(e){var i,n;const t=(n=(i=e[0])==null?void 0:i.ppt)==null?void 0:n.src;return t==null?void 0:t.startsWith("pptx://")}async ensureAttributes(){T.isNull(this.attributes)&&await kd(50),T.isObject(this.attributes)&&(this.attributes[xe.Apps]||this.safeSetAttributes({[xe.Apps]:{}}),this.attributes[xe.Cursors]||this.safeSetAttributes({[xe.Cursors]:{}}),this.attributes._mainScenePath||this.safeSetAttributes({_mainScenePath:Td}),this.attributes._mainSceneIndex||this.safeSetAttributes({_mainSceneIndex:0}),this.attributes[xe.Registered]||this.safeSetAttributes({[xe.Registered]:{}}),this.attributes[xe.IframeBridge]||this.safeSetAttributes({[xe.IframeBridge]:{}}))}getIframeBridge(){if(!this.appManager)throw new Error("[WindowManager]: should call getIframeBridge() after await mount()");return this._iframeBridge||(this._iframeBridge=new Di(this,this.appManager)),this._iframeBridge}};let G=R;G.kind="WindowManager";G.debug=!1;G.containerSizeRatio=jg;G.isCreated=!1;G._resolve=e=>{};yI();exports.AppCreateError=Pd;exports.AppManagerNotInitError=tt;exports.AppNotRegisterError=rm;exports.BindContainerRoomPhaseInvalidError=Rd;exports.BoxManagerNotFoundError=Bd;exports.BoxNotCreatedError=jd;exports.BuiltinApps=xI;exports.DomEvents=vg;exports.IframeBridge=Di;exports.IframeEvents=mg;exports.InvalidScenePath=Ld;exports.ParamsInvalidError=zd;exports.WhiteWebSDKInvalidError=Dd;exports.WindowManager=G;exports.calculateNextIndex=el;exports.reconnectRefresher=wg;
//# sourceMappingURL=index.js.map
