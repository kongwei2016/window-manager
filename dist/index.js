"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var xg=require("p-retry"),Mg=require("emittery"),T=require("lodash"),b=require("white-web-sdk"),Sg=require("uuid"),Ig=require("@juggle/resize-observer"),Cg=require("video.js");function Ja(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function bg(e){if(e&&e.__esModule)return e;var t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});return e&&Object.keys(e).forEach(function(i){if(i!=="default"){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}}),t.default=e,Object.freeze(t)}var bd=Ja(xg),tn=Ja(Mg),Su=Ja(Cg),q=(e=>(e.AppMove="AppMove",e.AppFocus="AppFocus",e.AppResize="AppResize",e.AppBoxStateChange="AppBoxStateChange",e.GetAttributes="GetAttributes",e.UpdateWindowManagerWrapper="UpdateWindowManagerWrapper",e.InitReplay="InitReplay",e.WindowCreated="WindowCreated",e.SetMainViewScenePath="SetMainViewScenePath",e.SetMainViewSceneIndex="SetMainViewSceneIndex",e.SetAppFocusIndex="SetAppFocusIndex",e.SwitchViewsToFreedom="SwitchViewsToFreedom",e.MoveCamera="MoveCamera",e.MoveCameraToContain="MoveCameraToContain",e.CursorMove="CursorMove",e.RootDirRemoved="RootDirRemoved",e.Refresh="Refresh",e.InitMainViewCamera="InitMainViewCamera",e))(q||{});const _o="__WindowManger",oo="__WindowMangerEnsureReconnected__";var Te=(e=>(e.Size="size",e.Position="position",e.SceneIndex="SceneIndex",e.ZIndex="zIndex",e))(Te||{}),Ad=(e=>(e.setBoxSize="setBoxSize",e.setBoxMinSize="setBoxMinSize",e.destroy="destroy",e))(Ad||{}),Vo=(e=>(e.StartCreate="StartCreate",e))(Vo||{}),Oo=(e=>(e.Leave="leave",e.Normal="normal",e))(Oo||{});const Iu="2.16.1",Ag=340/720,Tg=340/720,Eg=9/16,_e="/",Td="/init",Ed=50,Q=new tn.default;class Ng{constructor(){this.list=[],this.isEmit=!1,this.invoked=()=>{this.currentInvoker=void 0,this.list.length===0&&(this.clear(),this.emitReady())},this.clear=()=>{clearInterval(this.timer),this.timer=void 0}}initInterval(){return setInterval(()=>{this.invoke()},50)}push(t){this.list.push(t),this.invoke(),this.timer===void 0&&this.list.length>0&&(this.timer=this.initInterval())}invoke(){if(this.list.length===0||this.currentInvoker!==void 0)return;const t=this.list.shift();t&&(this.currentInvoker=t,t().then(()=>{this.invoked()}).catch(i=>{console.error(`[WindowManager]: create app error: ${i.message}`),this.invoked()}))}emitReady(){this.isEmit||setTimeout(()=>{Q.emit("ready")},Ed),this.isEmit=!0}empty(){this.list=[],this.clear()}destroy(){this.timer&&this.clear()}}const L=new tn.default,kg="__WindowManagerAppCache";let Vn,Cu;const Pg=async()=>{Vn=await Bg()},Dg=(e,t)=>{if(!!Vn)return Lg(Vn,{kind:e,sourceCode:t})},zg=async e=>Vn?await jg(Vn,e):null;function Bg(){return new Promise((e,t)=>{const i=indexedDB.open(kg,2);i.onerror=n=>{t(n)},i.onupgradeneeded=n=>{const r=n.target.result;r.objectStoreNames.contains("apps")||(Cu=r.createObjectStore("apps",{keyPath:"kind"}),Cu.createIndex("kind","kind",{unique:!0}))},i.onsuccess=()=>{const n=i.result;e(n)}})}function jg(e,t){return new Promise((i,n)=>{const s=e.transaction(["apps"]).objectStore("apps").index("kind").get(t);s.onerror=o=>n(o),s.onsuccess=()=>{s.result?i(s.result):i(null)}})}function Lg(e,t){return new Promise((i,n)=>{const r=e.transaction(["apps"],"readwrite").objectStore("apps").add(t);r.onsuccess=()=>i(),r.onerror=()=>n()})}const Rg="NetlessApp",_g=1e4,Vg=async e=>{const t=await zg(e);if(t)return t.sourceCode;{const n=await(await $g(e,{timeout:_g})).text();return await Dg(e,n),n}},bu=(e,t)=>{let i=Function(e+`
;return ${t}`)();return typeof i=="undefined"&&(i=window[t]),i},Og=async(e,t,i)=>{const n=i||Rg+t;Q.emit("loadApp",{kind:t,status:"start"});let r;try{if(r=await Vg(e),!r||r.length===0)throw Q.emit("loadApp",{kind:t,status:"failed",reason:"script is empty."}),new Error("[WindowManager]: script is empty.")}catch(s){throw Q.emit("loadApp",{kind:t,status:"failed",reason:s.message}),s}return Ug(r,n,t)},Ug=(e,t,i)=>{try{const n=bu(e,t);return Q.emit("loadApp",{kind:i,status:"success"}),n}catch(n){if(n.message.includes("Can only have one anonymous define call per script file")){const r=window.define;typeof r=="function"&&r.amd&&delete r.amd;const s=bu(e,t);return Q.emit("loadApp",{kind:i,status:"success"}),s}throw Q.emit("loadApp",{kind:i,status:"failed",reason:n.message}),n}};async function $g(e,t){const{timeout:i=1e4}=t,n=new AbortController,r=setTimeout(()=>n.abort(),i),s=await fetch(e,{...t,signal:n.signal,headers:{"content-type":"text/plain"}});return clearTimeout(r),s}class Wg{constructor(){this.kindEmitters=new Map,this.registered=new Map,this.appClassesCache=new Map,this.appClasses=new Map,this.syncRegisterApp=null,this.onSyncRegisterAppChange=t=>{this.register({kind:t.kind,src:t.src})}}setSyncRegisterApp(t){this.syncRegisterApp=t}async register(t){this.appClassesCache.delete(t.kind),this.registered.set(t.kind,t);const i=t.src;let n;if(typeof i=="string"&&(n=async()=>{const r=await Og(i,t.kind,t.name);return r.__esModule?r.default:r},this.syncRegisterApp&&this.syncRegisterApp({kind:t.kind,src:i,name:t.name})),typeof i=="function"&&(n=async()=>{let r=await i();if(r)return(r.__esModule||r.default)&&(r=r.default),r;throw new Error(`[WindowManager]: load remote script failed, ${i}`)}),typeof i=="object"&&(n=async()=>i),this.appClasses.set(t.kind,async()=>{let r=this.appClassesCache.get(t.kind);return r||(r=n(),this.appClassesCache.set(t.kind,r)),r}),t.addHooks){const r=this.createKindEmitter(t.kind);r&&t.addHooks(r)}}unregister(t){this.appClasses.delete(t),this.appClassesCache.delete(t),this.registered.delete(t);const i=this.kindEmitters.get(t);i&&(i.clearListeners(),this.kindEmitters.delete(t))}async notifyApp(t,i,n){const r=this.kindEmitters.get(t);await(r==null?void 0:r.emit(i,n))}createKindEmitter(t){if(!this.kindEmitters.has(t)){const i=new tn.default;this.kindEmitters.set(t,i)}return this.kindEmitters.get(t)}}const Ee=new Wg,Hg=async e=>{var i,n;const t=await((i=Ee.appClasses.get(e))==null?void 0:i());return t&&((n=t.config)==null?void 0:n.singleton)?e:`${e}-${Sg.v4().replace("-","").slice(0,8)}`},vi=(e,t)=>{if(e.focusScenePath!==t)return e.focusScenePath=t,e},Uo=(e,t)=>{if(e&&e.isWritable&&e.state.sceneState.scenePath!==t){const i=t==="/"?"":t;e.setScenePath(i)}},Zg=(e,t,i)=>{var n;if(e&&t){const s=(n=Qi(e)[t])==null?void 0:n[i];if(s)return`${t}/${s.name}`}},$o=(e,t,i)=>{e&&e.scenePathType(t)!==b.ScenePathType.None&&e.removeScenes(t,i)},Qg=(e,t)=>{L.once(e).then(t)};T.debounce((e,t)=>{e.emit("mainViewModeChange",t)},200);const Fg=(e,t,i=0)=>{const n=Qi(e)[t];if(!n)return;const r=n[i];if(!r)return;const s=r.name;return t===_e?`/${s}`:`${t}/${s}`},Qi=e=>e.entireScenes(),bn=(e,t,i,n)=>{var r;for(let s=0;s<i.length;++s)if((r=i[s].name)!=null&&r.includes("/"))throw new Error("scenes name can not have '/'");return e==null?void 0:e.putScenes(t,i,n)},Gg=e=>e.startsWith("/"),ao=e=>{const t=e.split("/");t.pop();let i=t.join("/");return i===""&&(i="/"),i},Yg=e=>e.endsWith("/")?e.slice(0,-1):e,Au=e=>{const t=e.split(".").map(i=>i.padStart(2,"0")).join("");return parseInt(t)},Nd=e=>new Promise(t=>setTimeout(t,e)),Xg=e=>e.split("").reduce((i,n)=>(n===_e&&(i+=1),i),0)===1;class Jg{constructor(t){this.manager=t,this.displayer=this.manager.displayer,this.mainMagixEventListener=i=>{if(i.authorId!==this.displayer.observerId){const n=i.payload;switch(n.eventName){case q.AppMove:{this.appMoveHandler(n.payload);break}case q.AppResize:{this.appResizeHandler(n.payload);break}case q.AppBoxStateChange:{this.boxStateChangeHandler(n.payload);break}case q.SetMainViewScenePath:{this.setMainViewScenePathHandler(n.payload);break}case q.MoveCamera:{this.moveCameraHandler(n.payload);break}case q.MoveCameraToContain:{this.moveCameraToContainHandler(n.payload);break}case q.CursorMove:{this.cursorMoveHandler(n.payload);break}case q.RootDirRemoved:{this.rootDirRemovedHandler();break}case q.Refresh:{this.refreshHandler();break}case q.InitMainViewCamera:{this.initMainViewCameraHandler();break}case q.SetAppFocusIndex:{this.setAppFocusViewIndexHandler(n.payload);break}}}},this.appMoveHandler=i=>{var n;(n=this.boxManager)==null||n.moveBox(i)},this.appResizeHandler=i=>{var n,r;(n=this.boxManager)==null||n.resizeBox(Object.assign(i,{skipUpdate:!0})),(r=this.manager.room)==null||r.refreshViewSize()},this.boxStateChangeHandler=i=>{Q.emit("boxStateChange",i)},this.setMainViewScenePathHandler=({nextScenePath:i})=>{vi(this.manager.mainView,i),Q.emit("mainViewScenePathChange",i)},this.moveCameraHandler=i=>{T.isEqual(T.omit(i,["animationMode"]),{...this.manager.mainView.camera})||this.manager.mainView.moveCamera(i)},this.moveCameraToContainHandler=i=>{this.manager.mainView.moveCameraToContain(i)},this.cursorMoveHandler=i=>{L.emit("cursorMove",i)},this.rootDirRemovedHandler=()=>{this.manager.createRootDirScenesCallback(),this.manager.mainViewProxy.rebind(),L.emit("rootDirRemoved")},this.refreshHandler=()=>{this.manager.windowManger._refresh()},this.initMainViewCameraHandler=()=>{this.manager.mainViewProxy.addCameraReaction()},this.setAppFocusViewIndexHandler=i=>{if(i.type==="main")this.manager.setSceneIndexWithoutSync(i.index);else if(i.type==="app"&&i.appID){const n=this.manager.appProxies.get(i.appID);n&&n.setSceneIndexWithoutSync(i.index)}}}get boxManager(){return this.manager.boxManager}addListeners(){this.displayer.addMagixEventListener(_o,this.mainMagixEventListener)}removeListeners(){this.displayer.removeMagixEventListener(_o,this.mainMagixEventListener)}}class kd extends Error{constructor(){super(...arguments),this.message="[WindowManager]: app duplicate exists and cannot be created again"}}class Kg extends Error{constructor(t){super(`[WindowManager]: app ${t} need register or provide src`)}}class qe extends Error{constructor(){super(...arguments),this.message="[WindowManager]: AppManager must be initialized"}}class Pd extends Error{constructor(t){super(`[WindowManager]: white-web-sdk version must large than ${t}`)}}class Dd extends Error{constructor(){super(...arguments),this.message="[WindowManager]: kind must be a valid string"}}class zd extends Error{constructor(){super(...arguments),this.message="[WindowManager]: box need created"}}class Bd extends Error{constructor(){super(...arguments),this.message='[WindowManager]: ScenePath should start with "/"'}}class jd extends Error{constructor(){super(...arguments),this.message="[WindowManager]: boxManager not found"}}class Ld extends Error{constructor(){super(...arguments),this.message="[WindowManager]: room phase only Connected can be bindContainer"}}const Rd="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",qg=Rd.length,Tu=Array(20),Ei=()=>{for(let e=0;e<20;e++)Tu[e]=Rd.charAt(Math.random()*qg);return Tu.join("")};class tr{constructor(){this.disposers=new Map}add(t,i=Ei()){return this.flush(i),this.disposers.set(i,t()),i}addDisposer(t,i=Ei()){return this.flush(i),this.disposers.set(i,t),i}addEventListener(t,i,n,r,s=Ei()){return this.add(()=>(t.addEventListener(i,n,r),()=>t.removeEventListener(i,n,r)),s),s}setTimeout(t,i,n=Ei()){return this.add(()=>{const r=window.setTimeout(()=>{this.remove(n),t()},i);return()=>window.clearTimeout(r)},n)}setInterval(t,i,n=Ei()){return this.add(()=>{const r=window.setInterval(t,i);return()=>window.clearInterval(r)},n)}remove(t){const i=this.disposers.get(t);return this.disposers.delete(t),i}flush(t){const i=this.remove(t);if(i)try{i()}catch(n){console.error(n)}}flushAll(){this.disposers.forEach(t=>{try{t()}catch(i){console.error(i)}}),this.disposers.clear()}}const _d=e=>(t,i)=>{if(t!==void 0)if(b.listenUpdated){const n=r=>{r.map(o=>o.kind).includes(e)&&i()};return b.listenUpdated(t,n),i(),()=>b.unlistenUpdated(t,n)}else return b.reaction(()=>t,()=>{i()},{fireImmediately:!0})},Vd=(e,t,i)=>{let n=null;const r=b.reaction(e,()=>{n&&(n(),n=null);const s=e();T.isObject(s)?(n=()=>b.unlistenUpdated(s,t),b.listenUpdated(s,t)):i==null||i(s)},{fireImmediately:!0});return()=>{n==null||n(),r()}},em=_d(b.UpdateEventKind.Removed);_d(b.UpdateEventKind.Inserted);class tm{constructor(){this.listeners=new Set}get length(){return this.listeners.size}dispatch(t){this.listeners.forEach(i=>i(t))}addListener(t){this.listeners.add(t)}removeListener(t){this.listeners.delete(t)}}const lo=Object.keys;function Eu(e){return Boolean(T.has(e,"__isRef"))}function im(e){return{k:Ei(),v:e,__isRef:!0}}const Ke="_WM-STORAGE_";class Nu{constructor(t,i,n){if(this._sideEffect=new tr,this._destroyed=!1,this._refMap=new WeakMap,this._lastValue=new Map,this.onStateChanged=new tm,n&&!T.isObject(n))throw new Error(`Default state for Storage ${i} is not an object.`);this._context=t,this.id=i||null,this._state={};const r=this._getRawState(this._state);this._context.getIsWritable()&&(this.id===null?t.isAddApp&&n&&this.setState(n):(r===this._state||!T.isObject(r))&&(T.get(this._context.getAttributes(),[Ke])||this._context.updateAttributes([Ke],{}),this._context.updateAttributes([Ke,this.id],this._state),n&&this.setState(n))),lo(r).forEach(s=>{if(!(this.id===null&&s===Ke))try{const o=T.isObject(r[s])?JSON.parse(JSON.stringify(r[s])):r[s];Eu(o)?(this._state[s]=o.v,T.isObject(o.v)&&this._refMap.set(o.v,o)):this._state[s]=o}catch(o){console.error(o)}}),this._sideEffect.addDisposer(Vd(()=>this.id===null?t.getAttributes():T.get(t.getAttributes(),[Ke,this.id]),this._updateProperties.bind(this),this.destroy.bind(this)))}get state(){return this._destroyed&&console.warn(`Accessing state on destroyed Storage "${this.id}"`),this._state}addStateChangedListener(t){return this.onStateChanged.addListener(t),()=>this.onStateChanged.removeListener(t)}ensureState(t){return this.setState(lo(t).reduce((i,n)=>(T.has(this._state,n)||(i[n]=t[n]),i),{}))}setState(t){if(this._destroyed){console.error(new Error(`Cannot call setState on destroyed Storage "${this.id}".`));return}if(!this._context.getIsWritable()){console.error(new Error(`Cannot setState on Storage "${this.id}" without writable access`),t);return}const i=lo(t);i.length>0&&i.forEach(n=>{const r=t[n];if(r!==this._state[n])if(r===void 0)this._lastValue.set(n,this._state[n]),delete this._state[n],this._setRawState(n,r);else{this._lastValue.set(n,this._state[n]),this._state[n]=r;let s=r;if(T.isObject(r)){let o=this._refMap.get(r);o||(o=im(r),this._refMap.set(r,o)),s=o}this._setRawState(n,s)}})}emptyStorage(){if(!(T.size(this._state)<=0)){if(this._destroyed){console.error(new Error(`Cannot empty destroyed Storage "${this.id}".`));return}if(!this._context.getIsWritable()){console.error(new Error(`Cannot empty Storage "${this.id}" without writable access.`));return}this.setState(T.mapValues(this._state,T.noop))}}deleteStorage(){if(this.id===null)throw new Error("Cannot delete main Storage");if(!this._context.getIsWritable()){console.error(new Error(`Cannot delete Storage "${this.id}" without writable access.`));return}this.destroy(),this._context.updateAttributes([Ke,this.id],void 0)}get destroyed(){return this._destroyed}destroy(){this._destroyed=!0,this._sideEffect.flushAll()}_getRawState(t){var i;return this.id===null?(i=this._context.getAttributes())!=null?i:t:T.get(this._context.getAttributes(),[Ke,this.id],t)}_setRawState(t,i){if(this.id===null){if(t===Ke)throw new Error(`Cannot set attribute internal filed "${Ke}"`);return this._context.updateAttributes([t],i)}else return this._context.updateAttributes([Ke,this.id,t],i)}_updateProperties(t){var i;if(this._destroyed){console.error(new Error(`Cannot call _updateProperties on destroyed Storage "${this.id}".`));return}if(t.length>0){const n={};for(let r=0;r<t.length;r++)try{const s=t[r],o=s.key;if(this.id===null&&o===Ke)continue;const a=T.isObject(s.value)?JSON.parse(JSON.stringify(s.value)):s.value;let l;switch(this._lastValue.has(o)&&(l=this._lastValue.get(o),this._lastValue.delete(o)),s.kind){case 2:{T.has(this._state,o)&&(l=this._state[o],delete this._state[o]),n[o]={oldValue:l};break}default:{let u=a;if(Eu(a)){const{k:d,v:c}=a,m=this._state[o];T.isObject(m)&&((i=this._refMap.get(m))==null?void 0:i.k)===d?u=m:(u=c,T.isObject(c)&&this._refMap.set(c,a))}u!==this._state[o]&&(l=this._state[o],this._state[o]=u),n[o]={newValue:u,oldValue:l};break}}}catch(s){console.error(s)}this.onStateChanged.dispatch(n)}}}class nm{constructor(t,i,n,r,s){this.manager=t,this.boxManager=i,this.appId=n,this.appProxy=r,this.appOptions=s,this.mobxUtils={autorun:b.autorun,reaction:b.reaction,toJS:b.toJS},this.objectUtils={listenUpdated:b.listenUpdated,unlistenUpdated:b.unlistenUpdated,listenDisposed:b.listenDisposed,unlistenDisposed:b.unlistenDisposed},this.store=this.manager.store,this.isReplay=this.manager.isReplay,this.getDisplayer=()=>this.manager.displayer,this.getAttributes=()=>this.appProxy.attributes,this.getScenes=()=>{const o=this.store.getAppAttributes(this.appId);return o!=null&&o.isDynamicPPT?this.appProxy.scenes:o==null?void 0:o.options.scenes},this.getView=()=>this.appProxy.view,this.mountView=o=>{const a=this.getView();a&&(a.divElement=o,setTimeout(()=>{var l;(l=this.getRoom())==null||l.refreshViewSize(),Q.emit("onAppViewMounted",{appId:this.appId,view:a})},1e3))},this.getInitScenePath=()=>this.manager.getAppInitPath(this.appId),this.getIsWritable=()=>this.manager.canOperate,this.getBox=()=>{const o=this.boxManager.getBox(this.appId);if(o)return o;throw new zd},this.getRoom=()=>this.manager.room,this.setAttributes=o=>{this.manager.safeSetAttributes({[this.appId]:o})},this.updateAttributes=(o,a)=>{this.manager.attributes[this.appId]&&this.manager.safeUpdateAttributes([this.appId,...o],a)},this.setScenePath=async o=>{var a;!this.appProxy.box||(this.appProxy.setFullPath(o),(a=this.getRoom())==null||a.setScenePath(o))},this.getAppOptions=()=>typeof this.appOptions=="function"?this.appOptions():this.appOptions,this.createStorage=(o,a)=>{const l=new Nu(this,o,a);return this.emitter.on("destroy",()=>{l.destroy()}),l},this.dispatchMagixEvent=(...o)=>{var l;const a=`${this.appId}:${o[0]}`;return(l=this.manager.room)==null?void 0:l.dispatchMagixEvent(a,o[1])},this.addMagixEventListener=(o,a,l)=>{const u=`${this.appId}:${o}`;return this.manager.displayer.addMagixEventListener(u,a,l),()=>this.manager.displayer.removeMagixEventListener(u,a)},this.removeMagixEventListener=this.manager.displayer.removeMagixEventListener.bind(this.manager.displayer),this.nextPage=async()=>{const o=this.pageState.index+1;return o>this.pageState.length-1?(console.warn("[WindowManager] nextPage: index out of range"),!1):(this.appProxy.setSceneIndex(o),!0)},this.jumpPage=async o=>0<=o&&o<this.pageState.length?(this.appProxy.setSceneIndex(o),!0):(console.warn("[WindowManager] nextPage: index out of range"),!1),this.prevPage=async()=>{const o=this.pageState.index-1;return o<0?(console.warn("[WindowManager] prevPage: index out of range"),!1):(this.appProxy.setSceneIndex(o),!0)},this.addPage=async o=>{const a=o==null?void 0:o.after,l=o==null?void 0:o.scene,u=this.appProxy.scenePath;if(!!u)if(a){const d=this.pageState.index+1;bn(this.manager.room,u,[l||{}],d)}else bn(this.manager.room,u,[l||{}])},this.removePage=async o=>{const a=o===void 0?this.pageState.index:o;return this.pageState.length===1?(console.warn("[WindowManager]: can not remove the last page"),!1):a<0||a>=this.pageState.length?(console.warn(`[WindowManager]: page index ${o} out of range`),!1):this.appProxy.removeSceneByIndex(a)},this.emitter=r.appEmitter,this.isAddApp=r.isAddApp}get storage(){return this._storage||(this._storage=new Nu(this)),this._storage}get pageState(){return this.appProxy.pageState}get kind(){return this.appProxy.kind}dispatchAppEvent(t,i){L.emit(`custom-${this.kind}`,{kind:this.kind,appId:this.appId,type:t,value:i})}}class rm{constructor(t){this.params=t,this.sceneNode=null,this.onSceneChange=r=>{this.sceneNode=r,this.params.notifyPageStateChange()};const{displayer:i,scenePath:n}=this.params;n&&(this.sceneNode=i.createScenesCallback(n,{onAddScene:this.onSceneChange,onRemoveScene:this.onSceneChange}))}getFullPath(t){var n;const i=(n=this.sceneNode)==null?void 0:n.scenes;if(this.params.scenePath&&i){const r=i[t];if(r)return`${this.params.scenePath}/${r}`}}toObject(){var t,i;return{index:((t=this.params.view)==null?void 0:t.focusSceneIndex)||0,length:((i=this.sceneNode)==null?void 0:i.scenes.length)||0}}destroy(){var t;(t=this.sceneNode)==null||t.dispose()}}var ye=(e=>(e.Apps="apps",e.Focus="focus",e.State="state",e.BoxState="boxState",e.MainViewCamera="mainViewCamera",e.MainViewSize="mainViewSize",e.Broadcaster="broadcaster",e.Cursors="cursors",e.Position="position",e.CursorState="cursorState",e.FullPath="fullPath",e.Registered="registered",e.IframeBridge="iframeBridge",e))(ye||{});class sm{constructor(t){this.context=t,this.setAppFocus=(i,n)=>{n?this.context.safeSetAttributes({focus:i}):this.context.safeSetAttributes({focus:void 0})}}setContext(t){this.context=t}get attributes(){return this.context.getAttributes()}apps(){return T.get(this.attributes,["apps"])}get focus(){return T.get(this.attributes,["focus"])}getAppAttributes(t){return T.get(this.apps(),[t])}getAppState(t){return T.get(this.apps(),[t,"state"])}getMaximized(){return T.get(this.attributes,["maximizedBoxes"])}getMinimized(){return T.get(this.attributes,["minimizedBoxes"])}setupAppAttributes(t,i,n){this.attributes.apps||this.context.safeSetAttributes({apps:{}});const s=["scenePath","title"];n||s.push("scenes");const o=T.pick(t.options,s),a={kind:t.kind,options:o,isDynamicPPT:n};typeof t.src=="string"&&(a.src=t.src),a.createdAt=Date.now(),this.context.safeUpdateAttributes(["apps",i],a),this.context.safeUpdateAttributes(["apps",i,"state"],{[Te.Size]:{},[Te.Position]:{},[Te.SceneIndex]:0})}updateAppState(t,i,n){T.get(this.attributes,["apps",t,"state"])&&this.context.safeUpdateAttributes(["apps",t,"state",i],n)}cleanAppAttributes(t){this.context.safeUpdateAttributes(["apps",t],void 0),this.context.safeSetAttributes({[t]:void 0}),this.attributes.focus===t&&this.cleanFocus()}cleanFocus(){this.context.safeSetAttributes({focus:void 0})}getAppSceneIndex(t){var i;return(i=this.getAppState(t))==null?void 0:i[Te.SceneIndex]}getAppScenePath(t){var i,n;return(n=(i=this.getAppAttributes(t))==null?void 0:i.options)==null?void 0:n.scenePath}getMainViewScenePath(){return this.attributes._mainScenePath}getMainViewSceneIndex(){return this.attributes._mainSceneIndex}getBoxState(){return this.attributes.boxState}setMainViewScenePath(t){this.context.safeSetAttributes({_mainScenePath:t})}setMainViewSceneIndex(t){this.context.safeSetAttributes({_mainSceneIndex:t})}getMainViewCamera(){return T.get(this.attributes,["mainViewCamera"])}getMainViewSize(){return T.get(this.attributes,["mainViewSize"])}setMainViewCamera(t){this.context.safeSetAttributes({mainViewCamera:{...t}})}setMainViewSize(t){t.width===0||t.height===0||this.context.safeSetAttributes({mainViewSize:{...t}})}setMainViewCameraAndSize(t,i){i.width===0||i.height===0||this.context.safeSetAttributes({mainViewCamera:{...t},mainViewSize:{...i}})}updateCursor(t,i){T.get(this.attributes,["cursors"])||this.context.safeUpdateAttributes(["cursors"],{}),T.get(this.attributes,["cursors",t])||this.context.safeUpdateAttributes(["cursors",t],{}),this.context.safeUpdateAttributes(["cursors",t,"position"],i)}updateCursorState(t,i){T.get(this.attributes,["cursors",t])||this.context.safeUpdateAttributes(["cursors",t],{}),this.context.safeUpdateAttributes(["cursors",t,"cursorState"],i)}getCursorState(t){return T.get(this.attributes,["cursors",t,"cursorState"])}cleanCursor(t){this.context.safeUpdateAttributes(["cursors",t],void 0)}setMainViewFocusPath(t){const i=this.getMainViewScenePath();i&&vi(t,i)}getIframeBridge(){return T.get(this.attributes,["iframeBridge"])}setIframeBridge(t){if(T.isObject(t)){const i=this.getIframeBridge();for(const n in t){const r=t[n];i[n]!==r&&this.context.safeUpdateAttributes(["iframeBridge",n],r)}}}}const om=new sm({getAttributes:()=>{throw new Error("getAttributes not implemented")},safeSetAttributes:()=>{throw new Error("safeSetAttributes not implemented")},safeUpdateAttributes:()=>{throw new Error("safeUpdateAttributes not implemented")}}),tt=(...e)=>{Y.debug&&console.log("[WindowManager]:",...e)},Ka=(e,t)=>{let i=0;const n=t.length-1;return e===t.index?e===n?i=e-1:i=t.index+1:i=t.index,i},St=new tn.default;class qa{constructor(t,i,n,r){var s;this.params=t,this.manager=i,this.boxManager=this.manager.boxManager,this.appProxies=this.manager.appProxies,this.viewManager=this.manager.viewManager,this.store=this.manager.store,this.status="normal",this.getAppInitState=o=>{var h,p;const a=this.store.getAppState(o);if(!a)return;const l=a==null?void 0:a[Te.Position],u=this.store.focus,d=a==null?void 0:a[Te.Size],c=a==null?void 0:a[Te.SceneIndex],m=(h=this.attributes)==null?void 0:h.maximized,v=(p=this.attributes)==null?void 0:p.minimized,y=a==null?void 0:a.zIndex;let x={maximized:m,minimized:v,zIndex:y};return l&&(x={...x,id:o,x:l.x,y:l.y}),u===o&&(x={...x,focus:!0}),d&&(x={...x,width:d.width,height:d.height}),c&&(x={...x,sceneIndex:c}),x},this.appAttributesUpdateListener=o=>{this.manager.refresher.add(o,()=>b.autorun(()=>{const a=this.manager.attributes[o];a&&this.appEmitter.emit("attributesUpdate",a)})),this.manager.refresher.add(this.stateKey,()=>b.autorun(()=>{var l,u,d,c;const a=(l=this.appAttributes)==null?void 0:l.state;(a==null?void 0:a.zIndex)>0&&a.zIndex!==((u=this.box)==null?void 0:u.zIndex)&&((d=this.boxManager)==null||d.setZIndex(o,a.zIndex),(c=this.boxManager)==null||c.focusBox({appId:o}))})),this.manager.refresher.add(`${o}-fullPath`,()=>b.autorun(()=>{var l;const a=(l=this.appAttributes)==null?void 0:l.fullPath;this.setFocusScenePathHandler(a),this._prevFullPath!==a&&(this.notifyPageStateChange(),this._prevFullPath=a)}))},this.setFocusScenePathHandler=T.debounce(o=>{var a;this.view&&o&&o!==((a=this.view)==null?void 0:a.focusScenePath)&&(vi(this.view,o),Q.emit("onAppScenePathChange",{appId:this.id,view:this.view}))},50),this.notifyPageStateChange=T.debounce(()=>{this.appEmitter.emit("pageStateChange",this.pageState)},50),this.kind=t.kind,this.id=n,this.stateKey=`${this.id}_state`,this.appProxies.set(this.id,this),this.appEmitter=new tn.default,this.appListener=this.makeAppEventListener(this.id),this.isAddApp=r,this.initScenes(),(s=this.params.options)!=null&&s.scenePath&&this.createView(),this._pageState=new rm({displayer:this.manager.displayer,scenePath:this.scenePath,view:this.view,notifyPageStateChange:this.notifyPageStateChange})}initScenes(){var i;const t=this.params.options;t&&(this.scenePath=t.scenePath,((i=this.appAttributes)==null?void 0:i.isDynamicPPT)&&this.scenePath?this.scenes=Qi(this.manager.displayer)[this.scenePath]:this.scenes=t.scenes)}get view(){return this.manager.viewManager.getView(this.id)}get viewIndex(){var t;return(t=this.view)==null?void 0:t.focusSceneIndex}get isWritable(){var t;return this.manager.canOperate&&!((t=this.box)!=null&&t.readonly)}get attributes(){return this.manager.attributes[this.id]}get appAttributes(){return this.store.getAppAttributes(this.id)}getFullScenePath(){if(this.scenePath)return T.get(this.appAttributes,[ye.FullPath])||this.getFullScenePathFromScenes()}getFullScenePathFromScenes(){const t=T.get(this.appAttributes,["state","SceneIndex"],0),i=Zg(this.manager.room,this.scenePath,t);return i&&this.setFullPath(i),i}setFullPath(t){this.manager.safeUpdateAttributes(["apps",this.id,ye.FullPath],t)}async baseInsertApp(t=!1){var s;const i=this.params;if(!i.kind)throw new Error("[WindowManager]: kind require");const n=await((s=Ee.appClasses.get(i.kind))==null?void 0:s()),r=Ee.registered.get(i.kind);if(n)await this.setupApp(this.id,t,n,i.options,r==null?void 0:r.appOptions);else throw new Error(`[WindowManager]: app load failed ${i.kind} ${i.src}`);return L.emit("updateManagerRect"),{appId:this.id,app:n}}get box(){var t;return(t=this.boxManager)==null?void 0:t.getBox(this.id)}async setupApp(t,i,n,r,s){var a;if(tt("setupApp",t,n,r),!this.boxManager)throw new jd;const o=new nm(this.manager,this.boxManager,t,this,s);this.appContext=o;try{L.once(`${t}${q.WindowCreated}`).then(async()=>{var u;let l;i||(l=this.getAppInitState(t),(u=this.boxManager)==null||u.updateBoxState(l)),this.appEmitter.onAny(this.appListener),this.appAttributesUpdateListener(t),this.setViewFocusScenePath(),setTimeout(async()=>{console.log("setup app",n);const d=await n.setup(o);this.appResult=d,Ee.notifyApp(this.kind,"created",{appId:t,result:d}),this.afterSetupApp(l),this.fixMobileSize(),Q.emit("onAppSetup",t)},Ed)}),(a=this.boxManager)==null||a.createBox({appId:t,app:n,options:r,canOperate:this.manager.canOperate,smartPosition:this.isAddApp}),this.isAddApp&&this.box&&(this.store.updateAppState(t,Te.ZIndex,this.box.zIndex),this.store.updateAppState(t,Te.Size,{width:this.box.intrinsicWidth,height:this.box.intrinsicHeight}),this.boxManager.focusBox({appId:t},!1))}catch(l){throw console.error(l),new Error(`[WindowManager]: app setup error: ${l.message}`)}}fixMobileSize(){var i,n;const t=(i=this.boxManager)==null?void 0:i.getBox(this.id);t&&((n=this.boxManager)==null||n.resizeBox({appId:this.id,width:t.intrinsicWidth+.001,height:t.intrinsicHeight+.001,skipUpdate:!0}))}afterSetupApp(t){var i;t&&(!(t!=null&&t.x)||!t.y)&&((i=this.boxManager)==null||i.setBoxInitState(this.id))}async onSeek(t){var n;this.appEmitter.emit("seek",t).catch(r=>{console.log(`[WindowManager]: emit seek error: ${r.message}`)});const i=this.getAppInitState(this.id);(n=this.boxManager)==null||n.updateBoxState(i)}async onReconnected(){var s;if(!Boolean(this.manager.attributes.apps[this.id])){await this.destroy(!0,!1,!0);return}this.appEmitter.emit("reconnected",void 0);const i=this.getAppInitState(this.id);await this.destroy(!0,!1,!0);const n=this.params;await new qa(n,this.manager,this.id,this.isAddApp).baseInsertApp(!0),(s=this.boxManager)==null||s.updateBoxState(i)}async onRemoveScene(t){if(this.scenePath&&t.startsWith(this.scenePath+"/")){let i=this.pageState.index,n=this._pageState.getFullPath(i);n||(i=0,n=this._pageState.getFullPath(i)),n&&this.setFullPath(n),this.setViewFocusScenePath(),this.view&&(this.view.focusSceneIndex=i)}}emitAppSceneStateChange(t){this.appEmitter.emit("sceneStateChange",t)}emitAppIsWritableChange(){this.appEmitter.emit("writableChange",this.isWritable)}makeAppEventListener(t){return(i,n)=>{var r,s,o,a;if(!!this.manager.canOperate)switch(i){case"setBoxSize":{(r=this.boxManager)==null||r.resizeBox({appId:t,width:n.width,height:n.height,skipUpdate:!1});break}case"setBoxMinSize":{(s=this.boxManager)==null||s.setBoxMinSize({appId:t,minWidth:n.minwidth,minHeight:n.minheight});break}case"setBoxTitle":{(o=this.boxManager)==null||o.setBoxTitle({appId:t,title:n.title});break}case Ad.destroy:{if(this.status==="destroyed")return;this.destroy(!0,!1,!0,n==null?void 0:n.error),n!=null&&n.error&&console.error(n==null?void 0:n.error);break}case"focus":{(a=this.boxManager)==null||a.focusBox({appId:this.id}),St.emit("focus",{appId:this.id});break}}}}setScenePath(){if(!this.manager.canOperate)return;const t=this.getFullScenePath();this.manager.room&&t&&this.view&&Uo(this.manager.room,t)}setViewFocusScenePath(){const t=this.getFullScenePath();return t&&this.view&&vi(this.view,t),t}async createView(){const t=await this.viewManager.createView(this.id);return this.setViewFocusScenePath(),t}get pageState(){return this._pageState.toObject()}async removeSceneByIndex(t){const i=this._pageState.getFullPath(t);if(i){const n=Ka(t,this.pageState);return this.setSceneIndexWithoutSync(n),this.manager.dispatchInternalEvent(q.SetAppFocusIndex,{type:"app",appID:this.id,index:n}),setTimeout(()=>{$o(this.manager.room,i,t)},100),!0}else return!1}setSceneIndexWithoutSync(t){this.view&&(this.view.focusSceneIndex=t)}setSceneIndex(t){if(this.view){this.view.focusSceneIndex=t;const i=this._pageState.getFullPath(t);i&&this.setFullPath(i)}}async destroy(t,i,n,r){var s;if(this.status!=="destroyed"){this.status="destroyed";try{await Ee.notifyApp(this.kind,"destroy",{appId:this.id}),await this.appEmitter.emit("destroy",{error:r})}catch(o){console.error("[WindowManager]: notifyApp error",o.message,o.stack)}this.appEmitter.clearListeners(),L.emit(`destroy-${this.id}`,{error:r}),t&&((s=this.boxManager)==null||s.closeBox(this.id,n)),i&&(this.store.cleanAppAttributes(this.id),this.scenePath&&$o(this.manager.room,this.scenePath)),this.appProxies.delete(this.id),this._pageState.destroy(),this.viewManager.destroyView(this.id),this.manager.appStatus.delete(this.id),this.manager.refresher.remove(this.id),this.manager.refresher.remove(this.stateKey),this.manager.refresher.remove(`${this.id}-fullPath`),this._prevFullPath=void 0}}close(){return this.destroy(!0,!0,!1)}}class am{constructor(t){this.displayer=t,this.views=new Map}createView(t){const i=Od(this.displayer);return this.views.set(t,i),i}getView(t){return this.views.get(t)}destroyView(t){const i=this.views.get(t);if(i){try{i.release()}catch{}this.views.delete(t)}}setViewScenePath(t,i){const n=this.views.get(t);n&&(n.focusScenePath=i)}destroy(){this.views.forEach(t=>{try{t.release()}catch{}}),this.views.clear()}}const Od=e=>{const t=e.views.createView();return lm(t),t},lm=e=>{e.setCameraBound({maxContentMode:()=>10,minContentMode:()=>.1})};class um{constructor(t){this.manager=t,this.polling=!1,this.started=!1,this.mainViewIsAddListener=!1,this.store=this.manager.store,this.viewMode=this.manager.windowManger.viewMode,this.sideEffectManager=new tr,this.syncCamera=()=>{if(!this.polling||this.viewMode!==b.ViewMode.Broadcaster)return;const{mainViewCamera:n}=this;n&&n.id!==this.manager.uid&&this.moveCameraSizeByAttributes()},this.startListenWritableChange=()=>{this.sideEffectManager.add(()=>L.on("writableChange",n=>{n&&this.ensureCameraAndSize(),this.manager.room&&this.syncMainView(this.manager.room)}))},this.addCameraReaction=()=>{this.manager.refresher.add(ye.MainViewCamera,this.cameraReaction)},this.cameraReaction=()=>b.reaction(()=>this.mainViewCamera,n=>{n&&n.id!==this.manager.uid&&(this.moveCameraToContian(this.mainViewSize),this.moveCamera(n))},{fireImmediately:!0}),this.sizeChangeHandler=T.debounce(n=>{n&&(this.moveCameraToContian(n),this.moveCamera(this.mainViewCamera)),this.ensureMainViewSize()},30),this.onUpdateContainerSizeRatio=()=>{const n=this.store.getMainViewSize();this.sizeChangeHandler(n)},this.onCameraUpdatedByDevice=n=>{this.viewMode!==b.ViewMode.Follower&&(this.store.setMainViewCamera({...n,id:this.manager.uid}),T.isEqual(this.mainViewSize,{...this.mainView.size,id:this.manager.uid})||this.setMainViewSize(this.view.size))},this.mainViewClickListener=()=>{this.mainViewClickHandler()},this.setMainViewSize=T.debounce(n=>{this.store.setMainViewSize({...n,id:this.manager.uid})},50),this._syncMainViewTimer=0,this.onCameraOrSizeUpdated=()=>{Q.emit("cameraStateChange",this.cameraState),this.manager.room&&this.manager.room.syncMainView&&(clearTimeout(this._syncMainViewTimer),this._syncMainViewTimer=setTimeout(this.syncMainView,100,this.manager.room)),this.ensureMainViewSize()},this.syncMainView=n=>{n.isWritable&&n.syncMainView(this.mainView)},this.setViewMode=n=>{this.viewMode=n},this.mainView=this.createMainView(),this.moveCameraSizeByAttributes(),L.once("mainViewMounted").then(()=>{this.addMainViewListener(),this.start(),this.ensureCameraAndSize(),this.startListenWritableChange()});const i=()=>{this.sizeChangeHandler(this.mainViewSize)};this.sideEffectManager.add(()=>L.on("playgroundSizeChange",i)),this.sideEffectManager.add(()=>L.on("containerSizeRatioUpdate",this.onUpdateContainerSizeRatio)),this.sideEffectManager.add(()=>L.on("startReconnect",()=>{this.didRelease||this.mainView.release()})),this.sideEffectManager.setInterval(this.syncCamera,1500)}ensureCameraAndSize(){this.viewMode===b.ViewMode.Broadcaster&&(!this.mainViewCamera||!this.mainViewSize)&&(this.manager.dispatchInternalEvent(q.InitMainViewCamera),this.setCameraAndSize())}get mainViewCamera(){return this.store.getMainViewCamera()}get mainViewSize(){return this.store.getMainViewSize()}get didRelease(){return T.get(this.view,["didRelease"])}moveCameraSizeByAttributes(){this.moveCameraToContian(this.mainViewSize),this.moveCamera(this.mainViewCamera)}start(){this.sizeChangeHandler(this.mainViewSize),!this.started&&(this.addCameraListener(),this.addCameraReaction(),this.manager.room&&this.syncMainView(this.manager.room),this.started=!0)}setCameraAndSize(){const t={...this.mainView.camera,id:this.manager.uid},i={...this.mainView.size,id:this.manager.uid};this.store.setMainViewCameraAndSize(t,i)}get view(){return this.mainView}get cameraState(){return{...this.view.camera,...this.view.size}}createMainView(){const t=Od(this.manager.displayer),i=this.store.getMainViewScenePath();return i&&vi(t,i),t}onReconnect(){if(this.didRelease)this.rebind();else{const t=this.store.getMainViewScenePath();this.setFocusScenePath(t)}}setFocusScenePath(t){if(t)return vi(this.view,t)}rebind(){const t=this.mainView.divElement,i=this.mainView.disableCameraTransform;this.stop(),this.didRelease||this.mainView.release(),this.removeMainViewListener(),this.mainView=this.createMainView(),this.mainView.disableCameraTransform=i,this.mainView.divElement=t,this.addMainViewListener(),this.start(),Q.emit("onMainViewRebind",this.mainView)}addMainViewListener(){this.mainViewIsAddListener||this.view.divElement&&(this.view.divElement.addEventListener("click",this.mainViewClickListener),this.view.divElement.addEventListener("touchend",this.mainViewClickListener),this.mainViewIsAddListener=!0)}removeMainViewListener(){this.view.divElement&&(this.view.divElement.removeEventListener("click",this.mainViewClickListener),this.view.divElement.removeEventListener("touchend",this.mainViewClickListener)),this.mainViewIsAddListener=!1}async mainViewClickHandler(){var t;!this.manager.canOperate||(this.store.cleanFocus(),(t=this.manager.boxManager)==null||t.blurAllBox())}addCameraListener(){this.view.callbacks.on("onCameraUpdatedByDevice",this.onCameraUpdatedByDevice),this.view.callbacks.on("onCameraUpdated",this.onCameraOrSizeUpdated),this.view.callbacks.on("onSizeUpdated",this.onCameraOrSizeUpdated)}removeCameraListener(){this.view.callbacks.off("onCameraUpdatedByDevice",this.onCameraUpdatedByDevice),this.view.callbacks.off("onCameraUpdated",this.onCameraOrSizeUpdated),this.view.callbacks.off("onSizeUpdated",this.onCameraOrSizeUpdated)}ensureMainViewSize(){(!this.mainViewSize||this.mainViewSize.width===0||this.mainViewSize.height===0)&&this.mainView.size.width>0&&this.mainView.size.height>0&&this.setMainViewSize(this.mainView.size)}moveCameraToContian(t){T.isEmpty(t)||(this.view.moveCameraToContain({width:t.width,height:t.height,originX:-t.width/2,originY:-t.height/2,animationMode:b.AnimationMode.Immediately}),this.scale=this.view.camera.scale)}moveCamera(t){if(!T.isEmpty(t)){if(T.isEqual(t,this.view.camera))return;const{centerX:i,centerY:n,scale:r}=t,s=r*(this.scale||1);this.view.moveCamera({centerX:i,centerY:n,scale:s,animationMode:b.AnimationMode.Immediately})}}stop(){this.removeCameraListener(),this.manager.refresher.remove(ye.MainViewCamera),this.manager.refresher.remove(ye.MainViewSize),this.started=!1}destroy(){this.removeMainViewListener(),this.stop(),this.sideEffectManager.flushAll()}}class cm{constructor(t){this.context=t,this.addRedoUndoListeners=i=>{if(i===void 0)this.addViewCallbacks(this.context.mainView(),this.onCanRedoStepsUpdate,this.onCanUndoStepsUpdate);else{const n=this.context.getAppProxy(i);n&&n.view&&this.addViewCallbacks(n.view,this.onCanRedoStepsUpdate,this.onCanUndoStepsUpdate)}},this.addViewCallbacks=(i,n,r)=>{n(i.canRedoSteps),r(i.canUndoSteps),i.callbacks.on("onCanRedoStepsUpdate",n),i.callbacks.on("onCanUndoStepsUpdate",r)},this.disposeViewCallbacks=i=>{i.callbacks.off("onCanRedoStepsUpdate",this.onCanRedoStepsUpdate),i.callbacks.off("onCanUndoStepsUpdate",this.onCanUndoStepsUpdate)},this.onCanRedoStepsUpdate=i=>{Q.emit("canRedoStepsChange",i)},this.onCanUndoStepsUpdate=i=>{Q.emit("canUndoStepsChange",i)},this.disposePrevFocusViewRedoUndoListeners=i=>{let n;if(i===void 0)n=this.context.mainView();else{const r=this.context.getAppProxy(i);r&&r.view&&(n=r.view)}n&&this.disposeViewCallbacks(n)},L.on("focusedChange",i=>{this.disposePrevFocusViewRedoUndoListeners(i.prev),setTimeout(()=>{this.addRedoUndoListeners(i.focused)},0)}),L.on("rootDirRemoved",()=>{this.disposePrevFocusViewRedoUndoListeners(t.focus()),this.addRedoUndoListeners(t.focus())}),this.addRedoUndoListeners(t.focus())}destroy(){this.disposePrevFocusViewRedoUndoListeners(this.context.focus())}}class dm{constructor(t){this.windowManger=t,this.appProxies=new Map,this.appStatus=new Map,this.store=om,this.isReplay=this.windowManger.isReplay,this.mainViewScenesLength=0,this.callbacksNode=null,this.appCreateQueue=new Ng,this.sideEffectManager=new tr,this.sceneState=null,this.rootDirRemoving=!1,this.onRemoveScenes=async i=>{var r,s;const{scenePath:n}=i;if(n===_e){await this.onRootDirRemoved(),this.dispatchInternalEvent(q.RootDirRemoved);return}if(Xg(n)){let o=this.mainView.focusSceneIndex||0,a=(r=this.callbacksNode)==null?void 0:r.scenes[o];a||(o=0,a=(s=this.callbacksNode)==null?void 0:s.scenes[o]),a&&this.setMainViewScenePath(`${_e}${a}`),await this.setMainViewSceneIndex(o)}else this.appProxies.forEach(o=>{o.onRemoveScene(n)})},this.onReadonlyChanged=()=>{this.appProxies.forEach(i=>{i.emitAppIsWritableChange()})},this.onPlayerSeekStart=async()=>{await this.closeAll()},this.onPlayerSeekDone=async i=>{await this.attributesUpdateCallback(this.attributes.apps),this.appProxies.forEach(n=>{n.onSeek(i)})},this.createRootDirScenesCallback=()=>{let i=!1;this.callbacksNode&&(this.callbacksNode.dispose(),i=!0),this.callbacksNode=this.displayer.createScenesCallback(_e,{onAddScene:this.onSceneChange,onRemoveScene:async(n,r)=>{await this.onSceneChange(n),L.emit("rootDirSceneRemoved",r)}}),this.callbacksNode&&(this.updateSceneState(this.callbacksNode),this.mainViewScenesLength=this.callbacksNode.scenes.length,i&&this.emitMainViewScenesChange(this.callbacksNode.scenes.length))},this.removeSceneByIndex=async i=>{var s;const n=Ka(i,this.windowManger.pageState);this.setSceneIndexWithoutSync(n),this.dispatchInternalEvent(q.SetAppFocusIndex,{type:"main",index:n});const r=(s=this.callbacksNode)==null?void 0:s.scenes[i];return setTimeout(()=>{r&&$o(this.room,`${_e}${r}`,i)},100),new Promise((o,a)=>{L.once("rootDirSceneRemoved").then(l=>{l===r&&o(!0)}).catch(l=>{console.log(`[WindowManager]: removePage error: ${l}`),a(!1)})})},this.setSceneIndexWithoutSync=i=>{var r;const n=(r=this.callbacksNode)==null?void 0:r.scenes[i];n&&this.mainViewProxy.setFocusScenePath(`${_e}${n}`)},this.onSceneChange=i=>(this.mainViewScenesLength=i.scenes.length,this.updateSceneState(i),this.emitMainViewScenesChange(this.mainViewScenesLength)),this.emitMainViewScenesChange=i=>Promise.all([Q.emit("mainViewScenesLengthChange",i),L.emit("changePageState")]),this.updateSceneState=i=>{const n=this.store.getMainViewSceneIndex()||0;let r=i.scenes[n];r||(r=i.scenes[this.mainView.focusSceneIndex||0]),this.sceneState={scenePath:`${_e}${r}`,contextPath:i.path,index:n,scenes:i.scenes.map(s=>({name:s})),sceneName:r},Q.emit("sceneStateChange",this.sceneState)},this.onBoxMove=i=>{this.dispatchInternalEvent(q.AppMove,i),this.store.updateAppState(i.appId,Te.Position,{x:i.x,y:i.y}),Q.emit("onBoxMove",i)},this.onBoxResize=i=>{i.width&&i.height&&(this.dispatchInternalEvent(q.AppResize,i),this.store.updateAppState(i.appId,Te.Size,{width:i.width,height:i.height}),Q.emit("onBoxResize",i))},this.onBoxFocus=i=>{this.windowManger.safeSetAttributes({focus:i.appId}),Q.emit("onBoxFocus",i)},this.onBoxClose=i=>{const n=this.appProxies.get(i.appId);n&&n.destroy(!1,!0,!0,i.error),Q.emit("onBoxClose",i)},this.onBoxStateChange=i=>{this.dispatchInternalEvent(q.AppBoxStateChange,i),Q.emit("onBoxStateChange",i)},this.addAppsChangeListener=()=>{this.refresher.add("apps",()=>Vd(()=>this.attributes.apps,()=>{this.attributesUpdateCallback(this.attributes.apps)}))},this.addAppCloseListener=()=>{this.refresher.add("appsClose",()=>em(this.attributes.apps,()=>{this.onAppDelete(this.attributes.apps)}))},this.onMainViewIndexChange=i=>{i!==void 0&&this._prevSceneIndex!==i&&(Q.emit("mainViewSceneIndexChange",i),L.emit("changePageState"),this.callbacksNode&&this.updateSceneState(this.callbacksNode),this._prevSceneIndex=i)},this.onFocusChange=i=>{var n;this._prevFocused!==i&&(Q.emit("focusedChange",i),L.emit("focusedChange",{focused:i,prev:this._prevFocused}),this._prevFocused=i,i!==void 0&&((n=this.boxManager)==null||n.focusBox({appId:i}),setTimeout(()=>{const r=this.appProxies.get(i);r&&Ee.notifyApp(r.kind,"focus",{appId:i})},0)))},this.attributesUpdateCallback=T.debounce(i=>this._attributesUpdateCallback(i),100),this._appIds=[],this.onRegisteredChange=i=>{!i||Object.entries(i).forEach(([n,r])=>{Ee.appClasses.has(n)||Ee.register({kind:n,src:r.src,name:r.name})})},this.onMinimized=i=>{var n;((n=this.boxManager)==null?void 0:n.minimized)!==i&&setTimeout(()=>{var r;(r=this.boxManager)==null||r.setMinimized(i)},0)},this.onAppDelete=async i=>{const n=Object.keys(i);for(const[r,s]of this.appProxies.entries())n.includes(r)||await s.destroy(!0,!1,!0)},this.closeAll=async()=>{for(const[i,n]of this.appProxies.entries())await n.destroy(!0,!1,!0)},this.displayerStateListener=i=>{this.appProxies.forEach(n=>{n.appEmitter.emit("roomStateChange",i)}),L.emit("observerIdChange",this.displayer.observerId)},this.displayerWritableListener=i=>{var s,o;const n=!i,r=this.windowManger.readonly===void 0||this.windowManger.readonly===!1;this.windowManger.readonly===void 0?(s=this.boxManager)==null||s.setReadonly(i):(o=this.boxManager)==null||o.setReadonly(!(n&&r)),this.appProxies.forEach(a=>{a.emitAppIsWritableChange()}),L.emit("writableChange",n)},this.updateSceneIndex=()=>{const i=this.store.getMainViewScenePath(),n=ao(i),r=Qi(this.displayer)[n];if(r.length){const s=i.replace(n,"").replace("/",""),o=r.findIndex(a=>a.name===s);T.isInteger(o)&&o>=0&&this.safeSetAttributes({_mainSceneIndex:o})}},this.updateRootDirRemoving=i=>{this.rootDirRemoving=i},this.displayer=t.displayer,this.store.setContext({getAttributes:()=>this.attributes,safeSetAttributes:i=>this.safeSetAttributes(i),safeUpdateAttributes:(i,n)=>this.safeUpdateAttributes(i,n)}),this.mainViewProxy=new um(this),this.viewManager=new am(this.displayer),this.appListeners=new Jg(this),this.displayer.callbacks.on(this.eventName,this.displayerStateListener),this.appListeners.addListeners(),this.refresher=mg,this.refresher.setRoom(this.room),this.refresher.setContext({emitter:L}),this.sideEffectManager.addDisposer(()=>{var i,n;this.appCreateQueue.destroy(),this.mainViewProxy.destroy(),this.refresher.destroy(),this.viewManager.destroy(),(i=this.boxManager)==null||i.destroy(),(n=this.callbacksNode)==null||n.dispose()}),L.once("onCreated").then(()=>this.onCreated()),L.on("onReconnected",()=>this.onReconnected()),b.isPlayer(this.displayer)&&(L.on("seekStart",this.onPlayerSeekStart),L.on("seek",this.onPlayerSeekDone)),L.on("removeScenes",this.onRemoveScenes),L.on("setReadonly",this.onReadonlyChanged),this.createRootDirScenesCallback(),Ee.setSyncRegisterApp(i=>{this.safeUpdateAttributes([ye.Registered,i.kind],i)})}getMemberState(){var t;return((t=this.room)==null?void 0:t.state.memberState)||{strokeColor:[0,0,0]}}async onRootDirRemoved(t=!0){this.setMainViewScenePath(Td),this.createRootDirScenesCallback();for(const[i,n]of this.appProxies.entries())n.view&&await this.closeApp(i,t);this.mainViewProxy.rebind(),L.emit("rootDirRemoved"),this.updateRootDirRemoving(!1)}get eventName(){return b.isRoom(this.displayer)?"onRoomStateChanged":"onPlayerStateChanged"}get attributes(){return this.windowManger.attributes}get canOperate(){return this.windowManger.canOperate}get room(){return b.isRoom(this.displayer)?this.displayer:void 0}get mainView(){return this.mainViewProxy.view}get polling(){return this.mainViewProxy.polling}set polling(t){this.mainViewProxy.polling=t}get focusApp(){if(this.store.focus)return this.appProxies.get(this.store.focus)}get uid(){var t;return((t=this.room)==null?void 0:t.uid)||""}getMainViewSceneDir(){const t=this.store.getMainViewScenePath();if(t)return ao(t);throw new Error("[WindowManager]: mainViewSceneDir not found")}async onCreated(){var t;if(await this.attributesUpdateCallback(this.attributes.apps),L.emit("updateManagerRect"),St.on("move",this.onBoxMove),St.on("resize",this.onBoxResize),St.on("focus",this.onBoxFocus),St.on("close",this.onBoxClose),St.on("boxStateChange",this.onBoxStateChange),this.addAppsChangeListener(),this.addAppCloseListener(),this.refresher.add("maximizedBoxes",()=>b.autorun(()=>{var n;const i=this.attributes.maximizedBoxes;(n=this.boxManager)==null||n.setMaximized(i)})),this.refresher.add("minimizedBoxes",()=>b.autorun(()=>{const i=this.attributes.minimizedBoxes;this.onMinimized(i)})),this.refresher.add("mainViewIndex",()=>b.autorun(()=>{const i=T.get(this.attributes,"_mainSceneIndex");this.onMainViewIndexChange(i)})),this.refresher.add("focusedChange",()=>b.autorun(()=>{const i=T.get(this.attributes,"focus");this.onFocusChange(i)})),this.refresher.add("registeredChange",()=>b.autorun(()=>{const i=T.get(this.attributes,ye.Registered);this.onRegisteredChange(i)})),!this.attributes.apps||Object.keys(this.attributes.apps).length===0){const i=this.store.getMainViewScenePath();if(!i)return;this.resetScenePath(i)}this.displayerWritableListener(!((t=this.room)!=null&&t.isWritable)),this.displayer.callbacks.on("onEnableWriteNowChanged",this.displayerWritableListener),this._prevFocused=this.attributes.focus,this.sideEffectManager.add(()=>{const i=new cm({mainView:()=>this.mainViewProxy.view,focus:()=>this.attributes.focus,getAppProxy:n=>this.appProxies.get(n)});return()=>i.destroy()})}notifyAppsChange(t){(this._appIds.length!==t.length||!this._appIds.every(i=>t.includes(i)))&&(this._appIds=t,Q.emit("appsChange",t))}async _attributesUpdateCallback(t){if(t&&Y.container){const i=Object.keys(t);i.length===0&&this.appCreateQueue.emitReady();const r=T.orderBy(i.map(s=>({id:s,createdAt:t[s].createdAt})),"createdAt","asc").map(({id:s})=>s);this.notifyAppsChange(r);for(const s of r)if(!this.appProxies.has(s)&&!this.appStatus.has(s)){const o=t[s];try{if(!this.attributes[s])throw new Error("appAttributes is undefined");this.appCreateQueue.push(()=>(this.appStatus.set(s,Vo.StartCreate),this.baseInsertApp({kind:o.kind,options:o.options,isDynamicPPT:o.isDynamicPPT},s,!1))),this.focusByAttributes(t)}catch(a){console.warn("[WindowManager]: Insert App Error",a)}}}}refresh(){this.attributesUpdateCallback(this.attributes.apps)}setBoxManager(t){this.boxManager=t}resetMaximized(){var t;(t=this.boxManager)==null||t.setMaximized(this.store.getMaximized()?this.store.getMaximized():[])}resetMinimized(){var t;(t=this.boxManager)==null||t.setMinimized(this.store.getMinimized()?this.store.getMinimized():[])}bindMainView(t,i){const n=this.mainViewProxy.view;n.disableCameraTransform=i,n.divElement=t,n.focusScenePath||this.setMainViewFocusPath(),L.emit("mainViewMounted"),Q.emit("onMainViewMounted",n)}setMainViewFocusPath(t){var n;const i=t||this.store.getMainViewScenePath();if(i)return vi(this.mainView,i),((n=this.mainView)==null?void 0:n.focusScenePath)===i}resetScenePath(t){this.displayer.state.sceneState.scenePath!==t&&Uo(this.room,t)}async addApp(t,i){tt("addApp",t);const{appId:n,needFocus:r}=await this.beforeAddApp(t,i),s=await this.baseInsertApp(t,n,!0,r);return this.afterAddApp(s),s==null?void 0:s.id}async beforeAddApp(t,i){var o,a;const n=await Hg(t.kind);this.appStatus.set(n,Vo.StartCreate);const r=(o=t.attributes)!=null?o:{};this.safeUpdateAttributes([n],r),this.store.setupAppAttributes(t,n,i);const s=!((a=this.boxManager)!=null&&a.minimized);return s&&this.store.setAppFocus(n,!0),{appId:n,needFocus:s}}afterAddApp(t){var i;if(t&&t.box){const n=t.box;St.emit("move",{appId:t.id,x:n==null?void 0:n.intrinsicX,y:n==null?void 0:n.intrinsicY}),this.store.updateAppState(t.id,Te.ZIndex,n.zIndex)}(i=this.boxManager)!=null&&i.minimized}async closeApp(t,i=!0){const n=this.appProxies.get(t);n&&n.destroy(!0,i,!1)}async baseInsertApp(t,i,n,r){if(this.appProxies.has(i)){console.warn("[WindowManager]: app duplicate exists and cannot be created again");return}const s=new qa(t,this,i,n);if(s)return await s.baseInsertApp(r),this.appStatus.delete(i),s;throw this.appStatus.delete(i),new Error("[WindowManger]: initialize AppProxy failed")}safeSetAttributes(t){this.windowManger.safeSetAttributes(t)}safeUpdateAttributes(t,i){this.windowManger.safeUpdateAttributes(t,i)}async setMainViewScenePath(t){if(this.room){const i=this.displayer.scenePathType(t);if(ao(t)!==_e)throw new Error('[WindowManager]: main view scenePath must in root dir "/"');if(i===b.ScenePathType.None)throw new Error(`[WindowManager]: ${t} not valid scene`);if(i===b.ScenePathType.Page)await this._setMainViewScenePath(t);else if(i===b.ScenePathType.Dir){const r=Fg(this.displayer,t);r&&await this._setMainViewScenePath(r)}}}async _setMainViewScenePath(t){this.setMainViewFocusPath(t)&&(this.safeSetAttributes({_mainScenePath:t}),this.store.setMainViewFocusPath(this.mainView),this.updateSceneIndex(),this.dispatchSetMainViewScenePath(t))}async setMainViewSceneIndex(t){var i;if(this.room){if(this.store.getMainViewSceneIndex()===t)return;const n=(i=this.callbacksNode)==null?void 0:i.scenes[t],r=`${_e}${n}`;if(n)this.setMainViewFocusPath(r)&&(this.store.setMainViewScenePath(r),this.store.setMainViewSceneIndex(t),this.dispatchSetMainViewScenePath(r));else throw new Error(`[WindowManager]: ${t} not valid index`)}}dispatchSetMainViewScenePath(t){this.dispatchInternalEvent(q.SetMainViewScenePath,{nextScenePath:t}),Q.emit("mainViewScenePathChange",t),Uo(this.room,t)}getAppInitPath(t){var n;const i=this.store.getAppAttributes(t);if(i)return(n=i==null?void 0:i.options)==null?void 0:n.scenePath}safeDispatchMagixEvent(t,i){this.canOperate&&this.displayer.dispatchMagixEvent(t,i)}focusByAttributes(t){var i;if(t&&Object.keys(t).length===((i=this.boxManager)==null?void 0:i.boxSize)){const n=this.store.focus;n&&this.boxManager.focusBox({appId:n})}}async onReconnected(){this.attributesUpdateCallback(this.attributes.apps);const i=Array.from(this.appProxies.values()).map(n=>n.onReconnected());this.mainViewProxy.onReconnect(),await Promise.all(i),this.callbacksNode&&this.onSceneChange(this.callbacksNode)}notifyContainerRectUpdate(t){this.appProxies.forEach(i=>{i.appEmitter.emit("containerRectUpdate",t)})}dispatchInternalEvent(t,i){this.safeDispatchMagixEvent(_o,{eventName:t,payload:i})}destroy(){this.displayer.callbacks.off(this.eventName,this.displayerStateListener),this.displayer.callbacks.off("onEnableWriteNowChanged",this.displayerWritableListener),this.appListeners.removeListeners(),St.clearListeners(),L.clearListeners(),this.appProxies.size&&this.appProxies.forEach(t=>{t.destroy(!0,!1,!0)}),Q.clearListeners(),this.sideEffectManager.flushAll(),this._prevFocused=void 0,this._prevSceneIndex=void 0}}const hm=e=>{const t=document.createElement("div");t.className="netless-window-manager-playground";const i=document.createElement("div");i.className="netless-window-manager-sizer";const n=document.createElement("div");n.className="netless-window-manager-wrapper";const r=document.createElement("div");return r.className="netless-window-manager-main-view",t.appendChild(i),i.appendChild(n),n.appendChild(r),e.appendChild(t),Y.wrapper=n,{playground:t,wrapper:n,sizer:i,mainViewElement:r}},pm=()=>{if(Au(b.WhiteVersion)<Au(Iu))throw new Pd(Iu)},Wo=(e,t)=>{var s;const i=(e==null?void 0:e.state.roomMembers)||[];let n=-1,r;for(const o of i)((s=o.payload)==null?void 0:s.uid)===t&&n<o.memberId&&(n=o.memberId,r=o);return r},fm=async e=>{let t=e.getInvisiblePlugin(Y.kind);if(t)return t;let i;const n=new Promise(u=>{Y._resolve=i=u});let r=!1;const s=gm(e);!e.isWritable&&s&&(r=!0,await bd.default(async u=>{tt(`switching to writable (x${u})`),await e.setWritable(!0)},{retries:10,maxTimeout:5e3})),e.isWritable?(tt("creating InvisiblePlugin..."),e.createInvisiblePlugin(Y,{}).catch(console.warn)):(s&&console.warn("[WindowManager]: failed to switch to writable"),console.warn("[WindowManager]: waiting for others to create the plugin..."));const o=setTimeout(()=>{console.warn("[WindowManager]: no one called createInvisiblePlugin() after 20 seconds")},2e4),a=setTimeout(()=>{throw new Error("[WindowManager]: no one called createInvisiblePlugin() after 60 seconds")},6e4),l=setInterval(()=>{t=e.getInvisiblePlugin(Y.kind),t&&(clearTimeout(a),clearTimeout(o),clearInterval(l),i(t),r&&e.isWritable&&setTimeout(()=>e.setWritable(!1).catch(console.warn),500))},200);return n},gm=e=>{try{const t=atob(e.roomToken.slice(12)),i=t.indexOf("&role=");return+t[i+6]<2}catch(t){return console.error(t),!1}},mm=window.ResizeObserver||Ig.ResizeObserver;class el{constructor(t){this.emitter=t}static create(t,i,n,r){const s=new el(r);return s.observePlaygroundSize(t,i,n),s}observePlaygroundSize(t,i,n){this.updateSizer(t.getBoundingClientRect(),i,n),this.containerResizeObserver=new mm(r=>{var o;const s=(o=r[0])==null?void 0:o.contentRect;s&&(this.updateSizer(s,i,n),this.emitter.emit("playgroundSizeChange",s))}),this.disposer=this.emitter.on("containerSizeRatioUpdate",()=>{const r=t.getBoundingClientRect();this.updateSizer(r,i,n),this.emitter.emit("playgroundSizeChange",r)}),this.containerResizeObserver.observe(t)}updateSizer({width:t,height:i},n,r){t&&i&&(i/t>Y.containerSizeRatio?(i=t*Y.containerSizeRatio,n.classList.toggle("netless-window-manager-sizer-horizontal",!0)):(t=i/Y.containerSizeRatio,n.classList.toggle("netless-window-manager-sizer-horizontal",!1)),r.style.width=`${t}px`,r.style.height=`${i}px`)}disconnect(){var t;(t=this.containerResizeObserver)==null||t.disconnect(),T.isFunction(this.disposer)&&(this.disposer(),this.disposer=void 0)}}var Ud={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,i="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1));function r(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function s(l,u,d,c,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var v=new r(d,c||l,m),y=i?i+u:u;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],v]:l._events[y].push(v):(l._events[y]=v,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],d,c;if(this._eventsCount===0)return u;for(c in d=this._events)t.call(d,c)&&u.push(i?c.slice(1):c);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},a.prototype.listeners=function(u){var d=i?i+u:u,c=this._events[d];if(!c)return[];if(c.fn)return[c.fn];for(var m=0,v=c.length,y=new Array(v);m<v;m++)y[m]=c[m].fn;return y},a.prototype.listenerCount=function(u){var d=i?i+u:u,c=this._events[d];return c?c.fn?1:c.length:0},a.prototype.emit=function(u,d,c,m,v,y){var x=i?i+u:u;if(!this._events[x])return!1;var h=this._events[x],p=arguments.length,f,g;if(h.fn){switch(h.once&&this.removeListener(u,h.fn,void 0,!0),p){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,d),!0;case 3:return h.fn.call(h.context,d,c),!0;case 4:return h.fn.call(h.context,d,c,m),!0;case 5:return h.fn.call(h.context,d,c,m,v),!0;case 6:return h.fn.call(h.context,d,c,m,v,y),!0}for(g=1,f=new Array(p-1);g<p;g++)f[g-1]=arguments[g];h.fn.apply(h.context,f)}else{var M=h.length,S;for(g=0;g<M;g++)switch(h[g].once&&this.removeListener(u,h[g].fn,void 0,!0),p){case 1:h[g].fn.call(h[g].context);break;case 2:h[g].fn.call(h[g].context,d);break;case 3:h[g].fn.call(h[g].context,d,c);break;case 4:h[g].fn.call(h[g].context,d,c,m);break;default:if(!f)for(S=1,f=new Array(p-1);S<p;S++)f[S-1]=arguments[S];h[g].fn.apply(h[g].context,f)}}return!0},a.prototype.on=function(u,d,c){return s(this,u,d,c,!1)},a.prototype.once=function(u,d,c){return s(this,u,d,c,!0)},a.prototype.removeListener=function(u,d,c,m){var v=i?i+u:u;if(!this._events[v])return this;if(!d)return o(this,v),this;var y=this._events[v];if(y.fn)y.fn===d&&(!m||y.once)&&(!c||y.context===c)&&o(this,v);else{for(var x=0,h=[],p=y.length;x<p;x++)(y[x].fn!==d||m&&!y[x].once||c&&y[x].context!==c)&&h.push(y[x]);h.length?this._events[v]=h.length===1?h[0]:h:o(this,v)}return this},a.prototype.removeAllListeners=function(u){var d;return u?(d=i?i+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,e.exports=a})(Ud);var Ho=Ud.exports;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var On=function(){return On=Object.assign||function(t){for(var i,n=1,r=arguments.length;n<r;n++){i=arguments[n];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},On.apply(this,arguments)};function tl(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]]);return i}var uo=0,$d=typeof window!="undefined"&&window.requestAnimationFrame!==void 0?function(e){return window.requestAnimationFrame(e)}:function(e){var t=Date.now(),i=Math.max(0,16.7-(t-uo));uo=t+i,setTimeout(function(){return e(uo)},i)},vm=function(e){var t=[],i=[],n=0,r=!1,s=0,o=new WeakSet,a=new WeakSet,l={cancel:function(u){var d=i.indexOf(u);o.add(u),d!==-1&&i.splice(d,1)},process:function(u){var d;if(r=!0,d=[i,t],t=d[0],i=d[1],i.length=0,n=t.length,n){var c;for(s=0;s<n;s++)c=t[s],c(u),a.has(c)===!0&&!o.has(c)&&(l.schedule(c),e(!0))}r=!1},schedule:function(u,d,c){d===void 0&&(d=!1),c===void 0&&(c=!1);var m=c&&r,v=m?t:i;o.delete(u),d&&a.add(u),v.indexOf(u)===-1&&(v.push(u),m&&(n=t.length))}};return l},wm=40,ku=1/60*1e3,Vr=!0,Un=!1,Zo=!1,xn={delta:0,timestamp:0},il=["read","update","preRender","render","postRender"],ym=function(e){return Un=e},Wd=il.reduce(function(e,t){return e[t]=vm(ym),e},{}),xm=il.reduce(function(e,t){var i=Wd[t];return e[t]=function(n,r,s){return r===void 0&&(r=!1),s===void 0&&(s=!1),Un||Sm(),i.schedule(n,r,s),n},e},{}),Mm=function(e){return Wd[e].process(xn)},Hd=function(e){Un=!1,xn.delta=Vr?ku:Math.max(Math.min(e-xn.timestamp,wm),1),Vr||(ku=xn.delta),xn.timestamp=e,Zo=!0,il.forEach(Mm),Zo=!1,Un&&(Vr=!1,$d(Hd))},Sm=function(){Un=!0,Vr=!0,Zo||$d(Hd)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Fe=function(){return Fe=Object.assign||function(t){for(var i,n=1,r=arguments.length;n<r;n++){i=arguments[n];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},Fe.apply(this,arguments)},Zd=function(e,t){return function(i){return Math.max(Math.min(i,t),e)}},Or=function(e){return e%1?Number(e.toFixed(5)):e},Qd=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i,Ls={test:function(e){return typeof e=="number"},parse:parseFloat,transform:function(e){return e}},An=Fe(Fe({},Ls),{transform:Zd(0,1)}),xr=Fe(Fe({},Ls),{default:1}),nl=function(e){return{test:function(t){return typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1},parse:parseFloat,transform:function(t){return""+t+e}}},ti=nl("deg"),Tn=nl("%"),U=nl("px"),Pu=Fe(Fe({},Tn),{parse:function(e){return Tn.parse(e)/100},transform:function(e){return Tn.transform(e*100)}}),Im=function(e){return e.substring(e.indexOf("(")+1,e.lastIndexOf(")"))},Cm=Zd(0,255),Qo=function(e){return e.red!==void 0},Fo=function(e){return e.hue!==void 0};function bm(e){return Im(e).replace(/(,|\/)/g," ").split(/ \s*/)}var Fd=function(e){return function(t){if(typeof t!="string")return t;for(var i={},n=bm(t),r=0;r<4;r++)i[e[r]]=n[r]!==void 0?parseFloat(n[r]):1;return i}},Am=function(e){var t=e.red,i=e.green,n=e.blue,r=e.alpha,s=r===void 0?1:r;return"rgba("+t+", "+i+", "+n+", "+s+")"},Tm=function(e){var t=e.hue,i=e.saturation,n=e.lightness,r=e.alpha,s=r===void 0?1:r;return"hsla("+t+", "+i+", "+n+", "+s+")"},co=Fe(Fe({},Ls),{transform:function(e){return Math.round(Cm(e))}});function rl(e,t){return e.startsWith(t)&&Qd.test(e)}var Ur={test:function(e){return typeof e=="string"?rl(e,"rgb"):Qo(e)},parse:Fd(["red","green","blue","alpha"]),transform:function(e){var t=e.red,i=e.green,n=e.blue,r=e.alpha,s=r===void 0?1:r;return Am({red:co.transform(t),green:co.transform(i),blue:co.transform(n),alpha:Or(An.transform(s))})}},ho={test:function(e){return typeof e=="string"?rl(e,"hsl"):Fo(e)},parse:Fd(["hue","saturation","lightness","alpha"]),transform:function(e){var t=e.hue,i=e.saturation,n=e.lightness,r=e.alpha,s=r===void 0?1:r;return Tm({hue:Math.round(t),saturation:Tn.transform(Or(i)),lightness:Tn.transform(Or(n)),alpha:Or(An.transform(s))})}},Du=Fe(Fe({},Ur),{test:function(e){return typeof e=="string"&&rl(e,"#")},parse:function(e){var t="",i="",n="";return e.length>4?(t=e.substr(1,2),i=e.substr(3,2),n=e.substr(5,2)):(t=e.substr(1,1),i=e.substr(2,1),n=e.substr(3,1),t+=t,i+=i,n+=n),{red:parseInt(t,16),green:parseInt(i,16),blue:parseInt(n,16),alpha:1}}}),at={test:function(e){return typeof e=="string"&&Qd.test(e)||Qo(e)||Fo(e)},parse:function(e){return Ur.test(e)?Ur.parse(e):ho.test(e)?ho.parse(e):Du.test(e)?Du.parse(e):e},transform:function(e){return Qo(e)?Ur.transform(e):Fo(e)?ho.transform(e):e}},sl=function(e){var t=e.onRead,i=e.onRender,n=e.uncachedValues,r=n===void 0?new Set:n,s=e.useCache,o=s===void 0?!0:s;return function(a){a===void 0&&(a={});var l=tl(a,[]),u={},d=[],c=!1;function m(y,x){y.startsWith("--")&&(l.hasCSSVariable=!0);var h=u[y];u[y]=x,u[y]!==h&&(d.indexOf(y)===-1&&d.push(y),c||(c=!0,xm.render(v.render)))}var v={get:function(y,x){x===void 0&&(x=!1);var h=!x&&o&&!r.has(y)&&u[y]!==void 0;return h?u[y]:t(y,l)},set:function(y,x){if(typeof y=="string")m(y,x);else for(var h in y)m(h,y[h]);return this},render:function(y){return y===void 0&&(y=!1),(c||y===!0)&&(i(u,l,d),c=!1,d.length=0),this}};return v}},Em=/([a-z])([A-Z])/g,Nm="$1-$2",Rs=function(e){return e.replace(Em,Nm).toLowerCase()},Gd=new Map,ol=new Map,Yd=["Webkit","Moz","O","ms",""],km=Yd.length,Pm=typeof document!="undefined",po,Xd=function(e,t){return ol.set(e,Rs(t))},Dm=function(e){po=po||document.createElement("div");for(var t=0;t<km;t++){var i=Yd[t],n=i==="",r=n?e:i+e.charAt(0).toUpperCase()+e.slice(1);if(r in po.style||n){if(n&&e==="clipPath"&&ol.has(e))return;Gd.set(e,r),Xd(e,(n?"":"-")+Rs(r))}}},zm=function(e){return Xd(e,e)},Jd=function(e,t){t===void 0&&(t=!1);var i=t?ol:Gd;return i.has(e)||(Pm?Dm(e):zm(e)),i.get(e)||e},Bm=["","X","Y","Z"],jm=["translate","scale","rotate","skew","transformPerspective"],Go=jm.reduce(function(e,t){return Bm.reduce(function(i,n){return i.push(t+n),i},e)},["x","y","z"]),Lm=Go.reduce(function(e,t){return e[t]=!0,e},{});function al(e){return Lm[e]===!0}function Rm(e,t){return Go.indexOf(e)-Go.indexOf(t)}var _m=new Set(["originX","originY","originZ"]);function Vm(e){return _m.has(e)}var zu=On(On({},Ls),{transform:Math.round}),Om={color:at,backgroundColor:at,outlineColor:at,fill:at,stroke:at,borderColor:at,borderTopColor:at,borderRightColor:at,borderBottomColor:at,borderLeftColor:at,borderWidth:U,borderTopWidth:U,borderRightWidth:U,borderBottomWidth:U,borderLeftWidth:U,borderRadius:U,radius:U,borderTopLeftRadius:U,borderTopRightRadius:U,borderBottomRightRadius:U,borderBottomLeftRadius:U,width:U,maxWidth:U,height:U,maxHeight:U,size:U,top:U,right:U,bottom:U,left:U,padding:U,paddingTop:U,paddingRight:U,paddingBottom:U,paddingLeft:U,margin:U,marginTop:U,marginRight:U,marginBottom:U,marginLeft:U,rotate:ti,rotateX:ti,rotateY:ti,rotateZ:ti,scale:xr,scaleX:xr,scaleY:xr,scaleZ:xr,skew:ti,skewX:ti,skewY:ti,distance:U,translateX:U,translateY:U,translateZ:U,x:U,y:U,z:U,perspective:U,opacity:An,originX:Pu,originY:Pu,originZ:U,zIndex:zu,fillOpacity:An,strokeOpacity:An,numOctaves:zu},ll=function(e){return Om[e]},Um=function(e,t){return t&&typeof e=="number"?t.transform(e):e},En="scrollLeft",Nn="scrollTop",Kd=new Set([En,Nn]),$m=new Set([En,Nn,"transform"]),Wm={x:"translateX",y:"translateY",z:"translateZ"};function qd(e){return typeof e=="function"}function Hm(e,t,i,n,r,s){s===void 0&&(s=!0);var o="",a=!1;i.sort(Rm);for(var l=i.length,u=0;u<l;u++){var d=i[u];o+=(Wm[d]||d)+"("+t[d]+") ",a=d==="z"?!0:a}return!a&&r?o+="translateZ(0)":o=o.trim(),qd(e.transform)?o=e.transform(t,n?"":o):s&&n&&(o="none"),o}function Zm(e,t,i,n,r,s,o,a){t===void 0&&(t=!0),i===void 0&&(i={}),n===void 0&&(n={}),r===void 0&&(r={}),s===void 0&&(s=[]),o===void 0&&(o=!1),a===void 0&&(a=!0);var l=!0,u=!1,d=!1;for(var c in e){var m=e[c],v=ll(c),y=Um(m,v);al(c)?(u=!0,n[c]=y,s.push(c),l&&(v.default&&m!==v.default||!v.default&&m!==0)&&(l=!1)):Vm(c)?(r[c]=y,d=!0):(!$m.has(c)||!qd(y))&&(i[Jd(c,o)]=y)}return(u||typeof e.transform=="function")&&(i.transform=Hm(e,n,s,l,t,a)),d&&(i.transformOrigin=(r.originX||"50%")+" "+(r.originY||"50%")+" "+(r.originZ||0)),i}function ul(e){var t=e===void 0?{}:e,i=t.enableHardwareAcceleration,n=i===void 0?!0:i,r=t.isDashCase,s=r===void 0?!0:r,o=t.allowTransformNone,a=o===void 0?!0:o,l={},u={},d={},c=[];return function(m){return c.length=0,Zm(m,n,l,u,d,c,s,a),l}}function Qm(e,t){var i=t.element,n=t.preparseOutput,r=ll(e);if(al(e))return r&&r.default||0;if(Kd.has(e))return i[e];var s=window.getComputedStyle(i,null).getPropertyValue(Jd(e,!0))||0;return n&&r&&r.test(s)&&r.parse?r.parse(s):s}function Fm(e,t,i){var n=t.element,r=t.buildStyles,s=t.hasCSSVariable;if(Object.assign(n.style,r(e)),s)for(var o=i.length,a=0;a<o;a++){var l=i[a];l.startsWith("--")&&n.style.setProperty(l,e[l])}i.indexOf(En)!==-1&&(n[En]=e[En]),i.indexOf(Nn)!==-1&&(n[Nn]=e[Nn])}var Gm=sl({onRead:Qm,onRender:Fm,uncachedValues:Kd});function Ym(e,t){t===void 0&&(t={});var i=t.enableHardwareAcceleration,n=t.allowTransformNone,r=tl(t,["enableHardwareAcceleration","allowTransformNone"]);return Gm(On({element:e,buildStyles:ul({enableHardwareAcceleration:i,allowTransformNone:n}),preparseOutput:!0},r))}var eh=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues"]),Bu=.5,th=function(){return{style:{}}},fo=function(e,t){return U.transform(e*t)},Xm={x:0,y:0,width:0,height:0};function ju(e,t,i){return typeof e=="string"?e:U.transform(t+i*e)}function Jm(e,t,i){return ju(t,e.x,e.width)+" "+ju(i,e.y,e.height)}var ih={enableHardwareAcceleration:!1,isDashCase:!1};function Km(e,t,i,n,r,s){t===void 0&&(t=Xm),n===void 0&&(n=ul(ih)),r===void 0&&(r=th()),s===void 0&&(s=!0);var o=e.attrX,a=e.attrY,l=e.originX,u=e.originY,d=e.pathLength,c=e.pathSpacing,m=c===void 0?1:c,v=e.pathOffset,y=v===void 0?0:v,x=tl(e,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),h=n(x);for(var p in h)if(p==="transform")r.style.transform=h[p];else{var f=s&&!eh.has(p)?Rs(p):p;r[f]=h[p]}return(l!==void 0||u!==void 0||h.transform)&&(r.style.transformOrigin=Jm(t,l!==void 0?l:Bu,u!==void 0?u:Bu)),o!==void 0&&(r.x=o),a!==void 0&&(r.y=a),i!==void 0&&d!==void 0&&(r[s?"stroke-dashoffset":"strokeDashoffset"]=fo(-y,i),r[s?"stroke-dasharray":"strokeDasharray"]=fo(d,i)+" "+fo(m,i)),r}function qm(e,t,i){i===void 0&&(i=!0);var n=th(),r=ul(ih);return function(s){return Km(s,e,t,r,n,i)}}var ev=function(e){return typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()},tv=function(e){try{return ev(e)}catch{return{x:0,y:0,width:0,height:0}}},iv=function(e){return e.tagName==="path"},nv=sl({onRead:function(e,t){var i=t.element;if(e=eh.has(e)?e:Rs(e),al(e)){var n=ll(e);return n&&n.default||0}else return i.getAttribute(e)},onRender:function(e,t){var i=t.element,n=t.buildAttrs,r=n(e);for(var s in r)s==="style"?Object.assign(i.style,r.style):i.setAttribute(s,r[s])}}),rv=function(e){var t=tv(e),i=iv(e)&&e.getTotalLength?e.getTotalLength():void 0;return nv({element:e,buildAttrs:qm(t,i)})},sv=sl({useCache:!1,onRead:function(e){return e==="scrollTop"?window.pageYOffset:window.pageXOffset},onRender:function(e){var t=e.scrollTop,i=t===void 0?0:t,n=e.scrollLeft,r=n===void 0?0:n;return window.scrollTo(r,i)}}),Yo=new WeakMap,ov=function(e){return e instanceof HTMLElement||typeof e.click=="function"},av=function(e){return e instanceof SVGElement||"ownerSVGElement"in e},lv=function(e,t){var i;return e===window?i=sv(e):ov(e)?i=Ym(e,t):av(e)&&(i=rv(e)),Yo.set(e,i),i},uv=function(e,t){return Yo.has(e)?Yo.get(e):lv(e,t)};function cv(e,t){var i=typeof e=="string"?document.querySelector(e):e;return uv(i,t)}var ut=function(t,i,n,r){var s=n?n.call(r,t,i):void 0;if(s!==void 0)return!!s;if(t===i)return!0;if(typeof t!="object"||!t||typeof i!="object"||!i)return!1;var o=Object.keys(t),a=Object.keys(i);if(o.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(i),u=0;u<o.length;u++){var d=o[u];if(!l(d))return!1;var c=t[d],m=i[d];if(s=n?n.call(r,c,m,d):void 0,s===!1||s===void 0&&c!==m)return!1}return!0};const nh="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",dv=nh.length,Lu=Array(20),Ni=()=>{for(let e=0;e<20;e++)Lu[e]=nh.charAt(Math.random()*dv);return Lu.join("")};class $n{constructor(){this.disposers=new Map}add(t,i=Ni()){return this.flush(i),this.disposers.set(i,t()),i}addDisposer(t,i=Ni()){return this.flush(i),this.disposers.set(i,t),i}addEventListener(t,i,n,r,s=Ni()){return this.add(()=>(t.addEventListener(i,n,r),()=>t.removeEventListener(i,n,r)),s),s}setTimeout(t,i,n=Ni()){return this.add(()=>{const r=window.setTimeout(()=>{this.remove(n),t()},i);return()=>window.clearTimeout(r)},n)}setInterval(t,i,n=Ni()){return this.add(()=>{const r=window.setInterval(t,i);return()=>window.clearInterval(r)},n)}remove(t){const i=this.disposers.get(t);return this.disposers.delete(t),i}flush(t){const i=this.remove(t);if(i)try{i()}catch(n){console.error(n)}}flushAll(){this.disposers.forEach(t=>{try{t()}catch(i){console.error(i)}}),this.disposers.clear()}}var hv=Object.defineProperty,go=(typeof require!="undefined"&&require,(e,t,i)=>(((n,r,s)=>{r in n?hv(n,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[r]=s})(e,typeof t!="symbol"?t+"":t,i),i));class ir{constructor(t,i){go(this,"_value"),go(this,"_beforeDestroys"),go(this,"_subscribers"),this._value=t,i&&(this.compare=i)}get value(){return this._value}setValue(t,i){if(!this.compare(t,this._value)){const n=this._value;this._value=t,this._subscribers&&this._subscribers.forEach(r=>r(t,n,i))}}reaction(t){return this._subscribers||(this._subscribers=new Set),this._subscribers.add(t),()=>{this._subscribers&&this._subscribers.delete(t)}}subscribe(t,i){const n=this.reaction(t);return t(this._value,void 0,i),n}derive(t,i,n){const r=new ir(t(this.value,void 0,n),i),s=this.reaction((o,a,l)=>{r.setValue(t(o,a,l))});return r.addBeforeDestroy(s),r}destroy(){this._beforeDestroys&&(this._beforeDestroys.forEach(t=>t()),this._beforeDestroys.clear()),this._subscribers&&this._subscribers.clear()}addBeforeDestroy(t){return this._beforeDestroys||(this._beforeDestroys=new Set),this._beforeDestroys.add(t),()=>{this._beforeDestroys&&this._beforeDestroys.delete(t)}}compare(t,i){return t===i}}function pv(e,t,i,n){let r=e.map(o=>o.value);const s=new ir(t(r,void 0,n),i);return e.forEach((o,a)=>{const l=o.reaction((u,d,c)=>{const m=r.slice();m[a]=u;const v=r;r=m,s.setValue(t(m,v,c),c)});s.addBeforeDestroy(l)}),s}function rh(e,t){Object.keys(t).forEach(i=>{fv(e,i,t[i])})}function fv(e,t,i){var n;return Object.defineProperties(e,{[t]:{get:()=>i.value},[`_${t}$`]:{value:i},[`set${n=t,n[0].toUpperCase()+n.slice(1)}`]:{value:(r,s)=>i.setValue(r,s)}}),e}function cl(e){const t=i=>{const n=e.addDisposer(()=>{i.destroy()});return i.addBeforeDestroy(()=>{e.remove(n)}),i};return{bindSideEffect:t,combine:(i,n,r,s)=>t(pv(i,n,r,s)),createVal:(i,n)=>t(new ir(i,n))}}var dl=(e=>(e.Light="light",e.Dark="dark",e.Auto="auto",e))(dl||{}),te=(e=>(e.Normal="normal",e.Minimized="minimized",e.Maximized="maximized",e))(te||{}),pe=(e=>(e.DarkMode="dark_mode",e.PrefersColorScheme="prefers_color_scheme",e.Close="close",e.Focus="focus",e.Blur="blur",e.Move="move",e.Resize="resize",e.IntrinsicMove="intrinsic_move",e.IntrinsicResize="intrinsic_resize",e.VisualResize="visual_resize",e.ZIndex="z_index",e.State="state",e.Minimized="minimized",e.Maximized="maximized",e.Readonly="readonly",e.Destroyed="destroyed",e))(pe||{}),Ne=(e=>(e.Close="close",e.Maximize="maximize",e.Minimize="minimize",e))(Ne||{}),ct=(e=>(e.North="n",e.South="s",e.West="w",e.East="e",e.NorthWest="nw",e.NorthEast="ne",e.SouthEast="se",e.SouthWest="sw",e))(ct||{});const mo="dh";function Ae(e,t,i){return Math.min(Math.max(e,t),i)}function _i(e){e.stopPropagation(),e.cancelable&&e.preventDefault()}let gv=1;function mv(){return`New Box ${gv++}`}function vv(e){return Boolean(e)}function Mr(e){return!e}function Ru(e){return e.reduce((t,i)=>(t.includes(i)||t.push(i),t),[])}function an(e,t){const i=e.indexOf(t);if(i<0)return e;const n=[...e];return n.splice(i,1),n}function wv(e,t,i){const n=new Set(t),r=new Set(i);return e.filter(s=>!n.has(s)&&!r.has(s))}function _u(e){return e.touches?e.touches[0]:e}function yv(){return Date.now().toString().slice(6)+Math.random().toString().slice(2,8)}class sh{constructor({readonly:t=!1,title:i,buttons:n,onEvent:r,onDragStart:s,namespace:o="telebox",state:a=te.Normal}={}){this.$btns=[],this.sideEffect=new $n,this.lastTitleBarClick={timestamp:0,clientX:-100,clientY:-100},this.handleTitleBarClick=l=>{var u;if(this.readonly||l.button!==0||(u=l.target.dataset)!=null&&u.teleTitleBarNoDblClick)return;_i(l);const d=Date.now();d-this.lastTitleBarClick.timestamp<=500?Math.abs(l.clientX-this.lastTitleBarClick.clientX)<=5&&Math.abs(l.clientY-this.lastTitleBarClick.clientY)<=5&&this.onEvent&&this.onEvent({type:Ne.Maximize}):this.onDragStart&&this.onDragStart(l),this.lastTitleBarClick.timestamp=d,this.lastTitleBarClick.clientX=l.clientX,this.lastTitleBarClick.clientY=l.clientY},this.lastTitleBarTouch={timestamp:0,clientX:-100,clientY:-100},this.handleTitleBarTouch=l=>{var u;if(this.readonly||(u=l.target.dataset)!=null&&u.teleTitleBarNoDblClick)return;_i(l);const d=Date.now(),{clientX:c=this.lastTitleBarTouch.clientX+100,clientY:m=this.lastTitleBarTouch.clientY+100}=l.touches[0]||{};d-this.lastTitleBarTouch.timestamp<=500?Math.abs(c-this.lastTitleBarTouch.clientX)<=10&&Math.abs(m-this.lastTitleBarTouch.clientY)<=10&&this.onEvent&&this.onEvent({type:Ne.Maximize}):this.onDragStart&&this.onDragStart(l),this.lastTitleBarTouch.timestamp=d,this.lastTitleBarTouch.clientX=c,this.lastTitleBarTouch.clientY=m},this.readonly=t,this.onEvent=r,this.onDragStart=s,this.namespace=o,this.title=i,this.state=a,this.buttons=n||[{type:Ne.Minimize,iconClassName:this.wrapClassName("titlebar-icon-minimize")},{type:Ne.Maximize,iconClassName:this.wrapClassName("titlebar-icon-maximize"),isActive:l=>l===te.Maximized},{type:Ne.Close,iconClassName:this.wrapClassName("titlebar-icon-close")}],this.$dragArea=this.renderDragArea()}setTitle(t){this.title=t,this.$title&&(this.$title.textContent=t,this.$title.title=t)}setState(t){this.state!==t&&(this.state=t,this.buttons.forEach((i,n)=>{i.isActive&&this.$btns[n].classList.toggle("is-active",i.isActive(t))}))}setReadonly(t){this.readonly!==t&&(this.readonly=t)}render(){if(!this.$titleBar){this.$titleBar=document.createElement("div"),this.$titleBar.className=this.wrapClassName("titlebar");const t=document.createElement("div");t.className=this.wrapClassName("title-area"),t.dataset.teleBoxHandle=mo,this.$title=document.createElement("h1"),this.$title.className=this.wrapClassName("title"),this.$title.dataset.teleBoxHandle=mo,this.title&&(this.$title.textContent=this.title,this.$title.title=this.title),t.appendChild(this.$title),t.appendChild(this.$dragArea);const i=document.createElement("div");i.className=this.wrapClassName("titlebar-btns"),this.buttons.forEach(({iconClassName:n,isActive:r},s)=>{const o=String(s),a=document.createElement("button");a.className=`${this.wrapClassName("titlebar-btn")} ${n}`,a.dataset.teleTitleBarBtnIndex=o,a.dataset.teleTitleBarNoDblClick="true",r&&a.classList.toggle("is-active",r(this.state)),this.$btns.push(a),i.appendChild(a)}),this.sideEffect.addEventListener(i,"click",n=>{var r;if(this.readonly)return;const s=n.target,o=Number((r=s.dataset)==null?void 0:r.teleTitleBarBtnIndex);if(!Number.isNaN(o)&&o<this.buttons.length){_i(n);const a=this.buttons[o];this.onEvent&&this.onEvent({type:a.type,value:a.value})}}),this.$titleBar.appendChild(t),this.$titleBar.appendChild(i)}return this.$titleBar}renderDragArea(){const t=document.createElement("div");return t.className=this.wrapClassName("drag-area"),t.dataset.teleBoxHandle=mo,this.sideEffect.addEventListener(t,"mousedown",this.handleTitleBarClick),this.sideEffect.addEventListener(t,"touchstart",this.handleTitleBarTouch,{passive:!0}),t}dragHandle(){return this.$titleBar}wrapClassName(t){return`${this.namespace}-${t}`}destroy(){this.sideEffect.flushAll(),this.$titleBar&&(this.$titleBar=void 0,this.$title=void 0,this.$btns.length=0,this.onDragStart=void 0,this.onEvent=void 0)}}class xv{constructor({id:t=yv(),title:i=mv(),prefersColorScheme:n=dl.Light,darkMode:r,visible:s=!0,width:o=.5,height:a=.5,minWidth:l=0,minHeight:u=0,x:d=.1,y:c=.1,minimized:m=!1,maximized:v=!1,readonly:y=!1,resizable:x=!0,draggable:h=!0,fence:p=!0,fixRatio:f=!1,focus:g=!1,zIndex:M=100,namespace:S="telebox",titleBar:E,content:k,footer:N,styles:w,containerRect:P={x:0,y:0,width:window.innerWidth,height:window.innerHeight},collectorRect:B}={}){this._renderSideEffect=new $n,this.handleTrackStart=z=>{var F;return(F=this._handleTrackStart)==null?void 0:F.call(this,z)},this._sideEffect=new $n,this._valSideEffectBinder=cl(this._sideEffect);const{combine:C,createVal:_}=this._valSideEffectBinder;this.id=t,this.namespace=S,this.events=new Ho,this._delegateEvents=new Ho;const Z=_(n);Z.reaction((z,F,V)=>{V||this.events.emit(pe.PrefersColorScheme,z)});const G=_(Boolean(r));r==null&&Z.subscribe((z,F,V)=>{this._sideEffect.add(()=>{if(z==="auto"){const ce=window.matchMedia("(prefers-color-scheme: dark)");if(ce){G.setValue(ce.matches,V);const wr=yr=>{G.setValue(yr.matches,V)};return ce.addListener(wr),()=>ce.removeListener(wr)}else return Vu}else return G.setValue(z==="dark",V),Vu},"prefers-color-scheme")}),G.reaction((z,F,V)=>{V||this.events.emit(pe.DarkMode,z)});const ne=_(P,ut),ue=_(B,ut),je=_(i);je.reaction((z,F,V)=>{V||this.titleBar.setTitle(z)});const st=_(s);st.reaction((z,F,V)=>{!V&&!z&&this.events.emit(pe.Close)});const Xe=_(y);Xe.reaction((z,F,V)=>{V||this.events.emit(pe.Readonly,z)});const ei=_(x),mr=_(h),ro=_(p),A=_(f),j=_(M);j.reaction((z,F,V)=>{V||this.events.emit(pe.ZIndex,z)});const W=_(g);W.reaction((z,F,V)=>{V||this.events.emit(z?pe.Focus:pe.Blur)});const J=_(m);J.reaction((z,F,V)=>{V||this.events.emit(pe.Minimized,z)});const K=_(v);K.reaction((z,F,V)=>{V||this.events.emit(pe.Maximized,z)});const ot=C([J,K],([z,F])=>z?te.Minimized:F?te.Maximized:te.Normal);ot.reaction((z,F,V)=>{V||this.events.emit(pe.State,z)});const We=_({width:Ae(l,0,1),height:Ae(u,0,1)},ut),Je=_({width:Ae(o,We.value.width,1),height:Ae(a,We.value.height,1)},ut);We.reaction((z,F,V)=>{Je.setValue({width:Ae(o,z.width,1),height:Ae(a,z.height,1)},V)}),Je.reaction((z,F,V)=>{V||this.events.emit(pe.IntrinsicResize,z)});const He=C([Je,K],([z,F])=>F?{width:1,height:1}:z,ut);He.reaction((z,F,V)=>{V||this.events.emit(pe.Resize,z)});const Mu=C([He,J,ne,ue],([z,F,V,ce])=>F&&ce?{width:ce.width/z.width/V.width,height:ce.height/z.height/V.height}:z,ut);Mu.reaction((z,F,V)=>{V||this.events.emit(pe.VisualResize,z)});const so=_({x:Ae(d,0,1),y:Ae(c,0,1)},ut);so.reaction((z,F,V)=>{V||this.events.emit(pe.IntrinsicMove,z)});const vr=C([so,Je,ne,ue,J,K],([z,F,V,ce,wr,yr])=>wr&&ce?yr?{x:(ce.x+ce.width/2)/V.width-1/2,y:(ce.y+ce.height/2)/V.height-1/2}:{x:(ce.x+ce.width/2)/V.width-F.width/2,y:(ce.y+ce.height/2)/V.height-F.height/2}:yr?{x:0,y:0}:z,ut);vr.reaction((z,F,V)=>{V||this.events.emit(pe.Move,z)}),this.titleBar=E||new sh({readonly:Xe.value,title:je.value,namespace:this.namespace,onDragStart:z=>{var F;return(F=this._handleTrackStart)==null?void 0:F.call(this,z)},onEvent:z=>{if(this._delegateEvents.listeners.length>0)this._delegateEvents.emit(z.type);else switch(z.type){case Ne.Maximize:{K.setValue(!K.value);break}case Ne.Minimize:{J.setValue(!0);break}case Ne.Close:{st.setValue(!1);break}default:{console.error("Unsupported titleBar event:",z);break}}}}),Xe.reaction(z=>{this.titleBar.setReadonly(z)});const vg=_(k),wg=_(N),yg=_(w);rh(this,{prefersColorScheme:Z,darkMode:G,containerRect:ne,collectorRect:ue,title:je,visible:st,readonly:Xe,resizable:ei,draggable:mr,fence:ro,fixRatio:A,focus:W,zIndex:j,minimized:J,maximized:K,$userContent:vg,$userFooter:wg,$userStyles:yg}),this._state$=ot,this._minSize$=We,this._size$=He,this._intrinsicSize$=Je,this._visualSize$=Mu,this._coord$=vr,this._intrinsicCoord$=so,this.fixRatio&&this.transform(vr.value.x,vr.value.y,He.value.width,He.value.height,!0),this.$box=this.render()}get darkMode(){return this._darkMode$.value}get state(){return this._state$.value}setState(t,i=!1){switch(t){case te.Maximized:{this.setMinimized(!1,i),this.setMaximized(!0,i);break}case te.Minimized:{this.setMinimized(!0,i),this.setMaximized(!1,i);break}default:{this.setMinimized(!1,i),this.setMaximized(!1,i);break}}return this}get minWidth(){return this._minSize$.value.width}get minHeight(){return this._minSize$.value.height}setMinWidth(t,i=!1){return this._minSize$.setValue({width:t,height:this.minHeight},i),this}setMinHeight(t,i=!1){return this._minSize$.setValue({width:this.minWidth,height:t},i),this}get intrinsicWidth(){return this._intrinsicSize$.value.width}get intrinsicHeight(){return this._intrinsicSize$.value.height}resize(t,i,n=!1){return this._intrinsicSize$.setValue({width:t,height:i},n),this}get width(){return this._size$.value.width}get height(){return this._size$.value.height}get absoluteWidth(){return this.width*this.containerRect.width}get absoluteHeight(){return this.height*this.containerRect.height}get visualWidth(){return this._visualSize$.value.width}get visualHeight(){return this._visualSize$.value.height}get intrinsicX(){return this._intrinsicCoord$.value.x}get intrinsicY(){return this._intrinsicCoord$.value.y}move(t,i,n=!1){return this._intrinsicCoord$.setValue({x:t,y:i},n),this}get x(){return this._coord$.value.x}get y(){return this._coord$.value.y}transform(t,i,n,r,s=!1){if(this.fixRatio){const o=this.intrinsicHeight/this.intrinsicWidth*n;i!==this.intrinsicY&&(i-=o-r),r=o}return i<0&&(i=0,r>this.intrinsicHeight&&(r=this.intrinsicHeight)),this._intrinsicCoord$.setValue({x:n>=this.minWidth?t:this.intrinsicX,y:r>=this.minHeight?i:this.intrinsicY},s),this._intrinsicSize$.setValue({width:Ae(n,this.minWidth,1),height:Ae(r,this.minHeight,1)},s),this}mount(t){return t.appendChild(this.render()),this}unmount(){return this.$box&&this.$box.remove(),this}mountContent(t){return this.set$userContent(t),this}unmountContent(){return this.set$userContent(void 0),this}mountFooter(t){return this.set$userFooter(t),this}unmountFooter(){return this.set$userFooter(void 0),this}getUserStyles(){return this.$userStyles}mountStyles(t){let i;return typeof t=="string"?(i=document.createElement("style"),i.textContent=t):i=t,this.set$userStyles(i),this}unmountStyles(){return this.set$userStyles(void 0),this}render(t){if(t){if(t===this.$box)return this.$box;this.$box=t}else{if(this.$box)return this.$box;this.$box=document.createElement("div")}this._renderSideEffect.flushAll(),this.$box.classList.add(this.wrapClassName("box"));const i=(c,m,v,y=vv)=>this._renderSideEffect.add(()=>{const x=this.wrapClassName(v);return m.subscribe(h=>{c.classList.toggle(x,y(h))})});i(this.$box,this._readonly$,"readonly"),i(this.$box,this._draggable$,"no-drag",Mr),i(this.$box,this._resizable$,"no-resize",Mr),i(this.$box,this._focus$,"blur",Mr),i(this.$box,this._darkMode$,"color-scheme-dark"),i(this.$box,this._darkMode$,"color-scheme-light",Mr),this._renderSideEffect.add(()=>{const c=this.wrapClassName("minimized"),m=this.wrapClassName("maximized"),v="box-maximized-timer";return this._state$.subscribe(y=>{this.$box.classList.toggle(c,y===te.Minimized),y===te.Maximized?(this._renderSideEffect.flush(v),this.$box.classList.toggle(m,!0)):this._renderSideEffect.setTimeout(()=>{this.$box.classList.toggle(m,!1)},0,v)})}),this._renderSideEffect.add(()=>this._visible$.subscribe(c=>{this.$box.style.display=c?"block":"none"})),this._renderSideEffect.add(()=>this._zIndex$.subscribe(c=>{this.$box.style.zIndex=String(c)}));const n=cv(this.$box);this.$box.dataset.teleBoxID=this.id,this.$box.style.width=this.absoluteWidth+"px",this.$box.style.height=this.absoluteHeight+"px";const r=this.x*this.containerRect.width+this.containerRect.x,s=this.y*this.containerRect.height+this.containerRect.y;this.$box.style.transform=`translate(${r-10}px,${s-10}px)`,this._valSideEffectBinder.combine([this._coord$,this._size$,this._minimized$,this._containerRect$,this._collectorRect$],([c,m,v,y,x])=>{const h=m.width*y.width,p=m.height*y.height;return{width:h+(v&&x?1:0),height:p+(v&&x?1:0),x:c.x*y.width,y:c.y*y.height,scaleX:v&&x?x.width/h:1,scaleY:v&&x?x.height/p:1}},ut).subscribe(c=>{n.set(c)}),n.set({x:r,y:s});const o=document.createElement("div");o.className=this.wrapClassName("box-main"),this.$box.appendChild(o);const a=document.createElement("div");a.className=this.wrapClassName("titlebar-wrap"),a.appendChild(this.titleBar.render()),this.$titleBar=a;const l=document.createElement("div");l.className=this.wrapClassName("content-wrap");const u=document.createElement("div");u.className=this.wrapClassName("content")+" tele-fancy-scrollbar",this.$content=u,this._renderSideEffect.add(()=>{let c;return this._$userStyles$.subscribe(m=>{c&&c.remove(),c=m,m&&l.appendChild(m)})}),this._renderSideEffect.add(()=>{let c;return this._$userContent$.subscribe(m=>{c&&c.remove(),c=m,m&&u.appendChild(m)})}),l.appendChild(u);const d=document.createElement("div");return d.className=this.wrapClassName("footer-wrap"),this.$footer=d,this._renderSideEffect.add(()=>{let c;return this._$userFooter$.subscribe(m=>{c&&c.remove(),c=m,m&&d.appendChild(m)})}),o.appendChild(a),o.appendChild(l),o.appendChild(d),this._renderResizeHandlers(),this.$box}_renderResizeHandlers(){const t=document.createElement("div");t.className=this.wrapClassName("resize-handles"),Object.values(ct).forEach(x=>{const h=document.createElement("div");h.className=this.wrapClassName(x)+" "+this.wrapClassName("resize-handle"),h.dataset.teleBoxHandle=x,t.appendChild(h)}),this.$box.appendChild(t);const i="handle-tracking-listener",n=this.wrapClassName("transforming");let r,s=0,o=0,a=0,l=0,u=0,d=0,c;const m=x=>{if(this.state!==te.Normal)return;_i(x);let{pageX:h,pageY:p}=_u(x);p<0&&(p=0);const f=(h-u)/this.containerRect.width,g=(p-d)/this.containerRect.height;switch(c){case ct.North:{this.transform(this.x,o+g,this.width,l-g);break}case ct.South:{this.transform(this.x,this.y,this.width,l+g);break}case ct.West:{this.transform(s+f,this.y,a-f,this.height);break}case ct.East:{this.transform(this.x,this.y,a+f,this.height);break}case ct.NorthWest:{this.transform(s+f,o+g,a-f,l-g);break}case ct.NorthEast:{this.transform(this.x,o+g,a+f,l-g);break}case ct.SouthEast:{this.transform(this.x,this.y,a+f,l+g);break}case ct.SouthWest:{this.transform(s+f,this.y,a-f,l+g);break}default:{if(this.fence)this.move(Ae(s+f,0,1-this.width),Ae(o+g,0,1-this.height));else{const M=20/this.containerRect.width,S=20/this.containerRect.height;this.move(Ae(s+f,M-this.width,1-M),Ae(o+g,0,1-S))}break}}},v=x=>{c=void 0,r&&(_i(x),this.$box.classList.toggle(n,!1),this._sideEffect.flush(i),r.remove())},y=x=>{var h;if(this.readonly||x.button!=null&&x.button!==0||!this.draggable||c||this.state!==te.Normal)return;const p=x.target;if((h=p.dataset)!=null&&h.teleBoxHandle){_i(x),s=this.x,o=this.y,a=this.width,l=this.height,{pageX:u,pageY:d}=_u(x),c=p.dataset.teleBoxHandle,r||(r=document.createElement("div"));const f=c?this.wrapClassName(`cursor-${c}`):"";r.className=this.wrapClassName(`track-mask${f?` ${f}`:""}`),this.$box.appendChild(r),this.$box.classList.add(n),this._sideEffect.add(()=>(window.addEventListener("mousemove",m),window.addEventListener("touchmove",m,{passive:!1}),window.addEventListener("mouseup",v),window.addEventListener("touchend",v,{passive:!1}),window.addEventListener("touchcancel",v,{passive:!1}),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("touchmove",m),window.removeEventListener("mouseup",v),window.removeEventListener("touchend",v),window.removeEventListener("touchcancel",v)}),i)}};this._handleTrackStart=y,this._sideEffect.addEventListener(t,"mousedown",y,{},"box-resizeHandles-mousedown"),this._sideEffect.addEventListener(t,"touchstart",y,{passive:!1},"box-resizeHandles-touchstart")}destroy(){this.$box.remove(),this.events.emit(pe.Destroyed),this._sideEffect.flushAll(),this._renderSideEffect.flushAll(),this.events.removeAllListeners(),this._delegateEvents.removeAllListeners()}wrapClassName(t){return`${this.namespace}-${t}`}}function Vu(){}var Mv="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCAyOCAyOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzFfNDQyNDQpIj4KPGcgZmlsdGVyPSJ1cmwoI2ZpbHRlcjBfZF8xXzQ0MjQ0KSI+CjxwYXRoIGQ9Ik0xNC4wMDAyIDE2LjE5NTNDMTMuODI0NyAxNi4xOTUzIDEzLjY1MjIgMTYuMTQ5MSAxMy41MDAyIDE2LjA2MTVMNC41MDAxNyAxMC44NjQzQzQuMDIxNzggMTAuNTg3OSAzLjg1Nzk2IDkuOTc2MTIgNC4xMzQyOCA5LjQ5NzczQzQuMjIyMDQgOS4zNDU3OSA0LjM0ODIzIDkuMjE5NiA0LjUwMDE3IDkuMTMxODRMMTMuNTAwMiAzLjkzODQ4QzEzLjgwOTggMy43NjA3NCAxNC4xOTA1IDMuNzYwNzQgMTQuNTAwMiAzLjkzODQ4TDIzLjUwMDIgOS4xMzE4NEMyMy45Nzg2IDkuNDA4MTYgMjQuMTQyNCAxMC4wMiAyMy44NjYxIDEwLjQ5ODRDMjMuNzc4MyAxMC42NTAzIDIzLjY1MjEgMTAuNzc2NSAyMy41MDAyIDEwLjg2NDNMMTQuNTAwMiAxNi4wNjE1QzE0LjM0ODEgMTYuMTQ5MSAxNC4xNzU3IDE2LjE5NTMgMTQuMDAwMiAxNi4xOTUzWiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZyBmaWx0ZXI9InVybCgjZmlsdGVyMV9kXzFfNDQyNDQpIj4KPHBhdGggZD0iTTIzLjUwMDIgMTMuMTMxOUwyMS41MzYxIDExLjk5ODVMMTQuNTAwMiAxNi4wNjE2QzE0LjE5MDcgMTYuMjQgMTMuODA5NiAxNi4yNCAxMy41MDAyIDE2LjA2MTZMNi40NjQyOCAxMS45OTg1TDQuNTAwMTcgMTMuMTMxOUM0LjAyMTc4IDEzLjQwODIgMy44NTc5NiAxNC4wMiA0LjEzNDI4IDE0LjQ5ODRDNC4yMjIwNCAxNC42NTA0IDQuMzQ4MjMgMTQuNzc2NiA0LjUwMDE3IDE0Ljg2NDNMMTMuNTAwMiAyMC4wNjE2QzEzLjgwOTYgMjAuMjQgMTQuMTkwNyAyMC4yNCAxNC41MDAyIDIwLjA2MTZMMjMuNTAwMiAxNC44NjQzQzIzLjk3ODYgMTQuNTg4IDI0LjE0MjQgMTMuOTc2MiAyMy44NjYxIDEzLjQ5NzhDMjMuNzc4MyAxMy4zNDU5IDIzLjY1MjEgMTMuMjE5NyAyMy41MDAyIDEzLjEzMTlaIiBmaWxsPSJ3aGl0ZSIgZmlsbC1vcGFjaXR5PSIwLjgiIHNoYXBlLXJlbmRlcmluZz0iY3Jpc3BFZGdlcyIvPgo8L2c+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIyX2RfMV80NDI0NCkiPgo8cGF0aCBkPSJNMjMuNTAwMiAxNy4xMzE5TDIxLjUzNjEgMTUuOTk4NUwxNC41MDAyIDIwLjA2MTZDMTQuMTkwNyAyMC4yNCAxMy44MDk2IDIwLjI0IDEzLjUwMDIgMjAuMDYxNkw2LjQ2NDI4IDE1Ljk5ODVMNC41MDAxNyAxNy4xMzE5QzQuMDIxNzggMTcuNDA4MiAzLjg1Nzk2IDE4LjAyIDQuMTM0MjggMTguNDk4NEM0LjIyMjA0IDE4LjY1MDQgNC4zNDgyMyAxOC43NzY2IDQuNTAwMTcgMTguODY0M0wxMy41MDAyIDI0LjA2MTZDMTMuODA5NiAyNC4yNCAxNC4xOTA3IDI0LjI0IDE0LjUwMDIgMjQuMDYxNkwyMy41MDAyIDE4Ljg2NDNDMjMuOTc4NiAxOC41ODggMjQuMTQyNCAxNy45NzYyIDIzLjg2NjEgMTcuNDk3OEMyMy43NzgzIDE3LjM0NTkgMjMuNjUyMSAxNy4yMTk3IDIzLjUwMDIgMTcuMTMxOVoiIGZpbGw9IndoaXRlIiBmaWxsLW9wYWNpdHk9IjAuNiIgc2hhcGUtcmVuZGVyaW5nPSJjcmlzcEVkZ2VzIi8+CjwvZz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kXzFfNDQyNDQiIHg9IjMiIHk9IjMuODA1MTgiIHdpZHRoPSIyMiIgaGVpZ2h0PSIxNC4zOTAxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjEiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMC41Ii8+CjxmZUNvbXBvc2l0ZSBpbjI9ImhhcmRBbHBoYSIgb3BlcmF0b3I9Im91dCIvPgo8ZmVDb2xvck1hdHJpeCB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwLjU1Mjk0MSAwIDAgMCAwIDAuNTYwNzg0IDAgMCAwIDAgMC42NTA5OCAwIDAgMCAwLjE1IDAiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJlZmZlY3QxX2Ryb3BTaGFkb3dfMV80NDI0NCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDFfZHJvcFNoYWRvd18xXzQ0MjQ0IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8ZmlsdGVyIGlkPSJmaWx0ZXIxX2RfMV80NDI0NCIgeD0iMyIgeT0iMTEuOTk4NSIgd2lkdGg9IjIyIiBoZWlnaHQ9IjEwLjE5NjgiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj4KPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29tcG9zaXRlIGluMj0iaGFyZEFscGhhIiBvcGVyYXRvcj0ib3V0Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuNTUyOTQxIDAgMCAwIDAgMC41NjA3ODQgMCAwIDAgMCAwLjY1MDk4IDAgMCAwIDAuMTUgMCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiByZXN1bHQ9ImVmZmVjdDFfZHJvcFNoYWRvd18xXzQ0MjQ0Ii8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iZWZmZWN0MV9kcm9wU2hhZG93XzFfNDQyNDQiIHJlc3VsdD0ic2hhcGUiLz4KPC9maWx0ZXI+CjxmaWx0ZXIgaWQ9ImZpbHRlcjJfZF8xXzQ0MjQ0IiB4PSIzIiB5PSIxNS45OTg1IiB3aWR0aD0iMjIiIGhlaWdodD0iMTAuMTk2OCIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiPgo8ZmVGbG9vZCBmbG9vZC1vcGFjaXR5PSIwIiByZXN1bHQ9IkJhY2tncm91bmRJbWFnZUZpeCIvPgo8ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlQWxwaGEiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIgcmVzdWx0PSJoYXJkQWxwaGEiLz4KPGZlT2Zmc2V0IGR5PSIxIi8+CjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjAuNSIvPgo8ZmVDb21wb3NpdGUgaW4yPSJoYXJkQWxwaGEiIG9wZXJhdG9yPSJvdXQiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC41NTI5NDEgMCAwIDAgMCAwLjU2MDc4NCAwIDAgMCAwIDAuNjUwOTggMCAwIDAgMC4xNSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzFfNDQyNDQiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMV80NDI0NCIgcmVzdWx0PSJzaGFwZSIvPgo8L2ZpbHRlcj4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xXzQ0MjQ0Ij4KPHJlY3Qgd2lkdGg9IjI4IiBoZWlnaHQ9IjI4IiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo=";let ln,un;function Sv(e,t=!1){ln?t?un==null||un.push(e):ln.push(e):(ln=t?[]:[e],un=t?[e]:[],Promise.resolve().then(()=>{const i=ln,n=un;ln=void 0,un=void 0,n==null||n.forEach(r=>r()),i==null||i.forEach(r=>r())}))}function Iv(e){const t=e.cloneNode(!0);t.style.position="absolute",t.style.top="-99999px",t.style.float="none",t.style.visibility="hidden",t.style.display="block",document.body.appendChild(t);const i=t.getBoundingClientRect();return document.body.removeChild(t),{height:i.height,width:i.width}}class oh{constructor({visible:t=!0,readonly:i=!1,darkMode:n=!1,namespace:r="telebox",styles:s={},onClick:o,minimizedBoxes:a=[],boxes:l=[]}={}){this.handleCollectorClick=()=>{!this._readonly&&this.onClick&&this.popupVisible$.setValue(!this.popupVisible$.value)},this._sideEffect=new $n;const{createVal:u}=cl(this._sideEffect);this._visible=t,this._readonly=i,this._darkMode=n,this.namespace=r,this.styles=s,this.minimizedBoxes=a,this.boxes=l,this.onClick=o,this.popupVisible$=u(!1),this.popupVisible$.reaction(c=>{var m;(m=this.$titles)==null||m.classList.toggle(this.wrapClassName("collector-hide"),!c),requestAnimationFrame(()=>{requestAnimationFrame(()=>{var v;(v=this.$titles)==null||v.classList.toggle(this.wrapClassName("collector-titles-visible"),c)})})});const d=c=>{!this.popupVisible$||c.target.className.includes("collector")||this.popupVisible$.setValue(!1)};this._sideEffect.addEventListener(window,"pointerdown",d,!0)}get visible(){return this._visible}get readonly(){return this._readonly}get darkMode(){return this._darkMode}mount(t){return this.render(t),this.root=t,this}unmount(){return this.$collector&&this.$collector.remove(),this}setVisible(t){var i;return this._visible!==t&&(this._visible=t,this.$collector&&(this.$collector.classList.toggle(this.wrapClassName("collector-visible"),t),(i=this.wrp$)==null||i.classList.toggle(this.wrapClassName("collector-visible"),t),t?this.renderTitles():this.popupVisible$.setValue(!1))),this}setReadonly(t){return this._readonly!==t&&(this._readonly=t,this.$collector&&this.$collector.classList.toggle(this.wrapClassName("collector-readonly"),t)),this}setDarkMode(t){return this._darkMode!==t&&(this._darkMode=t,this.$collector&&(this.$collector.classList.toggle(this.wrapClassName("color-scheme-dark"),t),this.$collector.classList.toggle(this.wrapClassName("color-scheme-light"),!t))),this}setStyles(t){if(Object.assign(this.styles,t),this.wrp$){const i=this.wrp$;Object.keys(t).forEach(n=>{const r=t[n];r!=null&&(i.style[n]=r)})}return this}setMinimizedBoxes(t){var i;this.minimizedBoxes=t,this.count$&&(this.count$.textContent=String((i=this.minimizedBoxes)==null?void 0:i.length)||"0"),this.renderTitles()}setBoxes(t){this.boxes=t,this.renderTitles()}render(t){return this.$collector||(this.$collector=document.createElement("button"),this.$collector.className=this.wrapClassName("collector"),this.$collector.style.backgroundImage=`url('${Mv}')`,this.wrp$=document.createElement("div"),this.count$=document.createElement("div"),this.wrp$.className=this.wrapClassName("collector-wrp"),this.count$.className=this.wrapClassName("collector-count"),this.wrp$.appendChild(this.count$),this.wrp$.appendChild(this.$collector),this.$collector.addEventListener("click",this.handleCollectorClick),this._visible&&(this.$collector.classList.add(this.wrapClassName("collector-visible")),this.wrp$.classList.toggle(this.wrapClassName("collector-visible")),this.renderTitles()),this._readonly&&this.$collector.classList.add(this.wrapClassName("collector-readonly")),this.$collector.classList.add(this.wrapClassName(this._darkMode?"color-scheme-dark":"color-scheme-light")),this.setStyles(this.styles),t.appendChild(this.wrp$)),this.$collector}renderTitles(){var t,i,n,r;this.$titles||(this.$titles=document.createElement("div"),this.$titles.className=this.wrapClassName("collector-titles"),this.$titles.classList.toggle(this.wrapClassName("collector-hide"),!this.popupVisible$.value)),this._sideEffect.addEventListener(this.$titles,"wheel",u=>{u.deltaX||u.currentTarget.scrollBy({left:u.deltaY>0?250:-250,behavior:"smooth"})},{passive:!1},"min-popup-render-wheel-titles");const s=this.$titles.querySelector(`.${this.wrapClassName("collector-titles-content")}`),o=s!=null?s:document.createElement("div");o.className=this.wrapClassName("collector-titles-content"),s||(this.$titles.appendChild(o),this._sideEffect.addEventListener(o,"click",u=>{var d,c,m,v;const y=u.target;(c=(d=y.dataset)==null?void 0:d.teleBoxID)!=null&&c.length&&((v=this.onClick)==null||v.call(this,(m=y.dataset)==null?void 0:m.teleBoxID))},{},"telebox-collector-titles-content-click")),o.innerHTML="";const a=(t=this.boxes)==null?void 0:t.filter(u=>{var d;return(d=this.minimizedBoxes)==null?void 0:d.includes(u.id)}).map(u=>{const d=document.createElement("button");return d.className=this.wrapClassName("collector-titles-tab"),d.textContent=u.title,d.dataset.teleBoxID=u.id,d.dataset.teleTitleBarNoDblClick="true",o.appendChild(d),u._title$.reaction(c=>d.textContent=c)});this._sideEffect.addDisposer(()=>a==null?void 0:a.forEach(u=>u()),"min-popup-render-tab-titles");const l=(i=this.wrp$)==null?void 0:i.querySelector(`.${this.wrapClassName("collector-titles")}`);return l?(r=this.wrp$)==null||r.replaceChild(this.$titles,l):(n=this.wrp$)==null||n.appendChild(this.$titles),Sv(()=>{var u,d;if(!this.$titles||!this.wrp$||!this.root)return;const c=(u=this.wrp$)==null?void 0:u.getBoundingClientRect(),m=(d=this.root)==null?void 0:d.getBoundingClientRect(),v=Iv(this.$titles),y=c.top-m.top>v.height,x=c.x-m.x>v.width/2-c.width/2,h=-v.height-10;let p=-(v.width/2-c.width/2);if(!y){const f=c.top;this.$titles.style.height=`${f}px`}x||(p=-(c.x-m.x-4)),this.$titles.style.top=`${h}px`,this.$titles.style.left=`${p}px`}),this.$titles}destroy(){this.$collector&&(this.$collector.removeEventListener("click",this.handleCollectorClick),this.$collector.remove(),this.$collector=void 0),this.onClick=void 0}wrapClassName(t){return`${this.namespace}-${t}`}}var he=(e=>(e.Focused="focused",e.Blurred="blurred",e.Created="created",e.Removed="removed",e.State="state",e.Maximized="maximized",e.Minimized="minimized",e.Move="move",e.Resize="resize",e.IntrinsicMove="intrinsic_move",e.IntrinsicResize="intrinsic_resize",e.VisualResize="visual_resize",e.ZIndex="z_index",e.PrefersColorScheme="prefers_color_scheme",e.DarkMode="dark_mode",e))(he||{});class Cv extends sh{constructor(t){super(t),this.boxes=t.boxes,this.focusedBox=t.focusedBox,this.containerRect=t.containerRect,this.darkMode=t.darkMode,this.maximizedBoxes$=t.maximizedBoxes$,this.minimizedBoxes$=t.minimizedBoxes$}focusBox(t){var i;if(!(this.focusedBox&&this.focusedBox===t)){if(this.$titles&&this.state===te.Maximized){const{children:n}=this.$titles.firstElementChild;for(let r=n.length-1;r>=0;r-=1){const s=n[r],o=(i=s.dataset)==null?void 0:i.teleBoxID;o&&(t&&o===t.id?s.classList.toggle(this.wrapClassName("titles-tab-focus"),!0):this.focusedBox&&o===this.focusedBox.id&&s.classList.toggle(this.wrapClassName("titles-tab-focus"),!1))}}this.focusedBox=t}}setContainerRect(t){if(this.containerRect=t,this.$titleBar){const{x:i,y:n,width:r}=t;this.$titleBar.style.transform=`translate(${i}px, ${n}px)`,this.$titleBar.style.width=r+"px"}}setBoxes(t){this.boxes=t,this.updateTitles()}setMaximizedBoxes(t){this.maximizedBoxes$=t,this.updateTitles()}setMinimizedBoxes(t){this.minimizedBoxes$=t,this.updateTitles()}setState(t){super.setState(t),this.$titleBar&&this.$titleBar.classList.toggle(this.wrapClassName("max-titlebar-maximized"),t===te.Maximized),this.updateTitles()}setReadonly(t){super.setReadonly(t),this.$titleBar&&this.$titleBar.classList.toggle(this.wrapClassName("readonly"),this.readonly)}setDarkMode(t){t!==this.darkMode&&(this.darkMode=t,this.$titleBar&&(this.$titleBar.classList.toggle(this.wrapClassName("color-scheme-dark"),t),this.$titleBar.classList.toggle(this.wrapClassName("color-scheme-light"),!t)))}render(){const t=super.render(),{x:i,y:n,width:r}=this.containerRect;t.style.transform=`translate(${i}px, ${n}px)`,t.style.width=r+"px",t.classList.add(this.wrapClassName("max-titlebar")),t.classList.toggle(this.wrapClassName("max-titlebar-maximized"),this.state===te.Maximized),t.classList.toggle(this.wrapClassName("readonly"),this.readonly),t.classList.add(this.wrapClassName(this.darkMode?"color-scheme-dark":"color-scheme-light"));const s=document.createElement("div");return s.classList.add(this.wrapClassName("titles-area")),t.insertBefore(s,t.firstElementChild),this.updateTitles(),t}destroy(){super.destroy(),this.$titles=void 0,this.boxes.length=0,this.focusedBox=void 0}updateTitles(){var t;(t=this.$titleBar)==null||t.classList.toggle(this.wrapClassName("max-titlebar-active"),this.maximizedBoxes$.length>0&&this.boxes.length>0&&this.maximizedBoxes$.filter(i=>!this.minimizedBoxes$.includes(i)).length>0),this.$titleBar&&this.maximizedBoxes$.length>0&&this.boxes.length>0&&this.maximizedBoxes$.filter(i=>!this.minimizedBoxes$.includes(i)).length>0&&(this.$titleBar.classList.toggle(this.wrapClassName("max-titlebar-single-title"),this.boxes.length===1),this.boxes.length===1?this.setTitle(this.boxes[0].title):this.$titleBar.replaceChild(this.renderTitles(),this.$titleBar.firstElementChild))}renderTitles(){this.$titles=document.createElement("div"),this.$titles.className=this.wrapClassName("titles"),this.$titles.addEventListener("wheel",i=>{i.currentTarget.scrollBy({left:i.deltaY>0?250:-250,behavior:"smooth"})},{passive:!1});const t=document.createElement("div");return t.className=this.wrapClassName("titles-content"),this.$titles.appendChild(t),this.boxes.filter(i=>this.maximizedBoxes$.includes(i.id)).filter(i=>!this.minimizedBoxes$.includes(i.id)).forEach(i=>{const n=document.createElement("button");n.className=this.wrapClassName("titles-tab"),n.textContent=i.title,n.dataset.teleBoxID=i.id,n.dataset.teleTitleBarNoDblClick="true",this.focusedBox&&i.id===this.focusedBox.id&&n.classList.add(this.wrapClassName("titles-tab-focus")),t.appendChild(n)}),this.$titles}}class bv{constructor({root:t=document.body,prefersColorScheme:i=dl.Light,fence:n=!0,containerRect:r={x:0,y:0,width:window.innerWidth,height:window.innerHeight},collector:s,namespace:o="telebox",readonly:a=!1,minimizedBoxes:l=[],maximizedBoxes:u=[]}={}){this.events=new Ho,this._sideEffect=new $n;const{combine:d,createVal:c}=cl(this._sideEffect);this.root=t,this.namespace=o,this.boxes$=c([]),this.topBox$=this.boxes$.derive(w=>{if(w.length>0)return w.reduce((B,C)=>B.zIndex>C.zIndex?B:C)});const m=window.matchMedia("(prefers-color-scheme: dark)"),v=c(!1);m&&(v.setValue(m.matches),this._sideEffect.add(()=>{const w=P=>{v.setValue(P.matches)};return m.addListener(w),()=>m.removeListener(w)}));const y=c(i);y.reaction((w,P,B)=>{this.boxes.forEach(C=>C.setPrefersColorScheme(w,B)),B||this.events.emit(he.PrefersColorScheme,w)}),this._darkMode$=d([v,y],([w,P])=>P==="auto"?w:P==="dark"),this._darkMode$.reaction((w,P,B)=>{this.boxes.forEach(C=>C.setDarkMode(w,B)),B||this.events.emit(he.DarkMode,w)});const x=c(a);x.reaction((w,P,B)=>{this.boxes.forEach(C=>C.setReadonly(w,B))}),this.maximizedBoxes$=c(u),this.minimizedBoxes$=c(l),this.maximizedBoxes$.reaction((w,P,B)=>{this.boxes.forEach(_=>_.setMaximized(w.includes(_.id),B));const C=w.filter(_=>!this.minimizedBoxes$.value.includes(_));this.maxTitleBar.setState(C.length>0?te.Maximized:te.Normal),this.maxTitleBar.setMaximizedBoxes(w),B||this.events.emit(he.Maximized,w)});const h=d([this.minimizedBoxes$,this.maximizedBoxes$],([w,P])=>w.length?te.Minimized:P.length?te.Maximized:te.Normal);h.reaction((w,P,B)=>{this.maxTitleBar.setState(w),B||this.events.emit(he.State,w)});const p=c(n);p.subscribe((w,P,B)=>{this.boxes.forEach(C=>C.setFence(w,B))});const f=c(r,ut);f.reaction((w,P,B)=>{this.boxes.forEach(C=>C.setContainerRect(w,B)),this.maxTitleBar.setContainerRect(w)});const g=c(s===null?null:s||new oh({visible:this.minimizedBoxes$.value.length>0,readonly:a,namespace:o,minimizedBoxes:this.minimizedBoxes$.value,boxes:this.boxes$.value}).mount(t));g.subscribe(w=>{w&&(w.setVisible(this.minimizedBoxes$.value.length>0),w.setReadonly(x.value),w.setDarkMode(this._darkMode$.value),this._sideEffect.add(()=>(w.onClick=P=>{x.value||this.setMinimizedBoxes(an(this.minimizedBoxes$.value.filter(Boolean),P))},()=>w.destroy()),"collect-onClick"))}),x.subscribe(w=>{var P;return(P=g.value)==null?void 0:P.setReadonly(w)}),this._darkMode$.subscribe(w=>{var P;(P=g.value)==null||P.setDarkMode(w)});const M=()=>{var w;if((w=g.value)!=null&&w.$collector){const{x:P,y:B,width:C,height:_}=g.value.$collector.getBoundingClientRect(),Z=this.root.getBoundingClientRect();return{x:P-Z.x,y:B-Z.y,width:C,height:_}}},S=c(this.minimizedBoxes$.value.length>0?M():void 0);S.subscribe((w,P,B)=>{this.boxes.forEach(C=>{C.setCollectorRect(w,B)})}),this.minimizedBoxes$.reaction((w,P,B)=>{var C,_,Z;this.boxes.forEach(ue=>ue.setMinimized(w.includes(ue.id),B));const G=this.maximizedBoxes$.value.filter(ue=>!w.includes(ue));this.maxTitleBar.setState(G.length>0?te.Maximized:te.Normal),this.maxTitleBar.setMinimizedBoxes(w);const ne=w.length>0;(C=g.value)==null||C.setVisible(ne),(_=this.collector)==null||_.setMinimizedBoxes(w),ne&&(Z=g.value)!=null&&Z.$collector&&S.setValue(M()),B||this.events.emit(he.Minimized,w)});const E=this.wrapClassName("titlebar-icon-close"),k=w=>{var P;if(x.value)return;const B=w.target;if(!!B.tagName)for(let C=B;C;C=C.parentElement){if(C.classList&&C.classList.contains(E))return;const _=(P=C.dataset)==null?void 0:P.teleBoxID;if(_){const Z=this.getBox(_);if(Z){this.focusBox(Z),this.makeBoxTop(Z);return}}}};this._sideEffect.addEventListener(window,"mousedown",k,!0),this._sideEffect.addEventListener(window,"touchstart",k,!0),this.maxTitleBar=new Cv({darkMode:this.darkMode,readonly:x.value,namespace:this.namespace,state:h.value,boxes:this.boxes$.value,containerRect:f.value,maximizedBoxes$:this.maximizedBoxes$.value,minimizedBoxes$:this.minimizedBoxes$.value,onEvent:w=>{var P,B,C,_,Z,G;switch(w.type){case Ne.Maximize:{if((P=this.maxTitleBar.focusedBox)!=null&&P.id){const ne=(B=this.maxTitleBar.focusedBox)==null?void 0:B.id,je=this.maximizedBoxes$.value.includes(ne)?an([...this.maximizedBoxes$.value],ne):Ru([...this.maximizedBoxes$.value,(C=this.maxTitleBar.focusedBox)==null?void 0:C.id]);this.setMaximizedBoxes(je);const st=this.makeBoxTopFromMaximized(),Xe=this.boxes$.value.find(ei=>ei.id==ne);Xe&&this.makeBoxTop(Xe),st||this.setMaximizedBoxes([])}else this.setMaximizedBoxes([]);break}case Ne.Minimize:{if((_=this.maxTitleBar.focusedBox)!=null&&_.id){const ne=Ru([...this.minimizedBoxes$.value,(Z=this.maxTitleBar.focusedBox)==null?void 0:Z.id]);this.makeBoxTopFromMaximized(),this.setMinimizedBoxes(ne)}break}case pe.Close:{const ne=(G=this.maxTitleBar.focusedBox)==null?void 0:G.id;ne&&(this.remove(ne),this.makeBoxTopFromMaximized(),this.setMaximizedBoxes(an(this.maximizedBoxes$.value,ne))),this.focusTopBox();break}}}}),x.subscribe(w=>this.maxTitleBar.setReadonly(w)),this._darkMode$.subscribe(w=>{this.maxTitleBar.setDarkMode(w)}),this.boxes$.reaction(w=>{var P;this.maxTitleBar.setBoxes(w),(P=this.collector)==null||P.setBoxes(w)}),this.maximizedBoxes$.reaction(w=>{this.maxTitleBar.setMaximizedBoxes(w)}),this.minimizedBoxes$.reaction(w=>{this.maxTitleBar.setMinimizedBoxes(w)});const N={prefersColorScheme:y,containerRect:f,collector:g,collectorRect:S,readonly:x,fence:p,maximizedBoxes:this.maximizedBoxes$,minimizedBoxes:this.minimizedBoxes$};rh(this,N),this._state$=h,this.root.appendChild(this.maxTitleBar.render())}get boxes(){return this.boxes$.value}get topBox(){return this.topBox$.value}get darkMode(){return this._darkMode$.value}get state(){return this._state$.value}setMinimized(t,i=!1){console.log("mini",t,i)}setMaximized(t,i=!1){console.log("max",t,i)}setState(t,i=!1){switch(console.log(i),t){case te.Maximized:break;case te.Minimized:break}return this}create(t={},i=!0){const n=t.id||Ni(),r=this.maximizedBoxes$.value.includes(n),s=this.maximizedBoxes$.value.includes(n),o=new xv({zIndex:this.topBox?this.topBox.zIndex+1:100,...i?this.smartPosition(t):t,darkMode:this.darkMode,prefersColorScheme:this.prefersColorScheme,maximized:r,minimized:s,fence:this.fence,namespace:this.namespace,containerRect:this.containerRect,readonly:this.readonly,collectorRect:this.collectorRect,id:n});return o.mount(this.root),o.focus&&(this.focusBox(o),i&&this.makeBoxTop(o)),this.boxes$.setValue([...this.boxes,o]),o._delegateEvents.on(Ne.Maximize,()=>{this.setMaximizedBoxes(this.boxes$.value.map(a=>a.id)),this.maxTitleBar.focusBox(o)}),o._delegateEvents.on(Ne.Minimize,()=>{this.setMinimizedBoxes([...this.minimizedBoxes$.value,n])}),o._delegateEvents.on(Ne.Close,()=>{this.remove(o),this.makeBoxTopFromMaximized(o.id),this.focusTopBox()}),o._coord$.reaction((a,l,u)=>{u||this.events.emit(he.Move,o)}),o._size$.reaction((a,l,u)=>{u||this.events.emit(he.Resize,o)}),o._intrinsicCoord$.reaction((a,l,u)=>{u||this.events.emit(he.IntrinsicMove,o)}),o._intrinsicSize$.reaction((a,l,u)=>{u||this.events.emit(he.IntrinsicResize,o)}),o._visualSize$.reaction((a,l,u)=>{u||this.events.emit(he.VisualResize,o)}),o._zIndex$.reaction((a,l,u)=>{if(this.boxes.length>0){const d=this.boxes.reduce((c,m)=>c.zIndex>m.zIndex?c:m);this.topBox$.setValue(d)}u||this.events.emit(he.ZIndex,o)}),this.events.emit(he.Created,o),o}query(t){return t?this.boxes.filter(this.teleBoxMatcher(t)):[...this.boxes]}queryOne(t){return t?this.boxes.find(this.teleBoxMatcher(t)):this.boxes[0]}update(t,i,n=!1){const r=this.boxes.find(s=>s.id===t);if(r)return this.updateBox(r,i,n)}updateAll(t,i=!1){this.boxes.forEach(n=>{this.updateBox(n,t,i)})}remove(t,i=!1){var n;const r=this.getBoxIndex(t);if(r>=0){const s=this.boxes.slice(),o=s.splice(r,1);this.boxes$.setValue(s),o.forEach(l=>l.destroy());const a=(n=this.getBox(t))==null?void 0:n.id;return a&&(this.setMaximizedBoxes(an(this.maximizedBoxes$.value,a)),this.setMinimizedBoxes(an(this.minimizedBoxes$.value,a))),i||(this.boxes.length<=0&&(this.setMaximizedBoxes([]),this.setMinimizedBoxes([])),this.events.emit(he.Removed,o)),o[0]}}removeTopBox(){if(this.topBox)return this.remove(this.topBox)}removeAll(t=!1){const i=this.boxes$.value;return this.boxes$.setValue([]),i.forEach(n=>n.destroy()),t||(this.boxes.length<=0&&(this.setMaximizedBoxes([]),this.setMinimizedBoxes([])),this.events.emit(he.Removed,i)),i}destroy(t=!1){this.events.removeAllListeners(),this._sideEffect.flushAll(),this.removeAll(t),Object.keys(this).forEach(i=>{const n=this[i];n instanceof ir&&n.destroy()})}wrapClassName(t){return`${this.namespace}-${t}`}focusBox(t,i=!1){const n=this.getBox(t);n&&(this.boxes.forEach(r=>{if(n===r){let s=!1;n.focus||(s=!0,n.setFocus(!0,i)),s&&!i&&this.events.emit(he.Focused,n)}else r.focus&&(this.maximizedBoxes$.value.includes(r.id)||this.blurBox(r,i))}),this.maximizedBoxes$.value.length>0?this.maximizedBoxes$.value.includes(n.id)&&this.maxTitleBar.focusBox(n):this.maxTitleBar.focusBox(n))}focusTopBox(){if(this.topBox&&!this.topBox.focus)return this.focusBox(this.topBox)}blurBox(t,i=!1){const n=this.getBox(t);n&&(n.focus&&(n.setFocus(!1,i),i||this.events.emit(he.Blurred,n)),this.maxTitleBar.focusedBox===n&&this.maxTitleBar.focusBox())}blurAll(t=!1){this.boxes.forEach(i=>{i.focus&&(i.setFocus(!1,t),t||this.events.emit(he.Blurred,i))}),this.maxTitleBar.focusedBox&&this.maxTitleBar.focusBox()}teleBoxMatcher(t){const i=Object.keys(t);return n=>i.every(r=>t[r]===n[r])}updateBox(t,i,n=!1){(i.x!=null||i.y!=null)&&t.move(i.x==null?t.intrinsicX:i.x,i.y==null?t.intrinsicY:i.y,n),(i.width!=null||i.height!=null)&&t.resize(i.width==null?t.intrinsicWidth:i.width,i.height==null?t.intrinsicHeight:i.height,n),i.title!=null&&(t.setTitle(i.title),this.maxTitleBar.updateTitles()),i.visible!=null&&t.setVisible(i.visible,n),i.minHeight!=null&&t.setMinHeight(i.minHeight,n),i.minWidth!=null&&t.setMinWidth(i.minWidth,n),i.resizable!=null&&t.setResizable(i.resizable,n),i.draggable!=null&&t.setDraggable(i.draggable,n),i.fixRatio!=null&&t.setFixRatio(i.fixRatio,n),i.zIndex!=null&&t.setZIndex(i.zIndex,n),i.content!=null&&t.mountContent(i.content),i.footer!=null&&t.mountFooter(i.footer)}smartPosition(t={}){let{x:i,y:n}=t;const{width:r=.5,height:s=.5}=t;if(i==null){let o=20;this.topBox&&(o=this.topBox.intrinsicX*this.containerRect.width+20,o>this.containerRect.width-r*this.containerRect.width&&(o=20)),i=o/this.containerRect.width}if(n==null){let o=20;this.topBox&&(o=this.topBox.intrinsicY*this.containerRect.height+20,o>this.containerRect.height-s*this.containerRect.height&&(o=20)),n=o/this.containerRect.height}return{...t,x:i,y:n,width:r,height:s}}makeBoxTop(t,i=!1){if(this.topBox&&t!==this.topBox)if(this.maximizedBoxes$.value.includes(t.id)){const n=this.topBox.zIndex+1,r=wv(this.boxes$.value.map(o=>o.id),this.maximizedBoxes$.value,this.minimizedBoxes$.value),s=this.boxes$.value.filter(o=>r.includes(o.id));t._zIndex$.setValue(n,i),s.sort((o,a)=>o._zIndex$.value-a._zIndex$.value).forEach((o,a)=>{o._zIndex$.setValue(n+1+a,i)})}else t._zIndex$.setValue(this.topBox.zIndex+1,i)}makeBoxTopFromMaximized(t){let i;if(t)this.maximizedBoxes$.value.includes(t)&&!this.minimizedBoxes$.value.includes(t)&&(i=this.boxes$.value.find(n=>n.id===t));else{const n=this.boxes$.value.filter(r=>{var s;return r.id!=((s=this.maxTitleBar.focusedBox)==null?void 0:s.id)&&this.maximizedBoxes$.value.includes(r.id)&&!this.minimizedBoxes$.value.includes(r.id)});i=n.length?n.reduce((r,s)=>s._zIndex$.value>r._zIndex$.value?s:r):void 0,i&&this.maxTitleBar.focusBox(i)}return!!i}getBoxIndex(t){return typeof t=="string"?this.boxes.findIndex(i=>i.id===t):this.boxes.findIndex(i=>i===t)}getBox(t){return typeof t=="string"?this.boxes.find(i=>i.id===t):t}}const Av=(e,t,i,n,r)=>new Tv({safeSetAttributes:s=>e.safeSetAttributes(s),getMainView:()=>e.mainView,updateAppState:(...s)=>{var o;return(o=e.appManager)==null?void 0:o.store.updateAppState(...s)},canOperate:()=>e.canOperate,notifyContainerRectUpdate:s=>{var o;return(o=e.appManager)==null?void 0:o.notifyContainerRectUpdate(s)},cleanFocus:()=>{var s;return(s=e.appManager)==null?void 0:s.store.cleanFocus()},setAppFocus:s=>{var o;return(o=e.appManager)==null?void 0:o.store.setAppFocus(s,!0)},callbacks:t,emitter:i,boxEmitter:n},r);class Tv{constructor(t,i){this.context=t,this.createTeleBoxManagerConfig=i;const{emitter:n,callbacks:r,boxEmitter:s}=t;this.teleBoxManager=this.setupBoxManager(i),this.teleBoxManager._state$.reaction(o=>{r.emit("boxStateChange",o),n.emit("boxStateChange",o)}),this.teleBoxManager._darkMode$.reaction(o=>{r.emit("darkModeChange",o)}),this.teleBoxManager._prefersColorScheme$.reaction(o=>{r.emit("prefersColorSchemeChange",o)}),this.teleBoxManager._minimizedBoxes$.reaction(o=>{o.length||setTimeout(()=>{const a=.001*(Math.random()>.5?1:-1);this.teleBoxManager.boxes.forEach(l=>{l.resize(l.intrinsicWidth+a,l.intrinsicHeight+a,!0)})},400)}),this.teleBoxManager.events.on("minimized",o=>{this.context.safeSetAttributes({minimizedBoxes:JSON.stringify(o)})}),this.teleBoxManager.events.on("maximized",o=>{this.context.safeSetAttributes({maximizedBoxes:JSON.stringify(o)})}),this.teleBoxManager.events.on("removed",o=>{o.forEach(a=>{s.emit("close",{appId:a.id})})}),this.teleBoxManager.events.on("intrinsic_move",T.debounce(o=>{s.emit("move",{appId:o.id,x:o.intrinsicX,y:o.intrinsicY})},50)),this.teleBoxManager.events.on("intrinsic_resize",T.debounce(o=>{s.emit("resize",{appId:o.id,width:o.intrinsicWidth,height:o.intrinsicHeight})},200)),this.teleBoxManager.events.on("focused",o=>{o&&(this.canOperate?s.emit("focus",{appId:o.id}):this.teleBoxManager.blurBox(o.id))}),this.teleBoxManager.events.on("z_index",o=>{this.context.updateAppState(o.id,Te.ZIndex,o.zIndex)}),n.on("playgroundSizeChange",()=>this.updateManagerRect()),n.on("updateManagerRect",()=>this.updateManagerRect())}get mainView(){return this.context.getMainView()}get canOperate(){return this.context.canOperate()}get boxState(){return this.teleBoxManager.state}get maximized(){return!!this.teleBoxManager._maximizedBoxes$.value}get minimized(){return!!this.teleBoxManager._minimizedBoxes$.value}get darkMode(){return this.teleBoxManager.darkMode}get prefersColorScheme(){return this.teleBoxManager.prefersColorScheme}get boxSize(){return this.teleBoxManager.boxes.length}createBox(t){var u,d,c;if(!this.teleBoxManager)return;let{minwidth:i=Ag,minheight:n=Tg}=(u=t.app.config)!=null?u:{};const{width:r,height:s}=(d=t.app.config)!=null?d:{},o=((c=t.options)==null?void 0:c.title)||t.appId,a=this.teleBoxManager.containerRect;i>1&&(i=i/a.width),n>1&&(n=n/a.height);const l={title:o,minWidth:i,minHeight:n,width:r,height:s,id:t.appId};this.teleBoxManager.create(l,t.smartPosition),this.context.emitter.emit(`${t.appId}${q.WindowCreated}`)}setBoxInitState(t){const i=this.teleBoxManager.queryOne({id:t});i&&i.state===te.Maximized&&this.context.boxEmitter.emit("resize",{appId:t,x:i.x,y:i.y,width:i.intrinsicWidth,height:i.intrinsicHeight})}setupBoxManager(t){const i=Y.wrapper?Y.wrapper:document.body,n=i.getBoundingClientRect(),r={root:i,containerRect:{x:0,y:0,width:n.width,height:n.height},fence:!1,prefersColorScheme:t==null?void 0:t.prefersColorScheme},s=new bv(r);this.teleBoxManager&&this.teleBoxManager.destroy(),this.teleBoxManager=s;const o=(t==null?void 0:t.collectorContainer)||Y.wrapper;return o&&this.setCollectorContainer(o),s}setCollectorContainer(t){var n;const i=new oh({styles:(n=this.createTeleBoxManagerConfig)==null?void 0:n.collectorStyles}).mount(t);this.teleBoxManager.setCollector(i)}getBox(t){return this.teleBoxManager.queryOne({id:t})}closeBox(t,i=!1){return this.teleBoxManager.remove(t,i)}boxIsFocus(t){const i=this.getBox(t);return i==null?void 0:i.focus}getFocusBox(){return this.teleBoxManager.query({focus:!0})[0]}getTopBox(){return this.teleBoxManager.topBox}updateBoxState(t){if(console.log(t),!t)return;const i=this.getBox(t.id);i&&(this.teleBoxManager.update(i.id,{x:t.x,y:t.y,width:t.width||.5,height:t.height||.5,zIndex:t.zIndex},!0),setTimeout(()=>{t.focus&&this.teleBoxManager.focusBox(i.id,!0),t.maximized!=null&&this.teleBoxManager.setMaximizedBoxes(T.isString(t.maximizedBoxes)?JSON.parse(t.maximizedBoxes):[],!0),t.minimized!=null&&this.teleBoxManager.setMinimizedBoxes(T.isString(t.minimizedBoxes)?JSON.parse(t.minimizedBoxes):[],!0)},50),this.context.callbacks.emit("boxStateChange",this.teleBoxManager.state))}updateManagerRect(){var i;const t=(i=this.mainView.divElement)==null?void 0:i.getBoundingClientRect();if(t&&t.width>0&&t.height>0){const n={x:0,y:0,width:t.width,height:t.height};this.teleBoxManager.setContainerRect(n),this.context.notifyContainerRectUpdate(n)}}moveBox({appId:t,x:i,y:n}){this.teleBoxManager.update(t,{x:i,y:n},!0)}focusBox({appId:t},i=!0){this.teleBoxManager.focusBox(t,i)}resizeBox({appId:t,width:i,height:n,skipUpdate:r}){this.teleBoxManager.update(t,{width:i,height:n},r)}setBoxMinSize(t){this.teleBoxManager.update(t.appId,{minWidth:t.minWidth,minHeight:t.minHeight},!0)}setBoxTitle(t){this.teleBoxManager.update(t.appId,{title:t.title},!0)}blurAllBox(){this.teleBoxManager.blurAll()}updateAll(t){this.teleBoxManager.updateAll(t)}setMaximized(t,i=!0){if(!!T.isString(t))try{this.teleBoxManager.setMaximizedBoxes(JSON.parse(t),i)}catch(n){console.log(n)}}setMinimized(t,i=!0){if(!!T.isString(t))try{this.teleBoxManager.setMinimizedBoxes(JSON.parse(t),i)}catch(n){console.log(n)}}focusTopBox(){if(this.teleBoxManager.query().length>=1){const i=this.getTopBox();i&&this.focusBox({appId:i.id},!1)}}updateBox(t,i,n=!0){console.log(t,i),this.teleBoxManager.update(t,i,n)}setReadonly(t){this.teleBoxManager.setReadonly(t)}setPrefersColorScheme(t){this.teleBoxManager.setPrefersColorScheme(t)}setZIndex(t,i,n=!0){this.teleBoxManager.update(t,{zIndex:i},n)}destroy(){this.teleBoxManager.destroy()}}function rs(){}function ah(e){return e()}function Ou(){return Object.create(null)}function _s(e){e.forEach(ah)}function Ev(e){return typeof e=="function"}function Nv(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Sr;function ss(e,t){return Sr||(Sr=document.createElement("a")),Sr.href=t,e===Sr.href}function kv(e){return Object.keys(e).length===0}function bt(e,t){e.appendChild(t)}function Vs(e,t,i){e.insertBefore(t,i||null)}function nr(e){e.parentNode.removeChild(e)}function Vt(e){return document.createElement(e)}function hl(e){return document.createTextNode(e)}function Xo(){return hl(" ")}function oe(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function Pv(e){return Array.from(e.childNodes)}function lh(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function we(e,t,i,n){e.style.setProperty(t,i,n?"important":"")}let uh;function os(e){uh=e}const Mn=[],Uu=[],$r=[],$u=[],Dv=Promise.resolve();let Jo=!1;function zv(){Jo||(Jo=!0,Dv.then(ch))}function Ko(e){$r.push(e)}let vo=!1;const wo=new Set;function ch(){if(!vo){vo=!0;do{for(let e=0;e<Mn.length;e+=1){const t=Mn[e];os(t),Bv(t.$$)}for(os(null),Mn.length=0;Uu.length;)Uu.pop()();for(let e=0;e<$r.length;e+=1){const t=$r[e];wo.has(t)||(wo.add(t),t())}$r.length=0}while(Mn.length);for(;$u.length;)$u.pop()();Jo=!1,vo=!1,wo.clear()}}function Bv(e){if(e.fragment!==null){e.update(),_s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ko)}}const jv=new Set;function Lv(e,t){e&&e.i&&(jv.delete(e),e.i(t))}function Rv(e,t,i,n){const{fragment:r,on_mount:s,on_destroy:o,after_update:a}=e.$$;r&&r.m(t,i),n||Ko(()=>{const l=s.map(ah).filter(Ev);o?o.push(...l):_s(l),e.$$.on_mount=[]}),a.forEach(Ko)}function _v(e,t){const i=e.$$;i.fragment!==null&&(_s(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function Vv(e,t){e.$$.dirty[0]===-1&&(Mn.push(e),zv(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ov(e,t,i,n,r,s,o,a=[-1]){const l=uh;os(e);const u=e.$$={fragment:null,ctx:null,props:s,update:rs,not_equal:r,bound:Ou(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:t.context||[]),callbacks:Ou(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};o&&o(u.root);let d=!1;if(u.ctx=i?i(e,t.props||{},(c,m,...v)=>{const y=v.length?v[0]:m;return u.ctx&&r(u.ctx[c],u.ctx[c]=y)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](y),d&&Vv(e,c)),m}):[],u.update(),d=!0,_s(u.before_update),u.fragment=n?n(u.ctx):!1,t.target){if(t.hydrate){const c=Pv(t.target);u.fragment&&u.fragment.l(c),c.forEach(nr)}else u.fragment&&u.fragment.c();t.intro&&Lv(e.$$.fragment),Rv(e,t.target,t.anchor,t.customElement),ch()}os(l)}class Uv{$destroy(){_v(this,1),this.$destroy=rs}$on(t,i){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(i),()=>{const r=n.indexOf(i);r!==-1&&n.splice(r,1)}}$set(t){this.$$set&&!kv(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Wu(e){let t,i,n,r,s,o,a,l=e[18]&&Hu(e),u=e[19]&&Zu(e);return{c(){t=Vt("div"),i=Vt("div"),l&&l.c(),n=Xo(),r=Vt("span"),s=hl(e[1]),o=Xo(),u&&u.c(),we(r,"overflow","hidden"),we(r,"white-space","nowrap"),we(r,"text-overflow","ellipsis"),we(r,"max-width","80px"),oe(i,"class",e[9]),we(i,"background-color",e[3]),we(i,"color",e[10]),we(i,"opacity",e[12]),oe(t,"class",a="netless-window-manager-cursor-name "+e[16]+" "+e[15])},m(d,c){Vs(d,t,c),bt(t,i),l&&l.m(i,null),bt(i,n),bt(i,r),bt(r,s),bt(i,o),u&&u.m(i,null)},p(d,c){d[18]?l?l.p(d,c):(l=Hu(d),l.c(),l.m(i,n)):l&&(l.d(1),l=null),c&2&&lh(s,d[1]),d[19]?u?u.p(d,c):(u=Zu(d),u.c(),u.m(i,null)):u&&(u.d(1),u=null),c&512&&oe(i,"class",d[9]),c&8&&we(i,"background-color",d[3]),c&1024&&we(i,"color",d[10]),c&4096&&we(i,"opacity",d[12]),c&98304&&a!==(a="netless-window-manager-cursor-name "+d[16]+" "+d[15])&&oe(t,"class",a)},d(d){d&&nr(t),l&&l.d(),u&&u.d()}}}function Hu(e){let t,i;return{c(){t=Vt("img"),oe(t,"class","netless-window-manager-cursor-selector-avatar"),oe(t,"style",e[20]()),ss(t.src,i=e[8])||oe(t,"src",i),oe(t,"alt","avatar")},m(n,r){Vs(n,t,r)},p(n,r){r&256&&!ss(t.src,i=n[8])&&oe(t,"src",i)},d(n){n&&nr(t)}}}function Zu(e){let t,i;return{c(){t=Vt("span"),i=hl(e[2]),oe(t,"class","netless-window-manager-cursor-tag-name"),we(t,"background-color",e[11])},m(n,r){Vs(n,t,r),bt(t,i)},p(n,r){r&4&&lh(i,n[2]),r&2048&&we(t,"background-color",n[11])},d(n){n&&nr(t)}}}function $v(e){let t,i,n,r,s,o,a,l=!e[14]&&Wu(e);return{c(){t=Vt("div"),l&&l.c(),i=Xo(),n=Vt("div"),r=Vt("img"),oe(r,"class",s="netless-window-manager-cursor-"+e[4]+"-image "+e[15]),ss(r.src,o=e[7])||oe(r,"src",o),oe(r,"alt",e[4]),oe(n,"class","cursor-image-wrapper"),oe(t,"class",a="netless-window-manager-cursor-mid"+(e[13]?" netless-window-manager-cursor-custom":"")),we(t,"transform","translateX("+e[5]+"px) translateY("+e[6]+"px)"),we(t,"display",e[17]),oe(t,"data-cursor-uid",e[0])},m(u,d){Vs(u,t,d),l&&l.m(t,null),bt(t,i),bt(t,n),bt(n,r)},p(u,[d]){u[14]?l&&(l.d(1),l=null):l?l.p(u,d):(l=Wu(u),l.c(),l.m(t,i)),d&32784&&s!==(s="netless-window-manager-cursor-"+u[4]+"-image "+u[15])&&oe(r,"class",s),d&128&&!ss(r.src,o=u[7])&&oe(r,"src",o),d&16&&oe(r,"alt",u[4]),d&8192&&a!==(a="netless-window-manager-cursor-mid"+(u[13]?" netless-window-manager-cursor-custom":""))&&oe(t,"class",a),d&96&&we(t,"transform","translateX("+u[5]+"px) translateY("+u[6]+"px)"),d&131072&&we(t,"display",u[17]),d&1&&oe(t,"data-cursor-uid",u[0])},i:rs,o:rs,d(u){u&&nr(t),l&&l.d()}}}function Wv(e,t,i){let n,r,s,o,a,l,u,d,{uid:c}=t,{cursorName:m}=t,{tagName:v}=t,{backgroundColor:y}=t,{appliance:x}=t,{x:h}=t,{y:p}=t,{src:f}=t,{visible:g}=t,{avatar:M}=t,{theme:S}=t,{color:E}=t,{cursorTagBackgroundColor:k}=t,{opacity:N}=t,{pencilEraserSize:w}=t,{custom:P}=t;const B=()=>Object.entries({width:(n?19:28)+"px",height:(n?19:28)+"px",position:n?"initial":"absolute","border-color":n?"white":y,"margin-right":(n?4:0)+"px"}).map(([C,_])=>`${C}: ${_}`).join(";");return e.$$set=C=>{"uid"in C&&i(0,c=C.uid),"cursorName"in C&&i(1,m=C.cursorName),"tagName"in C&&i(2,v=C.tagName),"backgroundColor"in C&&i(3,y=C.backgroundColor),"appliance"in C&&i(4,x=C.appliance),"x"in C&&i(5,h=C.x),"y"in C&&i(6,p=C.y),"src"in C&&i(7,f=C.src),"visible"in C&&i(21,g=C.visible),"avatar"in C&&i(8,M=C.avatar),"theme"in C&&i(9,S=C.theme),"color"in C&&i(10,E=C.color),"cursorTagBackgroundColor"in C&&i(11,k=C.cursorTagBackgroundColor),"opacity"in C&&i(12,N=C.opacity),"pencilEraserSize"in C&&i(22,w=C.pencilEraserSize),"custom"in C&&i(13,P=C.custom)},e.$$.update=()=>{e.$$.dirty&2&&(n=!T.isEmpty(m)),e.$$.dirty&4&&i(19,r=!T.isEmpty(v)),e.$$.dirty&256&&i(18,s=!T.isEmpty(M)),e.$$.dirty&2097152&&i(17,o=g?"":"none"),e.$$.dirty&16&&i(14,a=x===b.ApplianceNames.laserPointer),e.$$.dirty&16400&&i(23,l=a||x===b.ApplianceNames.pencilEraser),e.$$.dirty&8388608&&i(16,u=l?"netless-window-manager-laserPointer-pencilEraser-offset":""),e.$$.dirty&4194304&&i(15,d=w===3?"netless-window-manager-pencilEraser-3-offset":"")},[c,m,v,y,x,h,p,f,M,S,E,k,N,P,a,d,u,o,s,r,B,g,w,l]}class Hv extends Uv{constructor(t){super(),Ov(this,t,Wv,$v,Nv,{uid:0,cursorName:1,tagName:2,backgroundColor:3,appliance:4,x:5,y:6,src:7,visible:21,avatar:8,theme:9,color:10,cursorTagBackgroundColor:11,opacity:12,pencilEraserSize:22,custom:13})}}const dh="data:image/svg+xml,%3Csvg width='24' height='24' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Ccircle cx='12' cy='12' r='2.5' stroke='%23000' stroke-linejoin='square'/%3E%3Ccircle cx='12' cy='12' r='3.5' stroke='%23FFF'/%3E%3C/g%3E%3C/svg%3E";function hh(e){return`data:image/svg+xml,%3Csvg width='24' height='24' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Ccircle cx='12' cy='12' r='2.5' stroke='%23${e}' stroke-linejoin='square'/%3E%3Ccircle cx='12' cy='12' r='3.5' stroke='%23${e}'/%3E%3C/g%3E%3C/svg%3E`}function ki(e){return`data:image/svg+xml,%3Csvg width='24' height='24' xmlns='http://www.w3.org/2000/svg' fill='none'%3E%3Cpath d='M5 12H19' stroke='%23${e}' stroke-linejoin='round'/%3E%3Cpath d='M12 5V19' stroke='%23${e}' stroke-linejoin='round'/%3E%3C/svg%3E`}function ii(e){return`url("${e}") 12 12, auto`}function Zv(e){let t="";for(const i in e)t+=`.netless-whiteboard.${i} {cursor: ${e[i]}}
`;return t}const Ir=document.createElement("style");function Qv(e){const[t,i,n]=e.strokeColor,r=((1<<24)+(t<<16)+(i<<8)+n).toString(16).slice(1);return Ir.textContent=Zv({"cursor-pencil":ii(hh(r)),"cursor-eraser":ii(dh),"cursor-rectangle":ii(ki(r)),"cursor-ellipse":ii(ki(r)),"cursor-straight":ii(ki(r)),"cursor-arrow":ii(ki(r)),"cursor-shape":ii(ki(r))}),document.head.appendChild(Ir),()=>{Ir.parentNode!=null&&document.head.removeChild(Ir)}}const Fv=new Set([b.ApplianceNames.rectangle,b.ApplianceNames.ellipse,b.ApplianceNames.straight,b.ApplianceNames.arrow,b.ApplianceNames.shape]);function Qu(e,t){if(e===b.ApplianceNames.pencil)return hh(t);if(e===b.ApplianceNames.eraser)return dh;if(Fv.has(e))return ki(t)}class Gv{constructor(t,i,n,r){this.manager=t,this.memberId=i,this.cursorManager=n,this.wrapper=r,this.style="default",this.move=s=>{var o;if(s.type==="main"){const a=this.cursorManager.wrapperRect;this.component&&a&&(this.autoHidden(),this.moveCursor(s,a,this.manager.mainView))}else{const a=this.cursorManager.focusView,l=(o=a==null?void 0:a.divElement)==null?void 0:o.getBoundingClientRect(),u=a==null?void 0:a.camera;a&&l&&u&&this.component&&(this.autoHidden(),this.moveCursor(s,l,a))}},this.setStyle=s=>{this.style=s,this.component&&this.component.$set({src:this.getIcon(),custom:this.isCustomIcon()})},this.leave=()=>{this.hide()},this.updateMember(),this.createCursor(),this.autoHidden(),this.setStyle(n.style)}moveCursor(t,i,n){var l,u;const{x:r,y:s,type:o}=t,a=n==null?void 0:n.screen.convertPointToScreen(r,s);if(a){let d=a.x-2,c=a.y-18;if(this.isCustomIcon()&&(d-=11,c+=4),o==="app"){const m=this.cursorManager.wrapperRect;m&&(d=d+i.x-m.x,c=c+i.y-m.y)}a.x<0||a.x>i.width||a.y<0||a.y>i.height?(l=this.component)==null||l.$set({visible:!1,x:d,y:c}):(u=this.component)==null||u.$set({visible:!0,x:d,y:c})}}get memberApplianceName(){var t,i;return(i=(t=this.member)==null?void 0:t.memberState)==null?void 0:i.currentApplianceName}get memberColor(){var i,n;return`rgb(${(n=(i=this.member)==null?void 0:i.memberState)==null?void 0:n.strokeColor.join(",")})`}get memberColorHex(){var r,s;const[t,i,n]=((s=(r=this.member)==null?void 0:r.memberState)==null?void 0:s.strokeColor)||[236,52,85];return((1<<24)+(t<<16)+(i<<8)+n).toString(16).slice(1)}get payload(){var t;return(t=this.member)==null?void 0:t.payload}get memberCursorName(){var t,i;return((t=this.payload)==null?void 0:t.nickName)||((i=this.payload)==null?void 0:i.cursorName)||this.memberId}get memberTheme(){var t;return(t=this.payload)!=null&&t.theme?"netless-window-manager-cursor-inner-mellow":"netless-window-manager-cursor-inner"}get memberCursorTextColor(){var t;return((t=this.payload)==null?void 0:t.cursorTextColor)||"#FFFFFF"}get memberCursorTagBackgroundColor(){var t;return((t=this.payload)==null?void 0:t.cursorTagBackgroundColor)||this.memberColor}get memberAvatar(){var t;return(t=this.payload)==null?void 0:t.avatar}get memberOpacity(){return!this.memberCursorName&&!this.memberAvatar?0:1}get memberTagName(){var t;return(t=this.payload)==null?void 0:t.cursorTagName}autoHidden(){this.timer&&clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.hide()},1e3*10)}async createCursor(){this.member&&this.wrapper&&(this.component=new Hv({target:this.wrapper,props:this.initProps()}))}initProps(){var t;return{uid:this.memberId,x:0,y:0,appliance:this.memberApplianceName,avatar:this.memberAvatar,src:this.getIcon(),custom:this.isCustomIcon(),visible:!1,backgroundColor:this.memberColor,cursorName:this.memberCursorName,theme:this.memberTheme,color:this.memberCursorTextColor,cursorTagBackgroundColor:this.memberCursorTagBackgroundColor,opacity:this.memberOpacity,tagName:this.memberTagName,pencilEraserSize:(t=this.member)==null?void 0:t.memberState.pencilEraserSize}}getIcon(){var l;if(!this.member)return;const{memberApplianceName:t,memberColorHex:i}=this,{userApplianceIcons:n,applianceIcons:r}=this.cursorManager;let s=this.memberApplianceName;s===b.ApplianceNames.pencilEraser&&(s=`${s}${((l=this.member)==null?void 0:l.memberState.pencilEraserSize)||1}`);const o=s&&n[s];if(o)return o;if(this.style==="custom"&&t){const u=Qu(t,i);if(u)return u}return r[s||b.ApplianceNames.shape]||r[b.ApplianceNames.shape]}isCustomIcon(){var o;if(!this.member)return!1;const{memberApplianceName:t,memberColorHex:i}=this,{userApplianceIcons:n}=this.cursorManager;let r=this.memberApplianceName;return r===b.ApplianceNames.pencilEraser&&(r=`${r}${((o=this.member)==null?void 0:o.memberState.pencilEraserSize)||1}`),r&&n[r]?!1:!!(this.style==="custom"&&t&&Qu(t,i))}updateMember(){return this.member=Wo(this.manager.room,this.memberId),this.updateComponent(),this.member}updateComponent(){var t;(t=this.component)==null||t.$set(T.omit(this.initProps(),["x","y"]))}destroy(){this.component&&this.component.$destroy(),this.cursorManager.cursorInstances.delete(this.memberId),this.timer&&clearTimeout(this.timer)}hide(){this.component&&(this.component.$set({visible:!1}),this.destroy())}}var Yv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAYISURBVHgB7ZpNSCtXFIBPEuvz+dMGpYUKD/sWFX+Qti6kK7Hqpm6e9q0rIoIUFUShPLV10VZx4+JZqa9v20LBhdq9fyBUCtKNPH8qYl2IOw3G38Rkek4y15y5uTOZJDOWggcOSSYzN/ebc+45554JwIM8iBCPyTEP+86T4vyMfsRN4b+nQTKIJp0vzuGvlpID7os8EQNEIBD4oKio6Bm9DwaDv/v9/n/076JgbtWUYPchwrW8qD7UnOvr6wFNkpubm+/wu7f0c7y6mrnlvQufxB0Iau7V1dX3BDA/P6/V1dVpzc3N2uLiIofK1c8VYHys/wRKBUN3/hGHqaysNOjc3FwMis6hc0FtLTHuvYLxCCZgci8uLn4wg5Gh6Fy8Jk+/NkcCAlAAuUkoW4g0B+d5tLS05O/r67O8eGxsDNra2uDy8nKsoKCAwCIQDxQa0yTxgrvCYXyTk5Ml+Orf2dlJeeHIyAigFSE/P38ELfUNqNdSkjgF5FF89jL1TU1NlQwODl5gZPujp6cHWltbUw7Koc7Pz8mkZpHPFeFrJuZeqLnoMoPoZqe0JjDP/IZgnyLUG/o8NDRkuo5Ua2pjY6MC4oFCFf1cA0oKzRSOp6enRfTaGh0d/QxBt+1CUVgnOTs7+xrHfQzGyOcKkK3QTJMnQffZ6e/v/xwttmsHqqmpKXbdycnJCxy7ABLh3FEgVZ6hZJhnFZoFFMF0d3c/w7v+dyookXBnZ2c/xvHfhriVcvXfdBRItsxjnOhYqjwjoAimq6vrCysoGofk+Ph4Esd/F/UdiFtJAGUd2DygTpp5dmBUUJ2dnc9VUALm8PDwJY7/BPU9VD8k3M4RC6kskxZMKigKIMLN9vf3p3H8DyWgfEhEOwOQD9IXOTz7EObbwsLC4YWFBRgeHrY9ECXYo6MjaGlpKWlsbPxkYGDgRW1tbSEWquVlZWXBzc3Nl1VVVa8hXiXc6ioqBqGaPDk7AACJTRZ3NS9lcUp86cJwoSQ7Pj4Op6enfxUXF3/V0NCQv7q6GsCvwrqGUG/01xAD4+VQTOxaSF43d5bBOisrGBJRCtXX17+/trb268rKSgASFgmz97KFkmo6OztWuVyPweiWGc4WRkhFRQVEIpHg8vJyQAIQVlLBROVxvBYQHsXnO8tk62ZcyN0wecLBwcEvYHSzEPscBqOLCRhLC4n9uqaA8UAWAcAKhtbQ3t7eTHl5+Y9gtAp3twhT056CDMQ7MRzIFTeTYKb1yYYVQFH9VdzsqNmYKpfTJBDX3Ixgdnd3XyHMT2AMALJlBBSPaMpNngrIsTyTCgaj288YDGakictrxizvKFNOjgSSBLS+vv6UYHDb7DgMVgsChjTEgCIKGG4ZU+EWkgNBzN1qamq+pAMTExPgFMzW1tZrhHkFyWE5KxgSszx0527RaDRmOSpRshEOU11dPQPG8CwHARHJlMnTSrwSRFIlfXt7m3V5ngJGuJtqzaQtZkFBVNJezN5ZAdmwjKo2k9tVtrcI3OXk4tPgcg7ChCDZ1URgMOu72Xa5VFHOkymQhWVU60YVmjN6wiC7k6p+S1syCACOwJBYFaexV+yhBekNPsMBO6KAEeE4BMaCU67RsoYhSbXgaT//ht709vZCaWmp6YkEbLFmVJWzas04+iBL7EKpm0J7duqu0B7+CTUpNJuyvb1NCfMj1CqI9wLKUOlOUMeG+gGFkHii4HizUF4z/KFUrPsJ8WbEIyx7nnZ0dDynME6BAuce09iFHo+GrnmGltltb2//E4wVAN82y7vOjKOZXSBhJdHNiT3TYWD8OY2PTUJkdd7MkJMnT5wZVQF2RFX6yBMUdzPMvvfqxz3sXHF+GNT9ANXit/10O1sgHkZvdQAOKvs9B5L7ARELGAAXLSTvM8QExTE+YbHe+HURhZp1aRyF4CJXClbbWwGketgkW9VsY+YaiBCVhfgE+XvxRwgZSM4jUVCDZFQ9pytmXR8hUTB2gnidx4XffVWydN0yQjwmx/jkAZJBrIBI5J7ZvQGZWUgVSuU/EqmOAzicKNMVu816DdRWUV1/7xAP8n+SfwF3Du3NF2sYhwAAAABJRU5ErkJggg==",Xv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAxCAYAAABznEEcAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZoSURBVHgB7VlLSCRXFL3ljNEhEXTGhMQJmOjCz8ZNVLKICz9xIYhCNi7UgINkGEk2En8hW5cBUQNxo05GAoKikuCAmvGzGMdPcCUGjDPxD/4Vv/3JvWW97luvq7ur+hMZ8MKlqrteNfe8e965970GuLVbC5kpJr53+hjHx9yY3TUxJgLMAQG4ITARfp5T4Mri4uL9q6urnxwOxz/oY5eXl1/Pzs7e195X2FX4jZsIhAK7gx5ps9m6nGj9/f3OtbU1pzAE0318fPwVjYHrrN7R3AjU/wpOBwA9Cmf/9ejoqDMtLU31iooKGdA+ATo4OMiXAEWAHhBAGEApXj4rPAik0vPt7e0vCgoKPH4gMzMTSktLIS8vD2JiYgABvcHMTZyennbHxsaOg3udOJmLzwqEYB0ZgRCZENm4u7e39yQuLq65srISZmZmvP5Ybm4u5OfnQ0lJyXWUCAgzNLS+vt6SnJz8WgvYwV5xSlcRgyVg3ha2Dkxzc3MvfZmVlQW+bGxsDBobGyE7O1u94uJPjIqKqklKSvrbbrfPnp+ff7e8vJwMnlSTKWfJjDKhywJo6wLp0YcZ+dyIUr7s4cOHLsrRlQwBTSBFuzc2NiZYhjjVAIyzZBqEwgCQv0OOM/gNzuiP/ijlDxBRjgClpqa6AF1cXDydmpoaLCws3JcAGYHyC4JMzoKaibKysvienp6FtrY2IA/WCFB5ebkqCHSvARo8Ozt7igIxwIJ2gJ+seFMnDoIyEUV+dHT0G3qWVUr5M043DdAB0m2IKZwAYpgZX+qkywR6NFbuR0iDxmAoZRUQKRxSLTMnJ8eIaqqSeVMnIYUOdu+sq6vrp4f+VCoYo8khZaNs01VRlERUu2/BrWAA7sl2Anink1Ao18JGjyY/PDx8hq1GZqgp5c2mp6chMjLy2b179x7hRzvoqeUUwXIzqq4O5nZsNUaEbIbLqPLTou/s7FTvT05OpsA9sXJG1AVsZDwjutqBIN6gUlWjxod8XRBNKXgsrqpqYZfwEqX9h8TExD7wbFm8LmzxHQ0QHSlXKZVSqFC/hkqlaKapTaGgCQTK7PHW1lb/wsLC86KiokkccoV+qV1tcE0pO7AWxmhTxBszDzqRr66ujqanp2cRpQLNBgUsCh8BwQ54bn5+/s+mpqa+4eHhfS1gb52vwuP0trPjhSZCBtLQ0NA3MDDQQIFYAUHBYhuvzjpVbJr1lZWVP3p7e19UVVXNgHumXYrI4uBx6Yqevz02b0FcRQ8CoBQF3dXVpQLZ3d39C7n+ora29vfJyclDYFnWgFyxK3cxhss/+KoT/N6DVkQpKypFGUCp3Ozo6HgSHx//GLW/BwHsg57zl5pzADajwLn52mPL1ZHPloMoRYPMFL6EhAR18e7s7MxVV1fPsAAp4Avteq7dC/c1+wKI4g+EfGzDM+EYHBw8RDrNiA2QL6upqVGvKJ2/gHu2L1nA5wwEB2YDfSYMO1x/px0cgEc2zBY+eo67u6H29vZ/wU2VC8l58JxKNjDOgojNEp08aFVfX++3l6JMEdDx8fEB0FNIBsDXBc8ArwuW1EkeI1RKdLWmCx+1DhkZGRvR0dFfSsHKxYtnW0iqvJAN9xNm6MR/QO5sfapUSkqKmqW5ubmfwVgyZdpw/vPZl2kUEAinBMSUStG+gwra0NDQSynQKyloIxnlewafjDFLJzLRBJqiFMnqyMgIbG5uDuD996Dnv8iAPOMAPmbcm5lVJwA/vZRMKZGZlpaWVtAvUL4GZMqE1fjRJrUd76LHoX+InlhcXPwZnWW2tra6jjrpiBM3UK/weQr6J+gfodMh9HtwncG7YLA3CMSsLmxx5WuDCt8B7vZeicInTjCWlpb6wc15mfey7oc9E8LElpVmMgb9AXoC+qcTExOPKRu4NlTHs6Q10GfhgfYOvRsJQZ76BWMKuDtaolQs+gfoH6Mn436gDg+e+5BKXUQx/C5Je/a+NpbeiQJPKgUdlNXx/BCBKxVdxW5Q0I3XBqFKRhU4KLtjYawi3csuTKdc4FnIXNvKUJkVEGRG20QZAAUpA5DbaYAQLmQzfzxyk/ffdnCD4NWVnGdE7kQBQvQHC5lVEDxgMaM29lkxGCNLKrDnIbFAMkFmBIaDkHstU41coGZ1TZD5UjReCGUAYbNgdNqoXZB/T67yYbFAMiGML3BhYeH8rb0t9h/zgcTBcTNGiQAAAABJRU5ErkJggg==",Jv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAgrSURBVHgB7ZprTBRXFIDP7gIt8lQppTwE5V0KaAn6o1pqNGkDDTEmTUhsgKRp+gNJw68CFkLbVC2QkDS+gD8KJdWmARvbFBNNWpuIRGPFWBXQRMPDqIki+KLATs+ZnTvcvXtnX8w2beJJToaduTP3fHPOPffcOwC8kP+2WCDwIvahGFxTuN8KmNSZmULPNjLeqF9F8rdPkIEGEn+r+vjx46LQ0NA8/Dsader58+e/h4WFDWntFO7ot6fMFAt3JLWi2lCDpqamCux2+2+KROj82NhYGrXT2lu5Z/DP/deFByElA4Pv3LlTiHY/nJ6eVnbv3q1s2bJFyc7OVrZu3arU1dUp4+PjxPUQoT+g9tp9PkMFgpo9kxljHRoaWp2Xl3duYmIiurKyEvDoclNCQgIcPnxYPc7MzHwcGRnZhaft4Ag7O9fUbRhaITCie4lgcnNzT7qDIaHz27dvh+vXr0NEREQneqoCHKFnAR+8ZCaQGGq2CxcurCGYycnJZHcwTNAzUFFRoUJFRUV1IFQ5OKBsXB9uxSwgl0TQ3d29Yt26dccwoyVXV1d7hGEiQmGi2AzOUHx/hob4K2yuYS9G987s7OwPISEh7xPM6dOnwVfBsIMjR45AZmbmo5s3b76Xnp7+J55egMVxBSAZT0v1ED+76yn66dOnLQSzd+9ev2BIyFP0MjBco1JTU/sxfFeDazp3cYgZHmKqdoaGNISHh9fv378fSJcqlPV6e3sBJ+I/goOD34VFL0k95Y+HxPHCYGxmw5DQ2NuzZw8EBQVtunXr1jvgwUP+hhz/QDXMMCNVE8zx48dNg2FCz6QQjI2N/RA8VBFmANnu3btXihnpG8pM9fX1EAi5du0aeWkVOAMBCF7yN+R0z4yOjq6NiYlpp9CgdBtIwXpPH6vgDKWLt0CygtM6MDCwBuUYZSKaOCksAiVY9wFOBePgDOOytPAGSKzNVCCC2bBhw69YdK7ypgpYimzbtk2dl7CM+hFcveOUHDylbTFO1YdhFbByx44dA1QFUP0VSJj4+Hjo6+sDq9U6iEmHKvFZTedQ50GYbN15SITVlwNlZWUnLRZL8s6dOwMOQ9UCTtKTra2ttdppt9V2kMF5cbmsjxuM43bMNrmUzc6fP6+GQiDGDoOJi4ubwb4qm5ubafyIE6nLxGqTPEsGo1cBOGNX0TyDYafC0CyOaxcVziyh53Z2dkJycvLMvn37PmpoaBgFR4jxYSbWdVIgI89Iq4CjR48CZjlYv369+tssqI6ODsjPz4f+/v668vLycxrEHHfkYdwC8SB6mGEV8Cl64cuuri5oa2tTG+EyGjZu3AiXLl1qefDgwV8lJSUFZkDV1tZCcXExXLx4sbWoqKgPFj0zx8GI9ZwO5W4M6ekZYeqpaqbqmaSqqkpNpcPDw4dwzfM9nrLduHEjEs+X0XV/Sx96LnqE1kLtBQUF3eDwCO8dGQyzV5rl+JyuegfXI29jRotiRlKnpFghHMzKyjqotVXS0tLacKPjF3bdHxjSq1evduAkepAD+ZsDYlC8V5w8ZBVg+PPq2MGMlkInqE4joTf45MmT4YyMjAPcA+ltLSQlJX2BafxnX6HI29QeK44TOTk57mCYZ0QoJ8OBM4yB6dkNkwGlSygsLFQvYtYB3BTMxFL+M+0eFgZqp4mJiU2+QKGX1fGIk/QIrn0aYXGsyDxjmAyMhO2jhaCGoUbX1NSkLSwsPMJqV8Fspu6lIZS6OYhjiOLwdU7fQM1HfRPD7wS1obZ0j0xpb4726Z49ezaJf2/S7s9ATUGNR41BjdJseRnke3WGwhrRTS9pD1mOGoeG15BxOOfoxuCkp0Ih6NeaEaSZGlieJyiCoc1FgsGldokGk8nBvAKOrWIGQ5uPsm0tt0BWDiicAaGuGhkZ+YqMw9StGzU4OKhCnT179hNsswY1FTXdE5QEJhc1S3tGogazXLOBwQSBl3tzIhQPtAL1VQJCTcNx8y1vHIUghSKFZE9PT7H2dlM1b+Wgrr1y5Uq77J75+fnplpaWMg2ch4nlYEI5z7hdensDpI4hrYNErcMMXJ32koG4ztf3pultz83NjWG99Ra2WQ0OL2VjZjwgeufUqVOqV8+cOdPIwdBLSNJeHg8TAh5WqJ6EfSmgt7IMNRJ1JThiOlnrOAMHshprmMKdoGSCpb9s3B3SYLIFGIqICJB7xisYi+RvfiypXw40DWGdlJaWRmMd141hk8V2OWm7ieYTXhBc3+BgaZyqAISjOYxSMVvXsBTNlzdiNQDgRao2AtK3pjggpmrqbGpqSsLPIN/dv38/gaBwUjTshMHcvn27JyUlpRmc5xpPMD599LIYnLNyUKKndKjGxsakXbt2deMCLIE8IVvs0YRM1fjdu3d/wrXN5+BcnzEgvor2uN3rjzAYMp5lPEoQlE5fA0fWo8GfhlCbKVFQ1pKNIfzcOHH58mWqaimVUwJI0+6n59D4pIlzmdZPMPiZzXjDjX47Le5g0Uu8x2zgPqWyKpjVe7x3+AUbq9NYjQbgp2dsBud5o8TP7d5kHAWcQchQfoEmLgn8HjOiBIF7o5hI1x6CEbLNP3bdqYAF44JzyWLzcN1i8DcT/o3awbm8Fz3DAy2A62INwPV/E3wWdx5inmBHuwChCBD6R2JwHge80TIQRQLjt7e8DTkGZgfX8cUMZTDAteFDkveaIlzjX9ySQs8X18r2t2VHUURPKoICmDR+eCO9aSdmOIub3/w9RgpgUpiJhvraXpa6jZKHGEqyusw0GLFzX+5RhN/8kYnMSNMMfyH/V/kHST6OYVElTPAAAAAASUVORK5CYII=",Kv="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDAgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYwLjEgKDg4MTMzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT5zaGFwZS1jdXJzb3I8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNMjAsMjEuNSBDMjAuMjQ1NDU5OSwyMS41IDIwLjQ0OTYwODQsMjEuNjc2ODc1MiAyMC40OTE5NDQzLDIxLjkxMDEyNDQgTDIwLjUsMjIgTDIwLjUsMjcgQzIwLjUsMjcuMjc2MTQyNCAyMC4yNzYxNDI0LDI3LjUgMjAsMjcuNSBDMTkuNzU0NTQwMSwyNy41IDE5LjU1MDM5MTYsMjcuMzIzMTI0OCAxOS41MDgwNTU3LDI3LjA4OTg3NTYgTDE5LjUsMjcgTDE5LjUsMjIgQzE5LjUsMjEuNzIzODU3NiAxOS43MjM4NTc2LDIxLjUgMjAsMjEuNSBaIE0yNywxOS41IEMyNy4yNzYxNDI0LDE5LjUgMjcuNSwxOS43MjM4NTc2IDI3LjUsMjAgQzI3LjUsMjAuMjQ1NDU5OSAyNy4zMjMxMjQ4LDIwLjQ0OTYwODQgMjcuMDg5ODc1NiwyMC40OTE5NDQzIEwyNywyMC41IEwyMiwyMC41IEMyMS43MjM4NTc2LDIwLjUgMjEuNSwyMC4yNzYxNDI0IDIxLjUsMjAgQzIxLjUsMTkuNzU0NTQwMSAyMS42NzY4NzUyLDE5LjU1MDM5MTYgMjEuOTEwMTI0NCwxOS41MDgwNTU3IEwyMiwxOS41IEwyNywxOS41IFogTTE4LDE5LjUgQzE4LjI3NjE0MjQsMTkuNSAxOC41LDE5LjcyMzg1NzYgMTguNSwyMCBDMTguNSwyMC4yNDU0NTk5IDE4LjMyMzEyNDgsMjAuNDQ5NjA4NCAxOC4wODk4NzU2LDIwLjQ5MTk0NDMgTDE4LDIwLjUgTDEzLDIwLjUgQzEyLjcyMzg1NzYsMjAuNSAxMi41LDIwLjI3NjE0MjQgMTIuNSwyMCBDMTIuNSwxOS43NTQ1NDAxIDEyLjY3Njg3NTIsMTkuNTUwMzkxNiAxMi45MTAxMjQ0LDE5LjUwODA1NTcgTDEzLDE5LjUgTDE4LDE5LjUgWiBNMjAsMTIuNSBDMjAuMjQ1NDU5OSwxMi41IDIwLjQ0OTYwODQsMTIuNjc2ODc1MiAyMC40OTE5NDQzLDEyLjkxMDEyNDQgTDIwLjUsMTMgTDIwLjUsMTggQzIwLjUsMTguMjc2MTQyNCAyMC4yNzYxNDI0LDE4LjUgMjAsMTguNSBDMTkuNzU0NTQwMSwxOC41IDE5LjU1MDM5MTYsMTguMzIzMTI0OCAxOS41MDgwNTU3LDE4LjA4OTg3NTYgTDE5LjUsMTggTDE5LjUsMTMgQzE5LjUsMTIuNzIzODU3NiAxOS43MjM4NTc2LDEyLjUgMjAsMTIuNSBaIiBpZD0icGF0aC0xIj48L3BhdGg+CiAgICAgICAgPGZpbHRlciB4PSItNjQuNiUiIHk9Ii01OS41JSIgd2lkdGg9IjIyOS4zJSIgaGVpZ2h0PSIyNDYuMSUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0yIj4KICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjEiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dTcHJlYWRPdXRlcjEiPjwvZmVNb3JwaG9sb2d5PgogICAgICAgICAgICA8ZmVPZmZzZXQgZHg9IjAiIGR5PSIyIiBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMyIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlR2F1c3NpYW5CbHVyPgogICAgICAgICAgICA8ZmVDb21wb3NpdGUgaW49InNoYWRvd0JsdXJPdXRlcjEiIGluMj0iU291cmNlQWxwaGEiIG9wZXJhdG9yPSJvdXQiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbXBvc2l0ZT4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgICAwIDAgMCAwIDAgICAwIDAgMCAwIDAgIDAgMCAwIDAuMTYgMCIgdHlwZT0ibWF0cml4IiBpbj0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9Iumhtemdoi00IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iV2hpdGVib2FyZC1HdWlkZWxpbmVzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzQ0LjAwMDAwMCwgLTc1MS4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9InNoYXBlLWN1cnNvciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ0LjAwMDAwMCwgNzUxLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9ouWkh+S7vS00NCIgZmlsbD0iI0ZGRkZGRiIgb3BhY2l0eT0iMC4wMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiByeD0iMiI+PC9yZWN0PgogICAgICAgICAgICAgICAgPGcgaWQ9IuW9oueKtue7k+WQiCIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9ImJsYWNrIiBmaWxsLW9wYWNpdHk9IjEiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIxIiBkPSJNMjAsMjEgQzIwLjQ4NTQxMDMsMjEgMjAuODk4MDg1LDIxLjM0Nzk5OTMgMjAuOTg5OTQ3OSwyMS44NjU0ODc3IEwyMSwyMiBMMjEsMjcgQzIxLDI3LjU1MjI4NDcgMjAuNTUyMjg0NywyOCAyMCwyOCBDMTkuNTE0NTg5NywyOCAxOS4xMDE5MTUsMjcuNjUyMDAwNyAxOS4wMTAwNTIxLDI3LjEzNDUxMjMgTDE5LDI3IEwxOSwyMiBDMTksMjEuNDQ3NzE1MyAxOS40NDc3MTUzLDIxIDIwLDIxIFogTTI3LDE5IEMyNy41NTIyODQ3LDE5IDI4LDE5LjQ0NzcxNTMgMjgsMjAgQzI4LDIwLjQ4NTQxMDMgMjcuNjUyMDAwNywyMC44OTgwODUgMjcuMTM0NTEyMywyMC45ODk5NDc5IEwyNywyMSBMMjIsMjEgQzIxLjQ0NzcxNTMsMjEgMjEsMjAuNTUyMjg0NyAyMSwyMCBDMjEsMTkuNTE0NTg5NyAyMS4zNDc5OTkzLDE5LjEwMTkxNSAyMS44NjU0ODc3LDE5LjAxMDA1MjEgTDIyLDE5IEwyNywxOSBaIE0xOCwxOSBDMTguNTUyMjg0NywxOSAxOSwxOS40NDc3MTUzIDE5LDIwIEMxOSwyMC40ODU0MTAzIDE4LjY1MjAwMDcsMjAuODk4MDg1IDE4LjEzNDUxMjMsMjAuOTg5OTQ3OSBMMTgsMjEgTDEzLDIxIEMxMi40NDc3MTUzLDIxIDEyLDIwLjU1MjI4NDcgMTIsMjAgQzEyLDE5LjUxNDU4OTcgMTIuMzQ3OTk5MywxOS4xMDE5MTUgMTIuODY1NDg3NywxOS4wMTAwNTIxIEwxMywxOSBMMTgsMTkgWiBNMjAsMTIgQzIwLjQ4NTQxMDMsMTIgMjAuODk4MDg1LDEyLjM0Nzk5OTMgMjAuOTg5OTQ3OSwxMi44NjU0ODc3IEwyMSwxMyBMMjEsMTggQzIxLDE4LjU1MjI4NDcgMjAuNTUyMjg0NywxOSAyMCwxOSBDMTkuNTE0NTg5NywxOSAxOS4xMDE5MTUsMTguNjUyMDAwNyAxOS4wMTAwNTIxLDE4LjEzNDUxMjMgTDE5LDE4IEwxOSwxMyBDMTksMTIuNDQ3NzE1MyAxOS40NDc3MTUzLDEyIDIwLDEyIFoiIGZpbGw9IiMyMTIzMjQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9oiIgZmlsbD0iI0ZGRkZGRiIgeD0iMTguNSIgeT0iMTciIHdpZHRoPSIzIiBoZWlnaHQ9IjYiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiNGRkZGRkYiIHg9IjE3IiB5PSIxOC41IiB3aWR0aD0iNiIgaGVpZ2h0PSIzIj48L3JlY3Q+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMjAsMjEuNSBDMjAuMjQ1NDU5OSwyMS41IDIwLjQ0OTYwODQsMjEuNjc2ODc1MiAyMC40OTE5NDQzLDIxLjkxMDEyNDQgTDIwLjUsMjIgTDIwLjUsMjcgQzIwLjUsMjcuMjc2MTQyNCAyMC4yNzYxNDI0LDI3LjUgMjAsMjcuNSBDMTkuNzU0NTQwMSwyNy41IDE5LjU1MDM5MTYsMjcuMzIzMTI0OCAxOS41MDgwNTU3LDI3LjA4OTg3NTYgTDE5LjUsMjcgTDE5LjUsMjIgQzE5LjUsMjEuNzIzODU3NiAxOS43MjM4NTc2LDIxLjUgMjAsMjEuNSBaIE0yNywxOS41IEMyNy4yNzYxNDI0LDE5LjUgMjcuNSwxOS43MjM4NTc2IDI3LjUsMjAgQzI3LjUsMjAuMjQ1NDU5OSAyNy4zMjMxMjQ4LDIwLjQ0OTYwODQgMjcuMDg5ODc1NiwyMC40OTE5NDQzIEwyNywyMC41IEwyMiwyMC41IEMyMS43MjM4NTc2LDIwLjUgMjEuNSwyMC4yNzYxNDI0IDIxLjUsMjAgQzIxLjUsMTkuNzU0NTQwMSAyMS42NzY4NzUyLDE5LjU1MDM5MTYgMjEuOTEwMTI0NCwxOS41MDgwNTU3IEwyMiwxOS41IEwyNywxOS41IFogTTE4LDE5LjUgQzE4LjI3NjE0MjQsMTkuNSAxOC41LDE5LjcyMzg1NzYgMTguNSwyMCBDMTguNSwyMC4yNDU0NTk5IDE4LjMyMzEyNDgsMjAuNDQ5NjA4NCAxOC4wODk4NzU2LDIwLjQ5MTk0NDMgTDE4LDIwLjUgTDEzLDIwLjUgQzEyLjcyMzg1NzYsMjAuNSAxMi41LDIwLjI3NjE0MjQgMTIuNSwyMCBDMTIuNSwxOS43NTQ1NDAxIDEyLjY3Njg3NTIsMTkuNTUwMzkxNiAxMi45MTAxMjQ0LDE5LjUwODA1NTcgTDEzLDE5LjUgTDE4LDE5LjUgWiBNMjAsMTIuNSBDMjAuMjQ1NDU5OSwxMi41IDIwLjQ0OTYwODQsMTIuNjc2ODc1MiAyMC40OTE5NDQzLDEyLjkxMDEyNDQgTDIwLjUsMTMgTDIwLjUsMTggQzIwLjUsMTguMjc2MTQyNCAyMC4yNzYxNDI0LDE4LjUgMjAsMTguNSBDMTkuNzU0NTQwMSwxOC41IDE5LjU1MDM5MTYsMTguMzIzMTI0OCAxOS41MDgwNTU3LDE4LjA4OTg3NTYgTDE5LjUsMTggTDE5LjUsMTMgQzE5LjUsMTIuNzIzODU3NiAxOS43MjM4NTc2LDEyLjUgMjAsMTIuNSBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjMjEyMzI0IiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+",qv="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDdweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgNDcgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDYwLjEgKDg4MTMzKSAtIGh0dHBzOi8vc2tldGNoLmNvbSAtLT4KICAgIDx0aXRsZT50ZXh0LWN1cnNvcjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGQ9Ik0xNiwyNi41IEMxNS43MjM4NTc2LDI2LjUgMTUuNSwyNi4yNzYxNDI0IDE1LjUsMjYgQzE1LjUsMjUuNzU0NTQwMSAxNS42NzY4NzUyLDI1LjU1MDM5MTYgMTUuOTEwMTI0NCwyNS41MDgwNTU3IEwxNiwyNS41IEwxOS41LDI1LjUgTDE5LjUsMTQuNSBMMTYsMTQuNSBDMTUuNzIzODU3NiwxNC41IDE1LjUsMTQuMjc2MTQyNCAxNS41LDE0IEMxNS41LDEzLjc1NDU0MDEgMTUuNjc2ODc1MiwxMy41NTAzOTE2IDE1LjkxMDEyNDQsMTMuNTA4MDU1NyBMMTYsMTMuNSBMMjQsMTMuNSBDMjQuMjc2MTQyNCwxMy41IDI0LjUsMTMuNzIzODU3NiAyNC41LDE0IEMyNC41LDE0LjI0NTQ1OTkgMjQuMzIzMTI0OCwxNC40NDk2MDg0IDI0LjA4OTg3NTYsMTQuNDkxOTQ0MyBMMjQsMTQuNSBMMjAuNSwxNC41IEwyMC41LDI1LjUgTDI0LDI1LjUgQzI0LjI3NjE0MjQsMjUuNSAyNC41LDI1LjcyMzg1NzYgMjQuNSwyNiBDMjQuNSwyNi4yNDU0NTk5IDI0LjMyMzEyNDgsMjYuNDQ5NjA4NCAyNC4wODk4NzU2LDI2LjQ5MTk0NDMgTDI0LDI2LjUgTDE2LDI2LjUgWiIgaWQ9InBhdGgtMSI+PC9wYXRoPgogICAgICAgIDxmaWx0ZXIgeD0iLTI4NC4wJSIgeT0iLTgxLjUlIiB3aWR0aD0iNjY4LjElIiBoZWlnaHQ9IjI5My45JSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPgogICAgICAgICAgICA8ZmVNb3JwaG9sb2d5IHJhZGl1cz0iMSIgb3BlcmF0b3I9ImRpbGF0ZSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd1NwcmVhZE91dGVyMSI+PC9mZU1vcnBob2xvZ3k+CiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjIiIGluPSJzaGFkb3dTcHJlYWRPdXRlcjEiIHJlc3VsdD0ic2hhZG93T2Zmc2V0T3V0ZXIxIj48L2ZlT2Zmc2V0PgogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbXBvc2l0ZSBpbj0ic2hhZG93Qmx1ck91dGVyMSIgaW4yPSJTb3VyY2VBbHBoYSIgb3BlcmF0b3I9Im91dCIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29tcG9zaXRlPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC4xNiAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0i6aG16Z2iLTQiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJXaGl0ZWJvYXJkLUd1aWRlbGluZXMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zODguMDAwMDAwLCAtNjcyLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0idGV4dC1jdXJzb3IiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM5Mi4wMDAwMDAsIDY3Mi4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaLlpIfku70tNDAiIGZpbGw9IiNGRkZGRkYiIG9wYWNpdHk9IjAuMDEiIHg9IjAiIHk9IjAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcng9IjIiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxnIGlkPSLlvaLnirbnu5PlkIgiIGZpbGwtcnVsZT0ibm9uemVybyI+CiAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSJibGFjayIgZmlsbC1vcGFjaXR5PSIxIiBmaWx0ZXI9InVybCgjZmlsdGVyLTIpIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMSIgZD0iTTE5LDI1IEwxOSwxNSBMMTYsMTUgQzE1LjQ0NzcxNTMsMTUgMTUsMTQuNTUyMjg0NyAxNSwxNCBDMTUsMTMuNTE0NTg5NyAxNS4zNDc5OTkzLDEzLjEwMTkxNSAxNS44NjU0ODc3LDEzLjAxMDA1MjEgTDE2LDEzIEwyNCwxMyBDMjQuNTUyMjg0NywxMyAyNSwxMy40NDc3MTUzIDI1LDE0IEMyNSwxNC40ODU0MTAzIDI0LjY1MjAwMDcsMTQuODk4MDg1IDI0LjEzNDUxMjMsMTQuOTg5OTQ3OSBMMjQsMTUgTDIxLDE1IEwyMSwyNSBMMjQsMjUgQzI0LjU1MjI4NDcsMjUgMjUsMjUuNDQ3NzE1MyAyNSwyNiBDMjUsMjYuNDg1NDEwMyAyNC42NTIwMDA3LDI2Ljg5ODA4NSAyNC4xMzQ1MTIzLDI2Ljk4OTk0NzkgTDI0LDI3IEwxNiwyNyBDMTUuNDQ3NzE1MywyNyAxNSwyNi41NTIyODQ3IDE1LDI2IEMxNSwyNS41MTQ1ODk3IDE1LjM0Nzk5OTMsMjUuMTAxOTE1IDE1Ljg2NTQ4NzcsMjUuMDEwMDUyMSBMMTYsMjUgTDE5LDI1IFoiIGZpbGw9IiMyMTIzMjQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=",ew="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjhweCIgaGVpZ2h0PSIyOHB4IiB2aWV3Qm94PSIwIDAgMjggMjgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU1LjEgKDc4MTM2KSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT7nvJbnu4QgMjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxmaWx0ZXIgeD0iLTEyMC4wJSIgeT0iLTEyMC4wJSIgd2lkdGg9IjM0MC4wJSIgaGVpZ2h0PSIzNDAuMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0xIj4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iNCIgaW49IlNvdXJjZUdyYXBoaWMiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0i6aG16Z2iMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Iue8lue7hC0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5LjAwMDAwMCwgOS4wMDAwMDApIiBmaWxsPSIjRkYwMTAwIj4KICAgICAgICAgICAgPGNpcmNsZSBpZD0i5qSt5ZyG5b2iIiBmaWx0ZXI9InVybCgjZmlsdGVyLTEpIiBjeD0iNSIgY3k9IjUiIHI9IjUiPjwvY2lyY2xlPgogICAgICAgICAgICA8cGF0aCBkPSJNNSw4IEM2LjY1Njg1NDI1LDggOCw2LjY1Njg1NDI1IDgsNSBDOCwzLjM0MzE0NTc1IDYuNjU2ODU0MjUsMiA1LDIgQzMuMzQzMTQ1NzUsMiAyLDMuMzQzMTQ1NzUgMiw1IEMyLDYuNjU2ODU0MjUgMy4zNDMxNDU3NSw4IDUsOCBaIE01LDYuMjg1NzE0MjkgQzQuMjg5OTE5NjEsNi4yODU3MTQyOSAzLjcxNDI4NTcxLDUuNzEwMDgwMzkgMy43MTQyODU3MSw1IEMzLjcxNDI4NTcxLDQuMjg5OTE5NjEgNC4yODk5MTk2MSwzLjcxNDI4NTcxIDUsMy43MTQyODU3MSBDNS43MTAwODAzOSwzLjcxNDI4NTcxIDYuMjg1NzE0MjksNC4yODk5MTk2MSA2LjI4NTcxNDI5LDUgQzYuMjg1NzE0MjksNS43MTAwODAzOSA1LjcxMDA4MDM5LDYuMjg1NzE0MjkgNSw2LjI4NTcxNDI5IFoiIGlkPSLmpK3lnIblvaIiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+",tw="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCAxOCAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMC41IiB5PSIwLjUiIHdpZHRoPSIxNyIgaGVpZ2h0PSIyNSIgcng9IjMuNSIgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMC4zNSIgc3Ryb2tlPSJ3aGl0ZSIvPgo8L3N2Zz4K",iw="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMzQiIHZpZXdCb3g9IjAgMCAyNiAzNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMC41IiB5PSIwLjUiIHdpZHRoPSIyNSIgaGVpZ2h0PSIzMyIgcng9IjMuNSIgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMC4zNSIgc3Ryb2tlPSJ3aGl0ZSIvPgo8L3N2Zz4K",nw="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzQiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCAzNCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMC41IiB5PSIwLjUiIHdpZHRoPSIzMyIgaGVpZ2h0PSI0OSIgcng9IjMuNSIgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMC4zNSIgc3Ryb2tlPSJ3aGl0ZSIvPgo8L3N2Zz4K";const rw={[b.ApplianceNames.pencil]:Yv,[b.ApplianceNames.selector]:Xv,[b.ApplianceNames.eraser]:Jv,[b.ApplianceNames.shape]:Kv,[b.ApplianceNames.text]:qv,[b.ApplianceNames.laserPointer]:ew,pencilEraser1:tw,pencilEraser2:iw,pencilEraser3:nw},Fu="local-cursor";class sw{constructor(t,i,n,r){var a;this.manager=t,this.enableCursor=i,this.cursorInstances=new Map,this.userApplianceIcons={},this.sideEffectManager=new tr,this.store=this.manager.store,this.leaveFlag=!0,this._style="default",this.onCursorMove=l=>{const u=this.initCursorInstance(l.uid);if(l.state===Oo.Leave)u.leave();else{const d=u.updateMember();this.canMoveCursor(d)&&u.move(l.position)}},this.initCursorInstance=l=>{let u=this.cursorInstances.get(l);return u||(u=new Gv(this.manager,l,this,Y.wrapper),this.cursorInstances.set(l,u)),u},this.mouseMoveListener_=(l,u)=>{const d=this.getType(l);this.updateCursor(d,l.clientX,l.clientY),u&&this.showPencilEraserIfNeeded(d,l.clientX,l.clientY)},this.mouseMoveTimer=0,this.mouseMoveListener=l=>{const u=l.pointerType==="touch";if(u&&!l.isPrimary)return;const d=Date.now();if(d-this.mouseMoveTimer>48){if(this.mouseMoveTimer=d,Y.supportAppliancePlugin&&b.isRoom(Y.displayer)&&Y.displayer.disableDeviceInputs){this.leaveFlag&&(this.manager.dispatchInternalEvent(q.CursorMove,{uid:this.manager.uid,state:Oo.Leave}),this.leaveFlag=!1);return}this.mouseMoveListener_(l,u),this.leaveFlag=!0}},this.mouseLeaveListener=()=>{this.hideCursor(this.manager.uid)},this.getPoint=(l,u,d)=>{var m;const c=(m=l==null?void 0:l.divElement)==null?void 0:m.getBoundingClientRect();if(c)return l==null?void 0:l.convertToPointInWorld({x:u-c.x,y:d-c.y})},this.getType=l=>{var c;const u=l.target,d=this.manager.focusApp;switch(u.parentElement){case this.mainViewElement:return{type:"main"};case((c=d==null?void 0:d.view)==null?void 0:c.divElement):return{type:"app"};default:return{type:"main"}}},this.roomMembers=(a=this.manager.room)==null?void 0:a.state.roomMembers;const s=Y.wrapper;s&&this.setupWrapper(s),this.sideEffectManager.add(()=>L.on("cursorMove",this.onCursorMove)),this.sideEffectManager.add(()=>L.on("playgroundSizeChange",()=>this.updateContainerRect()));const o=this.manager.room;o&&this.sideEffectManager.add(()=>{const l=u=>{this.style==="custom"&&u.memberState&&this.enableCustomCursor()};return o.callbacks.on("onRoomStateChanged",l),()=>o.callbacks.off("onRoomStateChanged",l)}),r&&(this.userApplianceIcons=r),this.style=(n==null?void 0:n.style)||"default"}get applianceIcons(){return{...rw,...this.userApplianceIcons}}get style(){return this._style}set style(t){this._style!==t&&(this._style=t,this.cursorInstances.forEach(i=>{i.setStyle(t)}),t==="custom"?this.enableCustomCursor():this.sideEffectManager.flush(Fu))}enableCustomCursor(){this.sideEffectManager.add(()=>Qv(this.manager.getMemberState()),Fu)}canMoveCursor(t){const i=(t==null?void 0:t.memberState.currentApplianceName)===b.ApplianceNames.laserPointer;return this.enableCursor||i}setupWrapper(t){this.sideEffectManager.add(()=>(t.addEventListener("pointerenter",this.mouseMoveListener),t.addEventListener("pointermove",this.mouseMoveListener),t.addEventListener("pointerleave",this.mouseLeaveListener),()=>{t.removeEventListener("pointerenter",this.mouseMoveListener),t.removeEventListener("pointermove",this.mouseMoveListener),t.removeEventListener("pointerleave",this.mouseLeaveListener)})),this.wrapperRect=t.getBoundingClientRect()}setMainViewDivElement(t){this.mainViewElement=t}get boxState(){return this.store.getBoxState()}get focusView(){var t;return(t=this.manager.focusApp)==null?void 0:t.view}showPencilEraserIfNeeded(t,i,n){const r=Wo(this.manager.room,this.manager.uid),s=(r==null?void 0:r.memberState.currentApplianceName)===b.ApplianceNames.pencilEraser;if(this.wrapperRect&&this.manager.canOperate&&this.canMoveCursor(r)&&s){const o=t.type==="main"?this.manager.mainView:this.focusView,a=this.getPoint(o,i,n);a&&this.onCursorMove({uid:this.manager.uid,position:{x:a.x,y:a.y,type:t.type}})}}updateCursor(t,i,n){const r=Wo(this.manager.room,this.manager.uid);if(this.wrapperRect&&this.manager.canOperate&&this.canMoveCursor(r)){const s=t.type==="main"?this.manager.mainView:this.focusView,o=this.getPoint(s,i,n);o&&this.manager.dispatchInternalEvent(q.CursorMove,{uid:this.manager.uid,position:{x:o.x,y:o.y,type:t.type}})}}updateContainerRect(){var t,i;this.containerRect=(t=Y.container)==null?void 0:t.getBoundingClientRect(),this.wrapperRect=(i=Y.wrapper)==null?void 0:i.getBoundingClientRect()}deleteCursor(t){this.store.cleanCursor(t);const i=this.cursorInstances.get(t);i&&i.destroy()}hideCursor(t){const i=this.cursorInstances.get(t);i&&i.hide()}destroy(){this.sideEffectManager.flushAll(),this.cursorInstances.size&&(this.cursorInstances.forEach(t=>{t.destroy()}),this.cursorInstances.clear())}}class ow{constructor(t){this.manager=t,L.on("changePageState",()=>{Q.emit("pageStateChange",this.toObject())})}get index(){return this.manager.store.getMainViewSceneIndex()||0}get length(){return this.manager.mainViewScenesLength||0}toObject(){return{index:this.index>=this.length?this.length-1:this.index,length:this.length}}}class aw{constructor(t){this.ctx=t,this.reactors=new Map,this.disposers=new Map,this.onPhaseChanged=async i=>{var n,r;i===b.RoomPhase.Reconnecting&&this.ctx.emitter.emit("startReconnect"),i===b.RoomPhase.Connected&&this.phase===b.RoomPhase.Reconnecting&&((n=this.room)!=null&&n.isWritable?(r=this.room)==null||r.dispatchMagixEvent(oo,{}):(await Nd(500),this.onReconnected())),this.phase=i},this.onReconnected=T.debounce(()=>{this._onReconnected()},1e3),this._onReconnected=()=>{tt("onReconnected refresh reactors"),this.releaseDisposers(),this.reactors.forEach((i,n)=>{T.isFunction(i)&&this.disposers.set(n,i())}),this.ctx.emitter.emit("onReconnected")}}setRoom(t){this.room=t,this.phase=t==null?void 0:t.phase,t&&(t.callbacks.off("onPhaseChanged",this.onPhaseChanged),t.callbacks.on("onPhaseChanged",this.onPhaseChanged),t.addMagixEventListener(oo,i=>{i.authorId===t.observerId&&this.onReconnected()},{fireSelfEventAfterCommit:!0}))}setContext(t){this.ctx=t}releaseDisposers(){this.disposers.forEach(t=>{T.isFunction(t)&&t()}),this.disposers.clear()}refresh(){this._onReconnected()}add(t,i){const n=this.disposers.get(t);n&&T.isFunction(n)&&n(),T.isFunction(i)&&(this.reactors.set(t,i),this.disposers.set(t,i()))}remove(t){this.reactors.has(t)&&this.reactors.delete(t);const i=this.disposers.get(t);i&&(T.isFunction(i)&&i(),this.disposers.delete(t))}hasReactor(t){return this.reactors.has(t)}destroy(){var t,i;(t=this.room)==null||t.callbacks.off("onPhaseChanged",this.onPhaseChanged),(i=this.room)==null||i.removeMagixEventListener(oo,this.onReconnected),this.releaseDisposers()}}const lw=(e,t)=>{if(b.isPlayer(e))cw(e);else{if(e=e,Object.getOwnPropertyDescriptor(e,"disableCameraTransform"))return;Object.defineProperty(e,"disableCameraTransform",{get(){return t.mainView.disableCameraTransform},set(n){t.mainView.disableCameraTransform=n}}),Object.defineProperty(e,"canUndoSteps",{get(){return t.canUndoSteps}}),Object.defineProperty(e,"canRedoSteps",{get(){return t.canRedoSteps}}),e.moveCamera=n=>t.moveCamera(n),e.moveCameraToContain=(...n)=>t.moveCameraToContain(...n),e.convertToPointInWorld=(...n)=>t.mainView.convertToPointInWorld(...n),e.setCameraBound=(...n)=>t.mainView.setCameraBound(...n),e.scenePreview=(...n)=>t.mainView.scenePreview(...n),e.fillSceneSnapshot=(...n)=>t.mainView.fillSceneSnapshot(...n),e.generateScreenshot=(...n)=>t.mainView.generateScreenshot(...n),e.setMemberState=(...n)=>t.mainView.setMemberState(...n),e.redo=()=>t.redo(),e.undo=()=>t.undo(),e.cleanCurrentScene=()=>t.cleanCurrentScene(),e.delete=()=>t.delete(),e.copy=()=>t.copy(),e.paste=()=>t.paste(),e.duplicate=()=>t.duplicate(),e.insertImage=(...n)=>t.insertImage(...n),e.completeImageUpload=(...n)=>t.completeImageUpload(...n),e.insertText=(...n)=>t.insertText(...n),e.lockImage=(...n)=>t.lockImage(...n),e.lockImages=(...n)=>t.lockImages(...n),uw(e,t)}},uw=(e,t)=>{const i=e.removeScenes;e.removeScenes=(n,r)=>{var o;n===_e&&((o=t.appManager)==null||o.updateRootDirRemoving(!0));const s=i.call(e,n);return L.emit("removeScenes",{scenePath:n,index:r}),s}},cw=e=>{const t=e.seekToProgressTime;async function i(n){await L.emit("seekStart");const r=await t.call(e,n);return L.emit("seek",n),r}e.seekToProgressTime=i};var dw=Object.defineProperty,hw=Object.defineProperties,pw=Object.getOwnPropertyDescriptors,Gu=Object.getOwnPropertySymbols,fw=Object.prototype.hasOwnProperty,gw=Object.prototype.propertyIsEnumerable,Yu=(e,t,i)=>t in e?dw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ph=(e,t)=>{for(var i in t||(t={}))fw.call(t,i)&&Yu(e,i,t[i]);if(Gu)for(var i of Gu(t))gw.call(t,i)&&Yu(e,i,t[i]);return e},fh=(e,t)=>hw(e,pw(t)),mw=(()=>`.netless-app-docs-viewer-content{position:relative;height:100%;overflow:hidden}.netless-app-docs-viewer-preview-mask{display:none;position:absolute;z-index:200;top:0;left:0;width:100%;height:100%}.netless-app-docs-viewer-preview{display:flex;flex-direction:column;align-items:center;z-index:300;top:0;right:0;width:23%;padding:12px;transform:translate(100%);box-shadow:-4.8px -3.2px 20px #20233826;transition:transform .4s;background:#f5f5fc;border-radius:4px;-webkit-box-shadow:-4.8px -3.2px 20px rgba(32,35,56,.15);height:100%;position:absolute;opacity:0}.netless-app-docs-viewer-preview-active .netless-app-docs-viewer-preview-mask{display:block}.netless-app-docs-viewer-preview-active .netless-app-docs-viewer-preview{transform:translate(0);opacity:1}.netless-app-docs-viewer-preview-head{display:flex;align-items:center;justify-content:space-between;width:100%;margin-bottom:10px}.netless-app-docs-viewer-preview-head>h3{color:#484c70;font-weight:400;font-size:14px;width:calc(100% - 20px);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.netless-app-docs-viewer-preview-head .netless-app-docs-viewer-close{width:25px;height:25px;padding:0;outline:none;border:none;background:#fff;display:flex;justify-content:center;align-items:center;border-radius:100%;cursor:pointer}.netless-app-docs-viewer-preview-head .netless-app-docs-viewer-close button{width:22px;height:22px;padding:0;outline:none;border:none;background:center/cover no-repeat;background-image:url(./icons/close.svg)}.netless-app-docs-viewer-preview-page{position:relative;display:flex;width:100%;margin-bottom:10px;font-size:0;color:transparent;outline:none;border-radius:4px;transition:border-color .3s;user-select:none;align-items:flex-end}.netless-app-docs-viewer-preview-page>img{width:calc(90% - 10px);height:auto;box-sizing:border-box;border:2px solid rgba(0,0,0,.5);border-radius:2px;background-color:#fff}.netless-app-docs-viewer-preview-page>img.netless-app-docs-viewer-active{border-color:#ff5353}.netless-app-docs-viewer-preview-page-name{text-align:right;font-size:12px;color:#8d8fa6;user-select:none;margin-right:10px;width:5%}.netless-app-docs-viewer-footer{box-sizing:border-box;height:40px;display:flex;align-items:center;padding:0 16px;color:#191919;background:#ebecfa}.netless-app-docs-viewer-float-footer{width:100%;min-height:40px;position:absolute;left:0;bottom:0;z-index:2000;transition:opacity .4s;color:#191919}.netless-app-docs-viewer-footer-btn{box-sizing:border-box;width:26px;height:26px;font-size:0;margin:0;padding:3px;border:none;border-radius:4px;outline:none;color:currentColor;background:transparent;transition:background .4s;cursor:pointer;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0);color:#8d8fa6}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-disable{color:#c6c7d2;cursor:not-allowed}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-disable .arrow{fill:#c6c7d2}.netless-app-docs-viewer-footer-btn .arrow{fill:#8d8fa6}.netless-app-docs-viewer-footer-btn:hover{background-color:#1b1f4d0a}@media (hover: none){.netless-app-docs-viewer-footer-btn:hover{background:transparent!important}}.netless-app-docs-viewer-footer-btn>svg{width:100%;height:100%}.netless-app-docs-viewer-footer-btn>svg:nth-of-type(2){display:none}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-playing>svg:nth-of-type(1){display:none}.netless-app-docs-viewer-footer-btn.netless-app-docs-viewer-footer-btn-playing>svg:nth-of-type(2){display:initial}.netless-app-docs-viewer-hide{visibility:hidden}.netless-app-docs-viewer-page-jumps{flex:1;display:flex;justify-content:center;align-items:center;gap:8px}.netless-app-docs-viewer-page-number{font-size:14px;color:#8d8fa6;user-select:none;white-space:nowrap;word-break:keep-all}.netless-app-docs-viewer-page-number-input{border:none;outline:none;width:3em;margin:0;padding:0 2px;text-align:right;font-size:13px;line-height:1;font-weight:400;font-family:inherit;border-radius:2px;color:currentColor;background:transparent;transition:background .4s;user-select:text;-webkit-tap-highlight-color:rgba(0,0,0,0)}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-footer-btn{cursor:not-allowed}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-footer-btn:hover{background:transparent}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input{cursor:not-allowed}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:hover,.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:focus,.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:active{background:transparent;box-shadow:none}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-page-number-input:disabled{color:inherit}.netless-app-docs-viewer-readonly.netless-app-docs-viewer-float-footer{display:none}.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input{color:#a6a6a8}.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:active,.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:focus,.telebox-color-scheme-dark .netless-app-docs-viewer-page-number-input:hover{color:#222}.telebox-color-scheme-dark .netless-app-docs-viewer-footer{color:#a6a6a8;background:#2d2d33;border-top:none}.telebox-color-scheme-dark .netless-app-docs-viewer-footer-btn:hover{background:#212126}.telebox-color-scheme-dark .netless-app-docs-viewer-preview{background:rgba(50,50,50,.9)}.netless-app-docs-viewer-static-scrollbar{position:absolute;top:0;right:0;z-index:2147483647;width:8px;min-height:30px;margin:0;padding:0;border:none;outline:none;border-radius:4px;background:rgba(68,78,96,.4);box-shadow:1px 1px 8px #ffffffb3;opacity:0;transition:background .4s,opacity .4s 3s,transform .2s;user-select:none}.netless-app-docs-viewer-static-scrollbar.netless-app-docs-viewer-static-scrollbar-dragging{background:rgba(68,78,96,.6);opacity:1;transition:background .4s,opacity .4s 3s!important}.netless-app-docs-viewer-static-scrollbar:hover,.netless-app-docs-viewer-static-scrollbar:focus{background:rgba(68,78,96,.5)}.netless-app-docs-viewer-static-scrollbar:active{background:rgba(68,78,96,.6)}.netless-app-docs-viewer-content:hover .netless-app-docs-viewer-static-scrollbar{opacity:1;transition:background .4s,opacity .4s,transform .2s}.netless-app-docs-viewer-readonly .netless-app-docs-viewer-static-scrollbar{display:none}.netless-app-docs-viewer-static-pages:hover .netless-app-docs-viewer-static-scrollbar{opacity:1;transition:background .4s,opacity .4s,transform .2s}.page-renderer-pages-container{position:relative;overflow:hidden}.page-renderer-page{position:absolute;top:0;left:0;background-position:center;background-size:cover;background-repeat:no-repeat}.page-renderer-pages-container.is-hwa .page-renderer-page{will-change:transform}.page-renderer-page-img{display:block;width:100%;height:auto;user-select:none}.netless-app-docs-viewer-static-pages{overflow:hidden;position:relative;height:100%;user-select:none}.netless-app-docs-viewer-static-page{display:block;width:100%;height:auto;user-select:none}.netless-app-docs-viewer-static-wb-view,.netless-app-docs-viewer-dynamic-wb-view{position:absolute;top:0;left:0;width:100%;height:100%;z-index:100;overflow:hidden}.netless-app-docs-viewer-dynamic-wb-view .cursor-clicker .ppt-event-source{cursor:pointer}
`)();const vw=(e,t,i,n)=>{if(i==="length"||i==="prototype"||i==="arguments"||i==="caller")return;const r=Object.getOwnPropertyDescriptor(e,i),s=Object.getOwnPropertyDescriptor(t,i);!ww(r,s)&&n||Object.defineProperty(e,i,s)},ww=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},yw=(e,t)=>{const i=Object.getPrototypeOf(t);i!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,i)},xw=(e,t)=>`/* Wrapped ${e}*/
${t}`,Mw=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Sw=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Iw=(e,t,i)=>{const n=i===""?"":`with ${i.trim()}() `,r=xw.bind(null,n,t.toString());Object.defineProperty(r,"name",Sw),Object.defineProperty(e,"toString",fh(ph({},Mw),{value:r}))};function Cw(e,t,{ignoreNonConfigurable:i=!1}={}){const{name:n}=e;for(const r of Reflect.ownKeys(t))vw(e,t,r,i);return yw(e,t),Iw(e,t,n),e}const bw=(e,t={})=>{if(typeof e!="function")throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:i=0,maxWait:n=Number.Infinity,before:r=!1,after:s=!0}=t;if(!r&&!s)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let o,a,l;const u=function(...d){const c=this,m=()=>{o=void 0,a&&(clearTimeout(a),a=void 0),s&&(l=e.apply(c,d))},v=()=>{a=void 0,o&&(clearTimeout(o),o=void 0),s&&(l=e.apply(c,d))},y=r&&!o;return clearTimeout(o),o=setTimeout(m,i),n>0&&n!==Number.Infinity&&!a&&(a=setTimeout(v,n)),y&&(l=e.apply(c,d)),l};return Cw(u,e),u.cancel=()=>{o&&(clearTimeout(o),o=void 0),a&&(clearTimeout(a),a=void 0)},u},Aw="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Tw=87,Ew=20,Xu=[],Nw=()=>{for(let e=0;e<Ew;e++)Xu[e]=Aw.charAt(Math.random()*Tw);return Xu.join("")};function gh(e){try{return e()}catch(t){console.error(t)}}class Os{constructor(){this.push=this.addDisposer,this.disposers=new Map}addDisposer(t,i=this.genUID()){return this.flush(i),this.disposers.set(i,Array.isArray(t)?kw(t):t),i}add(t,i=this.genUID()){const n=t();return n?this.addDisposer(n,i):i}addEventListener(t,i,n,r,s=this.genUID()){return t.addEventListener(i,n,r),this.addDisposer(()=>t.removeEventListener(i,n,r),s),s}setTimeout(t,i,n=this.genUID()){const r=window.setTimeout(()=>{this.remove(n),t()},i);return this.addDisposer(()=>window.clearTimeout(r),n)}setInterval(t,i,n=this.genUID()){const r=window.setInterval(t,i);return this.addDisposer(()=>window.clearInterval(r),n)}remove(t){const i=this.disposers.get(t);return this.disposers.delete(t),i}flush(t){const i=this.remove(t);i&&i()}flushAll(){this.disposers.forEach(gh),this.disposers.clear()}genUID(){let t;do t=Nw();while(this.disposers.has(t));return t}}function kw(e){return()=>e.forEach(gh)}var ci=[],Pw=function(){return ci.some(function(e){return e.activeTargets.length>0})},Dw=function(){return ci.some(function(e){return e.skippedTargets.length>0})},Ju="ResizeObserver loop completed with undelivered notifications.",zw=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:Ju}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=Ju),window.dispatchEvent(e)},Wn;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Wn||(Wn={}));var di=function(e){return Object.freeze(e)},Bw=function(){function e(t,i){this.inlineSize=t,this.blockSize=i,di(this)}return e}(),mh=function(){function e(t,i,n,r){return this.x=t,this.y=i,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,di(this)}return e.prototype.toJSON=function(){var t=this,i=t.x,n=t.y,r=t.top,s=t.right,o=t.bottom,a=t.left,l=t.width,u=t.height;return{x:i,y:n,top:r,right:s,bottom:o,left:a,width:l,height:u}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),pl=function(e){return e instanceof SVGElement&&"getBBox"in e},vh=function(e){if(pl(e)){var t=e.getBBox(),i=t.width,n=t.height;return!i&&!n}var r=e,s=r.offsetWidth,o=r.offsetHeight;return!(s||o||e.getClientRects().length)},Ku=function(e){var t,i;if(e instanceof Element)return!0;var n=(i=(t=e)===null||t===void 0?void 0:t.ownerDocument)===null||i===void 0?void 0:i.defaultView;return!!(n&&e instanceof n.Element)},jw=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},kn=typeof window!="undefined"?window:{},Cr=new WeakMap,qu=/auto|scroll/,Lw=/^tb|vertical/,Rw=/msie|trident/i.test(kn.navigator&&kn.navigator.userAgent),lt=function(e){return parseFloat(e||"0")},Vi=function(e,t,i){return e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=!1),new Bw((i?t:e)||0,(i?e:t)||0)},ec=di({devicePixelContentBoxSize:Vi(),borderBoxSize:Vi(),contentBoxSize:Vi(),contentRect:new mh(0,0,0,0)}),wh=function(e,t){if(t===void 0&&(t=!1),Cr.has(e)&&!t)return Cr.get(e);if(vh(e))return Cr.set(e,ec),ec;var i=getComputedStyle(e),n=pl(e)&&e.ownerSVGElement&&e.getBBox(),r=!Rw&&i.boxSizing==="border-box",s=Lw.test(i.writingMode||""),o=!n&&qu.test(i.overflowY||""),a=!n&&qu.test(i.overflowX||""),l=n?0:lt(i.paddingTop),u=n?0:lt(i.paddingRight),d=n?0:lt(i.paddingBottom),c=n?0:lt(i.paddingLeft),m=n?0:lt(i.borderTopWidth),v=n?0:lt(i.borderRightWidth),y=n?0:lt(i.borderBottomWidth),x=n?0:lt(i.borderLeftWidth),h=c+u,p=l+d,f=x+v,g=m+y,M=a?e.offsetHeight-g-e.clientHeight:0,S=o?e.offsetWidth-f-e.clientWidth:0,E=r?h+f:0,k=r?p+g:0,N=n?n.width:lt(i.width)-E-S,w=n?n.height:lt(i.height)-k-M,P=N+h+S+f,B=w+p+M+g,C=di({devicePixelContentBoxSize:Vi(Math.round(N*devicePixelRatio),Math.round(w*devicePixelRatio),s),borderBoxSize:Vi(P,B,s),contentBoxSize:Vi(N,w,s),contentRect:new mh(c,l,N,w)});return Cr.set(e,C),C},yh=function(e,t,i){var n=wh(e,i),r=n.borderBoxSize,s=n.contentBoxSize,o=n.devicePixelContentBoxSize;switch(t){case Wn.DEVICE_PIXEL_CONTENT_BOX:return o;case Wn.BORDER_BOX:return r;default:return s}},_w=function(){function e(t){var i=wh(t);this.target=t,this.contentRect=i.contentRect,this.borderBoxSize=di([i.borderBoxSize]),this.contentBoxSize=di([i.contentBoxSize]),this.devicePixelContentBoxSize=di([i.devicePixelContentBoxSize])}return e}(),xh=function(e){if(vh(e))return 1/0;for(var t=0,i=e.parentNode;i;)t+=1,i=i.parentNode;return t},Vw=function(){var e=1/0,t=[];ci.forEach(function(o){if(o.activeTargets.length!==0){var a=[];o.activeTargets.forEach(function(u){var d=new _w(u.target),c=xh(u.target);a.push(d),u.lastReportedSize=yh(u.target,u.observedBox),c<e&&(e=c)}),t.push(function(){o.callback.call(o.observer,a,o.observer)}),o.activeTargets.splice(0,o.activeTargets.length)}});for(var i=0,n=t;i<n.length;i++){var r=n[i];r()}return e},tc=function(e){ci.forEach(function(i){i.activeTargets.splice(0,i.activeTargets.length),i.skippedTargets.splice(0,i.skippedTargets.length),i.observationTargets.forEach(function(r){r.isActive()&&(xh(r.target)>e?i.activeTargets.push(r):i.skippedTargets.push(r))})})},Ow=function(){var e=0;for(tc(e);Pw();)e=Vw(),tc(e);return Dw()&&zw(),e>0},yo,Mh=[],Uw=function(){return Mh.splice(0).forEach(function(e){return e()})},$w=function(e){if(!yo){var t=0,i=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return Uw()}).observe(i,n),yo=function(){i.textContent=""+(t?t--:t++)}}Mh.push(e),yo()},Ww=function(e){$w(function(){requestAnimationFrame(e)})},Wr=0,Hw=function(){return!!Wr},Zw=250,Qw={attributes:!0,characterData:!0,childList:!0,subtree:!0},ic=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],nc=function(e){return e===void 0&&(e=0),Date.now()+e},xo=!1,Fw=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var i=this;if(t===void 0&&(t=Zw),!xo){xo=!0;var n=nc(t);Ww(function(){var r=!1;try{r=Ow()}finally{if(xo=!1,t=n-nc(),!Hw())return;r?i.run(1e3):t>0?i.run(t):i.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,i=function(){return t.observer&&t.observer.observe(document.body,Qw)};document.body?i():kn.addEventListener("DOMContentLoaded",i)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),ic.forEach(function(i){return kn.addEventListener(i,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),ic.forEach(function(i){return kn.removeEventListener(i,t.listener,!0)}),this.stopped=!0)},e}(),qo=new Fw,rc=function(e){!Wr&&e>0&&qo.start(),Wr+=e,!Wr&&qo.stop()},Gw=function(e){return!pl(e)&&!jw(e)&&getComputedStyle(e).display==="inline"},Yw=function(){function e(t,i){this.target=t,this.observedBox=i||Wn.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=yh(this.target,this.observedBox,!0);return Gw(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),Xw=function(){function e(t,i){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=i}return e}(),br=new WeakMap,sc=function(e,t){for(var i=0;i<e.length;i+=1)if(e[i].target===t)return i;return-1},Ar=function(){function e(){}return e.connect=function(t,i){var n=new Xw(t,i);br.set(t,n)},e.observe=function(t,i,n){var r=br.get(t),s=r.observationTargets.length===0;sc(r.observationTargets,i)<0&&(s&&ci.push(r),r.observationTargets.push(new Yw(i,n&&n.box)),rc(1),qo.schedule())},e.unobserve=function(t,i){var n=br.get(t),r=sc(n.observationTargets,i),s=n.observationTargets.length===1;r>=0&&(s&&ci.splice(ci.indexOf(n),1),n.observationTargets.splice(r,1),rc(-1))},e.disconnect=function(t){var i=this,n=br.get(t);n.observationTargets.slice().forEach(function(r){return i.unobserve(t,r.target)}),n.activeTargets.splice(0,n.activeTargets.length)},e}(),Jw=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Ar.connect(this,t)}return e.prototype.observe=function(t,i){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Ku(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Ar.observe(this,t,i)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Ku(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Ar.unobserve(this,t)},e.prototype.disconnect=function(){Ar.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();function Kw(e){const t="http://www.w3.org/2000/svg",i=document.createElementNS(t,"svg");return i.setAttribute("class",`${e}-footer-icon-arrow-left`),i.setAttribute("viewBox","0 0 20 20"),i.innerHTML=`<g clip-path="url(#clip0_11800_99864)">
<path fill-rule="evenodd" clip-rule="evenodd" d="M11.5283 4.86182L12.4711 5.80463L8.22849 10.0473L12.4711 14.2899L11.5283 15.2327L6.34287 10.0473L11.5283 4.86182Z" class="arrow" />
</g>
<defs>
<clipPath id="clip0_11800_99864">
<rect width="16" height="16" fill="white" transform="translate(2 2)"/>
</clipPath>
</defs>`,i}function qw(e){const t="http://www.w3.org/2000/svg",i=document.createElementNS(t,"svg");return i.setAttribute("class",`${e}-footer-icon-arrow-right`),i.setAttribute("viewBox","0 0 20 20"),i.innerHTML=`<g clip-path="url(#clip0_11800_99870)">
<path fill-rule="evenodd" clip-rule="evenodd" d="M8.1377 4.86182L7.19489 5.80463L11.4375 10.0473L7.19489 14.2899L8.1377 15.2327L13.3231 10.0473L8.1377 4.86182Z" class="arrow" />
</g>
<defs>
<clipPath id="clip0_11800_99870">
<rect width="16" height="16" fill="white" transform="translate(2 2)"/>
</clipPath>
</defs>`,i}function ey(e){const t="http://www.w3.org/2000/svg",i=document.createElementNS(t,"svg");i.setAttribute("class",`${e}-footer-icon-play`),i.setAttribute("viewBox","0 0 500 500");const n=document.createElementNS(t,"path");return n.setAttribute("fill","currentColor"),n.setAttribute("d","M418.158 257.419L174.663 413.33c-6.017 3.919-15.708 3.772-21.291-.29-2.791-2.018-4.295-4.483-4.295-7.084V94.109c0-5.65 6.883-10.289 15.271-10.289 4.298 0 8.391 1.307 11.181 3.332l242.629 155.484c6.016 3.917 6.451 10.292.649 14.491-.216.154-.432.154-.649.292zM170.621 391.288l223.116-141.301L170.71 107.753l-.089 283.535z"),i.appendChild(n),i}function ty(e){const t="http://www.w3.org/2000/svg",i=document.createElementNS(t,"svg");i.setAttribute("class",`${e}-footer-icon-pause`),i.setAttribute("viewBox","0 0 500 500");const n=document.createElementNS(t,"path");return n.setAttribute("fill","currentColor"),n.setAttribute("d","M312.491 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261zM165.257 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261z"),i.appendChild(n),i}const Jt=typeof window!="undefined",Sh=Jt&&!("onscroll"in window)||typeof navigator!="undefined"&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),Ih=Jt&&"IntersectionObserver"in window,Ch=Jt&&"classList"in document.createElement("p"),bh=Jt&&window.devicePixelRatio>1,iy={elements_selector:".lazy",container:Sh||Jt?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},Ah=e=>Object.assign({},iy,e),oc=function(e,t){let i;const n="LazyLoad::Initialized",r=new e(t);try{i=new CustomEvent(n,{detail:{instance:r}})}catch{i=document.createEvent("CustomEvent"),i.initCustomEvent(n,!1,!1,{instance:r})}window.dispatchEvent(i)},ny=(e,t)=>{if(!!t)if(!t.length)oc(e,t);else for(let i=0,n;n=t[i];i+=1)oc(e,n)},kt="src",fl="srcset",gl="sizes",Th="poster",rr="llOriginalAttrs",Eh="data",ml="loading",Nh="loaded",kh="applied",ry="entered",vl="error",Ph="native",Dh="data-",zh="ll-status",ke=(e,t)=>e.getAttribute(Dh+t),sy=(e,t,i)=>{var n=Dh+t;if(i===null){e.removeAttribute(n);return}e.setAttribute(n,i)},sr=e=>ke(e,zh),Ii=(e,t)=>sy(e,zh,t),Us=e=>Ii(e,null),wl=e=>sr(e)===null,oy=e=>sr(e)===ml,ay=e=>sr(e)===vl,yl=e=>sr(e)===Ph,ly=[ml,Nh,kh,vl],uy=e=>ly.indexOf(sr(e))>=0,Kt=(e,t,i,n)=>{if(!!e){if(n!==void 0){e(t,i,n);return}if(i!==void 0){e(t,i);return}e(t)}},nn=(e,t)=>{if(Ch){e.classList.add(t);return}e.className+=(e.className?" ":"")+t},dt=(e,t)=>{if(Ch){e.classList.remove(t);return}e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},cy=e=>{e.llTempImage=document.createElement("IMG")},dy=e=>{delete e.llTempImage},Bh=e=>e.llTempImage,$s=(e,t)=>{if(!t)return;const i=t._observer;!i||i.unobserve(e)},hy=e=>{e.disconnect()},py=(e,t,i)=>{t.unobserve_entered&&$s(e,i)},xl=(e,t)=>{!e||(e.loadingCount+=t)},fy=e=>{!e||(e.toLoadCount-=1)},jh=(e,t)=>{!e||(e.toLoadCount=t)},gy=e=>e.loadingCount>0,my=e=>e.toLoadCount>0,Lh=e=>{let t=[];for(let i=0,n;n=e.children[i];i+=1)n.tagName==="SOURCE"&&t.push(n);return t},Ml=(e,t)=>{const i=e.parentNode;if(!i||i.tagName!=="PICTURE")return;Lh(i).forEach(t)},Rh=(e,t)=>{Lh(e).forEach(t)},Ws=[kt],_h=[kt,Th],Hn=[kt,fl,gl],Vh=[Eh],Hs=e=>!!e[rr],Oh=e=>e[rr],Uh=e=>delete e[rr],Fi=(e,t)=>{if(Hs(e))return;const i={};t.forEach(n=>{i[n]=e.getAttribute(n)}),e[rr]=i},vy=e=>{Hs(e)||(e[rr]={backgroundImage:e.style.backgroundImage})},wy=(e,t,i)=>{if(!i){e.removeAttribute(t);return}e.setAttribute(t,i)},wi=(e,t)=>{if(!Hs(e))return;const i=Oh(e);t.forEach(n=>{wy(e,n,i[n])})},yy=e=>{if(!Hs(e))return;const t=Oh(e);e.style.backgroundImage=t.backgroundImage},$h=(e,t,i)=>{nn(e,t.class_applied),Ii(e,kh),i&&(t.unobserve_completed&&$s(e,t),Kt(t.callback_applied,e,i))},Wh=(e,t,i)=>{nn(e,t.class_loading),Ii(e,ml),i&&(xl(i,1),Kt(t.callback_loading,e,i))},Ot=(e,t,i)=>{!i||e.setAttribute(t,i)},ac=(e,t)=>{Ot(e,gl,ke(e,t.data_sizes)),Ot(e,fl,ke(e,t.data_srcset)),Ot(e,kt,ke(e,t.data_src))},xy=(e,t)=>{Ml(e,i=>{Fi(i,Hn),ac(i,t)}),Fi(e,Hn),ac(e,t)},My=(e,t)=>{Fi(e,Ws),Ot(e,kt,ke(e,t.data_src))},Sy=(e,t)=>{Rh(e,i=>{Fi(i,Ws),Ot(i,kt,ke(i,t.data_src))}),Fi(e,_h),Ot(e,Th,ke(e,t.data_poster)),Ot(e,kt,ke(e,t.data_src)),e.load()},Iy=(e,t)=>{Fi(e,Vh),Ot(e,Eh,ke(e,t.data_src))},Cy=(e,t,i)=>{const n=ke(e,t.data_bg),r=ke(e,t.data_bg_hidpi),s=bh&&r?r:n;!s||(e.style.backgroundImage=`url("${s}")`,Bh(e).setAttribute(kt,s),Wh(e,t,i))},by=(e,t,i)=>{const n=ke(e,t.data_bg_multi),r=ke(e,t.data_bg_multi_hidpi),s=bh&&r?r:n;!s||(e.style.backgroundImage=s,$h(e,t,i))},Ay=(e,t,i)=>{const n=ke(e,t.data_bg_set);if(!n)return;const r=n.split("|");let s=r.map(o=>`image-set(${o})`);e.style.backgroundImage=s.join(),e.style.backgroundImage===""&&(s=r.map(o=>`-webkit-image-set(${o})`),e.style.backgroundImage=s.join()),$h(e,t,i)},Hh={IMG:xy,IFRAME:My,VIDEO:Sy,OBJECT:Iy},Ty=(e,t)=>{const i=Hh[e.tagName];!i||i(e,t)},Ey=(e,t,i)=>{const n=Hh[e.tagName];!n||(n(e,t),Wh(e,t,i))},Ny=["IMG","IFRAME","VIDEO","OBJECT"],ky=e=>Ny.indexOf(e.tagName)>-1,Zh=(e,t)=>{t&&!gy(t)&&!my(t)&&Kt(e.callback_finish,t)},lc=(e,t,i)=>{e.addEventListener(t,i),e.llEvLisnrs[t]=i},Py=(e,t,i)=>{e.removeEventListener(t,i)},Sl=e=>!!e.llEvLisnrs,Dy=(e,t,i)=>{Sl(e)||(e.llEvLisnrs={});const n=e.tagName==="VIDEO"?"loadeddata":"load";lc(e,n,t),lc(e,"error",i)},ea=e=>{if(!Sl(e))return;const t=e.llEvLisnrs;for(let i in t){const n=t[i];Py(e,i,n)}delete e.llEvLisnrs},Qh=(e,t,i)=>{dy(e),xl(i,-1),fy(i),dt(e,t.class_loading),t.unobserve_completed&&$s(e,i)},zy=(e,t,i,n)=>{const r=yl(t);Qh(t,i,n),nn(t,i.class_loaded),Ii(t,Nh),Kt(i.callback_loaded,t,n),r||Zh(i,n)},By=(e,t,i,n)=>{const r=yl(t);Qh(t,i,n),nn(t,i.class_error),Ii(t,vl),Kt(i.callback_error,t,n),i.restore_on_error&&wi(t,Hn),r||Zh(i,n)},Il=(e,t,i)=>{const n=Bh(e)||e;if(Sl(n))return;Dy(n,o=>{zy(o,e,t,i),ea(n)},o=>{By(o,e,t,i),ea(n)})},jy=(e,t,i)=>{cy(e),Il(e,t,i),vy(e),Cy(e,t,i),by(e,t,i),Ay(e,t,i)},Ly=(e,t,i)=>{Il(e,t,i),Ey(e,t,i)},Cl=(e,t,i)=>{ky(e)?Ly(e,t,i):jy(e,t,i)},Ry=(e,t,i)=>{e.setAttribute("loading","lazy"),Il(e,t,i),Ty(e,t),Ii(e,Ph)},uc=e=>{e.removeAttribute(kt),e.removeAttribute(fl),e.removeAttribute(gl)},_y=e=>{Ml(e,t=>{uc(t)}),uc(e)},Fh=e=>{Ml(e,t=>{wi(t,Hn)}),wi(e,Hn)},Vy=e=>{Rh(e,t=>{wi(t,Ws)}),wi(e,_h),e.load()},Oy=e=>{wi(e,Ws)},Uy=e=>{wi(e,Vh)},$y={IMG:Fh,IFRAME:Oy,VIDEO:Vy,OBJECT:Uy},Wy=e=>{const t=$y[e.tagName];if(!t){yy(e);return}t(e)},Hy=(e,t)=>{wl(e)||yl(e)||(dt(e,t.class_entered),dt(e,t.class_exited),dt(e,t.class_applied),dt(e,t.class_loading),dt(e,t.class_loaded),dt(e,t.class_error))},Zy=(e,t)=>{Wy(e),Hy(e,t),Us(e),Uh(e)},Qy=(e,t,i,n)=>{!i.cancel_on_exit||!oy(e)||e.tagName==="IMG"&&(ea(e),_y(e),Fh(e),dt(e,i.class_loading),xl(n,-1),Us(e),Kt(i.callback_cancel,e,t,n))},Fy=(e,t,i,n)=>{const r=uy(e);Ii(e,ry),nn(e,i.class_entered),dt(e,i.class_exited),py(e,i,n),Kt(i.callback_enter,e,t,n),!r&&Cl(e,i,n)},Gy=(e,t,i,n)=>{wl(e)||(nn(e,i.class_exited),Qy(e,t,i,n),Kt(i.callback_exit,e,t,n))},Yy=["IMG","IFRAME","VIDEO"],Gh=e=>e.use_native&&"loading"in HTMLImageElement.prototype,Xy=(e,t,i)=>{e.forEach(n=>{Yy.indexOf(n.tagName)!==-1&&Ry(n,t,i)}),jh(i,0)},Jy=e=>e.isIntersecting||e.intersectionRatio>0,Ky=e=>({root:e.container===document?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}),qy=(e,t,i)=>{e.forEach(n=>Jy(n)?Fy(n.target,n,t,i):Gy(n.target,n,t,i))},e0=(e,t)=>{t.forEach(i=>{e.observe(i)})},t0=(e,t)=>{hy(e),e0(e,t)},i0=(e,t)=>{!Ih||Gh(e)||(t._observer=new IntersectionObserver(i=>{qy(i,e,t)},Ky(e)))},Yh=e=>Array.prototype.slice.call(e),as=e=>e.container.querySelectorAll(e.elements_selector),n0=e=>Yh(e).filter(wl),r0=e=>ay(e),s0=e=>Yh(e).filter(r0),cc=(e,t)=>n0(e||as(t)),o0=(e,t)=>{s0(as(e)).forEach(n=>{dt(n,e.class_error),Us(n)}),t.update()},a0=(e,t)=>{!Jt||(t._onlineHandler=()=>{o0(e,t)},window.addEventListener("online",t._onlineHandler))},l0=e=>{!Jt||window.removeEventListener("online",e._onlineHandler)},or=function(e,t){const i=Ah(e);this._settings=i,this.loadingCount=0,i0(i,this),a0(i,this),this.update(t)};or.prototype={update:function(e){const t=this._settings,i=cc(e,t);if(jh(this,i.length),Sh||!Ih){this.loadAll(i);return}if(Gh(t)){Xy(i,t,this);return}t0(this._observer,i)},destroy:function(){this._observer&&this._observer.disconnect(),l0(this),as(this._settings).forEach(e=>{Uh(e)}),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){const t=this._settings;cc(e,t).forEach(n=>{$s(n,this),Cl(n,t,this)})},restoreAll:function(){const e=this._settings;as(e).forEach(t=>{Zy(t,e)})}};or.load=(e,t)=>{const i=Ah(t);Cl(e,i)};or.resetStatus=e=>{Us(e)};Jt&&ny(or,window.lazyLoadOptions);class Xh{constructor({readonly:t,box:i,pages:n,onNewPageIndex:r,onPlay:s}){if(this.pageIndex=0,this.namespace="netless-app-docs-viewer",this.isShowPreview=!1,this.isSmallBox=!1,this.sideEffect=new Os,n.length<=0)throw new Error("[DocsViewer] Empty pages.");this.readonly=t,this.box=i,this.pages=n,this.onNewPageIndex=r,this.onPlay=s,this.onPageIndexChanged=()=>{},this.render()}mount(){this.box.mountContent(this.$content),this.box.mountFooter(this.$footer),this.sideEffect.add(()=>{const t=new or({container:this.$preview,elements_selector:`.${this.wrapClassName("preview-page>img")}`});return()=>t.destroy()},"preview-lazyload"),this.box.events.on("maximized",t=>{this.$footer.classList.toggle(this.wrapClassName("hide"),t),this.togglePreview(t)})}unmount(){this.$content.remove(),this.$footer.remove()}setReadonly(t){this.readonly!==t&&(this.readonly=t,this.$content.classList.toggle(this.wrapClassName("readonly"),t),this.$footer.classList.toggle(this.wrapClassName("readonly"),t))}destroy(){this.sideEffect.flushAll(),this.unmount()}setPageIndex(t){var i;if(!Number.isNaN(t)){const n=(i=this.$preview)==null?void 0:i.querySelectorAll("."+this.wrapClassName("preview-page"));n==null||n.forEach((r,s)=>{var o;(o=r.querySelector("img"))==null||o.classList.toggle(this.wrapClassName("active"),Number(t)==s)}),this.$preview.scrollTo({top:Array.prototype.slice.call(n).find(r=>r.querySelector("img").className.includes(this.wrapClassName("active"))).offsetTop-16}),this.pageIndex=t,this.$pageNumberInput.textContent=String(t+1),this.onPageIndexChanged(t),this.$btnPageBack.classList.toggle(this.wrapClassName("footer-btn-disable"),t==0),this.$btnPageNext.classList.toggle(this.wrapClassName("footer-btn-disable"),t==this.pages.length-1)}}setSmallBox(t){this.isSmallBox!==t&&(this.isSmallBox=t,this.$footer.classList.toggle(this.wrapClassName("float-footer"),t))}render(){return this.renderContent(),this.renderFooter(),this.$content}renderContent(){if(!this.$content){const t=document.createElement("div");t.className=this.wrapClassName("content"),this.$content=t,this.readonly&&t.classList.add(this.wrapClassName("readonly")),t.appendChild(this.renderPreviewMask()),t.appendChild(this.renderPreview())}return this.$content}renderPreview(){if(!this.$preview){const t=document.createElement("div");t.className=this.wrapClassName("preview")+" tele-fancy-scrollbar",this.$preview=t;const i=document.createElement("div");i.className=this.wrapClassName("preview-head");const n=document.createElement("h3");n.textContent=this.box.title,i.appendChild(n),this.$preview.appendChild(i);const r=this.wrapClassName("preview-page"),s=this.wrapClassName("preview-page-name");this.pages.forEach((o,a)=>{var l;const u=(l=o.thumbnail)!=null?l:o.src.startsWith("ppt")?void 0:o.src;if(!u)return;const d=String(a),c=document.createElement("a");c.className=r+" "+this.wrapClassName(`preview-page-${a}`),c.setAttribute("href","#"),c.dataset.pageIndex=d;const m=document.createElement("span");m.className=s,m.textContent=String(a+1),m.dataset.pageIndex=d;const v=document.createElement("img");v.width=o.width,v.height=o.height,v.dataset.src=u,v.dataset.pageIndex=d,c.appendChild(m),c.appendChild(v),t.appendChild(c),v.classList.toggle(this.wrapClassName("active"),this.pageIndex==a)}),this.sideEffect.addEventListener(t,"click",o=>{var a;if(this.readonly)return;const l=(a=o.target.dataset)==null?void 0:a.pageIndex;l&&(o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation(),this.onNewPageIndex(Number(l)))})}return this.$preview}renderPreviewMask(){return this.$previewMask||(this.$previewMask=document.createElement("div"),this.$previewMask.className=this.wrapClassName("preview-mask"),this.sideEffect.addEventListener(this.$previewMask,"click",t=>{this.readonly||t.target===this.$previewMask&&this.togglePreview(!1)})),this.$previewMask}renderFooter(){if(!this.$footer){const t=document.createElement("div");t.className=this.wrapClassName("footer"),this.$footer=t,this.readonly&&t.classList.add(this.wrapClassName("readonly")),this.isSmallBox&&t.classList.add(this.wrapClassName("float-footer")),this.pages.some(l=>l.thumbnail||!l.src.startsWith("ppt"));const i=document.createElement("div");i.className=this.wrapClassName("page-jumps");const n=this.renderFooterBtn("btn-page-back",Kw(this.namespace));if(this.sideEffect.addEventListener(n,"click",()=>{this.readonly||this.onNewPageIndex(this.pageIndex-1)}),i.appendChild(n),this.$btnPageBack=n,this.onPlay){const l=this.renderFooterBtn("btn-page-play",ey(this.namespace),ty(this.namespace)),u=()=>{this.sideEffect.setTimeout(()=>{l.classList.toggle(this.wrapClassName("footer-btn-playing"),!1)},500,"returnPlay")};this.sideEffect.addEventListener(l,"click",()=>{var d;this.readonly||(l.classList.toggle(this.wrapClassName("footer-btn-playing"),!0),(d=this.onPlay)==null||d.call(this),u())}),this.$footer.appendChild(l)}const r=document.createElement("div");r.className=this.wrapClassName("page-number");const s=document.createElement("span");s.className=this.wrapClassName("page-number-input"),s.textContent=String(this.pageIndex+1),this.$pageNumberInput=s;const o=document.createElement("span");o.textContent=" / "+this.pages.length,r.appendChild(s),r.appendChild(o),i.appendChild(r);const a=this.renderFooterBtn("btn-page-next",qw(this.namespace));this.sideEffect.addEventListener(a,"click",()=>{this.readonly||this.onNewPageIndex(this.pageIndex+1)}),i.appendChild(a),this.$btnPageNext=a,this.$footer.appendChild(i)}return this.$footer}renderFooterBtn(t,i,n){const r=document.createElement("button");return r.className=this.wrapClassName("footer-btn")+" "+this.wrapClassName(t),r.appendChild(i),n&&r.appendChild(n),r}togglePreview(t){if(this.isShowPreview=t!=null?t:!this.isShowPreview,this.$content.classList.toggle(this.wrapClassName("preview-active"),this.isShowPreview),this.isShowPreview){const i=this.$preview.querySelector("."+this.wrapClassName(`preview-page-${this.pageIndex}`));i&&this.$preview.scrollTo({top:i.offsetTop-16})}}wrapClassName(t){return`${this.namespace}-${t}`}}function Gi(e,t,i){return Math.min(Math.max(e,t),i)}function dc(e){return e.touches?e.touches[0]:e}function Jh(e){e.stopPropagation(),e.cancelable&&e.preventDefault()}function Kh(e){if(!e)return!1;const t=e.tagName;return t==="INPUT"||t==="TEXTAREA"||t==="SELECT"}class u0{constructor(t){var i,n,r;this.velocity=0,this.paused=!0,this._animationFrameID=null,this._loopTimestamp=0,this.looper=s=>{if(this.paused)return;let o=Math.floor((s-this._loopTimestamp)/1e3*60)+1;for(this._loopTimestamp=s;o-- >0;)this.stepper();this.onStep(this.current,this),!this.paused&&this.current!==this.target&&window.requestAnimationFrame(this.looper)},this.current=(i=t.start)!=null?i:0,this.target=this.current,this.stiffness=(n=t.stiffness)!=null?n:170,this.damping=(r=t.damping)!=null?r:26,this.onStep=t.onStep}stepTo(t,i){this.paused&&i!=null&&(this.current=i),this.paused=!1,this.target=t,this.onStep(this.current,this),this._loopTimestamp=Date.now(),window.requestAnimationFrame(this.looper)}pause(){this.paused=!0}destroy(){this.pause()}stepper(){const t=-this.stiffness*(this.current-this.target),i=-this.damping*this.velocity,n=this.velocity+(t+i)/60,r=this.current+n/60;Math.abs(n-0)<.01&&Math.abs(r-this.target)<.01?(this.current=this.target,this.velocity=0):(this.current=r,this.velocity=n)}}class c0{constructor(t,i,n,r){this.scale=1,this.lastVisit=Date.now(),this.pageOffsetY=0,this.pageOffsetX=0,this.visible=!0,this.index=t,this.page=i,this.scale=n,this.pageOffsetX=(r-i.width)/2;const s=document.createElement("div");s.className="page-renderer-page",s.dataset.index=`${t}`,s.style.width=`${i.width*n}px`,s.style.height=`${i.height*n}px`,i.thumbnail&&(s.style.backgroundImage=`url("${i.thumbnail}")`);const o=document.createElement("img");o.className="page-renderer-page-img",o.width=i.width,o.height=i.height,o.src=i.src,s.appendChild(o),this.$page=s}translateY(t){Math.abs(t-this.pageOffsetY)>=.001&&(this.pageOffsetY=t,this.$page.style.transform=`translate(${this.pageOffsetX*this.scale}px, ${this.pageOffsetY*this.scale}px)`)}setScale(t){Math.abs(t-this.scale)>=.001&&(this.scale=t,this.$page.style.width=`${this.page.width*this.scale}px`,this.$page.style.height=`${this.page.height*this.scale}px`,this.$page.style.transform=`translate(${this.pageOffsetX*this.scale}px, ${this.pageOffsetY*this.scale}px)`)}setVisible(t){t!==this.visible&&(this.visible=t,this.$page.style.opacity=t?"1":"0")}}const d0=window.requestIdleCallback||(e=>window.setTimeout(e,5e3)),h0=window.cancelIdleCallback||window.clearTimeout;class p0{constructor(t,i,n){this.pages=t,this.pagesIntrinsicWidth=i,this.scale=n,this.els=new Map,this.maxElCount=200,this.gcTimer=null,this.gc=()=>{if(this.gcTimer=null,this.els.size>this.maxElCount){const r=[...this.els.values()].sort((s,o)=>o.lastVisit-s.lastVisit);for(let s=Math.floor(this.maxElCount/4);s<r.length;s++)this.els.delete(r[s].index)}}}getEl(t){let i=this.els.get(t);return i||(i=new c0(t,this.pages[t],this.scale,this.pagesIntrinsicWidth),this.els.set(t,i)),i.lastVisit=Date.now(),this.els.size>this.maxElCount&&this.gcTimer===null&&(this.gcTimer=d0(this.gc)),i}setScale(t){t!==this.scale&&(this.scale=t,this.els.forEach(i=>i.setScale(t)))}destroy(){this.els.clear(),this.gcTimer!==null&&(h0(this.gcTimer),this.gcTimer=null)}}class f0{constructor(t){this._hwaTimeout=NaN,this._turnOffHWA=()=>{window.clearTimeout(this._hwaTimeout),this._hwaTimeout=NaN,this.$pages.classList.toggle("is-hwa",!1)},this.pagesScrollTop=t.pagesScrollTop||0,this.containerWidth=t.containerWidth||1,this.containerHeight=t.containerHeight||1,this.pages=t.pages.map(s=>{if(s.thumbnail)return s;try{const o=new URL(s.src);return o.searchParams.set("x-oss-process","image/resize,l_50"),fh(ph({},s),{thumbnail:o.toString()})}catch(o){return console.error(o),s}});const i=Array(this.pages.length);let n=1/0,r=0;this.pagesIntrinsicHeight=this.pages.reduce((s,o,a)=>(i[a]=s,o.width>r&&(r=o.width),o.height<=n&&(n=o.height),s+o.height),0),this.pagesIntrinsicWidth=r,this.pagesMinHeight=n,this.pagesIntrinsicYs=i,this.scale=this._calcScale(),this.threshold=this._calcThreshold(),this.onPageIndexChanged=t.onPageIndexChanged,this.pageScrollIndex=0,this.pagesScrollTop!==0&&(this.pageScrollIndex=this.findScrollPageIndex(),this.onPageIndexChanged&&this.pageScrollIndex>0&&this.onPageIndexChanged(this.pageScrollIndex)),this.pageElManager=new p0(this.pages,r,this.scale),this.$pages=this.renderPages()}setContainerSize(t,i){t>0&&i>0&&(t!==this.containerWidth||i!==this.containerHeight)&&(this.containerWidth=t,this.containerHeight=i,this.$pages.style.width=`${this.containerWidth}px`,this.$pages.style.height=`${this.containerHeight}px`,this.scale=this._calcScale(),this.threshold=this._calcThreshold(),this.pageElManager.setScale(this.scale),this.$pages.parentElement&&this.pagesScrollTo(this.pagesScrollTop,!0))}renderPages(){const t=document.createElement("div");return t.className="page-renderer-pages-container",t.style.width=`${this.containerWidth}px`,t.style.height=`${this.containerHeight}px`,t}pagesScrollTo(t,i){if(t=Gi(t,0,this.pagesIntrinsicHeight-this.containerHeight/this.scale),i||Math.abs(t-this.pagesScrollTop)>=.001){this._turnOnHWA(),this.pagesScrollTop=t;const n=this.findScrollPageIndex(),r=Math.max(n-this.threshold,0),s=Math.min(n+this.threshold,this.pages.length-1);for(let o=0;o<this.$pages.children.length;o++){const a=this.$pages.children[o],l=Number(a.dataset.index);l>=r&&l<=s||(a.remove(),o--)}for(let o=r;o<=s;o++){const a=this.pageElManager.getEl(o);a.$page.parentElement!==this.$pages&&this.$pages.appendChild(a.$page),a.translateY(this.pagesIntrinsicYs[o]-this.pagesScrollTop)}n!==this.pageScrollIndex&&(this.pageScrollIndex=n,this.onPageIndexChanged&&this.onPageIndexChanged(n))}}findScrollPageIndex(){for(let t=0;t<this.pagesIntrinsicYs.length;t++)if(this.pagesIntrinsicYs[t]+this.pages[t].height-this.pagesScrollTop>=.001)return t;return this.pagesIntrinsicYs.length-1}mount(t){t.appendChild(this.$pages),this.pagesScrollTo(this.pagesScrollTop,!0)}unmount(){this.$pages.remove()}destroy(){this.unmount(),this.onPageIndexChanged=void 0,this.pageElManager.destroy(),this._hwaTimeout&&(window.clearTimeout(this._hwaTimeout),this._hwaTimeout=NaN)}_calcScale(){return this.containerWidth/this.pagesIntrinsicWidth||1}_calcThreshold(){return Gi(Math.ceil(this.containerHeight/this.scale/this.pagesMinHeight/2),1,this.pages.length)}_turnOnHWA(){this._hwaTimeout?window.clearTimeout(this._hwaTimeout):this.$pages.classList.toggle("is-hwa",!0),this._hwaTimeout=window.setTimeout(this._turnOffHWA,1e3)}}const g0=30;class m0{constructor(t){this.sideEffect=new Os,this.pagesScrollTop=t.pagesScrollTop||0,this.containerWidth=t.containerWidth||1,this.containerHeight=t.containerHeight||1,this.pagesWidth=t.pagesWidth||1,this.pagesHeight=t.pagesHeight||1,this.scale=this._calcScale(),this.scrollbarMinHeight=t.scrollbarMinHeight||g0,this.scrollbarHeight=this._calcScrollbarHeight(),this.readonly=t.readonly,this.wrapClassName=t.wrapClassName,this.onDragScroll=t.onDragScroll,this.$scrollbar=this.renderScrollbar()}mount(t){t.appendChild(this.$scrollbar),this.pagesScrollTo(this.pagesScrollTop,!0)}unmount(){this.$scrollbar.remove()}setReadonly(t){this.readonly=t}setContainerSize(t,i){t>0&&i>0&&(t!==this.containerWidth||i!==this.containerHeight)&&(this.containerWidth=t,this.containerHeight=i,this.scale=this._calcScale(),this._updateScrollbarHeight(),this.$scrollbar.parentElement&&this.pagesScrollTo(this.pagesScrollTop,!0))}pagesScrollTo(t,i){if(t=Gi(t,0,this.pagesHeight-this.containerHeight/this.scale),i||Math.abs(t-this.pagesScrollTop)>=.001){this.pagesScrollTop=t;const n=this.pagesScrollTop*this.scale,r=this.pagesHeight*this.scale,s=n/(r-this.containerHeight)*(this.containerHeight-this.scrollbarHeight);window.requestAnimationFrame?window.requestAnimationFrame(()=>{this.$scrollbar.style.transform=`translateY(${s}px)`}):this.$scrollbar.style.transform=`translateY(${s}px)`}}destroy(){this.unmount(),this.onDragScroll=void 0,this.sideEffect.flushAll()}renderScrollbar(){const t=document.createElement("button");t.className=this.wrapClassName("scrollbar"),t.style.minHeight=`${this.scrollbarMinHeight}px`,t.style.height=`${this.scrollbarHeight}px`;const i=n=>{if(this.readonly||n.button!=null&&n.button!==0)return;Jh(n);const r=this.wrapClassName("scrollbar-dragging");t.classList.toggle(r,!0);const s=this.pagesScrollTop,{clientY:o}=dc(n),a=u=>{if(this.readonly)return;const{clientY:d}=dc(u),c=(d-o)/this.scale;Math.abs(c)>0&&this.onDragScroll&&this.onDragScroll(s+c*(this.pagesHeight*this.scale/this.containerHeight))},l=()=>{t.classList.toggle(r,!1),window.removeEventListener("mousemove",a,!0),window.removeEventListener("touchmove",a,!0),window.removeEventListener("mouseup",l,!0),window.removeEventListener("touchend",l,!0),window.removeEventListener("touchcancel",l,!0)};window.addEventListener("mousemove",a,!0),window.addEventListener("touchmove",a,!0),window.addEventListener("mouseup",l,!0),window.addEventListener("touchend",l,!0),window.addEventListener("touchcancel",l,!0)};return this.sideEffect.addEventListener(t,"mousedown",i),this.sideEffect.addEventListener(t,"touchstart",i),t}_calcScale(){return this.containerWidth/this.pagesWidth||1}_calcScrollbarHeight(){return Gi(this.containerHeight/(this.pagesHeight*this.scale)*this.containerHeight,this.scrollbarMinHeight,this.containerHeight)}_updateScrollbarHeight(){const t=this._calcScrollbarHeight();Math.abs(t-this.scrollbarHeight)>.001&&(this.scrollbarHeight=t,this.$scrollbar.style.height=`${t}px`)}}const v0=window.ResizeObserver||Jw,cn=640;class w0{constructor({context:t,whiteboardView:i,readonly:n,box:r,pages:s,pageScrollTop:o=0,mountWhiteboard:a,onUserScroll:l,baseScenePath:u,appId:d}){this.sideEffect=new Os,this.userScrolling=!1,this.onNewPageIndex=y=>{this.scrollToPage(y)},this.toPdf=async()=>{const y=document.createElement("canvas"),x=y.getContext("2d");if(!x||!this.baseScenePath){this.reportProgress(100,null);return}const h=this.whiteboardView.focusScenePath||`${this.baseScenePath}/1`,p=this.pages[0],{jsPDF:f}=await Promise.resolve().then(function(){return bg(require("jspdf"))}),g=new f({format:[p.width,p.height],orientation:p.width>p.height?"l":"p",compress:!0});for(const[S,E]of this.pages.entries()){const{width:k,height:N,src:w}=E;y.width=k,y.height=N;const P=k>N?"l":"p";S>0&&g.addPage([k,N],P);const B=await this.getBase64FromUrl(w),C=document.createElement("img");C.src=B,await new Promise(je=>C.onload=je),x.drawImage(C,0,0);const _=y.toDataURL("image/jpeg",.6);x.clearRect(0,0,k,N);const Z={centerX:k/2,centerY:N/2+S*N,scale:1},G=this.context.manager.windowManger;G._appliancePlugin?await G._appliancePlugin.screenshotToCanvasAsync(x,h,k,N,Z):this.whiteboardView.screenshotToCanvas(x,h,k,N,Z);const ne=y.toDataURL("image/png");g.addImage(_,"JPEG",0,0,k,N,"","FAST"),g.addImage(ne,"PNG",0,0,k,N,"","FAST"),x.clearRect(0,0,k,N),Math.ceil((S+1)/this.pages.length*100)<100&&this.reportProgress(Math.ceil((S+1)/this.pages.length*100),null)}const M=g.output("arraybuffer");this.reportProgress(100,{pdf:M,title:this.box.title})},this.context=t,this.whiteboardView=i,this.readonly=n,this.box=r,this.pages=s,this.baseScenePath=u,this.appId=d,this.mountWhiteboard=a,this._onUserScroll=l;const c=this.debounce(()=>{this.userScrolling=!1,this._onUserScroll&&this._onUserScroll(this.pageRenderer.pagesScrollTop)},{wait:80},"debounce-updateUserScroll");this.updateUserScroll=()=>{this.userScrolling=!0,c()},this.viewer=new Xh({readonly:n,box:r,pages:s,onNewPageIndex:this.onNewPageIndex});const{width:m,height:v}=this.whiteboardView.size;this.pageRenderer=new f0({pagesScrollTop:o,pages:this.pages,containerWidth:m,containerHeight:v,onPageIndexChanged:this.viewer.setPageIndex.bind(this.viewer)}),this.scrollbar=new m0({pagesScrollTop:this.pageRenderer.pagesScrollTop,containerWidth:m,containerHeight:v,pagesWidth:this.pageRenderer.pagesIntrinsicWidth,pagesHeight:this.pageRenderer.pagesIntrinsicHeight,readonly:this.readonly,wrapClassName:this.wrapClassName.bind(this),onDragScroll:y=>{this.pageScrollTo(y),this.updateUserScroll()}}),this.pageScrollStepper=new u0({start:this.pageRenderer.pagesScrollTop,onStep:y=>{this.pageScrollTo(y)}}),this.render()}mount(){this.viewer.mount(),this.setupScrollListener();const t=this.debounce(this.renderRatioHeight.bind(this),{wait:80});return this.sideEffect.add(()=>{const i=new v0(t);return i.observe(this.viewer.$content),()=>i.disconnect()}),this.sideEffect.setTimeout(()=>{this.userScrolling||this.pageScrollTo(this.pageRenderer.pagesScrollTop)},100),this.sideEffect.add(()=>{const i=n=>{n.data.type==="@netless/_request_save_pdf_"&&n.data.appId===this.appId&&this.toPdf().catch(()=>this.reportProgress(100,null))};return window.addEventListener("message",i),()=>{window.removeEventListener("message",i)}}),this}unmount(){return this.viewer.unmount(),this}setReadonly(t){this.readonly!==t&&(this.readonly=t,this.viewer.setReadonly(t),this.scrollbar.setReadonly(t))}destroy(){this.sideEffect.flushAll(),this.pageScrollStepper.destroy(),this._onUserScroll=void 0,this.unmount(),this.viewer.destroy(),this.pageRenderer.destroy(),this.scrollbar.destroy()}syncPageScrollTop(t){!this.userScrolling&&t>=0&&Math.abs(this.pageRenderer.pagesScrollTop-t)>.01&&this.pageScrollStepper.stepTo(t,this.pageRenderer.pagesScrollTop)}render(){this.pageRenderer.mount(this.viewer.$content),this.viewer.$content.appendChild(this.renderWhiteboardView()),this.scrollbar.mount(this.viewer.$content),this.renderRatioHeight()}renderRatioHeight(){const t=this.box.absoluteHeight,i=t<=cn;if(this.viewer.setSmallBox(i),i){const n=26/cn,r=26/t,s=26/cn,o=0,a=Math.max((n+s-(r+o))/2,0);if(this.box.$titleBar){const l=r+a;this.box.$titleBar.style.height=`${l*100}%`}if(this.box.$footer){const l=o+a;this.box.$footer.style.height=`${l*100}%`}}else{if(this.box.$titleBar){const n=Math.max(26/cn,26/t);this.box.$titleBar.style.height=`${n*100}%`}if(this.box.$footer){const n=Math.max(26/cn,26/t);this.box.$footer.style.height=`${n*100}%`}}}renderWhiteboardView(){return this.$whiteboardView||(this.$whiteboardView=document.createElement("div"),this.$whiteboardView.className=this.wrapClassName("wb-view"),this.mountWhiteboard(this.$whiteboardView),this.sideEffect.addEventListener(this.$whiteboardView,"wheel",t=>{Jh(t),this.readonly||(this.pageScrollTo(this.pageRenderer.pagesScrollTop+t.deltaY),this.updateUserScroll())},{passive:!1,capture:!0}),this.sideEffect.addEventListener(this.$whiteboardView,"touchmove",t=>{this.readonly||t.touches.length<=1||this.updateUserScroll()},{passive:!0,capture:!0})),this.$whiteboardView}scrollTopPageToEl(t){return t*this.pageRenderer.scale}scrollTopElToPage(t){return t/this.pageRenderer.scale}elScrollTo(t){this.pageScrollTo(this.scrollTopElToPage(t))}pageScrollTo(t){const i=this.scrollTopElToPage(this.whiteboardView.size.height/2);this.whiteboardView.moveCamera({centerY:Gi(t+i,i,this.pageRenderer.pagesIntrinsicHeight-i),animationMode:"immediately"})}scrollToPage(t){if(!this.readonly&&!Number.isNaN(t)){const i=this.pageRenderer.pagesIntrinsicYs[t];i>=0&&(this.pageScrollTo(i+5/this.pageRenderer.scale),this.updateUserScroll())}}setupScrollListener(){this.sideEffect.add(()=>{const t=i=>{const{width:n,height:r}=this.whiteboardView.size;if(n<=0||r<=0)return;const s=i.centerY-this.pageRenderer.containerHeight/this.pageRenderer.scale/2;this.pageRenderer.pagesScrollTo(s),this.scrollbar.pagesScrollTo(s)};return this.whiteboardView.callbacks.on("onCameraUpdated",t),()=>this.whiteboardView.callbacks.off("onCameraUpdated",t)}),this.sideEffect.add(()=>{const{updateUserScroll:t}=this;return this.whiteboardView.callbacks.on("onCameraUpdatedByDevice",t),()=>this.whiteboardView.callbacks.off("onCameraUpdatedByDevice",t)}),this.sideEffect.add(()=>{const t=({width:i,height:n})=>{if(i<=0||n<=0)return;this.pageRenderer.setContainerSize(i,n),this.scrollbar.setContainerSize(i,n);const{pagesIntrinsicWidth:r,pagesIntrinsicHeight:s}=this.pageRenderer;this.whiteboardView.moveCameraToContain({originX:0,originY:this.pageRenderer.pagesScrollTop,width:r,height:n/this.pageRenderer.scale,animationMode:"immediately"}),this.whiteboardView.setCameraBound({damping:1,maxContentMode:()=>this.pageRenderer.scale,minContentMode:()=>this.pageRenderer.scale,centerX:r/2,centerY:s/2,width:r,height:s})};return this.whiteboardView.callbacks.on("onSizeUpdated",t),()=>{this.whiteboardView.callbacks.off("onSizeUpdated",t)}},"whiteboard-size-update"),this.sideEffect.addEventListener(window,"keyup",t=>{if(this.readonly||!this.box.focus||this.box.minimized||Kh(t.target))return;let i=null;switch(t.key){case"PageDown":{i=this.pageRenderer.pagesScrollTop+this.pageRenderer.containerHeight/this.pageRenderer.scale;break}case"PageUp":{i=this.pageRenderer.pagesScrollTop-this.pageRenderer.containerHeight/this.pageRenderer.scale;break}case"ArrowDown":{i=this.pageRenderer.pagesScrollTop+this.pageRenderer.containerHeight/4/this.pageRenderer.scale;break}case"ArrowUp":{i=this.pageRenderer.pagesScrollTop-this.pageRenderer.containerHeight/4/this.pageRenderer.scale;break}}i!==null&&(this._onUserScroll?this._onUserScroll(i):(this.pageScrollTo(i),this.updateUserScroll()))},{capture:!0})}debounce(t,i,n){const r=bw(t,i);return this.sideEffect.addDisposer(()=>r.cancel(),n),r}wrapClassName(t){return"netless-app-docs-viewer-static-"+t}async getBase64FromUrl(t){const n=await(await fetch(this._invalidate(t))).blob();return new Promise(r=>{const s=new FileReader;s.readAsDataURL(n),s.onloadend=()=>{const o=s.result;r(o)}})}_invalidate(t){try{const i=new URL(t);return i.searchParams.set("t",Date.now().toString()),i.toString()}catch{return t}}reportProgress(t,i){window.postMessage({type:"@netless/_result_save_pdf_",appId:this.appId,progress:t,result:i})}}class y0{constructor({context:t,whiteboardView:i,box:n,pages:r}){this.sideEffect=new Os,this.onPlayPPT=()=>{const s=this.context.getRoom();s&&s.pptNextStep()},this._scaleDocsToFitImpl=()=>{const s=this.pages[this.getPageIndex()];s&&(this.whiteboardView.moveCameraToContain({originX:-s.width/2,originY:-s.height/2,width:s.width,height:s.height,animationMode:"immediately"}),this.whiteboardView.setCameraBound({damping:1,maxContentMode:()=>this.whiteboardView.camera.scale,minContentMode:()=>this.whiteboardView.camera.scale,centerX:0,centerY:0,width:s.width,height:s.height}))},this._scaleDocsToFitDebounced=()=>{this.sideEffect.setTimeout(this._scaleDocsToFitImpl,1e3,"_scaleDocsToFitDebounced")},this.scaleDocsToFit=()=>{this._scaleDocsToFitImpl(),this._scaleDocsToFitDebounced()},this.onNewPageIndex=s=>{this.jumpToPage(s,!0)},this.context=t,this.whiteboardView=i,this.box=n,this.pages=r,this.displayer=t.getDisplayer(),this.viewer=new Xh({readonly:!t.getIsWritable(),box:n,pages:r,onNewPageIndex:this.onNewPageIndex,onPlay:this.onPlayPPT}),this.render(),this.sideEffect.add(()=>{const s=o=>{this.viewer.setReadonly(!o)};return this.context.emitter.on("writableChange",s),()=>this.context.emitter.off("writableChange",s)}),this.sideEffect.add(()=>{const s=o=>{this.jumpToPage(o.index)};return this.context.emitter.on("sceneStateChange",s),()=>this.context.emitter.off("sceneStateChange",s)}),this.sideEffect.add(()=>{const s=o=>{this.jumpToPage(o.index)};return this.context.emitter.on("pageStateChange",s),()=>this.context.emitter.off("pageStateChange",s)}),this.sideEffect.add(()=>{const s=o=>{this.viewer.togglePreview(o)};return this.context.emitter.on("togglePreview",s),()=>this.context.emitter.off("togglePreview",s)})}mount(){this.viewer.mount();const t=this.getPageIndex();return t!==0&&this.jumpToPage(t),this.scaleDocsToFit(),this.sideEffect.add(()=>(this.whiteboardView.callbacks.on("onSizeUpdated",this.scaleDocsToFit),()=>{this.whiteboardView.callbacks.off("onSizeUpdated",this.scaleDocsToFit)})),this}unmount(){return this.viewer.unmount(),this}destroy(){this.sideEffect.flushAll(),this.unmount(),this.viewer.destroy()}getPageIndex(){return this.displayer.state.sceneState.index}jumpToPage(t,i){var n,r;if(t=Gi(t,0,this.pages.length-1),t!==this.getPageIndex()&&this.context.getIsWritable()){const s=this.context.getInitScenePath(),o=(r=(n=this.context.getScenes())==null?void 0:n[t])==null?void 0:r.name;s&&o&&this.context.setScenePath(`${s}/${o}`),this.scaleDocsToFit()}if(t!==this.viewer.pageIndex&&this.viewer.setPageIndex(t),i){const s=this.context.getRoom();if(s){const o=s.state.globalState.__pptState;s.setGlobalState({__pptState:o&&{uuid:o.uuid,pageIndex:t,disableAutoPlay:o.disableAutoPlay}})}}}render(){this.viewer.$content.appendChild(this.renderMask()),this.viewer.$content.appendChild(this.renderWhiteboardView()),this.sideEffect.addEventListener(window,"keydown",t=>{var i;if(this.box.focus&&!Kh(t.target))switch(t.key){case"ArrowUp":case"ArrowLeft":{this.jumpToPage(this.getPageIndex()-1,!0);break}case"ArrowRight":case"ArrowDown":{(i=this.context.getRoom())==null||i.pptNextStep();break}}})}renderMask(){if(!this.$mask){const t=document.createElement("div");t.className=this.wrapClassName("mask"),this.$mask=t;const i=document.createElement("button");i.className=this.wrapClassName("back");const n=document.createElement("button");n.className=this.wrapClassName("next")}return this.$mask}renderWhiteboardView(){return this.$whiteboardView||(this.$whiteboardView=document.createElement("div"),this.$whiteboardView.className=this.wrapClassName("wb-view"),this.sideEffect.addEventListener(this.$whiteboardView,"click",t=>{var i;const n=this.context.getRoom();if(n&&n.state.memberState.currentApplianceName==="clicker"){for(let r=t.target;r;r=r.parentElement)if((i=r.classList)!=null&&i.contains("ppt-event-source"))return;n.pptNextStep()}}),this.context.mountView(this.$whiteboardView)),this.$whiteboardView}wrapClassName(t){return"netless-app-docs-viewer-dynamic-"+t}}const x0="DocsViewer",ta={kind:x0,setup(e){console.log(e);const t=e.getBox(),i=e.getScenes();if(!i)throw new Error("[Docs Viewer]: scenes not found.");const n=e.getView();if(!n)throw new Error("[Docs Viewer]: no whiteboard view.");const r=i.map(({ppt:s})=>s?{width:s.width,height:s.height,src:s.src,thumbnail:s.previewURL}:null).filter(s=>Boolean(s));if(r.length<=0)throw new Error("[Docs Viewer]: empty scenes.");t.mountStyles(mw),r[0].src.startsWith("ppt")?S0(e,n,t,r):M0(e,n,t,r)}};function M0(e,t,i,n){var r;t.disableCameraTransform=!e.getIsWritable();const s=new w0({context:e,whiteboardView:t,readonly:!e.getIsWritable(),box:i,pages:n,pageScrollTop:(r=e.getAttributes())==null?void 0:r.pageScrollTop,mountWhiteboard:e.mountView.bind(e),onUserScroll:o=>{var a;((a=e.getAttributes())==null?void 0:a.pageScrollTop)!==o&&!i.readonly&&e.updateAttributes(["pageScrollTop"],o)},baseScenePath:e.getInitScenePath(),appId:e.appId}).mount();s.viewer.onPageIndexChanged=o=>{e.dispatchAppEvent("pageStateChange",{index:o,length:n.length})},e.dispatchAppEvent("pageStateChange",{index:s.viewer.pageIndex,length:n.length}),e.emitter.on("attributesUpdate",o=>{o&&o.pageScrollTop!=null&&s.syncPageScrollTop(o.pageScrollTop)}),e.emitter.on("writableChange",o=>{s.setReadonly(!o),t.disableCameraTransform=!o})}function S0(e,t,i,n){t.disableCameraTransform=!0;const r=new y0({context:e,whiteboardView:t,box:i,pages:n}).mount();r.viewer.onPageIndexChanged=s=>{e.dispatchAppEvent("pageStateChange",{index:s,length:n.length})},e.dispatchAppEvent("pageStateChange",{index:r.getPageIndex(),length:n.length}),e.mountView(r.$whiteboardView),e.isAddApp&&t.callbacks.once("onSizeUpdated",({width:s,height:o})=>{if(n.length>0&&i.state!=="maximized"){const{width:a,height:l}=n[0],d=l/a*s-o;d!==0&&e.getIsWritable()&&e.emitter.emit("setBoxSize",{width:i.width,height:i.height+d/i.containerRect.height})}})}var Ci={exports:{}},X={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var hc=Object.getOwnPropertySymbols,I0=Object.prototype.hasOwnProperty,C0=Object.prototype.propertyIsEnumerable;function b0(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function A0(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;var n=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(n.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(s){r[s]=s}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var qh=A0()?Object.assign:function(e,t){for(var i,n=b0(e),r,s=1;s<arguments.length;s++){i=Object(arguments[s]);for(var o in i)I0.call(i,o)&&(n[o]=i[o]);if(hc){r=hc(i);for(var a=0;a<r.length;a++)C0.call(i,r[a])&&(n[r[a]]=i[r[a]])}}return n};/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bl=qh,rt=typeof Symbol=="function"&&Symbol.for,ar=rt?Symbol.for("react.element"):60103,T0=rt?Symbol.for("react.portal"):60106,E0=rt?Symbol.for("react.fragment"):60107,N0=rt?Symbol.for("react.strict_mode"):60108,k0=rt?Symbol.for("react.profiler"):60114,P0=rt?Symbol.for("react.provider"):60109,D0=rt?Symbol.for("react.context"):60110,z0=rt?Symbol.for("react.forward_ref"):60112,B0=rt?Symbol.for("react.suspense"):60113,j0=rt?Symbol.for("react.memo"):60115,L0=rt?Symbol.for("react.lazy"):60116,pc=typeof Symbol=="function"&&Symbol.iterator;function lr(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ep={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tp={};function rn(e,t,i){this.props=e,this.context=t,this.refs=tp,this.updater=i||ep}rn.prototype.isReactComponent={};rn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(lr(85));this.updater.enqueueSetState(this,e,t,"setState")};rn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ip(){}ip.prototype=rn.prototype;function Al(e,t,i){this.props=e,this.context=t,this.refs=tp,this.updater=i||ep}var Tl=Al.prototype=new ip;Tl.constructor=Al;bl(Tl,rn.prototype);Tl.isPureReactComponent=!0;var El={current:null},np=Object.prototype.hasOwnProperty,rp={key:!0,ref:!0,__self:!0,__source:!0};function sp(e,t,i){var n,r={},s=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)np.call(t,n)&&!rp.hasOwnProperty(n)&&(r[n]=t[n]);var a=arguments.length-2;if(a===1)r.children=i;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)r[n]===void 0&&(r[n]=a[n]);return{$$typeof:ar,type:e,key:s,ref:o,props:r,_owner:El.current}}function R0(e,t){return{$$typeof:ar,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Nl(e){return typeof e=="object"&&e!==null&&e.$$typeof===ar}function _0(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(i){return t[i]})}var op=/\/+/g,ls=[];function ap(e,t,i,n){if(ls.length){var r=ls.pop();return r.result=e,r.keyPrefix=t,r.func=i,r.context=n,r.count=0,r}return{result:e,keyPrefix:t,func:i,context:n,count:0}}function lp(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>ls.length&&ls.push(e)}function ia(e,t,i,n){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(r){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case ar:case T0:s=!0}}if(s)return i(n,e,t===""?"."+Mo(e,0):t),1;if(s=0,t=t===""?".":t+":",Array.isArray(e))for(var o=0;o<e.length;o++){r=e[o];var a=t+Mo(r,o);s+=ia(r,a,i,n)}else if(e===null||typeof e!="object"?a=null:(a=pc&&e[pc]||e["@@iterator"],a=typeof a=="function"?a:null),typeof a=="function")for(e=a.call(e),o=0;!(r=e.next()).done;)r=r.value,a=t+Mo(r,o++),s+=ia(r,a,i,n);else if(r==="object")throw i=""+e,Error(lr(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i,""));return s}function na(e,t,i){return e==null?0:ia(e,"",t,i)}function Mo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_0(e.key):t.toString(36)}function V0(e,t){e.func.call(e.context,t,e.count++)}function O0(e,t,i){var n=e.result,r=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?ra(e,n,i,function(s){return s}):e!=null&&(Nl(e)&&(e=R0(e,r+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(op,"$&/")+"/")+i)),n.push(e))}function ra(e,t,i,n,r){var s="";i!=null&&(s=(""+i).replace(op,"$&/")+"/"),t=ap(t,s,n,r),na(e,O0,t),lp(t)}var up={current:null};function Pt(){var e=up.current;if(e===null)throw Error(lr(321));return e}var U0={ReactCurrentDispatcher:up,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:El,IsSomeRendererActing:{current:!1},assign:bl};X.Children={map:function(e,t,i){if(e==null)return e;var n=[];return ra(e,n,null,t,i),n},forEach:function(e,t,i){if(e==null)return e;t=ap(null,null,t,i),na(e,V0,t),lp(t)},count:function(e){return na(e,function(){return null},null)},toArray:function(e){var t=[];return ra(e,t,null,function(i){return i}),t},only:function(e){if(!Nl(e))throw Error(lr(143));return e}};X.Component=rn;X.Fragment=E0;X.Profiler=k0;X.PureComponent=Al;X.StrictMode=N0;X.Suspense=B0;X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U0;X.cloneElement=function(e,t,i){if(e==null)throw Error(lr(267,e));var n=bl({},e.props),r=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=El.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)np.call(t,l)&&!rp.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=i;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:ar,type:e.type,key:r,ref:s,props:n,_owner:o}};X.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:D0,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:P0,_context:e},e.Consumer=e};X.createElement=sp;X.createFactory=function(e){var t=sp.bind(null,e);return t.type=e,t};X.createRef=function(){return{current:null}};X.forwardRef=function(e){return{$$typeof:z0,render:e}};X.isValidElement=Nl;X.lazy=function(e){return{$$typeof:L0,_ctor:e,_status:-1,_result:null}};X.memo=function(e,t){return{$$typeof:j0,type:e,compare:t===void 0?null:t}};X.useCallback=function(e,t){return Pt().useCallback(e,t)};X.useContext=function(e,t){return Pt().useContext(e,t)};X.useDebugValue=function(){};X.useEffect=function(e,t){return Pt().useEffect(e,t)};X.useImperativeHandle=function(e,t,i){return Pt().useImperativeHandle(e,t,i)};X.useLayoutEffect=function(e,t){return Pt().useLayoutEffect(e,t)};X.useMemo=function(e,t){return Pt().useMemo(e,t)};X.useReducer=function(e,t,i){return Pt().useReducer(e,t,i)};X.useRef=function(e){return Pt().useRef(e)};X.useState=function(e){return Pt().useState(e)};X.version="16.14.0";Ci.exports=X;var H=Ci.exports,cp={exports:{}},Ye={},dp={exports:{}},hp={};/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,i,n,r,s;if(typeof window=="undefined"||typeof MessageChannel!="function"){var o=null,a=null,l=function(){if(o!==null)try{var A=e.unstable_now();o(!0,A),o=null}catch(j){throw setTimeout(l,0),j}},u=Date.now();e.unstable_now=function(){return Date.now()-u},t=function(A){o!==null?setTimeout(t,0,A):(o=A,setTimeout(l,0))},i=function(A,j){a=setTimeout(A,j)},n=function(){clearTimeout(a)},r=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var d=window.performance,c=window.Date,m=window.setTimeout,v=window.clearTimeout;if(typeof console!="undefined"){var y=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),typeof y!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if(typeof d=="object"&&typeof d.now=="function")e.unstable_now=function(){return d.now()};else{var x=c.now();e.unstable_now=function(){return c.now()-x}}var h=!1,p=null,f=-1,g=5,M=0;r=function(){return e.unstable_now()>=M},s=function(){},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):g=0<A?Math.floor(1e3/A):5};var S=new MessageChannel,E=S.port2;S.port1.onmessage=function(){if(p!==null){var A=e.unstable_now();M=A+g;try{p(!0,A)?E.postMessage(null):(h=!1,p=null)}catch(j){throw E.postMessage(null),j}}else h=!1},t=function(A){p=A,h||(h=!0,E.postMessage(null))},i=function(A,j){f=m(function(){A(e.unstable_now())},j)},n=function(){v(f),f=-1}}function k(A,j){var W=A.length;A.push(j);e:for(;;){var J=W-1>>>1,K=A[J];if(K!==void 0&&0<P(K,j))A[J]=j,A[W]=K,W=J;else break e}}function N(A){return A=A[0],A===void 0?null:A}function w(A){var j=A[0];if(j!==void 0){var W=A.pop();if(W!==j){A[0]=W;e:for(var J=0,K=A.length;J<K;){var ot=2*(J+1)-1,We=A[ot],Je=ot+1,He=A[Je];if(We!==void 0&&0>P(We,W))He!==void 0&&0>P(He,We)?(A[J]=He,A[Je]=W,J=Je):(A[J]=We,A[ot]=W,J=ot);else if(He!==void 0&&0>P(He,W))A[J]=He,A[Je]=W,J=Je;else break e}}return j}return null}function P(A,j){var W=A.sortIndex-j.sortIndex;return W!==0?W:A.id-j.id}var B=[],C=[],_=1,Z=null,G=3,ne=!1,ue=!1,je=!1;function st(A){for(var j=N(C);j!==null;){if(j.callback===null)w(C);else if(j.startTime<=A)w(C),j.sortIndex=j.expirationTime,k(B,j);else break;j=N(C)}}function Xe(A){if(je=!1,st(A),!ue)if(N(B)!==null)ue=!0,t(ei);else{var j=N(C);j!==null&&i(Xe,j.startTime-A)}}function ei(A,j){ue=!1,je&&(je=!1,n()),ne=!0;var W=G;try{for(st(j),Z=N(B);Z!==null&&(!(Z.expirationTime>j)||A&&!r());){var J=Z.callback;if(J!==null){Z.callback=null,G=Z.priorityLevel;var K=J(Z.expirationTime<=j);j=e.unstable_now(),typeof K=="function"?Z.callback=K:Z===N(B)&&w(B),st(j)}else w(B);Z=N(B)}if(Z!==null)var ot=!0;else{var We=N(C);We!==null&&i(Xe,We.startTime-j),ot=!1}return ot}finally{Z=null,G=W,ne=!1}}function mr(A){switch(A){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var ro=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){ue||ne||(ue=!0,t(ei))},e.unstable_getCurrentPriorityLevel=function(){return G},e.unstable_getFirstCallbackNode=function(){return N(B)},e.unstable_next=function(A){switch(G){case 1:case 2:case 3:var j=3;break;default:j=G}var W=G;G=j;try{return A()}finally{G=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=ro,e.unstable_runWithPriority=function(A,j){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var W=G;G=A;try{return j()}finally{G=W}},e.unstable_scheduleCallback=function(A,j,W){var J=e.unstable_now();if(typeof W=="object"&&W!==null){var K=W.delay;K=typeof K=="number"&&0<K?J+K:J,W=typeof W.timeout=="number"?W.timeout:mr(A)}else W=mr(A),K=J;return W=K+W,A={id:_++,callback:j,priorityLevel:A,startTime:K,expirationTime:W,sortIndex:-1},K>J?(A.sortIndex=K,k(C,A),N(B)===null&&A===N(C)&&(je?n():je=!0,i(Xe,K-J))):(A.sortIndex=W,k(B,A),ue||ne||(ue=!0,t(ei))),A},e.unstable_shouldYield=function(){var A=e.unstable_now();st(A);var j=N(B);return j!==Z&&Z!==null&&j!==null&&j.callback!==null&&j.startTime<=A&&j.expirationTime<Z.expirationTime||r()},e.unstable_wrapCallback=function(A){var j=G;return function(){var W=G;G=j;try{return A.apply(this,arguments)}finally{G=W}}}})(hp);dp.exports=hp;/** @license React v16.14.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zs=Ci.exports,Ce=qh,me=dp.exports;function I(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Zs)throw Error(I(227));function $0(e,t,i,n,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(i,u)}catch(d){this.onError(d)}}var Pn=!1,us=null,cs=!1,sa=null,W0={onError:function(e){Pn=!0,us=e}};function H0(e,t,i,n,r,s,o,a,l){Pn=!1,us=null,$0.apply(W0,arguments)}function Z0(e,t,i,n,r,s,o,a,l){if(H0.apply(this,arguments),Pn){if(Pn){var u=us;Pn=!1,us=null}else throw Error(I(198));cs||(cs=!0,sa=u)}}var kl=null,pp=null,fp=null;function fc(e,t,i){var n=e.type||"unknown-event";e.currentTarget=fp(i),Z0(n,t,void 0,e),e.currentTarget=null}var ds=null,Pi={};function gp(){if(ds)for(var e in Pi){var t=Pi[e],i=ds.indexOf(e);if(!(-1<i))throw Error(I(96,e));if(!hs[i]){if(!t.extractEvents)throw Error(I(97,e));hs[i]=t,i=t.eventTypes;for(var n in i){var r=void 0,s=i[n],o=t,a=n;if(oa.hasOwnProperty(a))throw Error(I(99,a));oa[a]=s;var l=s.phasedRegistrationNames;if(l){for(r in l)l.hasOwnProperty(r)&&gc(l[r],o,a);r=!0}else s.registrationName?(gc(s.registrationName,o,a),r=!0):r=!1;if(!r)throw Error(I(98,n,e))}}}}function gc(e,t,i){if(Yi[e])throw Error(I(100,e));Yi[e]=t,Pl[e]=t.eventTypes[i].dependencies}var hs=[],oa={},Yi={},Pl={};function mp(e){var t=!1,i;for(i in e)if(e.hasOwnProperty(i)){var n=e[i];if(!Pi.hasOwnProperty(i)||Pi[i]!==n){if(Pi[i])throw Error(I(102,i));Pi[i]=n,t=!0}}t&&gp()}var qt=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),aa=null,Oi=null,Ui=null;function mc(e){if(e=pp(e)){if(typeof aa!="function")throw Error(I(280));var t=e.stateNode;t&&(t=kl(t),aa(e.stateNode,e.type,t))}}function vp(e){Oi?Ui?Ui.push(e):Ui=[e]:Oi=e}function wp(){if(Oi){var e=Oi,t=Ui;if(Ui=Oi=null,mc(e),t)for(e=0;e<t.length;e++)mc(t[e])}}function Dl(e,t){return e(t)}function yp(e,t,i,n,r){return e(t,i,n,r)}function zl(){}var xp=Dl,si=!1,So=!1;function Bl(){(Oi!==null||Ui!==null)&&(zl(),wp())}function Mp(e,t,i){if(So)return e(t,i);So=!0;try{return xp(e,t,i)}finally{So=!1,Bl()}}var Q0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vc=Object.prototype.hasOwnProperty,wc={},yc={};function F0(e){return vc.call(yc,e)?!0:vc.call(wc,e)?!1:Q0.test(e)?yc[e]=!0:(wc[e]=!0,!1)}function G0(e,t,i,n){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Y0(e,t,i,n){if(t===null||typeof t=="undefined"||G0(e,t,i,n))return!0;if(n)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function be(e,t,i,n,r,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=s}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ve[e]=new be(e,0,!1,e,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ve[t]=new be(t,1,!1,e[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ve[e]=new be(e,2,!1,e.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ve[e]=new be(e,2,!1,e,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ve[e]=new be(e,3,!1,e.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(e){ve[e]=new be(e,3,!0,e,null,!1)});["capture","download"].forEach(function(e){ve[e]=new be(e,4,!1,e,null,!1)});["cols","rows","size","span"].forEach(function(e){ve[e]=new be(e,6,!1,e,null,!1)});["rowSpan","start"].forEach(function(e){ve[e]=new be(e,5,!1,e.toLowerCase(),null,!1)});var jl=/[\-:]([a-z])/g;function Ll(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(jl,Ll);ve[t]=new be(t,1,!1,e,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(jl,Ll);ve[t]=new be(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(jl,Ll);ve[t]=new be(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(e){ve[e]=new be(e,1,!1,e.toLowerCase(),null,!1)});ve.xlinkHref=new be("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(e){ve[e]=new be(e,1,!1,e.toLowerCase(),null,!0)});var it=Zs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;it.hasOwnProperty("ReactCurrentDispatcher")||(it.ReactCurrentDispatcher={current:null});it.hasOwnProperty("ReactCurrentBatchConfig")||(it.ReactCurrentBatchConfig={suspense:null});function Rl(e,t,i,n){var r=ve.hasOwnProperty(t)?ve[t]:null,s=r!==null?r.type===0:n?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");s||(Y0(t,i,r,n)&&(i=null),n||r===null?F0(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):r.mustUseProperty?e[r.propertyName]=i===null?r.type===3?!1:"":i:(t=r.attributeName,n=r.attributeNamespace,i===null?e.removeAttribute(t):(r=r.type,i=r===3||r===4&&i===!0?"":""+i,n?e.setAttributeNS(n,t,i):e.setAttribute(t,i))))}var X0=/^(.*)[\\\/]/,Be=typeof Symbol=="function"&&Symbol.for,Tr=Be?Symbol.for("react.element"):60103,Di=Be?Symbol.for("react.portal"):60106,ri=Be?Symbol.for("react.fragment"):60107,Sp=Be?Symbol.for("react.strict_mode"):60108,Hr=Be?Symbol.for("react.profiler"):60114,Ip=Be?Symbol.for("react.provider"):60109,Cp=Be?Symbol.for("react.context"):60110,J0=Be?Symbol.for("react.concurrent_mode"):60111,_l=Be?Symbol.for("react.forward_ref"):60112,Zr=Be?Symbol.for("react.suspense"):60113,la=Be?Symbol.for("react.suspense_list"):60120,Vl=Be?Symbol.for("react.memo"):60115,bp=Be?Symbol.for("react.lazy"):60116,Ap=Be?Symbol.for("react.block"):60121,xc=typeof Symbol=="function"&&Symbol.iterator;function dn(e){return e===null||typeof e!="object"?null:(e=xc&&e[xc]||e["@@iterator"],typeof e=="function"?e:null)}function K0(e){if(e._status===-1){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then(function(i){e._status===0&&(i=i.default,e._status=1,e._result=i)},function(i){e._status===0&&(e._status=2,e._result=i)})}}function Nt(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ri:return"Fragment";case Di:return"Portal";case Hr:return"Profiler";case Sp:return"StrictMode";case Zr:return"Suspense";case la:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Cp:return"Context.Consumer";case Ip:return"Context.Provider";case _l:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case Vl:return Nt(e.type);case Ap:return Nt(e.render);case bp:if(e=e._status===1?e._result:null)return Nt(e)}return null}function Ol(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var i="";break e;default:var n=e._debugOwner,r=e._debugSource,s=Nt(e.type);i=null,n&&(i=Nt(n.type)),n=s,s="",r?s=" (at "+r.fileName.replace(X0,"")+":"+r.lineNumber+")":i&&(s=" (created by "+i+")"),i=`
    in `+(n||"Unknown")+s}t+=i,e=e.return}while(e);return t}function Gt(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Tp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function q0(e){var t=Tp(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof i!="undefined"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Er(e){e._valueTracker||(e._valueTracker=q0(e))}function Ep(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=Tp(e)?e.checked?"true":"false":e.value),e=n,e!==i?(t.setValue(e),!0):!1}function ua(e,t){var i=t.checked;return Ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i!=null?i:e._wrapperState.initialChecked})}function Mc(e,t){var i=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;i=Gt(t.value!=null?t.value:i),e._wrapperState={initialChecked:n,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Np(e,t){t=t.checked,t!=null&&Rl(e,"checked",t,!1)}function ca(e,t){Np(e,t);var i=Gt(t.value),n=t.type;if(i!=null)n==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?da(e,t.type,i):t.hasOwnProperty("defaultValue")&&da(e,t.type,Gt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Sc(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function da(e,t,i){(t!=="number"||e.ownerDocument.activeElement!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}function ex(e){var t="";return Zs.Children.forEach(e,function(i){i!=null&&(t+=i)}),t}function ha(e,t){return e=Ce({children:void 0},t),(t=ex(t.children))&&(e.children=t),e}function $i(e,t,i,n){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&n&&(e[i].defaultSelected=!0)}else{for(i=""+Gt(i),t=null,r=0;r<e.length;r++){if(e[r].value===i){e[r].selected=!0,n&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function pa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(I(91));return Ce({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ic(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(I(92));if(Array.isArray(i)){if(!(1>=i.length))throw Error(I(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Gt(i)}}function kp(e,t){var i=Gt(t.value),n=Gt(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),n!=null&&(e.defaultValue=""+n)}function Cc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var Pp={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Dp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Dp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Nr,zp=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,i,n,r){MSApp.execUnsafeLocalFunction(function(){return e(t,i,n,r)})}:e}(function(e,t){if(e.namespaceURI!==Pp.svg||"innerHTML"in e)e.innerHTML=t;else{for(Nr=Nr||document.createElement("div"),Nr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Nr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zn(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}function kr(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var zi={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},Io={},Bp={};qt&&(Bp=document.createElement("div").style,"AnimationEvent"in window||(delete zi.animationend.animation,delete zi.animationiteration.animation,delete zi.animationstart.animation),"TransitionEvent"in window||delete zi.transitionend.transition);function Qs(e){if(Io[e])return Io[e];if(!zi[e])return e;var t=zi[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Bp)return Io[e]=t[i];return e}var jp=Qs("animationend"),Lp=Qs("animationiteration"),Rp=Qs("animationstart"),_p=Qs("transitionend"),Sn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bc=new(typeof WeakMap=="function"?WeakMap:Map);function Ul(e){var t=bc.get(e);return t===void 0&&(t=new Map,bc.set(e,t)),t}function bi(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.effectTag&1026)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function Vp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ac(e){if(bi(e)!==e)throw Error(I(188))}function tx(e){var t=e.alternate;if(!t){if(t=bi(e),t===null)throw Error(I(188));return t!==e?null:e}for(var i=e,n=t;;){var r=i.return;if(r===null)break;var s=r.alternate;if(s===null){if(n=r.return,n!==null){i=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===i)return Ac(r),e;if(s===n)return Ac(r),t;s=s.sibling}throw Error(I(188))}if(i.return!==n.return)i=r,n=s;else{for(var o=!1,a=r.child;a;){if(a===i){o=!0,i=r,n=s;break}if(a===n){o=!0,n=r,i=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===i){o=!0,i=s,n=r;break}if(a===n){o=!0,n=s,i=r;break}a=a.sibling}if(!o)throw Error(I(189))}}if(i.alternate!==n)throw Error(I(190))}if(i.tag!==3)throw Error(I(188));return i.stateNode.current===i?e:t}function Op(e){if(e=tx(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Xi(e,t){if(t==null)throw Error(I(30));return e==null?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function $l(e,t,i){Array.isArray(e)?e.forEach(t,i):e&&t.call(i,e)}var hn=null;function ix(e){if(e){var t=e._dispatchListeners,i=e._dispatchInstances;if(Array.isArray(t))for(var n=0;n<t.length&&!e.isPropagationStopped();n++)fc(e,t[n],i[n]);else t&&fc(e,t,i);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function Fs(e){if(e!==null&&(hn=Xi(hn,e)),e=hn,hn=null,e){if($l(e,ix),hn)throw Error(I(95));if(cs)throw e=sa,cs=!1,sa=null,e}}function Wl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}function Up(e){if(!qt)return!1;e="on"+e;var t=e in document;return t||(t=document.createElement("div"),t.setAttribute(e,"return;"),t=typeof t[e]=="function"),t}var ps=[];function $p(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ps.length&&ps.push(e)}function Wp(e,t,i,n){if(ps.length){var r=ps.pop();return r.topLevelType=e,r.eventSystemFlags=n,r.nativeEvent=t,r.targetInst=i,r}return{topLevelType:e,eventSystemFlags:n,nativeEvent:t,targetInst:i,ancestors:[]}}function Hp(e){var t=e.targetInst,i=t;do{if(!i){e.ancestors.push(i);break}var n=i;if(n.tag===3)n=n.stateNode.containerInfo;else{for(;n.return;)n=n.return;n=n.tag!==3?null:n.stateNode.containerInfo}if(!n)break;t=i.tag,t!==5&&t!==6||e.ancestors.push(i),i=cr(n)}while(i);for(i=0;i<e.ancestors.length;i++){t=e.ancestors[i];var r=Wl(e.nativeEvent);n=e.topLevelType;var s=e.nativeEvent,o=e.eventSystemFlags;i===0&&(o|=64);for(var a=null,l=0;l<hs.length;l++){var u=hs[l];u&&(u=u.extractEvents(n,t,s,r,o))&&(a=Xi(a,u))}Fs(a)}}function ga(e,t,i){if(!i.has(e)){switch(e){case"scroll":In(t,"scroll",!0);break;case"focus":case"blur":In(t,"focus",!0),In(t,"blur",!0),i.set("blur",null),i.set("focus",null);break;case"cancel":case"close":Up(e)&&In(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:Sn.indexOf(e)===-1&&re(e,t)}i.set(e,null)}}var Zp,Hl,Qp,ma=!1,ht=[],Ut=null,$t=null,Wt=null,Qn=new Map,Fn=new Map,pn=[],va="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),nx="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function rx(e,t){var i=Ul(t);va.forEach(function(n){ga(n,t,i)}),nx.forEach(function(n){ga(n,t,i)})}function wa(e,t,i,n,r){return{blockedOn:e,topLevelType:t,eventSystemFlags:i|32,nativeEvent:r,container:n}}function Tc(e,t){switch(e){case"focus":case"blur":Ut=null;break;case"dragenter":case"dragleave":$t=null;break;case"mouseover":case"mouseout":Wt=null;break;case"pointerover":case"pointerout":Qn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fn.delete(t.pointerId)}}function fn(e,t,i,n,r,s){return e===null||e.nativeEvent!==s?(e=wa(t,i,n,r,s),t!==null&&(t=dr(t),t!==null&&Hl(t)),e):(e.eventSystemFlags|=n,e)}function sx(e,t,i,n,r){switch(t){case"focus":return Ut=fn(Ut,e,t,i,n,r),!0;case"dragenter":return $t=fn($t,e,t,i,n,r),!0;case"mouseover":return Wt=fn(Wt,e,t,i,n,r),!0;case"pointerover":var s=r.pointerId;return Qn.set(s,fn(Qn.get(s)||null,e,t,i,n,r)),!0;case"gotpointercapture":return s=r.pointerId,Fn.set(s,fn(Fn.get(s)||null,e,t,i,n,r)),!0}return!1}function ox(e){var t=cr(e.target);if(t!==null){var i=bi(t);if(i!==null){if(t=i.tag,t===13){if(t=Vp(i),t!==null){e.blockedOn=t,me.unstable_runWithPriority(e.priority,function(){Qp(i)});return}}else if(t===3&&i.stateNode.hydrate){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qr(e){if(e.blockedOn!==null)return!1;var t=Fl(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(t!==null){var i=dr(t);return i!==null&&Hl(i),e.blockedOn=t,!1}return!0}function Ec(e,t,i){Qr(e)&&i.delete(t)}function ax(){for(ma=!1;0<ht.length;){var e=ht[0];if(e.blockedOn!==null){e=dr(e.blockedOn),e!==null&&Zp(e);break}var t=Fl(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);t!==null?e.blockedOn=t:ht.shift()}Ut!==null&&Qr(Ut)&&(Ut=null),$t!==null&&Qr($t)&&($t=null),Wt!==null&&Qr(Wt)&&(Wt=null),Qn.forEach(Ec),Fn.forEach(Ec)}function gn(e,t){e.blockedOn===t&&(e.blockedOn=null,ma||(ma=!0,me.unstable_scheduleCallback(me.unstable_NormalPriority,ax)))}function Fp(e){function t(r){return gn(r,e)}if(0<ht.length){gn(ht[0],e);for(var i=1;i<ht.length;i++){var n=ht[i];n.blockedOn===e&&(n.blockedOn=null)}}for(Ut!==null&&gn(Ut,e),$t!==null&&gn($t,e),Wt!==null&&gn(Wt,e),Qn.forEach(t),Fn.forEach(t),i=0;i<pn.length;i++)n=pn[i],n.blockedOn===e&&(n.blockedOn=null);for(;0<pn.length&&(i=pn[0],i.blockedOn===null);)ox(i),i.blockedOn===null&&pn.shift()}var Gp={},Yp=new Map,Zl=new Map,lx=["abort","abort",jp,"animationEnd",Lp,"animationIteration",Rp,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",_p,"transitionEnd","waiting","waiting"];function Ql(e,t){for(var i=0;i<e.length;i+=2){var n=e[i],r=e[i+1],s="on"+(r[0].toUpperCase()+r.slice(1));s={phasedRegistrationNames:{bubbled:s,captured:s+"Capture"},dependencies:[n],eventPriority:t},Zl.set(n,t),Yp.set(n,s),Gp[r]=s}}Ql("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Ql("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Ql(lx,2);for(var Nc="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Co=0;Co<Nc.length;Co++)Zl.set(Nc[Co],0);var ux=me.unstable_UserBlockingPriority,cx=me.unstable_runWithPriority,Fr=!0;function re(e,t){In(t,e,!1)}function In(e,t,i){var n=Zl.get(t);switch(n===void 0?2:n){case 0:n=dx.bind(null,t,1,e);break;case 1:n=hx.bind(null,t,1,e);break;default:n=Gs.bind(null,t,1,e)}i?e.addEventListener(t,n,!0):e.addEventListener(t,n,!1)}function dx(e,t,i,n){si||zl();var r=Gs,s=si;si=!0;try{yp(r,e,t,i,n)}finally{(si=s)||Bl()}}function hx(e,t,i,n){cx(ux,Gs.bind(null,e,t,i,n))}function Gs(e,t,i,n){if(Fr)if(0<ht.length&&-1<va.indexOf(e))e=wa(null,e,t,i,n),ht.push(e);else{var r=Fl(e,t,i,n);if(r===null)Tc(e,n);else if(-1<va.indexOf(e))e=wa(r,e,t,i,n),ht.push(e);else if(!sx(r,e,t,i,n)){Tc(e,n),e=Wp(e,n,null,t);try{Mp(Hp,e)}finally{$p(e)}}}}function Fl(e,t,i,n){if(i=Wl(n),i=cr(i),i!==null){var r=bi(i);if(r===null)i=null;else{var s=r.tag;if(s===13){if(i=Vp(r),i!==null)return i;i=null}else if(s===3){if(r.stateNode.hydrate)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}e=Wp(e,n,i,t);try{Mp(Hp,e)}finally{$p(e)}return null}var Dn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},px=["Webkit","ms","Moz","O"];Object.keys(Dn).forEach(function(e){px.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Dn[t]=Dn[e]})});function Xp(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Dn.hasOwnProperty(e)&&Dn[e]?(""+t).trim():t+"px"}function Jp(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var n=i.indexOf("--")===0,r=Xp(i,t[i],n);i==="float"&&(i="cssFloat"),n?e.setProperty(i,r):e[i]=r}}var fx=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ya(e,t){if(t){if(fx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(I(137,e,""));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(I(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(I(61))}if(t.style!=null&&typeof t.style!="object")throw Error(I(62,""))}}function xa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kc=Pp.html;function xt(e,t){e=e.nodeType===9||e.nodeType===11?e:e.ownerDocument;var i=Ul(e);t=Pl[t];for(var n=0;n<t.length;n++)ga(t[n],e,i)}function fs(){}function Ma(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function Pc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Dc(e,t){var i=Pc(e);e=0;for(var n;i;){if(i.nodeType===3){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Pc(i)}}function Kp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Kp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function zc(){for(var e=window,t=Ma();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Ma(e.document)}return t}function Sa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var qp="$",ef="/$",Gl="$?",Yl="$!",bo=null,Ao=null;function tf(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ia(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var To=typeof setTimeout=="function"?setTimeout:void 0,gx=typeof clearTimeout=="function"?clearTimeout:void 0;function Wi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function Bc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i===qp||i===Yl||i===Gl){if(t===0)return e;t--}else i===ef&&t++}e=e.previousSibling}return null}var Xl=Math.random().toString(36).slice(2),Bt="__reactInternalInstance$"+Xl,gs="__reactEventHandlers$"+Xl,ur="__reactContainere$"+Xl;function cr(e){var t=e[Bt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[ur]||i[Bt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Bc(e);e!==null;){if(i=e[Bt])return i;e=Bc(e)}return t}e=i,i=e.parentNode}return null}function dr(e){return e=e[Bt]||e[ur],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function yi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(I(33))}function Jl(e){return e[gs]||null}function Mt(e){do e=e.return;while(e&&e.tag!==5);return e||null}function nf(e,t){var i=e.stateNode;if(!i)return null;var n=kl(i);if(!n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(I(231,t,typeof i));return i}function jc(e,t,i){(t=nf(e,i.dispatchConfig.phasedRegistrationNames[t]))&&(i._dispatchListeners=Xi(i._dispatchListeners,t),i._dispatchInstances=Xi(i._dispatchInstances,e))}function mx(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,i=[];t;)i.push(t),t=Mt(t);for(t=i.length;0<t--;)jc(i[t],"captured",e);for(t=0;t<i.length;t++)jc(i[t],"bubbled",e)}}function Ca(e,t,i){e&&i&&i.dispatchConfig.registrationName&&(t=nf(e,i.dispatchConfig.registrationName))&&(i._dispatchListeners=Xi(i._dispatchListeners,t),i._dispatchInstances=Xi(i._dispatchInstances,e))}function vx(e){e&&e.dispatchConfig.registrationName&&Ca(e._targetInst,null,e)}function Ji(e){$l(e,mx)}var jt=null,Kl=null,Gr=null;function rf(){if(Gr)return Gr;var e,t=Kl,i=t.length,n,r="value"in jt?jt.value:jt.textContent,s=r.length;for(e=0;e<i&&t[e]===r[e];e++);var o=i-e;for(n=1;n<=o&&t[i-n]===r[s-n];n++);return Gr=r.slice(e,1<n?1-n:void 0)}function Yr(){return!0}function ms(){return!1}function $e(e,t,i,n){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=i,e=this.constructor.Interface;for(var r in e)e.hasOwnProperty(r)&&((t=e[r])?this[r]=t(i):r==="target"?this.target=n:this[r]=i[r]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Yr:ms,this.isPropagationStopped=ms,this}Ce($e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=Yr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=Yr)},persist:function(){this.isPersistent=Yr},isPersistent:ms,destructor:function(){var e=this.constructor.Interface,t;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ms,this._dispatchInstances=this._dispatchListeners=null}});$e.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};$e.extend=function(e){function t(){}function i(){return n.apply(this,arguments)}var n=this;t.prototype=n.prototype;var r=new t;return Ce(r,i.prototype),i.prototype=r,i.prototype.constructor=i,i.Interface=Ce({},n.Interface,e),i.extend=n.extend,sf(i),i};sf($e);function wx(e,t,i,n){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,e,t,i,n),r}return new this(e,t,i,n)}function yx(e){if(!(e instanceof this))throw Error(I(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function sf(e){e.eventPool=[],e.getPooled=wx,e.release=yx}var xx=$e.extend({data:null}),Mx=$e.extend({data:null}),Sx=[9,13,27,32],ql=qt&&"CompositionEvent"in window,zn=null;qt&&"documentMode"in document&&(zn=document.documentMode);var Ix=qt&&"TextEvent"in window&&!zn,of=qt&&(!ql||zn&&8<zn&&11>=zn),Lc=String.fromCharCode(32),yt={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Rc=!1;function af(e,t){switch(e){case"keyup":return Sx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function lf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bi=!1;function Cx(e,t){switch(e){case"compositionend":return lf(t);case"keypress":return t.which!==32?null:(Rc=!0,Lc);case"textInput":return e=t.data,e===Lc&&Rc?null:e;default:return null}}function bx(e,t){if(Bi)return e==="compositionend"||!ql&&af(e,t)?(e=rf(),Gr=Kl=jt=null,Bi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return of&&t.locale!=="ko"?null:t.data;default:return null}}var Ax={eventTypes:yt,extractEvents:function(e,t,i,n){var r;if(ql)e:{switch(e){case"compositionstart":var s=yt.compositionStart;break e;case"compositionend":s=yt.compositionEnd;break e;case"compositionupdate":s=yt.compositionUpdate;break e}s=void 0}else Bi?af(e,i)&&(s=yt.compositionEnd):e==="keydown"&&i.keyCode===229&&(s=yt.compositionStart);return s?(of&&i.locale!=="ko"&&(Bi||s!==yt.compositionStart?s===yt.compositionEnd&&Bi&&(r=rf()):(jt=n,Kl="value"in jt?jt.value:jt.textContent,Bi=!0)),s=xx.getPooled(s,t,i,n),r?s.data=r:(r=lf(i),r!==null&&(s.data=r)),Ji(s),r=s):r=null,(e=Ix?Cx(e,i):bx(e,i))?(t=Mx.getPooled(yt.beforeInput,t,i,n),t.data=e,Ji(t)):t=null,r===null?t:t===null?r:[r,t]}},Tx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Tx[e.type]:t==="textarea"}var cf={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function df(e,t,i){return e=$e.getPooled(cf.change,e,t,i),e.type="change",vp(i),Ji(e),e}var Bn=null,Gn=null;function Ex(e){Fs(e)}function Ys(e){var t=yi(e);if(Ep(t))return e}function Nx(e,t){if(e==="change")return t}var ba=!1;qt&&(ba=Up("input")&&(!document.documentMode||9<document.documentMode));function _c(){Bn&&(Bn.detachEvent("onpropertychange",hf),Gn=Bn=null)}function hf(e){if(e.propertyName==="value"&&Ys(Gn))if(e=df(Gn,e,Wl(e)),si)Fs(e);else{si=!0;try{Dl(Ex,e)}finally{si=!1,Bl()}}}function kx(e,t,i){e==="focus"?(_c(),Bn=t,Gn=i,Bn.attachEvent("onpropertychange",hf)):e==="blur"&&_c()}function Px(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ys(Gn)}function Dx(e,t){if(e==="click")return Ys(t)}function zx(e,t){if(e==="input"||e==="change")return Ys(t)}var Bx={eventTypes:cf,_isInputEventSupported:ba,extractEvents:function(e,t,i,n){var r=t?yi(t):window,s=r.nodeName&&r.nodeName.toLowerCase();if(s==="select"||s==="input"&&r.type==="file")var o=Nx;else if(uf(r))if(ba)o=zx;else{o=Px;var a=kx}else(s=r.nodeName)&&s.toLowerCase()==="input"&&(r.type==="checkbox"||r.type==="radio")&&(o=Dx);if(o&&(o=o(e,t)))return df(o,i,n);a&&a(e,r,t),e==="blur"&&(e=r._wrapperState)&&e.controlled&&r.type==="number"&&da(r,"number",r.value)}},hr=$e.extend({view:null,detail:null}),jx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jx[e])?!!t[e]:!1}function eu(){return Lx}var Vc=0,Oc=0,Uc=!1,$c=!1,pr=hr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:eu,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Vc;return Vc=e.screenX,Uc?e.type==="mousemove"?e.screenX-t:0:(Uc=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Oc;return Oc=e.screenY,$c?e.type==="mousemove"?e.screenY-t:0:($c=!0,0)}}),pf=pr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),mn={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Rx={eventTypes:mn,extractEvents:function(e,t,i,n,r){var s=e==="mouseover"||e==="pointerover",o=e==="mouseout"||e==="pointerout";if(s&&(r&32)===0&&(i.relatedTarget||i.fromElement)||!o&&!s)return null;if(s=n.window===n?n:(s=n.ownerDocument)?s.defaultView||s.parentWindow:window,o){if(o=t,t=(t=i.relatedTarget||i.toElement)?cr(t):null,t!==null){var a=bi(t);(t!==a||t.tag!==5&&t.tag!==6)&&(t=null)}}else o=null;if(o===t)return null;if(e==="mouseout"||e==="mouseover")var l=pr,u=mn.mouseLeave,d=mn.mouseEnter,c="mouse";else(e==="pointerout"||e==="pointerover")&&(l=pf,u=mn.pointerLeave,d=mn.pointerEnter,c="pointer");if(e=o==null?s:yi(o),s=t==null?s:yi(t),u=l.getPooled(u,o,i,n),u.type=c+"leave",u.target=e,u.relatedTarget=s,i=l.getPooled(d,t,i,n),i.type=c+"enter",i.target=s,i.relatedTarget=e,n=o,c=t,n&&c)e:{for(l=n,d=c,o=0,e=l;e;e=Mt(e))o++;for(e=0,t=d;t;t=Mt(t))e++;for(;0<o-e;)l=Mt(l),o--;for(;0<e-o;)d=Mt(d),e--;for(;o--;){if(l===d||l===d.alternate)break e;l=Mt(l),d=Mt(d)}l=null}else l=null;for(d=l,l=[];n&&n!==d&&(o=n.alternate,!(o!==null&&o===d));)l.push(n),n=Mt(n);for(n=[];c&&c!==d&&(o=c.alternate,!(o!==null&&o===d));)n.push(c),c=Mt(c);for(c=0;c<l.length;c++)Ca(l[c],"bubbled",u);for(c=n.length;0<c--;)Ca(n[c],"captured",i);return(r&64)===0?[u]:[u,i]}};function _x(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xi=typeof Object.is=="function"?Object.is:_x,Vx=Object.prototype.hasOwnProperty;function Yn(e,t){if(xi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++)if(!Vx.call(t,i[n])||!xi(e[i[n]],t[i[n]]))return!1;return!0}var Ox=qt&&"documentMode"in document&&11>=document.documentMode,ff={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ji=null,Aa=null,jn=null,Ta=!1;function Wc(e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;return Ta||ji==null||ji!==Ma(i)?null:(i=ji,"selectionStart"in i&&Sa(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),jn&&Yn(jn,i)?null:(jn=i,e=$e.getPooled(ff.select,Aa,e,t),e.type="select",e.target=ji,Ji(e),e))}var Ux={eventTypes:ff,extractEvents:function(e,t,i,n,r,s){if(r=s||(n.window===n?n.document:n.nodeType===9?n:n.ownerDocument),!(s=!r)){e:{r=Ul(r),s=Pl.onSelect;for(var o=0;o<s.length;o++)if(!r.has(s[o])){r=!1;break e}r=!0}s=!r}if(s)return null;switch(r=t?yi(t):window,e){case"focus":(uf(r)||r.contentEditable==="true")&&(ji=r,Aa=t,jn=null);break;case"blur":jn=Aa=ji=null;break;case"mousedown":Ta=!0;break;case"contextmenu":case"mouseup":case"dragend":return Ta=!1,Wc(i,n);case"selectionchange":if(Ox)break;case"keydown":case"keyup":return Wc(i,n)}return null}},$x=$e.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Wx=$e.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Hx=hr.extend({relatedTarget:null});function Xr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}var Zx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fx=hr.extend({key:function(e){if(e.key){var t=Zx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Qx[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:eu,charCode:function(e){return e.type==="keypress"?Xr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Gx=pr.extend({dataTransfer:null}),Yx=hr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:eu}),Xx=$e.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Jx=pr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),Kx={eventTypes:Gp,extractEvents:function(e,t,i,n){var r=Yp.get(e);if(!r)return null;switch(e){case"keypress":if(Xr(i)===0)return null;case"keydown":case"keyup":e=Fx;break;case"blur":case"focus":e=Hx;break;case"click":if(i.button===2)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=Gx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=Yx;break;case jp:case Lp:case Rp:e=$x;break;case _p:e=Xx;break;case"scroll":e=hr;break;case"wheel":e=Jx;break;case"copy":case"cut":case"paste":e=Wx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=pf;break;default:e=$e}return t=e.getPooled(r,t,i,n),Ji(t),t}};if(ds)throw Error(I(101));ds=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));gp();var qx=dr;kl=Jl;pp=qx;fp=yi;mp({SimpleEventPlugin:Kx,EnterLeaveEventPlugin:Rx,ChangeEventPlugin:Bx,SelectEventPlugin:Ux,BeforeInputEventPlugin:Ax});var Ea=[],Li=-1;function ie(e){0>Li||(e.current=Ea[Li],Ea[Li]=null,Li--)}function ae(e,t){Li++,Ea[Li]=e.current,e.current=t}var Yt={},Se={current:Yt},Pe={current:!1},Mi=Yt;function Ki(e,t){var i=e.type.contextTypes;if(!i)return Yt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in i)r[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function De(e){return e=e.childContextTypes,e!=null}function vs(){ie(Pe),ie(Se)}function Hc(e,t,i){if(Se.current!==Yt)throw Error(I(168));ae(Se,t),ae(Pe,i)}function gf(e,t,i){var n=e.stateNode;if(e=t.childContextTypes,typeof n.getChildContext!="function")return i;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(I(108,Nt(t)||"Unknown",r));return Ce({},i,{},n)}function Jr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yt,Mi=Se.current,ae(Se,e),ae(Pe,Pe.current),!0}function Zc(e,t,i){var n=e.stateNode;if(!n)throw Error(I(169));i?(e=gf(e,t,Mi),n.__reactInternalMemoizedMergedChildContext=e,ie(Pe),ie(Se),ae(Se,e)):ie(Pe),ae(Pe,i)}var eM=me.unstable_runWithPriority,tu=me.unstable_scheduleCallback,mf=me.unstable_cancelCallback,Qc=me.unstable_requestPaint,Na=me.unstable_now,tM=me.unstable_getCurrentPriorityLevel,Xs=me.unstable_ImmediatePriority,vf=me.unstable_UserBlockingPriority,wf=me.unstable_NormalPriority,yf=me.unstable_LowPriority,xf=me.unstable_IdlePriority,Mf={},iM=me.unstable_shouldYield,nM=Qc!==void 0?Qc:function(){},Ct=null,Kr=null,Eo=!1,Fc=Na(),Ze=1e4>Fc?Na:function(){return Na()-Fc};function Js(){switch(tM()){case Xs:return 99;case vf:return 98;case wf:return 97;case yf:return 96;case xf:return 95;default:throw Error(I(332))}}function Sf(e){switch(e){case 99:return Xs;case 98:return vf;case 97:return wf;case 96:return yf;case 95:return xf;default:throw Error(I(332))}}function Xt(e,t){return e=Sf(e),eM(e,t)}function If(e,t,i){return e=Sf(e),tu(e,t,i)}function Gc(e){return Ct===null?(Ct=[e],Kr=tu(Xs,Cf)):Ct.push(e),Mf}function wt(){if(Kr!==null){var e=Kr;Kr=null,mf(e)}Cf()}function Cf(){if(!Eo&&Ct!==null){Eo=!0;var e=0;try{var t=Ct;Xt(99,function(){for(;e<t.length;e++){var i=t[e];do i=i(!0);while(i!==null)}}),Ct=null}catch(i){throw Ct!==null&&(Ct=Ct.slice(e+1)),tu(Xs,wt),i}finally{Eo=!1}}}function qr(e,t,i){return i/=10,1073741821-(((1073741821-e+t/10)/i|0)+1)*i}function et(e,t){if(e&&e.defaultProps){t=Ce({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i])}return t}var ws={current:null},ys=null,Ri=null,xs=null;function iu(){xs=Ri=ys=null}function nu(e){var t=ws.current;ie(ws),e.type._context._currentValue=t}function bf(e,t){for(;e!==null;){var i=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,i!==null&&i.childExpirationTime<t&&(i.childExpirationTime=t);else if(i!==null&&i.childExpirationTime<t)i.childExpirationTime=t;else break;e=e.return}}function Hi(e,t){ys=e,xs=Ri=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.expirationTime>=t&&(pt=!0),e.firstContext=null)}function Ge(e,t){if(xs!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(xs=e,t=1073741823),t={context:e,observedBits:t,next:null},Ri===null){if(ys===null)throw Error(I(308));Ri=t,ys.dependencies={expirationTime:0,firstContext:t,responders:null}}else Ri=Ri.next=t;return e._currentValue}var zt=!1;function ru(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function su(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function Ht(e,t){return e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null},e.next=e}function Zt(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}}function Yc(e,t){var i=e.alternate;i!==null&&su(i,e),e=e.updateQueue,i=e.baseQueue,i===null?(e.baseQueue=t.next=t,t.next=t):(t.next=i.next,i.next=t)}function Xn(e,t,i,n){var r=e.updateQueue;zt=!1;var s=r.baseQueue,o=r.shared.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}s=o,r.shared.pending=null,a=e.alternate,a!==null&&(a=a.updateQueue,a!==null&&(a.baseQueue=o))}if(s!==null){a=s.next;var l=r.baseState,u=0,d=null,c=null,m=null;if(a!==null){var v=a;do{if(o=v.expirationTime,o<n){var y={expirationTime:v.expirationTime,suspenseConfig:v.suspenseConfig,tag:v.tag,payload:v.payload,callback:v.callback,next:null};m===null?(c=m=y,d=l):m=m.next=y,o>u&&(u=o)}else{m!==null&&(m=m.next={expirationTime:1073741823,suspenseConfig:v.suspenseConfig,tag:v.tag,payload:v.payload,callback:v.callback,next:null}),tg(o,v.suspenseConfig);e:{var x=e,h=v;switch(o=t,y=i,h.tag){case 1:if(x=h.payload,typeof x=="function"){l=x.call(y,l,o);break e}l=x;break e;case 3:x.effectTag=x.effectTag&-4097|64;case 0:if(x=h.payload,o=typeof x=="function"?x.call(y,l,o):x,o==null)break e;l=Ce({},l,o);break e;case 2:zt=!0}}v.callback!==null&&(e.effectTag|=32,o=r.effects,o===null?r.effects=[v]:o.push(v))}if(v=v.next,v===null||v===a){if(o=r.shared.pending,o===null)break;v=s.next=o.next,o.next=a,r.baseQueue=s=o,r.shared.pending=null}}while(1)}m===null?d=l:m.next=c,r.baseState=d,r.baseQueue=m,io(u),e.expirationTime=u,e.memoizedState=l}}function Xc(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(r!==null){if(n.callback=null,n=r,r=i,typeof n!="function")throw Error(I(191,n));n.call(r)}}}var Ln=it.ReactCurrentBatchConfig,Af=new Zs.Component().refs;function Ms(e,t,i,n){t=e.memoizedState,i=i(n,t),i=i==null?t:Ce({},t,i),e.memoizedState=i,e.expirationTime===0&&(e.updateQueue.baseState=i)}var Ks={isMounted:function(e){return(e=e._reactInternalFiber)?bi(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternalFiber;var n=mt(),r=Ln.suspense;n=gi(n,e,r),r=Ht(n,r),r.payload=t,i!=null&&(r.callback=i),Zt(e,r),Ft(e,n)},enqueueReplaceState:function(e,t,i){e=e._reactInternalFiber;var n=mt(),r=Ln.suspense;n=gi(n,e,r),r=Ht(n,r),r.tag=1,r.payload=t,i!=null&&(r.callback=i),Zt(e,r),Ft(e,n)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var i=mt(),n=Ln.suspense;i=gi(i,e,n),n=Ht(i,n),n.tag=2,t!=null&&(n.callback=t),Zt(e,n),Ft(e,i)}};function Jc(e,t,i,n,r,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,o):t.prototype&&t.prototype.isPureReactComponent?!Yn(i,n)||!Yn(r,s):!0}function Tf(e,t,i){var n=!1,r=Yt,s=t.contextType;return typeof s=="object"&&s!==null?s=Ge(s):(r=De(t)?Mi:Se.current,n=t.contextTypes,s=(n=n!=null)?Ki(e,r):Yt),t=new t(i,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ks,e.stateNode=t,t._reactInternalFiber=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function Kc(e,t,i,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&Ks.enqueueReplaceState(t,t.state,null)}function ka(e,t,i,n){var r=e.stateNode;r.props=i,r.state=e.memoizedState,r.refs=Af,ru(e);var s=t.contextType;typeof s=="object"&&s!==null?r.context=Ge(s):(s=De(t)?Mi:Se.current,r.context=Ki(e,s)),Xn(e,i,r,n),r.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Ms(e,t,s,i),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&Ks.enqueueReplaceState(r,r.state,null),Xn(e,i,r,n),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.effectTag|=4)}var Pr=Array.isArray;function vn(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(I(309));var n=i.stateNode}if(!n)throw Error(I(147,e));var r=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(s){var o=n.refs;o===Af&&(o=n.refs={}),s===null?delete o[r]:o[r]=s},t._stringRef=r,t)}if(typeof e!="string")throw Error(I(284));if(!i._owner)throw Error(I(290,e))}return e}function Dr(e,t){if(e.type!=="textarea")throw Error(I(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Ef(e){function t(h,p){if(e){var f=h.lastEffect;f!==null?(f.nextEffect=p,h.lastEffect=p):h.firstEffect=h.lastEffect=p,p.nextEffect=null,p.effectTag=8}}function i(h,p){if(!e)return null;for(;p!==null;)t(h,p),p=p.sibling;return null}function n(h,p){for(h=new Map;p!==null;)p.key!==null?h.set(p.key,p):h.set(p.index,p),p=p.sibling;return h}function r(h,p){return h=Si(h,p),h.index=0,h.sibling=null,h}function s(h,p,f){return h.index=f,e?(f=h.alternate,f!==null?(f=f.index,f<p?(h.effectTag=2,p):f):(h.effectTag=2,p)):p}function o(h){return e&&h.alternate===null&&(h.effectTag=2),h}function a(h,p,f,g){return p===null||p.tag!==6?(p=Bo(f,h.mode,g),p.return=h,p):(p=r(p,f),p.return=h,p)}function l(h,p,f,g){return p!==null&&p.elementType===f.type?(g=r(p,f.props),g.ref=vn(h,p,f),g.return=h,g):(g=ns(f.type,f.key,f.props,null,h.mode,g),g.ref=vn(h,p,f),g.return=h,g)}function u(h,p,f,g){return p===null||p.tag!==4||p.stateNode.containerInfo!==f.containerInfo||p.stateNode.implementation!==f.implementation?(p=jo(f,h.mode,g),p.return=h,p):(p=r(p,f.children||[]),p.return=h,p)}function d(h,p,f,g,M){return p===null||p.tag!==7?(p=_t(f,h.mode,g,M),p.return=h,p):(p=r(p,f),p.return=h,p)}function c(h,p,f){if(typeof p=="string"||typeof p=="number")return p=Bo(""+p,h.mode,f),p.return=h,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Tr:return f=ns(p.type,p.key,p.props,null,h.mode,f),f.ref=vn(h,null,p),f.return=h,f;case Di:return p=jo(p,h.mode,f),p.return=h,p}if(Pr(p)||dn(p))return p=_t(p,h.mode,f,null),p.return=h,p;Dr(h,p)}return null}function m(h,p,f,g){var M=p!==null?p.key:null;if(typeof f=="string"||typeof f=="number")return M!==null?null:a(h,p,""+f,g);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Tr:return f.key===M?f.type===ri?d(h,p,f.props.children,g,M):l(h,p,f,g):null;case Di:return f.key===M?u(h,p,f,g):null}if(Pr(f)||dn(f))return M!==null?null:d(h,p,f,g,null);Dr(h,f)}return null}function v(h,p,f,g,M){if(typeof g=="string"||typeof g=="number")return h=h.get(f)||null,a(p,h,""+g,M);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Tr:return h=h.get(g.key===null?f:g.key)||null,g.type===ri?d(p,h,g.props.children,M,g.key):l(p,h,g,M);case Di:return h=h.get(g.key===null?f:g.key)||null,u(p,h,g,M)}if(Pr(g)||dn(g))return h=h.get(f)||null,d(p,h,g,M,null);Dr(p,g)}return null}function y(h,p,f,g){for(var M=null,S=null,E=p,k=p=0,N=null;E!==null&&k<f.length;k++){E.index>k?(N=E,E=null):N=E.sibling;var w=m(h,E,f[k],g);if(w===null){E===null&&(E=N);break}e&&E&&w.alternate===null&&t(h,E),p=s(w,p,k),S===null?M=w:S.sibling=w,S=w,E=N}if(k===f.length)return i(h,E),M;if(E===null){for(;k<f.length;k++)E=c(h,f[k],g),E!==null&&(p=s(E,p,k),S===null?M=E:S.sibling=E,S=E);return M}for(E=n(h,E);k<f.length;k++)N=v(E,h,k,f[k],g),N!==null&&(e&&N.alternate!==null&&E.delete(N.key===null?k:N.key),p=s(N,p,k),S===null?M=N:S.sibling=N,S=N);return e&&E.forEach(function(P){return t(h,P)}),M}function x(h,p,f,g){var M=dn(f);if(typeof M!="function")throw Error(I(150));if(f=M.call(f),f==null)throw Error(I(151));for(var S=M=null,E=p,k=p=0,N=null,w=f.next();E!==null&&!w.done;k++,w=f.next()){E.index>k?(N=E,E=null):N=E.sibling;var P=m(h,E,w.value,g);if(P===null){E===null&&(E=N);break}e&&E&&P.alternate===null&&t(h,E),p=s(P,p,k),S===null?M=P:S.sibling=P,S=P,E=N}if(w.done)return i(h,E),M;if(E===null){for(;!w.done;k++,w=f.next())w=c(h,w.value,g),w!==null&&(p=s(w,p,k),S===null?M=w:S.sibling=w,S=w);return M}for(E=n(h,E);!w.done;k++,w=f.next())w=v(E,h,k,w.value,g),w!==null&&(e&&w.alternate!==null&&E.delete(w.key===null?k:w.key),p=s(w,p,k),S===null?M=w:S.sibling=w,S=w);return e&&E.forEach(function(B){return t(h,B)}),M}return function(h,p,f,g){var M=typeof f=="object"&&f!==null&&f.type===ri&&f.key===null;M&&(f=f.props.children);var S=typeof f=="object"&&f!==null;if(S)switch(f.$$typeof){case Tr:e:{for(S=f.key,M=p;M!==null;){if(M.key===S){switch(M.tag){case 7:if(f.type===ri){i(h,M.sibling),p=r(M,f.props.children),p.return=h,h=p;break e}break;default:if(M.elementType===f.type){i(h,M.sibling),p=r(M,f.props),p.ref=vn(h,M,f),p.return=h,h=p;break e}}i(h,M);break}else t(h,M);M=M.sibling}f.type===ri?(p=_t(f.props.children,h.mode,g,f.key),p.return=h,h=p):(g=ns(f.type,f.key,f.props,null,h.mode,g),g.ref=vn(h,p,f),g.return=h,h=g)}return o(h);case Di:e:{for(M=f.key;p!==null;){if(p.key===M)if(p.tag===4&&p.stateNode.containerInfo===f.containerInfo&&p.stateNode.implementation===f.implementation){i(h,p.sibling),p=r(p,f.children||[]),p.return=h,h=p;break e}else{i(h,p);break}else t(h,p);p=p.sibling}p=jo(f,h.mode,g),p.return=h,h=p}return o(h)}if(typeof f=="string"||typeof f=="number")return f=""+f,p!==null&&p.tag===6?(i(h,p.sibling),p=r(p,f),p.return=h,h=p):(i(h,p),p=Bo(f,h.mode,g),p.return=h,h=p),o(h);if(Pr(f))return y(h,p,f,g);if(dn(f))return x(h,p,f,g);if(S&&Dr(h,f),typeof f=="undefined"&&!M)switch(h.tag){case 1:case 0:throw h=h.type,Error(I(152,h.displayName||h.name||"Component"))}return i(h,p)}}var qi=Ef(!0),ou=Ef(!1),fr={},gt={current:fr},Jn={current:fr},Kn={current:fr};function oi(e){if(e===fr)throw Error(I(174));return e}function Pa(e,t){switch(ae(Kn,t),ae(Jn,e),ae(gt,fr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fa(t,e)}ie(gt),ae(gt,t)}function en(){ie(gt),ie(Jn),ie(Kn)}function qc(e){oi(Kn.current);var t=oi(gt.current),i=fa(t,e.type);t!==i&&(ae(Jn,e),ae(gt,i))}function au(e){Jn.current===e&&(ie(gt),ie(Jn))}var se={current:0};function Ss(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data===Gl||i.data===Yl))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.effectTag&64)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function lu(e,t){return{responder:e,props:t}}var es=it.ReactCurrentDispatcher,Qe=it.ReactCurrentBatchConfig,Lt=0,le=null,xe=null,Me=null,Is=!1;function Le(){throw Error(I(321))}function uu(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!xi(e[i],t[i]))return!1;return!0}function cu(e,t,i,n,r,s){if(Lt=s,le=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,es.current=e===null||e.memoizedState===null?rM:sM,e=i(n,r),t.expirationTime===Lt){s=0;do{if(t.expirationTime=0,!(25>s))throw Error(I(301));s+=1,Me=xe=null,t.updateQueue=null,es.current=oM,e=i(n,r)}while(t.expirationTime===Lt)}if(es.current=As,t=xe!==null&&xe.next!==null,Lt=0,Me=xe=le=null,Is=!1,t)throw Error(I(300));return e}function Zi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?le.memoizedState=Me=e:Me=Me.next=e,Me}function sn(){if(xe===null){var e=le.alternate;e=e!==null?e.memoizedState:null}else e=xe.next;var t=Me===null?le.memoizedState:Me.next;if(t!==null)Me=t,xe=e;else{if(e===null)throw Error(I(310));xe=e,e={memoizedState:xe.memoizedState,baseState:xe.baseState,baseQueue:xe.baseQueue,queue:xe.queue,next:null},Me===null?le.memoizedState=Me=e:Me=Me.next=e}return Me}function hi(e,t){return typeof t=="function"?t(e):t}function zr(e){var t=sn(),i=t.queue;if(i===null)throw Error(I(311));i.lastRenderedReducer=e;var n=xe,r=n.baseQueue,s=i.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}n.baseQueue=r=s,i.pending=null}if(r!==null){r=r.next,n=n.baseState;var a=o=s=null,l=r;do{var u=l.expirationTime;if(u<Lt){var d={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};a===null?(o=a=d,s=n):a=a.next=d,u>le.expirationTime&&(le.expirationTime=u,io(u))}else a!==null&&(a=a.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),tg(u,l.suspenseConfig),n=l.eagerReducer===e?l.eagerState:e(n,l.action);l=l.next}while(l!==null&&l!==r);a===null?s=n:a.next=o,xi(n,t.memoizedState)||(pt=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=a,i.lastRenderedState=n}return[t.memoizedState,i.dispatch]}function Br(e){var t=sn(),i=t.queue;if(i===null)throw Error(I(311));i.lastRenderedReducer=e;var n=i.dispatch,r=i.pending,s=t.memoizedState;if(r!==null){i.pending=null;var o=r=r.next;do s=e(s,o.action),o=o.next;while(o!==r);xi(s,t.memoizedState)||(pt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),i.lastRenderedState=s}return[s,n]}function No(e){var t=Zi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:hi,lastRenderedState:e},e=e.dispatch=Bf.bind(null,le,e),[t.memoizedState,e]}function Da(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},t=le.updateQueue,t===null?(t={lastEffect:null},le.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e)),e}function Nf(){return sn().memoizedState}function za(e,t,i,n){var r=Zi();le.effectTag|=e,r.memoizedState=Da(1|t,i,void 0,n===void 0?null:n)}function du(e,t,i,n){var r=sn();n=n===void 0?null:n;var s=void 0;if(xe!==null){var o=xe.memoizedState;if(s=o.destroy,n!==null&&uu(n,o.deps)){Da(t,i,s,n);return}}le.effectTag|=e,r.memoizedState=Da(1|t,i,s,n)}function ed(e,t){return za(516,4,e,t)}function Cs(e,t){return du(516,4,e,t)}function kf(e,t){return du(4,2,e,t)}function Pf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Df(e,t,i){return i=i!=null?i.concat([e]):null,du(4,2,Pf.bind(null,t,e),i)}function hu(){}function td(e,t){return Zi().memoizedState=[e,t===void 0?null:t],e}function bs(e,t){var i=sn();t=t===void 0?null:t;var n=i.memoizedState;return n!==null&&t!==null&&uu(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function zf(e,t){var i=sn();t=t===void 0?null:t;var n=i.memoizedState;return n!==null&&t!==null&&uu(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)}function pu(e,t,i){var n=Js();Xt(98>n?98:n,function(){e(!0)}),Xt(97<n?97:n,function(){var r=Qe.suspense;Qe.suspense=t===void 0?null:t;try{e(!1),i()}finally{Qe.suspense=r}})}function Bf(e,t,i){var n=mt(),r=Ln.suspense;n=gi(n,e,r),r={expirationTime:n,suspenseConfig:r,action:i,eagerReducer:null,eagerState:null,next:null};var s=t.pending;if(s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r,s=e.alternate,e===le||s!==null&&s===le)Is=!0,r.expirationTime=Lt,le.expirationTime=Lt;else{if(e.expirationTime===0&&(s===null||s.expirationTime===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,i);if(r.eagerReducer=s,r.eagerState=a,xi(a,o))return}catch{}finally{}Ft(e,n)}}var As={readContext:Ge,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useLayoutEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useResponder:Le,useDeferredValue:Le,useTransition:Le},rM={readContext:Ge,useCallback:td,useContext:Ge,useEffect:ed,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,za(4,2,Pf.bind(null,t,e),i)},useLayoutEffect:function(e,t){return za(4,2,e,t)},useMemo:function(e,t){var i=Zi();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=Zi();return t=i!==void 0?i(t):t,n.memoizedState=n.baseState=t,e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=Bf.bind(null,le,e),[n.memoizedState,e]},useRef:function(e){var t=Zi();return e={current:e},t.memoizedState=e},useState:No,useDebugValue:hu,useResponder:lu,useDeferredValue:function(e,t){var i=No(e),n=i[0],r=i[1];return ed(function(){var s=Qe.suspense;Qe.suspense=t===void 0?null:t;try{r(e)}finally{Qe.suspense=s}},[e,t]),n},useTransition:function(e){var t=No(!1),i=t[0];return t=t[1],[td(pu.bind(null,t,e),[t,e]),i]}},sM={readContext:Ge,useCallback:bs,useContext:Ge,useEffect:Cs,useImperativeHandle:Df,useLayoutEffect:kf,useMemo:zf,useReducer:zr,useRef:Nf,useState:function(){return zr(hi)},useDebugValue:hu,useResponder:lu,useDeferredValue:function(e,t){var i=zr(hi),n=i[0],r=i[1];return Cs(function(){var s=Qe.suspense;Qe.suspense=t===void 0?null:t;try{r(e)}finally{Qe.suspense=s}},[e,t]),n},useTransition:function(e){var t=zr(hi),i=t[0];return t=t[1],[bs(pu.bind(null,t,e),[t,e]),i]}},oM={readContext:Ge,useCallback:bs,useContext:Ge,useEffect:Cs,useImperativeHandle:Df,useLayoutEffect:kf,useMemo:zf,useReducer:Br,useRef:Nf,useState:function(){return Br(hi)},useDebugValue:hu,useResponder:lu,useDeferredValue:function(e,t){var i=Br(hi),n=i[0],r=i[1];return Cs(function(){var s=Qe.suspense;Qe.suspense=t===void 0?null:t;try{r(e)}finally{Qe.suspense=s}},[e,t]),n},useTransition:function(e){var t=Br(hi),i=t[0];return t=t[1],[bs(pu.bind(null,t,e),[t,e]),i]}},Tt=null,Rt=null,pi=!1;function jf(e,t){var i=ft(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=t,i.return=e,i.effectTag=8,e.lastEffect!==null?(e.lastEffect.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i}function id(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function Ba(e){if(pi){var t=Rt;if(t){var i=t;if(!id(e,t)){if(t=Wi(i.nextSibling),!t||!id(e,t)){e.effectTag=e.effectTag&-1025|2,pi=!1,Tt=e;return}jf(Tt,i)}Tt=e,Rt=Wi(t.firstChild)}else e.effectTag=e.effectTag&-1025|2,pi=!1,Tt=e}}function nd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tt=e}function jr(e){if(e!==Tt)return!1;if(!pi)return nd(e),pi=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!Ia(t,e.memoizedProps))for(t=Rt;t;)jf(e,t),t=Wi(t.nextSibling);if(nd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i===ef){if(t===0){Rt=Wi(e.nextSibling);break e}t--}else i!==qp&&i!==Yl&&i!==Gl||t++}e=e.nextSibling}Rt=null}}else Rt=Tt?Wi(e.stateNode.nextSibling):null;return!0}function ko(){Rt=Tt=null,pi=!1}var aM=it.ReactCurrentOwner,pt=!1;function Re(e,t,i,n){t.child=e===null?ou(t,null,i,n):qi(t,e.child,i,n)}function rd(e,t,i,n,r){i=i.render;var s=t.ref;return Hi(t,r),n=cu(e,t,i,n,s,r),e!==null&&!pt?(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),Et(e,t,r)):(t.effectTag|=1,Re(e,t,n,r),t.child)}function sd(e,t,i,n,r,s){if(e===null){var o=i.type;return typeof o=="function"&&!wu(o)&&o.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=o,Lf(e,t,o,n,r,s)):(e=ns(i.type,null,n,null,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}return o=e.child,r<s&&(r=o.memoizedProps,i=i.compare,i=i!==null?i:Yn,i(r,n)&&e.ref===t.ref)?Et(e,t,s):(t.effectTag|=1,e=Si(o,n),e.ref=t.ref,e.return=t,t.child=e)}function Lf(e,t,i,n,r,s){return e!==null&&Yn(e.memoizedProps,n)&&e.ref===t.ref&&(pt=!1,r<s)?(t.expirationTime=e.expirationTime,Et(e,t,s)):ja(e,t,i,n,s)}function Rf(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.effectTag|=128)}function ja(e,t,i,n,r){var s=De(i)?Mi:Se.current;return s=Ki(t,s),Hi(t,r),i=cu(e,t,i,n,s,r),e!==null&&!pt?(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),Et(e,t,r)):(t.effectTag|=1,Re(e,t,i,r),t.child)}function od(e,t,i,n,r){if(De(i)){var s=!0;Jr(t)}else s=!1;if(Hi(t,r),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Tf(t,i,n),ka(t,i,n,r),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=i.contextType;typeof u=="object"&&u!==null?u=Ge(u):(u=De(i)?Mi:Se.current,u=Ki(t,u));var d=i.getDerivedStateFromProps,c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&Kc(t,o,n,u),zt=!1;var m=t.memoizedState;o.state=m,Xn(t,n,o,r),l=t.memoizedState,a!==n||m!==l||Pe.current||zt?(typeof d=="function"&&(Ms(t,i,d,n),l=t.memoizedState),(a=zt||Jc(t,i,a,n,m,l,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.effectTag|=4)):(typeof o.componentDidMount=="function"&&(t.effectTag|=4),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(t.effectTag|=4),n=!1)}else o=t.stateNode,su(e,t),a=t.memoizedProps,o.props=t.type===t.elementType?a:et(t.type,a),l=o.context,u=i.contextType,typeof u=="object"&&u!==null?u=Ge(u):(u=De(i)?Mi:Se.current,u=Ki(t,u)),d=i.getDerivedStateFromProps,(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&Kc(t,o,n,u),zt=!1,l=t.memoizedState,o.state=l,Xn(t,n,o,r),m=t.memoizedState,a!==n||l!==m||Pe.current||zt?(typeof d=="function"&&(Ms(t,i,d,n),m=t.memoizedState),(d=zt||Jc(t,i,a,n,l,m,u))?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,u)),typeof o.componentDidUpdate=="function"&&(t.effectTag|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.effectTag|=256)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=n,t.memoizedState=m),o.props=n,o.state=m,o.context=u,n=d):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),n=!1);return La(e,t,i,n,s,r)}function La(e,t,i,n,r,s){Rf(e,t);var o=(t.effectTag&64)!==0;if(!n&&!o)return r&&Zc(t,i,!1),Et(e,t,s);n=t.stateNode,aM.current=t;var a=o&&typeof i.getDerivedStateFromError!="function"?null:n.render();return t.effectTag|=1,e!==null&&o?(t.child=qi(t,e.child,null,s),t.child=qi(t,null,a,s)):Re(e,t,a,s),t.memoizedState=n.state,r&&Zc(t,i,!0),t.child}function ad(e){var t=e.stateNode;t.pendingContext?Hc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Hc(e,t.context,!1),Pa(e,t.containerInfo)}var Po={dehydrated:null,retryTime:0};function ld(e,t,i){var n=t.mode,r=t.pendingProps,s=se.current,o=!1,a;if((a=(t.effectTag&64)!==0)||(a=(s&2)!==0&&(e===null||e.memoizedState!==null)),a?(o=!0,t.effectTag&=-65):e!==null&&e.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(s|=1),ae(se,s&1),e===null){if(r.fallback!==void 0&&Ba(t),o){if(o=r.fallback,r=_t(null,n,0,null),r.return=t,(t.mode&2)===0)for(e=t.memoizedState!==null?t.child.child:t.child,r.child=e;e!==null;)e.return=r,e=e.sibling;return i=_t(o,n,i,null),i.return=t,r.sibling=i,t.memoizedState=Po,t.child=r,i}return n=r.children,t.memoizedState=null,t.child=ou(t,null,n,i)}if(e.memoizedState!==null){if(e=e.child,n=e.sibling,o){if(r=r.fallback,i=Si(e,e.pendingProps),i.return=t,(t.mode&2)===0&&(o=t.memoizedState!==null?t.child.child:t.child,o!==e.child))for(i.child=o;o!==null;)o.return=i,o=o.sibling;return n=Si(n,r),n.return=t,i.sibling=n,i.childExpirationTime=0,t.memoizedState=Po,t.child=i,n}return i=qi(t,e.child,r.children,i),t.memoizedState=null,t.child=i}if(e=e.child,o){if(o=r.fallback,r=_t(null,n,0,null),r.return=t,r.child=e,e!==null&&(e.return=r),(t.mode&2)===0)for(e=t.memoizedState!==null?t.child.child:t.child,r.child=e;e!==null;)e.return=r,e=e.sibling;return i=_t(o,n,i,null),i.return=t,r.sibling=i,i.effectTag|=2,r.childExpirationTime=0,t.memoizedState=Po,t.child=r,i}return t.memoizedState=null,t.child=qi(t,e,r.children,i)}function ud(e,t){e.expirationTime<t&&(e.expirationTime=t);var i=e.alternate;i!==null&&i.expirationTime<t&&(i.expirationTime=t),bf(e.return,t)}function Do(e,t,i,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailExpiration:0,tailMode:r,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=i,o.tailExpiration=0,o.tailMode=r,o.lastEffect=s)}function cd(e,t,i){var n=t.pendingProps,r=n.revealOrder,s=n.tail;if(Re(e,t,n.children,i),n=se.current,(n&2)!==0)n=n&1|2,t.effectTag|=64;else{if(e!==null&&(e.effectTag&64)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ud(e,i);else if(e.tag===19)ud(e,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ae(se,n),(t.mode&2)===0)t.memoizedState=null;else switch(r){case"forwards":for(i=t.child,r=null;i!==null;)e=i.alternate,e!==null&&Ss(e)===null&&(r=i),i=i.sibling;i=r,i===null?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),Do(t,!1,r,i,s,t.lastEffect);break;case"backwards":for(i=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Ss(e)===null){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}Do(t,!0,i,null,s,t.lastEffect);break;case"together":Do(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Et(e,t,i){e!==null&&(t.dependencies=e.dependencies);var n=t.expirationTime;if(n!==0&&io(n),t.childExpirationTime<i)return null;if(e!==null&&t.child!==e.child)throw Error(I(153));if(t.child!==null){for(e=t.child,i=Si(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Si(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}var _f,Ra,Vf,Of;_f=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Ra=function(){};Vf=function(e,t,i,n,r){var s=e.memoizedProps;if(s!==n){var o=t.stateNode;switch(oi(gt.current),e=null,i){case"input":s=ua(o,s),n=ua(o,n),e=[];break;case"option":s=ha(o,s),n=ha(o,n),e=[];break;case"select":s=Ce({},s,{value:void 0}),n=Ce({},n,{value:void 0}),e=[];break;case"textarea":s=pa(o,s),n=pa(o,n),e=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(o.onclick=fs)}ya(i,n);var a,l;i=null;for(a in s)if(!n.hasOwnProperty(a)&&s.hasOwnProperty(a)&&s[a]!=null)if(a==="style")for(l in o=s[a],o)o.hasOwnProperty(l)&&(i||(i={}),i[l]="");else a!=="dangerouslySetInnerHTML"&&a!=="children"&&a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Yi.hasOwnProperty(a)?e||(e=[]):(e=e||[]).push(a,null));for(a in n){var u=n[a];if(o=s!=null?s[a]:void 0,n.hasOwnProperty(a)&&u!==o&&(u!=null||o!=null))if(a==="style")if(o){for(l in o)!o.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(i||(i={}),i[l]="");for(l in u)u.hasOwnProperty(l)&&o[l]!==u[l]&&(i||(i={}),i[l]=u[l])}else i||(e||(e=[]),e.push(a,i)),i=u;else a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(e=e||[]).push(a,u)):a==="children"?o===u||typeof u!="string"&&typeof u!="number"||(e=e||[]).push(a,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&(Yi.hasOwnProperty(a)?(u!=null&&xt(r,a),e||o===u||(e=[])):(e=e||[]).push(a,u))}i&&(e=e||[]).push("style",i),r=e,(t.updateQueue=r)&&(t.effectTag|=4)}};Of=function(e,t,i,n){i!==n&&(t.effectTag|=4)};function Lr(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function lM(e,t,i){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return De(t.type)&&vs(),null;case 3:return en(),ie(Pe),ie(Se),i=t.stateNode,i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),e!==null&&e.child!==null||!jr(t)||(t.effectTag|=4),Ra(t),null;case 5:au(t),i=oi(Kn.current);var r=t.type;if(e!==null&&t.stateNode!=null)Vf(e,t,r,n,i),e.ref!==t.ref&&(t.effectTag|=128);else{if(!n){if(t.stateNode===null)throw Error(I(166));return null}if(e=oi(gt.current),jr(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[Bt]=t,n[gs]=s,r){case"iframe":case"object":case"embed":re("load",n);break;case"video":case"audio":for(e=0;e<Sn.length;e++)re(Sn[e],n);break;case"source":re("error",n);break;case"img":case"image":case"link":re("error",n),re("load",n);break;case"form":re("reset",n),re("submit",n);break;case"details":re("toggle",n);break;case"input":Mc(n,s),re("invalid",n),xt(i,"onChange");break;case"select":n._wrapperState={wasMultiple:!!s.multiple},re("invalid",n),xt(i,"onChange");break;case"textarea":Ic(n,s),re("invalid",n),xt(i,"onChange")}ya(r,s),e=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(e=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(e=["children",""+a]):Yi.hasOwnProperty(o)&&a!=null&&xt(i,o)}switch(r){case"input":Er(n),Sc(n,s,!0);break;case"textarea":Er(n),Cc(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=fs)}i=e,t.updateQueue=i,i!==null&&(t.effectTag|=4)}else{switch(o=i.nodeType===9?i:i.ownerDocument,e===kc&&(e=Dp(r)),e===kc?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Bt]=t,e[gs]=n,_f(e,t,!1,!1),t.stateNode=e,o=xa(r,n),r){case"iframe":case"object":case"embed":re("load",e),a=n;break;case"video":case"audio":for(a=0;a<Sn.length;a++)re(Sn[a],e);a=n;break;case"source":re("error",e),a=n;break;case"img":case"image":case"link":re("error",e),re("load",e),a=n;break;case"form":re("reset",e),re("submit",e),a=n;break;case"details":re("toggle",e),a=n;break;case"input":Mc(e,n),a=ua(e,n),re("invalid",e),xt(i,"onChange");break;case"option":a=ha(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ce({},n,{value:void 0}),re("invalid",e),xt(i,"onChange");break;case"textarea":Ic(e,n),a=pa(e,n),re("invalid",e),xt(i,"onChange");break;default:a=n}ya(r,a);var l=a;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Jp(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&zp(e,u)):s==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Zn(e,u):typeof u=="number"&&Zn(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Yi.hasOwnProperty(s)?u!=null&&xt(i,s):u!=null&&Rl(e,s,u,o))}switch(r){case"input":Er(e),Sc(e,n,!1);break;case"textarea":Er(e),Cc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Gt(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?$i(e,!!n.multiple,i,!1):n.defaultValue!=null&&$i(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=fs)}tf(r,n)&&(t.effectTag|=4)}t.ref!==null&&(t.effectTag|=128)}return null;case 6:if(e&&t.stateNode!=null)Of(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(I(166));i=oi(Kn.current),oi(gt.current),jr(t)?(i=t.stateNode,n=t.memoizedProps,i[Bt]=t,i.nodeValue!==n&&(t.effectTag|=4)):(i=(i.nodeType===9?i:i.ownerDocument).createTextNode(n),i[Bt]=t,t.stateNode=i)}return null;case 13:return ie(se),n=t.memoizedState,(t.effectTag&64)!==0?(t.expirationTime=i,t):(i=n!==null,n=!1,e===null?t.memoizedProps.fallback!==void 0&&jr(t):(r=e.memoizedState,n=r!==null,i||r===null||(r=e.child.sibling,r!==null&&(s=t.firstEffect,s!==null?(t.firstEffect=r,r.nextEffect=s):(t.firstEffect=t.lastEffect=r,r.nextEffect=null),r.effectTag=8))),i&&!n&&(t.mode&2)!==0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(se.current&1)!==0?fe===fi&&(fe=Ns):((fe===fi||fe===Ns)&&(fe=qs),er!==0&&Oe!==null&&(ui(Oe,ze),og(Oe,er)))),(i||n)&&(t.effectTag|=4),null);case 4:return en(),Ra(t),null;case 10:return nu(t),null;case 17:return De(t.type)&&vs(),null;case 19:if(ie(se),n=t.memoizedState,n===null)return null;if(r=(t.effectTag&64)!==0,s=n.rendering,s===null){if(r)Lr(n,!1);else if(fe!==fi||e!==null&&(e.effectTag&64)!==0)for(s=t.child;s!==null;){if(e=Ss(s),e!==null){for(t.effectTag|=64,Lr(n,!1),r=e.updateQueue,r!==null&&(t.updateQueue=r,t.effectTag|=4),n.lastEffect===null&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=t.child;n!==null;)r=n,s=i,r.effectTag&=2,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null,e=r.alternate,e===null?(r.childExpirationTime=0,r.expirationTime=s,r.child=null,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null):(r.childExpirationTime=e.childExpirationTime,r.expirationTime=e.expirationTime,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,s=e.dependencies,r.dependencies=s===null?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),n=n.sibling;return ae(se,se.current&1|2),t.child}s=s.sibling}}else{if(!r)if(e=Ss(s),e!==null){if(t.effectTag|=64,r=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.effectTag|=4),Lr(n,!0),n.tail===null&&n.tailMode==="hidden"&&!s.alternate)return t=t.lastEffect=n.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Ze()-n.renderingStartTime>n.tailExpiration&&1<i&&(t.effectTag|=64,r=!0,Lr(n,!1),t.expirationTime=t.childExpirationTime=i-1);n.isBackwards?(s.sibling=t.child,t.child=s):(i=n.last,i!==null?i.sibling=s:t.child=s,n.last=s)}return n.tail!==null?(n.tailExpiration===0&&(n.tailExpiration=Ze()+500),i=n.tail,n.rendering=i,n.tail=i.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=Ze(),i.sibling=null,t=se.current,ae(se,r?t&1|2:t&1),i):null}throw Error(I(156,t.tag))}function uM(e){switch(e.tag){case 1:De(e.type)&&vs();var t=e.effectTag;return t&4096?(e.effectTag=t&-4097|64,e):null;case 3:if(en(),ie(Pe),ie(Se),t=e.effectTag,(t&64)!==0)throw Error(I(285));return e.effectTag=t&-4097|64,e;case 5:return au(e),null;case 13:return ie(se),t=e.effectTag,t&4096?(e.effectTag=t&-4097|64,e):null;case 19:return ie(se),null;case 4:return en(),null;case 10:return nu(e),null;default:return null}}function fu(e,t){return{value:e,source:t,stack:Ol(t)}}var cM=typeof WeakSet=="function"?WeakSet:Set;function _a(e,t){var i=t.source,n=t.stack;n===null&&i!==null&&(n=Ol(i)),i!==null&&Nt(i.type),t=t.value,e!==null&&e.tag===1&&Nt(e.type);try{console.error(t)}catch(r){setTimeout(function(){throw r})}}function dM(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(i){mi(e,i)}}function dd(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){mi(e,i)}else t.current=null}function hM(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.effectTag&256&&e!==null){var i=e.memoizedProps,n=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?i:et(t.type,i),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(I(163))}function Uf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var n=i.destroy;i.destroy=void 0,n!==void 0&&n()}i=i.next}while(i!==t)}}function $f(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var n=i.create;i.destroy=n()}i=i.next}while(i!==t)}}function pM(e,t,i){switch(i.tag){case 0:case 11:case 15:case 22:$f(3,i);return;case 1:if(e=i.stateNode,i.effectTag&4)if(t===null)e.componentDidMount();else{var n=i.elementType===i.type?t.memoizedProps:et(i.type,t.memoizedProps);e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}t=i.updateQueue,t!==null&&Xc(i,t,e);return;case 3:if(t=i.updateQueue,t!==null){if(e=null,i.child!==null)switch(i.child.tag){case 5:e=i.child.stateNode;break;case 1:e=i.child.stateNode}Xc(i,t,e)}return;case 5:e=i.stateNode,t===null&&i.effectTag&4&&tf(i.type,i.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:i.memoizedState===null&&(i=i.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&Fp(i))));return;case 19:case 17:case 20:case 21:return}throw Error(I(163))}function hd(e,t,i){switch(typeof Qa=="function"&&Qa(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var n=e.next;Xt(97<i?97:i,function(){var r=n;do{var s=r.destroy;if(s!==void 0){var o=t;try{s()}catch(a){mi(o,a)}}r=r.next}while(r!==n)})}break;case 1:dd(t),i=t.stateNode,typeof i.componentWillUnmount=="function"&&dM(t,i);break;case 5:dd(t);break;case 4:Hf(e,t,i)}}function Wf(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,t!==null&&Wf(t)}function pd(e){return e.tag===5||e.tag===3||e.tag===4}function fd(e){e:{for(var t=e.return;t!==null;){if(pd(t)){var i=t;break e}t=t.return}throw Error(I(160))}switch(t=i.stateNode,i.tag){case 5:var n=!1;break;case 3:t=t.containerInfo,n=!0;break;case 4:t=t.containerInfo,n=!0;break;default:throw Error(I(161))}i.effectTag&16&&(Zn(t,""),i.effectTag&=-17);e:t:for(i=e;;){for(;i.sibling===null;){if(i.return===null||pd(i.return)){i=null;break e}i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.effectTag&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.effectTag&2)){i=i.stateNode;break e}}n?Va(e,i,t):Oa(e,i,t)}function Va(e,t,i){var n=e.tag,r=n===5||n===6;if(r)e=r?e.stateNode:e.stateNode.instance,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=fs));else if(n!==4&&(e=e.child,e!==null))for(Va(e,t,i),e=e.sibling;e!==null;)Va(e,t,i),e=e.sibling}function Oa(e,t,i){var n=e.tag,r=n===5||n===6;if(r)e=r?e.stateNode:e.stateNode.instance,t?i.insertBefore(e,t):i.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Oa(e,t,i),e=e.sibling;e!==null;)Oa(e,t,i),e=e.sibling}function Hf(e,t,i){for(var n=t,r=!1,s,o;;){if(!r){r=n.return;e:for(;;){if(r===null)throw Error(I(160));switch(s=r.stateNode,r.tag){case 5:o=!1;break e;case 3:s=s.containerInfo,o=!0;break e;case 4:s=s.containerInfo,o=!0;break e}r=r.return}r=!0}if(n.tag===5||n.tag===6){e:for(var a=e,l=n,u=i,d=l;;)if(hd(a,d,u),d.child!==null&&d.tag!==4)d.child.return=d,d=d.child;else{if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}o?(a=s,l=n.stateNode,a.nodeType===8?a.parentNode.removeChild(l):a.removeChild(l)):s.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){s=n.stateNode.containerInfo,o=!0,n.child.return=n,n=n.child;continue}}else if(hd(e,n,i),n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return,n.tag===4&&(r=!1)}n.sibling.return=n.return,n=n.sibling}}function zo(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:Uf(3,t);return;case 1:return;case 5:var i=t.stateNode;if(i!=null){var n=t.memoizedProps,r=e!==null?e.memoizedProps:n;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,s!==null){for(i[gs]=n,e==="input"&&n.type==="radio"&&n.name!=null&&Np(i,n),xa(e,r),t=xa(e,n),r=0;r<s.length;r+=2){var o=s[r],a=s[r+1];o==="style"?Jp(i,a):o==="dangerouslySetInnerHTML"?zp(i,a):o==="children"?Zn(i,a):Rl(i,o,a,t)}switch(e){case"input":ca(i,n);break;case"textarea":kp(i,n);break;case"select":t=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!n.multiple,e=n.value,e!=null?$i(i,!!n.multiple,e,!1):t!==!!n.multiple&&(n.defaultValue!=null?$i(i,!!n.multiple,n.defaultValue,!0):$i(i,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(I(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:t=t.stateNode,t.hydrate&&(t.hydrate=!1,Fp(t.containerInfo));return;case 12:return;case 13:if(i=t,t.memoizedState===null?n=!1:(n=!0,i=t.child,vu=Ze()),i!==null)e:for(e=i;;){if(e.tag===5)s=e.stateNode,n?(s=s.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(s=e.stateNode,r=e.memoizedProps.style,r=r!=null&&r.hasOwnProperty("display")?r.display:null,s.style.display=Xp("display",r));else if(e.tag===6)e.stateNode.nodeValue=n?"":e.memoizedProps;else if(e.tag===13&&e.memoizedState!==null&&e.memoizedState.dehydrated===null){s=e.child.sibling,s.return=e,e=s;continue}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}gd(t);return;case 19:gd(t);return;case 17:return}throw Error(I(163))}function gd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new cM),t.forEach(function(n){var r=IM.bind(null,e,n);i.has(n)||(i.add(n),n.then(r,r))})}}var fM=typeof WeakMap=="function"?WeakMap:Map;function Zf(e,t,i){i=Ht(i,null),i.tag=3,i.payload={element:null};var n=t.value;return i.callback=function(){Ds||(Ds=!0,Ua=n),_a(e,t)},i}function Qf(e,t,i){i=Ht(i,null),i.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var r=t.value;i.payload=function(){return _a(e,t),n(r)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(i.callback=function(){typeof n!="function"&&(Qt===null?Qt=new Set([this]):Qt.add(this),_a(e,t));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),i}var gM=Math.ceil,Ts=it.ReactCurrentDispatcher,Ff=it.ReactCurrentOwner,ge=0,gu=8,nt=16,vt=32,fi=0,Es=1,Gf=2,Ns=3,qs=4,mu=5,R=ge,Oe=null,$=null,ze=0,fe=fi,eo=null,At=1073741823,qn=1073741823,ks=null,er=0,Ps=!1,vu=0,Yf=500,D=null,Ds=!1,Ua=null,Qt=null,zs=!1,Rn=null,Cn=90,ai=null,_n=0,$a=null,ts=0;function mt(){return(R&(nt|vt))!==ge?1073741821-(Ze()/10|0):ts!==0?ts:ts=1073741821-(Ze()/10|0)}function gi(e,t,i){if(t=t.mode,(t&2)===0)return 1073741823;var n=Js();if((t&4)===0)return n===99?1073741823:1073741822;if((R&nt)!==ge)return ze;if(i!==null)e=qr(e,i.timeoutMs|0||5e3,250);else switch(n){case 99:e=1073741823;break;case 98:e=qr(e,150,100);break;case 97:case 96:e=qr(e,5e3,250);break;case 95:e=2;break;default:throw Error(I(326))}return Oe!==null&&e===ze&&--e,e}function Ft(e,t){if(50<_n)throw _n=0,$a=null,Error(I(185));if(e=to(e,t),e!==null){var i=Js();t===1073741823?(R&gu)!==ge&&(R&(nt|vt))===ge?Wa(e):(Ue(e),R===ge&&wt()):Ue(e),(R&4)===ge||i!==98&&i!==99||(ai===null?ai=new Map([[e,t]]):(i=ai.get(e),(i===void 0||i>t)&&ai.set(e,t)))}}function to(e,t){e.expirationTime<t&&(e.expirationTime=t);var i=e.alternate;i!==null&&i.expirationTime<t&&(i.expirationTime=t);var n=e.return,r=null;if(n===null&&e.tag===3)r=e.stateNode;else for(;n!==null;){if(i=n.alternate,n.childExpirationTime<t&&(n.childExpirationTime=t),i!==null&&i.childExpirationTime<t&&(i.childExpirationTime=t),n.return===null&&n.tag===3){r=n.stateNode;break}n=n.return}return r!==null&&(Oe===r&&(io(t),fe===qs&&ui(r,ze)),og(r,t)),r}function is(e){var t=e.lastExpiredTime;if(t!==0||(t=e.firstPendingTime,!sg(e,t)))return t;var i=e.lastPingedTime;return e=e.nextKnownPendingLevel,e=i>e?i:e,2>=e&&t!==e?0:e}function Ue(e){if(e.lastExpiredTime!==0)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Gc(Wa.bind(null,e));else{var t=is(e),i=e.callbackNode;if(t===0)i!==null&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var n=mt();if(t===1073741823?n=99:t===1||t===2?n=95:(n=10*(1073741821-t)-10*(1073741821-n),n=0>=n?99:250>=n?98:5250>=n?97:95),i!==null){var r=e.callbackPriority;if(e.callbackExpirationTime===t&&r>=n)return;i!==Mf&&mf(i)}e.callbackExpirationTime=t,e.callbackPriority=n,t=t===1073741823?Gc(Wa.bind(null,e)):If(n,Xf.bind(null,e),{timeout:10*(1073741821-t)-Ze()}),e.callbackNode=t}}}function Xf(e,t){if(ts=0,t)return t=mt(),Fa(e,t),Ue(e),null;var i=is(e);if(i!==0){if(t=e.callbackNode,(R&(nt|vt))!==ge)throw Error(I(327));if(on(),e===Oe&&i===ze||li(e,i),$!==null){var n=R;R|=nt;var r=eg();do try{wM();break}catch(a){qf(e,a)}while(1);if(iu(),R=n,Ts.current=r,fe===Es)throw t=eo,li(e,i),ui(e,i),Ue(e),t;if($===null)switch(r=e.finishedWork=e.current.alternate,e.finishedExpirationTime=i,n=fe,Oe=null,n){case fi:case Es:throw Error(I(345));case Gf:Fa(e,2<i?2:i);break;case Ns:if(ui(e,i),n=e.lastSuspendedTime,i===n&&(e.nextKnownPendingLevel=Ha(r)),At===1073741823&&(r=vu+Yf-Ze(),10<r)){if(Ps){var s=e.lastPingedTime;if(s===0||s>=i){e.lastPingedTime=i,li(e,i);break}}if(s=is(e),s!==0&&s!==i)break;if(n!==0&&n!==i){e.lastPingedTime=n;break}e.timeoutHandle=To(ni.bind(null,e),r);break}ni(e);break;case qs:if(ui(e,i),n=e.lastSuspendedTime,i===n&&(e.nextKnownPendingLevel=Ha(r)),Ps&&(r=e.lastPingedTime,r===0||r>=i)){e.lastPingedTime=i,li(e,i);break}if(r=is(e),r!==0&&r!==i)break;if(n!==0&&n!==i){e.lastPingedTime=n;break}if(qn!==1073741823?n=10*(1073741821-qn)-Ze():At===1073741823?n=0:(n=10*(1073741821-At)-5e3,r=Ze(),i=10*(1073741821-i)-r,n=r-n,0>n&&(n=0),n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*gM(n/1960))-n,i<n&&(n=i)),10<n){e.timeoutHandle=To(ni.bind(null,e),n);break}ni(e);break;case mu:if(At!==1073741823&&ks!==null){s=At;var o=ks;if(n=o.busyMinDurationMs|0,0>=n?n=0:(r=o.busyDelayMs|0,s=Ze()-(10*(1073741821-s)-(o.timeoutMs|0||5e3)),n=s<=r?0:r+n-s),10<n){ui(e,i),e.timeoutHandle=To(ni.bind(null,e),n);break}}ni(e);break;default:throw Error(I(329))}if(Ue(e),e.callbackNode===t)return Xf.bind(null,e)}}return null}function Wa(e){var t=e.lastExpiredTime;if(t=t!==0?t:1073741823,(R&(nt|vt))!==ge)throw Error(I(327));if(on(),e===Oe&&t===ze||li(e,t),$!==null){var i=R;R|=nt;var n=eg();do try{vM();break}catch(r){qf(e,r)}while(1);if(iu(),R=i,Ts.current=n,fe===Es)throw i=eo,li(e,t),ui(e,t),Ue(e),i;if($!==null)throw Error(I(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Oe=null,ni(e),Ue(e)}return null}function mM(){if(ai!==null){var e=ai;ai=null,e.forEach(function(t,i){Fa(i,t),Ue(i)}),wt()}}function Jf(e,t){var i=R;R|=1;try{return e(t)}finally{R=i,R===ge&&wt()}}function Kf(e,t){var i=R;R&=-2,R|=gu;try{return e(t)}finally{R=i,R===ge&&wt()}}function li(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,gx(i)),$!==null)for(i=$.return;i!==null;){var n=i;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&vs();break;case 3:en(),ie(Pe),ie(Se);break;case 5:au(n);break;case 4:en();break;case 13:ie(se);break;case 19:ie(se);break;case 10:nu(n)}i=i.return}Oe=e,$=Si(e.current,null),ze=t,fe=fi,eo=null,qn=At=1073741823,ks=null,er=0,Ps=!1}function qf(e,t){do{try{if(iu(),es.current=As,Is)for(var i=le.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}if(Lt=0,Me=xe=le=null,Is=!1,$===null||$.return===null)return fe=Es,eo=t,$=null;e:{var r=e,s=$.return,o=$,a=t;if(t=ze,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,a!==null&&typeof a=="object"&&typeof a.then=="function"){var l=a;if((o.mode&2)===0){var u=o.alternate;u?(o.updateQueue=u.updateQueue,o.memoizedState=u.memoizedState,o.expirationTime=u.expirationTime):(o.updateQueue=null,o.memoizedState=null)}var d=(se.current&1)!==0,c=s;do{var m;if(m=c.tag===13){var v=c.memoizedState;if(v!==null)m=v.dehydrated!==null;else{var y=c.memoizedProps;m=y.fallback===void 0?!1:y.unstable_avoidThisFallback!==!0?!0:!d}}if(m){var x=c.updateQueue;if(x===null){var h=new Set;h.add(l),c.updateQueue=h}else x.add(l);if((c.mode&2)===0){if(c.effectTag|=64,o.effectTag&=-2981,o.tag===1)if(o.alternate===null)o.tag=17;else{var p=Ht(1073741823,null);p.tag=2,Zt(o,p)}o.expirationTime=1073741823;break e}a=void 0,o=t;var f=r.pingCache;if(f===null?(f=r.pingCache=new fM,a=new Set,f.set(l,a)):(a=f.get(l),a===void 0&&(a=new Set,f.set(l,a))),!a.has(o)){a.add(o);var g=SM.bind(null,r,l,o);l.then(g,g)}c.effectTag|=4096,c.expirationTime=t;break e}c=c.return}while(c!==null);a=Error((Nt(o.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`+Ol(o))}fe!==mu&&(fe=Gf),a=fu(a,o),c=s;do{switch(c.tag){case 3:l=a,c.effectTag|=4096,c.expirationTime=t;var M=Zf(c,l,t);Yc(c,M);break e;case 1:l=a;var S=c.type,E=c.stateNode;if((c.effectTag&64)===0&&(typeof S.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Qt===null||!Qt.has(E)))){c.effectTag|=4096,c.expirationTime=t;var k=Qf(c,l,t);Yc(c,k);break e}}c=c.return}while(c!==null)}$=ng($)}catch(N){t=N;continue}break}while(1)}function eg(){var e=Ts.current;return Ts.current=As,e===null?As:e}function tg(e,t){e<At&&2<e&&(At=e),t!==null&&e<qn&&2<e&&(qn=e,ks=t)}function io(e){e>er&&(er=e)}function vM(){for(;$!==null;)$=ig($)}function wM(){for(;$!==null&&!iM();)$=ig($)}function ig(e){var t=rg(e.alternate,e,ze);return e.memoizedProps=e.pendingProps,t===null&&(t=ng(e)),Ff.current=null,t}function ng(e){$=e;do{var t=$.alternate;if(e=$.return,($.effectTag&2048)===0){if(t=lM(t,$,ze),ze===1||$.childExpirationTime!==1){for(var i=0,n=$.child;n!==null;){var r=n.expirationTime,s=n.childExpirationTime;r>i&&(i=r),s>i&&(i=s),n=n.sibling}$.childExpirationTime=i}if(t!==null)return t;e!==null&&(e.effectTag&2048)===0&&(e.firstEffect===null&&(e.firstEffect=$.firstEffect),$.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=$.firstEffect),e.lastEffect=$.lastEffect),1<$.effectTag&&(e.lastEffect!==null?e.lastEffect.nextEffect=$:e.firstEffect=$,e.lastEffect=$))}else{if(t=uM($),t!==null)return t.effectTag&=2047,t;e!==null&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(t=$.sibling,t!==null)return t;$=e}while($!==null);return fe===fi&&(fe=mu),null}function Ha(e){var t=e.expirationTime;return e=e.childExpirationTime,t>e?t:e}function ni(e){var t=Js();return Xt(99,yM.bind(null,e,t)),null}function yM(e,t){do on();while(Rn!==null);if((R&(nt|vt))!==ge)throw Error(I(327));var i=e.finishedWork,n=e.finishedExpirationTime;if(i===null)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,i===e.current)throw Error(I(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var r=Ha(i);if(e.firstPendingTime=r,n<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:n<=e.firstSuspendedTime&&(e.firstSuspendedTime=n-1),n<=e.lastPingedTime&&(e.lastPingedTime=0),n<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Oe&&($=Oe=null,ze=0),1<i.effectTag?i.lastEffect!==null?(i.lastEffect.nextEffect=i,r=i.firstEffect):r=i:r=i.firstEffect,r!==null){var s=R;R|=vt,Ff.current=null,bo=Fr;var o=zc();if(Sa(o)){if("selectionStart"in o)var a={start:o.selectionStart,end:o.selectionEnd};else e:{a=(a=o.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var u=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var c=0,m=-1,v=-1,y=0,x=0,h=o,p=null;t:for(;;){for(var f;h!==a||u!==0&&h.nodeType!==3||(m=c+u),h!==d||l!==0&&h.nodeType!==3||(v=c+l),h.nodeType===3&&(c+=h.nodeValue.length),(f=h.firstChild)!==null;)p=h,h=f;for(;;){if(h===o)break t;if(p===a&&++y===u&&(m=c),p===d&&++x===l&&(v=c),(f=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=f}a=m===-1||v===-1?null:{start:m,end:v}}else a=null}a=a||{start:0,end:0}}else a=null;Ao={activeElementDetached:null,focusedElem:o,selectionRange:a},Fr=!1,D=r;do try{xM()}catch(w){if(D===null)throw Error(I(330));mi(D,w),D=D.nextEffect}while(D!==null);D=r;do try{for(o=e,a=t;D!==null;){var g=D.effectTag;if(g&16&&Zn(D.stateNode,""),g&128){var M=D.alternate;if(M!==null){var S=M.ref;S!==null&&(typeof S=="function"?S(null):S.current=null)}}switch(g&1038){case 2:fd(D),D.effectTag&=-3;break;case 6:fd(D),D.effectTag&=-3,zo(D.alternate,D);break;case 1024:D.effectTag&=-1025;break;case 1028:D.effectTag&=-1025,zo(D.alternate,D);break;case 4:zo(D.alternate,D);break;case 8:u=D,Hf(o,u,a),Wf(u)}D=D.nextEffect}}catch(w){if(D===null)throw Error(I(330));mi(D,w),D=D.nextEffect}while(D!==null);if(S=Ao,M=zc(),g=S.focusedElem,a=S.selectionRange,M!==g&&g&&g.ownerDocument&&Kp(g.ownerDocument.documentElement,g)){for(a!==null&&Sa(g)&&(M=a.start,S=a.end,S===void 0&&(S=M),"selectionStart"in g?(g.selectionStart=M,g.selectionEnd=Math.min(S,g.value.length)):(S=(M=g.ownerDocument||document)&&M.defaultView||window,S.getSelection&&(S=S.getSelection(),u=g.textContent.length,o=Math.min(a.start,u),a=a.end===void 0?o:Math.min(a.end,u),!S.extend&&o>a&&(u=a,a=o,o=u),u=Dc(g,o),d=Dc(g,a),u&&d&&(S.rangeCount!==1||S.anchorNode!==u.node||S.anchorOffset!==u.offset||S.focusNode!==d.node||S.focusOffset!==d.offset)&&(M=M.createRange(),M.setStart(u.node,u.offset),S.removeAllRanges(),o>a?(S.addRange(M),S.extend(d.node,d.offset)):(M.setEnd(d.node,d.offset),S.addRange(M)))))),M=[],S=g;S=S.parentNode;)S.nodeType===1&&M.push({element:S,left:S.scrollLeft,top:S.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<M.length;g++)S=M[g],S.element.scrollLeft=S.left,S.element.scrollTop=S.top}Fr=!!bo,Ao=bo=null,e.current=i,D=r;do try{for(g=e;D!==null;){var E=D.effectTag;if(E&36&&pM(g,D.alternate,D),E&128){M=void 0;var k=D.ref;if(k!==null){var N=D.stateNode;switch(D.tag){case 5:M=N;break;default:M=N}typeof k=="function"?k(M):k.current=M}}D=D.nextEffect}}catch(w){if(D===null)throw Error(I(330));mi(D,w),D=D.nextEffect}while(D!==null);D=null,nM(),R=s}else e.current=i;if(zs)zs=!1,Rn=e,Cn=t;else for(D=r;D!==null;)t=D.nextEffect,D.nextEffect=null,D=t;if(t=e.firstPendingTime,t===0&&(Qt=null),t===1073741823?e===$a?_n++:(_n=0,$a=e):_n=0,typeof Za=="function"&&Za(i.stateNode,n),Ue(e),Ds)throw Ds=!1,e=Ua,Ua=null,e;return(R&gu)!==ge||wt(),null}function xM(){for(;D!==null;){var e=D.effectTag;(e&256)!==0&&hM(D.alternate,D),(e&512)===0||zs||(zs=!0,If(97,function(){return on(),null})),D=D.nextEffect}}function on(){if(Cn!==90){var e=97<Cn?97:Cn;return Cn=90,Xt(e,MM)}}function MM(){if(Rn===null)return!1;var e=Rn;if(Rn=null,(R&(nt|vt))!==ge)throw Error(I(331));var t=R;for(R|=vt,e=e.current.firstEffect;e!==null;){try{var i=e;if((i.effectTag&512)!==0)switch(i.tag){case 0:case 11:case 15:case 22:Uf(5,i),$f(5,i)}}catch(n){if(e===null)throw Error(I(330));mi(e,n)}i=e.nextEffect,e.nextEffect=null,e=i}return R=t,wt(),!0}function md(e,t,i){t=fu(i,t),t=Zf(e,t,1073741823),Zt(e,t),e=to(e,1073741823),e!==null&&Ue(e)}function mi(e,t){if(e.tag===3)md(e,e,t);else for(var i=e.return;i!==null;){if(i.tag===3){md(i,e,t);break}else if(i.tag===1){var n=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Qt===null||!Qt.has(n))){e=fu(t,e),e=Qf(i,e,1073741823),Zt(i,e),i=to(i,1073741823),i!==null&&Ue(i);break}}i=i.return}}function SM(e,t,i){var n=e.pingCache;n!==null&&n.delete(t),Oe===e&&ze===i?fe===qs||fe===Ns&&At===1073741823&&Ze()-vu<Yf?li(e,ze):Ps=!0:sg(e,i)&&(t=e.lastPingedTime,t!==0&&t<i||(e.lastPingedTime=i,Ue(e)))}function IM(e,t){var i=e.stateNode;i!==null&&i.delete(t),t=0,t===0&&(t=mt(),t=gi(t,e,null)),e=to(e,t),e!==null&&Ue(e)}var rg;rg=function(e,t,i){var n=t.expirationTime;if(e!==null){var r=t.pendingProps;if(e.memoizedProps!==r||Pe.current)pt=!0;else{if(n<i){switch(pt=!1,t.tag){case 3:ad(t),ko();break;case 5:if(qc(t),t.mode&4&&i!==1&&r.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:De(t.type)&&Jr(t);break;case 4:Pa(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value,r=t.type._context,ae(ws,r._currentValue),r._currentValue=n;break;case 13:if(t.memoizedState!==null)return n=t.child.childExpirationTime,n!==0&&n>=i?ld(e,t,i):(ae(se,se.current&1),t=Et(e,t,i),t!==null?t.sibling:null);ae(se,se.current&1);break;case 19:if(n=t.childExpirationTime>=i,(e.effectTag&64)!==0){if(n)return cd(e,t,i);t.effectTag|=64}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null),ae(se,se.current),!n)return null}return Et(e,t,i)}pt=!1}}else pt=!1;switch(t.expirationTime=0,t.tag){case 2:if(n=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,r=Ki(t,Se.current),Hi(t,i),r=cu(null,t,n,e,r,i),t.effectTag|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,De(n)){var s=!0;Jr(t)}else s=!1;t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,ru(t);var o=n.getDerivedStateFromProps;typeof o=="function"&&Ms(t,n,o,e),r.updater=Ks,t.stateNode=r,r._reactInternalFiber=t,ka(t,n,e,i),t=La(null,t,n,!0,s,i)}else t.tag=0,Re(null,t,r,i),t=t.child;return t;case 16:e:{if(r=t.elementType,e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,K0(r),r._status!==1)throw r._result;switch(r=r._result,t.type=r,s=t.tag=AM(r),e=et(r,e),s){case 0:t=ja(null,t,r,e,i);break e;case 1:t=od(null,t,r,e,i);break e;case 11:t=rd(null,t,r,e,i);break e;case 14:t=sd(null,t,r,et(r.type,e),n,i);break e}throw Error(I(306,r,""))}return t;case 0:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:et(n,r),ja(e,t,n,r,i);case 1:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:et(n,r),od(e,t,n,r,i);case 3:if(ad(t),n=t.updateQueue,e===null||n===null)throw Error(I(282));if(n=t.pendingProps,r=t.memoizedState,r=r!==null?r.element:null,su(e,t),Xn(t,n,null,i),n=t.memoizedState.element,n===r)ko(),t=Et(e,t,i);else{if((r=t.stateNode.hydrate)&&(Rt=Wi(t.stateNode.containerInfo.firstChild),Tt=t,r=pi=!0),r)for(i=ou(t,null,n,i),t.child=i;i;)i.effectTag=i.effectTag&-3|1024,i=i.sibling;else Re(e,t,n,i),ko();t=t.child}return t;case 5:return qc(t),e===null&&Ba(t),n=t.type,r=t.pendingProps,s=e!==null?e.memoizedProps:null,o=r.children,Ia(n,r)?o=null:s!==null&&Ia(n,s)&&(t.effectTag|=16),Rf(e,t),t.mode&4&&i!==1&&r.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Re(e,t,o,i),t=t.child),t;case 6:return e===null&&Ba(t),null;case 13:return ld(e,t,i);case 4:return Pa(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=qi(t,null,n,i):Re(e,t,n,i),t.child;case 11:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:et(n,r),rd(e,t,n,r,i);case 7:return Re(e,t,t.pendingProps,i),t.child;case 8:return Re(e,t,t.pendingProps.children,i),t.child;case 12:return Re(e,t,t.pendingProps.children,i),t.child;case 10:e:{n=t.type._context,r=t.pendingProps,o=t.memoizedProps,s=r.value;var a=t.type._context;if(ae(ws,a._currentValue),a._currentValue=s,o!==null)if(a=o.value,s=xi(a,s)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(a,s):1073741823)|0,s===0){if(o.children===r.children&&!Pe.current){t=Et(e,t,i);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===n&&(u.observedBits&s)!==0){a.tag===1&&(u=Ht(i,null),u.tag=2,Zt(a,u)),a.expirationTime<i&&(a.expirationTime=i),u=a.alternate,u!==null&&u.expirationTime<i&&(u.expirationTime=i),bf(a.return,i),l.expirationTime<i&&(l.expirationTime=i);break}u=u.next}}else o=a.tag===10&&a.type===t.type?null:a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Re(e,t,r.children,i),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps,n=s.children,Hi(t,i),r=Ge(r,s.unstable_observedBits),n=n(r),t.effectTag|=1,Re(e,t,n,i),t.child;case 14:return r=t.type,s=et(r,t.pendingProps),s=et(r.type,s),sd(e,t,r,s,n,i);case 15:return Lf(e,t,t.type,t.pendingProps,n,i);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:et(n,r),e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,De(n)?(e=!0,Jr(t)):e=!1,Hi(t,i),Tf(t,n,r),ka(t,n,r,i),La(null,t,n,!0,e,i);case 19:return cd(e,t,i)}throw Error(I(156,t.tag))};var Za=null,Qa=null;function CM(e){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var i=t.inject(e);Za=function(n){try{t.onCommitFiberRoot(i,n,void 0,(n.current.effectTag&64)===64)}catch{}},Qa=function(n){try{t.onCommitFiberUnmount(i,n)}catch{}}}catch{}return!0}function bM(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function ft(e,t,i,n){return new bM(e,t,i,n)}function wu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function AM(e){if(typeof e=="function")return wu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_l)return 11;if(e===Vl)return 14}return 2}function Si(e,t){var i=e.alternate;return i===null?(i=ft(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.effectTag=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childExpirationTime=e.childExpirationTime,i.expirationTime=e.expirationTime,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function ns(e,t,i,n,r,s){var o=2;if(n=e,typeof e=="function")wu(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ri:return _t(i.children,r,s,t);case J0:o=8,r|=7;break;case Sp:o=8,r|=1;break;case Hr:return e=ft(12,i,t,r|8),e.elementType=Hr,e.type=Hr,e.expirationTime=s,e;case Zr:return e=ft(13,i,t,r),e.type=Zr,e.elementType=Zr,e.expirationTime=s,e;case la:return e=ft(19,i,t,r),e.elementType=la,e.expirationTime=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ip:o=10;break e;case Cp:o=9;break e;case _l:o=11;break e;case Vl:o=14;break e;case bp:o=16,n=null;break e;case Ap:o=22;break e}throw Error(I(130,e==null?e:typeof e,""))}return t=ft(o,i,t,r),t.elementType=e,t.type=n,t.expirationTime=s,t}function _t(e,t,i,n){return e=ft(7,e,n,t),e.expirationTime=i,e}function Bo(e,t,i){return e=ft(6,e,null,t),e.expirationTime=i,e}function jo(e,t,i){return t=ft(4,e.children!==null?e.children:[],e.key,t),t.expirationTime=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function TM(e,t,i){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function sg(e,t){var i=e.firstSuspendedTime;return e=e.lastSuspendedTime,i!==0&&i>=t&&e<=t}function ui(e,t){var i=e.firstSuspendedTime,n=e.lastSuspendedTime;i<t&&(e.firstSuspendedTime=t),(n>t||i===0)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function og(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var i=e.firstSuspendedTime;i!==0&&(t>=i?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Fa(e,t){var i=e.lastExpiredTime;(i===0||i>t)&&(e.lastExpiredTime=t)}function Bs(e,t,i,n){var r=t.current,s=mt(),o=Ln.suspense;s=gi(s,r,o);e:if(i){i=i._reactInternalFiber;t:{if(bi(i)!==i||i.tag!==1)throw Error(I(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(De(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(I(171))}if(i.tag===1){var l=i.type;if(De(l)){i=gf(i,l,a);break e}}i=a}else i=Yt;return t.context===null?t.context=i:t.pendingContext=i,t=Ht(s,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),Zt(r,t),Ft(r,s),s}function Lo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function vd(e,t){e=e.memoizedState,e!==null&&e.dehydrated!==null&&e.retryTime<t&&(e.retryTime=t)}function yu(e,t){vd(e,t),(e=e.alternate)&&vd(e,t)}function xu(e,t,i){i=i!=null&&i.hydrate===!0;var n=new TM(e,t,i),r=ft(3,null,null,t===2?7:t===1?3:0);n.current=r,r.stateNode=n,ru(r),e[ur]=n.current,i&&t!==0&&rx(e,e.nodeType===9?e:e.ownerDocument),this._internalRoot=n}xu.prototype.render=function(e){Bs(e,this._internalRoot,null,null)};xu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Bs(null,e,null,function(){t[ur]=null})};function gr(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function EM(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var i;i=e.lastChild;)e.removeChild(i);return new xu(e,0,t?{hydrate:!0}:void 0)}function no(e,t,i,n,r){var s=i._reactRootContainer;if(s){var o=s._internalRoot;if(typeof r=="function"){var a=r;r=function(){var u=Lo(o);a.call(u)}}Bs(t,o,e,r)}else{if(s=i._reactRootContainer=EM(i,n),o=s._internalRoot,typeof r=="function"){var l=r;r=function(){var u=Lo(o);l.call(u)}}Kf(function(){Bs(t,o,e,r)})}return Lo(o)}function NM(e,t,i){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Di,key:n==null?null:""+n,children:e,containerInfo:t,implementation:i}}Zp=function(e){if(e.tag===13){var t=qr(mt(),150,100);Ft(e,t),yu(e,t)}};Hl=function(e){e.tag===13&&(Ft(e,3),yu(e,3))};Qp=function(e){if(e.tag===13){var t=mt();t=gi(t,e,null),Ft(e,t),yu(e,t)}};aa=function(e,t,i){switch(t){case"input":if(ca(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var r=Jl(n);if(!r)throw Error(I(90));Ep(n),ca(n,r)}}}break;case"textarea":kp(e,i);break;case"select":t=i.value,t!=null&&$i(e,!!i.multiple,t,!1)}};Dl=Jf;yp=function(e,t,i,n,r){var s=R;R|=4;try{return Xt(98,e.bind(null,t,i,n,r))}finally{R=s,R===ge&&wt()}};zl=function(){(R&(1|nt|vt))===ge&&(mM(),on())};xp=function(e,t){var i=R;R|=2;try{return e(t)}finally{R=i,R===ge&&wt()}};function ag(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gr(t))throw Error(I(200));return NM(e,t,null,i)}var kM={Events:[dr,yi,Jl,mp,oa,Ji,function(e){$l(e,vx)},vp,wp,Gs,Fs,on,{current:!1}]};(function(e){var t=e.findFiberByHostInstance;return CM(Ce({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:it.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Op(i),i===null?null:i.stateNode},findFiberByHostInstance:function(i){return t?t(i):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:cr,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kM;Ye.createPortal=ag;Ye.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternalFiber;if(t===void 0)throw typeof e.render=="function"?Error(I(188)):Error(I(268,Object.keys(e)));return e=Op(t),e=e===null?null:e.stateNode,e};Ye.flushSync=function(e,t){if((R&(nt|vt))!==ge)throw Error(I(187));var i=R;R|=1;try{return Xt(99,e.bind(null,t))}finally{R=i,wt()}};Ye.hydrate=function(e,t,i){if(!gr(t))throw Error(I(200));return no(null,e,t,!0,i)};Ye.render=function(e,t,i){if(!gr(t))throw Error(I(200));return no(null,e,t,!1,i)};Ye.unmountComponentAtNode=function(e){if(!gr(e))throw Error(I(40));return e._reactRootContainer?(Kf(function(){no(null,null,e,!1,function(){e._reactRootContainer=null,e[ur]=null})}),!0):!1};Ye.unstable_batchedUpdates=Jf;Ye.unstable_createPortal=function(e,t){return ag(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Ye.unstable_renderSubtreeIntoContainer=function(e,t,i,n){if(!gr(i))throw Error(I(200));if(e==null||e._reactInternalFiber===void 0)throw Error(I(38));return no(e,t,i,!1,n)};Ye.version="16.14.0";function lg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lg)}catch(e){console.error(e)}}lg(),cp.exports=Ye;var wd=cp.exports,PM=Object.defineProperty,DM=Object.defineProperties,zM=Object.getOwnPropertyDescriptors,yd=Object.getOwnPropertySymbols,BM=Object.prototype.hasOwnProperty,jM=Object.prototype.propertyIsEnumerable,xd=(e,t,i)=>t in e?PM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Ve=(e,t)=>{for(var i in t||(t={}))BM.call(t,i)&&xd(e,i,t[i]);if(yd)for(var i of yd(t))jM.call(t,i)&&xd(e,i,t[i]);return e};const ug={src:"",currentTime:0,hostTime:0,muted:!1,paused:!0,volume:1},cg={currentTimeMaxError:1,syncInterval:1e3,retryInterval:15e3,verbose:!1,log:console.log.bind(console)};let It=cg;function dg(e){It=Ve(Ve({},cg),e)}function Rr(e,t){if(e.paused)return e.currentTime;const i=function(n){if(n.player)return n.player.beginTimestamp+n.player.progressTime;if(n.room)return n.room.calibrationTimestamp}(t);return i?e.currentTime+(i-e.hostTime)/1e3:e.currentTime}const LM=navigator.userAgent.includes("Safari"),RM=[".aac",".mid",".midi",".mp3",".ogg",".oga",".wav",".weba"];var _M=typeof global=="object"&&global&&global.Object===Object&&global,VM=typeof self=="object"&&self&&self.Object===Object&&self,hg=_M||VM||Function("return this")(),js=hg.Symbol,pg=Object.prototype,OM=pg.hasOwnProperty,UM=pg.toString,wn=js?js.toStringTag:void 0,$M=Object.prototype.toString,Md=js?js.toStringTag:void 0;function WM(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Md&&Md in Object(e)?function(t){var i=OM.call(t,wn),n=t[wn];try{t[wn]=void 0;var r=!0}catch{}var s=UM.call(t);return r&&(i?t[wn]=n:delete t[wn]),s}(e):function(t){return $M.call(t)}(e)}var HM=/\s/,ZM=/^\s+/;function QM(e){return e&&e.slice(0,function(t){for(var i=t.length;i--&&HM.test(t.charAt(i)););return i}(e)+1).replace(ZM,"")}function Ga(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var FM=/^[-+]0x[0-9a-f]+$/i,GM=/^0b[01]+$/i,YM=/^0o[0-7]+$/i,XM=parseInt;function Sd(e){if(typeof e=="number")return e;if(function(n){return typeof n=="symbol"||function(r){return r!=null&&typeof r=="object"}(n)&&WM(n)=="[object Symbol]"}(e))return NaN;if(Ga(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ga(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=QM(e);var i=GM.test(e);return i||YM.test(e)?XM(e.slice(2),i?2:8):FM.test(e)?NaN:+e}var Ro=function(){return hg.Date.now()},JM=Math.max,KM=Math.min;function _r(e,t,i){var n,r,s,o,a,l,u=0,d=!1,c=!1,m=!0;if(typeof e!="function")throw new TypeError("Expected a function");function v(g){var M=n,S=r;return n=r=void 0,u=g,o=e.apply(S,M)}function y(g){return u=g,a=setTimeout(h,t),d?v(g):o}function x(g){var M=g-l;return l===void 0||M>=t||M<0||c&&g-u>=s}function h(){var g=Ro();if(x(g))return p(g);a=setTimeout(h,function(M){var S=t-(M-l);return c?KM(S,s-(M-u)):S}(g))}function p(g){return a=void 0,m&&n?v(g):(n=r=void 0,o)}function f(){var g=Ro(),M=x(g);if(n=arguments,r=this,l=g,M){if(a===void 0)return y(l);if(c)return clearTimeout(a),a=setTimeout(h,t),v(l)}return a===void 0&&(a=setTimeout(h,t)),o}return t=Sd(t)||0,Ga(i)&&(d=!!i.leading,s=(c="maxWait"in i)?JM(Sd(i.maxWait)||0,t):s,m="trailing"in i?!!i.trailing:m),f.cancel=function(){a!==void 0&&clearTimeout(a),u=0,n=l=r=a=void 0},f.flush=function(){return a===void 0?o:p(Ro())},f}class Id extends Ci.exports.Component{constructor(t){super(t),this.seeking=!1,this.mobileSeeking=!1,this.track=null,this.hoverTime=null,this.offset=0,this.secondsPrefix="00:00:",this.minutesPrefix="00:",this.seekPause=!1,this.handleTouchSeeking=i=>{let n=0;for(let r=0;r<i.changedTouches.length;r++)n=i.changedTouches[r].pageX;n=n<0?0:n,this.mobileSeeking&&this.changeCurrentTimePosition(n)},this.handleSeeking=i=>{this.seeking&&this.changeCurrentTimePosition(i.pageX)},this.setTrackWidthState=()=>{this.track&&this.setState({trackWidth:this.track.offsetWidth})},this.handleTrackHover=(i,n)=>{if(this.track){const r=this.props.scale||1;let s;s=i?0:(n.pageX-this.track.getBoundingClientRect().left)/r,this.setState({seekHoverPosition:s,trackWidth:this.track.offsetWidth})}},this.mouseSeekingHandler=i=>{this.setSeeking(!1,i),this.onMouseUp()},this.setSeeking=(i,n)=>{n.preventDefault(),this.handleSeeking(n),this.seeking=i,this.setState({seekHoverPosition:i?this.state.seekHoverPosition:0})},this.mobileTouchSeekingHandler=()=>{this.setMobileSeeking(!1)},this.setMobileSeeking=i=>{this.mobileSeeking=i,this.setState({seekHoverPosition:i?this.state.seekHoverPosition:0})},this.renderBufferProgress=()=>{if(this.props.buffered){const i=Ve(Ve({},this.getPositionStyle(this.props.buffered)),this.props.bufferColor&&{backgroundColor:this.props.bufferColor});return H.createElement("div",{className:"buffered",style:i})}return null},this.renderProgress=()=>{const i=Ve(Ve({},this.getPositionStyle(this.props.current)),this.props.sliderColor&&{backgroundColor:this.props.sliderColor});return H.createElement("div",{className:"connect",style:i})},this.renderHoverProgress=()=>{const i=Ve(Ve({},this.getSeekHoverPosition()),this.props.sliderHoverColor&&{backgroundColor:this.props.sliderHoverColor});return H.createElement("div",{className:"seek-hover",style:i})},this.renderThumb=()=>H.createElement("div",{className:this.isThumbActive()?"thumb active":"thumb",style:this.getThumbHandlerPosition()},H.createElement("div",{style:{backgroundColor:this.props.thumbColor},className:"handler"})),this.onMouseDown=i=>{var n,r;this.props.pause&&!this.props.paused&&(this.props.pause(),this.seekPause=!0),this.setSeeking(!0,i),(r=(n=this.props).onSeekStart)==null||r.call(n)},this.onMouseUp=()=>{var i,n;this.props.play&&this.seekPause&&(this.props.play(),this.seekPause=!1),(n=(i=this.props).onSeekEnd)==null||n.call(i)},this.props.secondsPrefix&&(this.secondsPrefix=this.props.secondsPrefix),this.props.minutesPrefix&&(this.minutesPrefix=this.props.minutesPrefix),this.state={ready:!1,trackWidth:0,seekHoverPosition:0}}componentDidMount(){this.setTrackWidthState(),window.addEventListener("resize",this.setTrackWidthState),window.addEventListener("mousemove",this.handleSeeking),window.addEventListener("mouseup",this.mouseSeekingHandler),window.addEventListener("touchmove",this.handleTouchSeeking),window.addEventListener("touchend",this.mobileTouchSeekingHandler)}componentWillUnmount(){window.removeEventListener("resize",this.setTrackWidthState),window.removeEventListener("mousemove",this.handleSeeking),window.removeEventListener("mouseup",this.mouseSeekingHandler),window.removeEventListener("touchmove",this.handleTouchSeeking),window.removeEventListener("touchend",this.mobileTouchSeekingHandler)}changeCurrentTimePosition(t){if(this.track){const i=this.props.scale||1;let n=(t-this.track.getBoundingClientRect().left)/i;n=Math.min(this.state.trackWidth,Math.max(0,n)),this.setState({seekHoverPosition:n});const r=+(n/this.state.trackWidth*this.props.total).toFixed(0);this.props.onChange(r)}}getPositionStyle(t){return{transform:`scaleX(${100*t/this.props.total/100})`}}getThumbHandlerPosition(){return{transform:`translateX(${this.state.trackWidth/(this.props.total/this.props.current)}px)`}}getSeekHoverPosition(){return{transform:`scaleX(${100*this.state.seekHoverPosition/this.state.trackWidth/100})`}}getHoverTimePosition(){let t=0;return this.hoverTime&&(t=this.state.seekHoverPosition-this.hoverTime.offsetWidth/2,this.props.limitTimeTooltipBySides&&(t<0?t=0:t+this.hoverTime.offsetWidth>this.state.trackWidth&&(t=this.state.trackWidth-this.hoverTime.offsetWidth))),{transform:`translateX(${t}px)`}}secondsToTime(t){t=Math.round(t+this.offset);const i=Math.floor(t/3600),n=t%3600,r=Math.floor(n/60),s=Math.ceil(n%60);return{hh:i.toString(),mm:r<10?"0"+r:r.toString(),ss:s<10?"0"+s:s.toString()}}getHoverTime(){const t=100*this.state.seekHoverPosition/this.state.trackWidth,i=Math.floor(+t*(this.props.total/100)),n=this.secondsToTime(i);return this.props.total+this.offset<60?this.secondsPrefix+n.ss:this.props.total+this.offset<3600?this.minutesPrefix+n.mm+":"+n.ss:n.hh+":"+n.mm+":"+n.ss}isThumbActive(){return this.state.seekHoverPosition>0||this.seeking}drawHoverTime(){return this.props.hideHoverTime?null:H.createElement("div",{className:this.isThumbActive()?"hover-time active":"hover-time",style:this.getHoverTimePosition(),ref:t=>this.hoverTime=t},this.getHoverTime())}render(){return H.createElement("div",{className:"seek-slider"},H.createElement("div",{className:"track",ref:t=>this.track=t,onMouseMove:t=>this.handleTrackHover(!1,t),onMouseLeave:t=>this.handleTrackHover(!0,t),onMouseDown:this.onMouseDown,onTouchStart:t=>{this.setMobileSeeking(!0),this.onMouseDown(t)},onMouseUp:this.onMouseUp,onTouchEnd:this.onMouseUp},H.createElement("div",{className:"main"},this.renderBufferProgress(),this.renderHoverProgress(),this.renderProgress())),this.drawHoverTime(),this.renderThumb())}}class qM extends Ci.exports.Component{constructor(t){super(t),this.stageVolume=0,this.updateVolumeTimer=0,this.onVolumeSeeking=!1,this.onClickOperationButton=()=>{const{paused:i}=this.props;i?this.props.play():this.props.pause()},this.operationButton=()=>{const{paused:i}=this.props;return i?H.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNOCA1LjE0djE0bDExLTdsLTExLTd6IiBmaWxsPSIjZmZmIj48L3BhdGg+PC9zdmc+Cg=="}):H.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTQgMTloNFY1aC00TTYgMTloNFY1SDZ2MTR6IiBmaWxsPSIjZmZmIj48L3BhdGg+PC9zdmc+Cg=="})},this.operationVolumeButton=()=>this.props.volume>.9?H.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTQgMy4yM3YyLjA2YzIuODkuODYgNSAzLjU0IDUgNi43MXMtMi4xMSA1Ljg0LTUgNi43djIuMDdjNC0uOTEgNy00LjQ5IDctOC43N2MwLTQuMjgtMy03Ljg2LTctOC43N00xNi41IDEyYzAtMS43Ny0xLTMuMjktMi41LTQuMDNWMTZjMS41LS43MSAyLjUtMi4yNCAyLjUtNE0zIDl2Nmg0bDUgNVY0TDcgOUgzeiIgZmlsbD0iI2ZmZiI+PC9wYXRoPjwvc3ZnPgo="}):this.props.volume===0?H.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNNyA5djZoNGw1IDVWNGwtNSA1SDd6IiBmaWxsPSIjZmZmIj48L3BhdGg+PC9zdmc+Cg=="}):H.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBhcmlhLWhpZGRlbj0idHJ1ZSIgcm9sZT0iaW1nIiBjbGFzcz0iaWNvbmlmeSBpY29uaWZ5LS1tZGkiIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQgbWVldCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNNSA5djZoNGw1IDVWNEw5IDltOS41IDNjMC0xLjc3LTEtMy4yOS0yLjUtNC4wM1YxNmMxLjUtLjcxIDIuNS0yLjI0IDIuNS00eiIgZmlsbD0iI2ZmZiI+PC9wYXRoPjwvc3ZnPgo="}),this.handleClickVolume=()=>{this.props.volume===0?this.stageVolume!==0?this.props.setVolume(this.stageVolume):this.props.setVolume(1):(this.stageVolume=this.props.volume,this.props.setVolume(0))},this.onChange=i=>{this.setState({currentTime:i}),i&&this.changeTime(i)},this.changeTime=_r(i=>{this.props.setCurrentTime(i)},50),this.onVolumeChange=i=>{this.changeVolume(i),this.setState({seekVolume:i/100})},this.changeVolume=_r(i=>{this.props.setVolume(i/100)},50),this.onVolumeSeekStart=()=>{this.onVolumeSeeking=!0},this.onVolumeSeekEnd=_r(()=>{this.onVolumeSeeking=!1},500),this.onProgressSeekStart=()=>this.setState({isPlayerSeeking:!0}),this.onProgressSeekEnd=_r(()=>{this.setState({isPlayerSeeking:!1})},500),this.state={isPlayerSeeking:!1,isVolumeHover:!1,seekVolume:1,visible:!0,currentTime:0},this.stageVolume=t.volume}componentDidMount(){this.updateVolumeTimer=setInterval(()=>{this.onVolumeSeeking||this.setState({seekVolume:this.props.volume}),this.state.isPlayerSeeking||this.setState({currentTime:this.props.currentTime})},100)}componentWillUnmount(){this.updateVolumeTimer&&clearInterval(this.updateVolumeTimer)}render(){const{duration:t,currentTime:i}=this.props;return H.createElement("div",{className:"player-controller",style:{opacity:this.props.visible?"1":"0"}},H.createElement("div",{className:"player-controller-progress"},H.createElement(Id,{total:t,current:this.state.currentTime,onChange:this.onChange,buffered:this.props.buffered,bufferColor:"rgba(255,255,255,0.3)",hideHoverTime:!0,limitTimeTooltipBySides:!0,onSeekStart:this.onProgressSeekStart,onSeekEnd:this.onProgressSeekEnd,play:this.props.play,pause:this.props.pause,paused:this.props.paused,scale:this.props.scale})),H.createElement("div",{className:"player-controller-actions"},H.createElement("div",{className:"player-controller-actions-left"},H.createElement("div",{onClick:this.onClickOperationButton,className:"player-controller-play"},this.operationButton()),H.createElement("div",{className:"player-volume-box",onMouseEnter:()=>this.setState({isVolumeHover:!0}),onMouseLeave:()=>this.setState({isVolumeHover:!1})},H.createElement("div",{onClick:this.handleClickVolume,className:"player-volume"},this.operationVolumeButton()),H.createElement("div",{className:"player-volume-slider"},H.createElement(Id,{total:100,current:100*this.state.seekVolume,onChange:this.onVolumeChange,onSeekStart:this.onVolumeSeekStart,onSeekEnd:this.onVolumeSeekEnd,scale:this.props.scale,limitTimeTooltipBySides:!0,hideHoverTime:!0})))),H.createElement("div",{className:"player-mid-box-time"},Cd(Math.floor(i/1e3))," /"," ",Cd(Math.floor(t/1e3)))))}}function Cd(e){const t=e%60,i=(e-t)/60;if(i>=60){const n=i%60;return`${yn((i-n)/60)}:${yn(n)}:${yn(t)}`}return`${yn(i)}:${yn(t)}`}function yn(e){return e<=9?`0${e}`:`${e}`}let eS=99999;var Ya,Ti;(Ti=Ya||(Ya={}))[Ti.Idle=0]="Idle",Ti[Ti.Playing=1]="Playing",Ti[Ti.Paused=2]="Paused";let Ie={};function de(e,...t){It.verbose&&console.log(`[RTCEffect] ${e}`,...t)}function tS(e,t,i){function n(s){Ie[s].playState===0?(e.playEffect(s,i,0,1,0,100,!1,0).then(()=>{de(">>> Play Success",{playingId:s})}),Ie[s].playState=1):de(">>> Skip Play",{playingId:s,state:Ie[s].playState})}function r(s){Ie[s].playState=0,Ie[s].previousVideoJSAdvance=0,Ie[s].previousSeekTargetTime=0,Ie[s].previousBeginSeekTime=0}t.one("ready",()=>{var s;const o=((s=t==null?void 0:t.tagAttributes)==null?void 0:s.src)||"";o.endsWith("mp3")||o.endsWith("wav")||o.endsWith("m4a")||(de(">>> Mute js player",{src:o}),t.muted(!0),t.muted=l=>!1);const a=function(){const l=eS--,u={playState:Ya.Idle,previousVideoJSAdvance:0,previousSeekTargetTime:0,previousBeginSeekTime:0};return Ie[l]=u,l}();de(">>> Setup",{playingId:a,src:o}),e.addListener("error",l=>{de(">>> Error",{soundId:l}),r(l)}),e.addListener("effectFinished",l=>{de(">>> Finished",{soundId:l}),r(l)}),t.on("play",()=>{switch(Ie[a].playState){case 0:de(">>> Start play",{playingId:a}),n(a);break;case 2:de(">>> Resume play",{playingId:a}),e.resumeEffect(a),Ie[a].playState=1}}),t.on("pause",()=>{const l=Ie[a].playState;switch(l){case 1:de(">>> Pause play",{playingId:a}),e.pauseEffect(a),Ie[a].playState=2;break;default:de(">>> Skip Pause",{playingId:a,currenState:l})}}),t.on("timeupdate",()=>{e.getEffectCurrentPosition(a).then(l=>{const u=Ie[a],d=l/1e3,c=t.currentTime(),m=u.previousSeekTargetTime!==0&&u.previousBeginSeekTime!==0;if(de(`>>> EffectSecond rtc: ${d} js: ${c} seeking: ${m}`,{playingId:a}),u.playState==0)return void(t.paused()||(de(">>> Play effect due to time update.",{playingId:a}),n(a)));if(m&&d<u.previousSeekTargetTime)return;if(u.playState!==1)return void de(">>> Skip timupdate",{playingId:a,state:u.playState,jsTime:t.currentTime(),rtcEffectTime:d});function v(x,h){e.setEffectPosition(h,1e3*x),u.previousBeginSeekTime=Date.now()/1e3,u.previousSeekTargetTime=x}const y=u.previousBeginSeekTime;if(l>0){const x=c-d,h=Math.abs(x),p=.5;if(h>p)if(m){const f=u.previousSeekTargetTime-d,g=Date.now()/1e3-y,M=g+(x>0?x:0),S=c+M;v(S,a),de(">>> Start seeking after seeking lag",{jsPlayerTime:c,rtcEffectTime:d,jsPlayerTimerAdvance:x,lastSeekingCost:g,estimatedRTCLag:M,targetRTCSeekTime:S,previousBeginSeekTime:y,timeElapse:f})}else if(h>10)v(c,a),de(">>> DirectSeek",{time:c,rtcEffectTime:d,jsPlayerTimerAdvance:x});else{const f=u.previousVideoJSAdvance,g=0,M=c+g;u.previousVideoJSAdvance=g,v(M,a),de(">>> Start seeking with lag",{jsPlayerTime:c,rtcEffectTime:d,jsPlayerTimerAdvance:x,previousAdvance:f,estimatedRTCLag:g,targetRTCSeekTime:M})}else m&&(de(">>> SeekingFinish no lag",{jsPlayerTime:c,rtcEffectTime:d,jsPlayerTimerAdvance:x,previousBeginSeekTime:y,rtcLagTolerance:p}),u.previousBeginSeekTime=0,u.previousSeekTargetTime=0)}})}),t.on("dispose",()=>{Ie[a].playState&&(e.stopEffect(a),delete Ie[a],de(">>> Dispose",{playingId:a}))})})}class iS extends Ci.exports.Component{constructor(){super(...arguments),this.putAttributes=t=>{const{context:i}=this.props,n=i.getAttributes()||{};for(const r in t)n[r]!==t[r]&&i.updateAttributes([r],t[r])}}render(){const{context:t}=this.props,i=t.getRoom(),n=i?void 0:t.getDisplayer(),r=this.putAttributes;return H.createElement(nS,{room:i,player:n,context:t,plugin:{putAttributes:r}})}}class nS extends Ci.exports.Component{constructor(t){super(t),this.alertMask=null,this.container=H.createRef(),this.controllerHiddenTimer=0,this.syncPlayerTimer=0,this.retryCount=0,this.decreaseRetryTimer=0,this.noSoundSyncCount=0,this.showController=()=>{this.setState({controllerVisible:!0}),this.debounceHidingController()},this.play=()=>{var i;const n=(i=this.props.room)==null?void 0:i.calibrationTimestamp;this.debug(">>> play",{paused:!1,hostTime:n}),this.isEnabled()&&this.props.plugin.putAttributes({paused:!1,hostTime:n})},this.pause=()=>{const i=Rr(this.getAttributes(),this.props);this.debug(">>> pause",{paused:!0,currentTime:i}),this.isEnabled()&&this.props.plugin.putAttributes({paused:!0,currentTime:i})},this.setVolume=i=>{this.debug(">>> volume",{volume:i}),this.isEnabled()&&this.props.plugin.putAttributes({volume:i}),this.isEnabled()&&this.props.plugin.putAttributes({volume:i,muted:i===0})},this.setCurrentTime=i=>{var n;const r=(n=this.props.room)==null?void 0:n.calibrationTimestamp;this.debug(">>> seek",{currentTime:i/1e3,hostTime:r}),this.isEnabled()&&this.props.plugin.putAttributes({currentTime:i/1e3,hostTime:r})},this.resetPlayer=()=>{var i;(i=this.player)==null||i.autoplay(!1),this.state.NoSound||(this.debug(">>> ended",{paused:!0,currentTime:0}),this.isEnabled()&&this.props.plugin.putAttributes({paused:!0,currentTime:0}))},this.syncPlayerWithAttributes=()=>{var i;const n=this.getAttributes();if(!n)return;const r=this.player;if(!r||this.state.NoSound&&(this.noSoundSyncCount+=1)%8!=0)return;r.paused()!==n.paused&&(this.debug("<<< paused -> %o",n.paused),n.paused?r.pause():(i=r.play())==null||i.catch(this.catchPlayFail)),r.muted()!==n.muted&&(this.debug("<<< muted -> %o",n.muted),r.muted(n.muted)),r.volume()!==n.volume&&(this.debug("<<< volume -> %o",n.volume),r.volume(n.volume));const s=Rr(n,this.props);let o=It.currentTimeMaxError;this.state.NoSound&&(o*=3),s>r.duration()?this.resetPlayer():Math.abs(r.currentTime()-s)>o&&(this.debug("<<< currentTime -> %o",s),r.currentTime(s))},this.debounceHidingController=()=>{this.controllerHiddenTimer&&(clearTimeout(this.controllerHiddenTimer),this.controllerHiddenTimer=0),this.controllerHiddenTimer=setTimeout(()=>{this.setState({controllerVisible:!1}),this.controllerHiddenTimer=0},3e3)},this.decreaseRetryCount=()=>{this.player&&this.retryCount>0&&(this.retryCount=this.retryCount-1)},this.catchPlayFail=i=>{var n,r;const s=String(i);if(LM&&s.includes("NotAllowedError")||s.includes("interact"))(n=this.player)==null||n.autoplay("any"),this.setState({NoSound:!0});else{const o=(r=this.player)==null?void 0:r.error();o&&(this.retryCount<=3?(this.initPlayer(),this.retryCount=this.retryCount+1):(this.debug("catch videojs media error",o),this.setState({MediaError:!0}))),this.debug("catch error",i)}},this.fixPlayFail=()=>{this.debug("try to fix play state"),this.setState({NoSound:!1});const{muted:i,volume:n}=this.getAttributes();this.player&&(this.player.muted(i),this.player.volume(n))},this.initPlayer=async()=>{var i;(i=this.player)==null||i.dispose(),this.player=void 0,this.debug("creating elements ...");const{type:n,src:r,poster:s}=this.getAttributes(),o=document.createElement("div");o.setAttribute("data-vjs-player","");const a=document.createElement("video");a.className="video-js",s&&(a.poster=s),a.setAttribute("playsInline",""),a.setAttribute("webkit-playsinline","");const l=document.createElement("source");new URL(r).pathname.endsWith(".m3u8")?l.type="application/x-mpegURL":a.src=r,l.src=r,n&&(l.type=n),a.appendChild(l),o.appendChild(a),this.container.current.appendChild(o),await new Promise(c=>(window.requestAnimationFrame||window.setTimeout)(c)),this.debug("initializing videojs() ...");const u=Su.default(a);this.player=u,window.player=u,u.one("loadedmetadata",this.gracefullyUpdate);const d=window.__mediaPlayerAudioEffectClient;d!==void 0&&tS(d,u,r),u.on("ready",()=>{var c;(c=It.onPlayer)==null||c.call(It,u),u.on("timeupdate",this.gracefullyUpdate),u.on("volumechange",this.gracefullyUpdate),u.on("seeked",this.gracefullyUpdate),u.on("play",this.gracefullyUpdate),u.on("pause",this.gracefullyUpdate),u.on("ended",this.resetPlayer)}),u.on("error",this.catchPlayFail),this.setState({MediaError:!1})},this.gracefullyUpdate=()=>this.setState({updater:!this.state.updater}),this.setupAlert=i=>{i&&(i.addEventListener("touchstart",this.fixPlayFail),i.addEventListener("click",this.fixPlayFail)),this.alertMask=i},this.setupReload=i=>{i&&(i.addEventListener("touchstart",this.initPlayer),i.addEventListener("click",this.initPlayer))},this.state={NoSound:!1,MediaError:!1,updater:!1,controllerVisible:!1},t.room&&function(i){if(!i.calibrationTimestamp)throw new Error("@netless/app-media-player@0.1.0-alpha.5 requires white-web-sdk@^2.13.8 to work properly.")}(t.room)}getAttributes(){const{context:t}=this.props;let i=t.getAttributes();if(i){if(i=Ve(Ve({},ug),i),this.player){let r=Rr(i,this.props),s=this.player.duration();!i.paused&&r>s&&(n=Ve({},i),i=DM(n,zM({currentTime:0,paused:!0})),this.resetPlayer())}var n;return i}}isShowingPoster(){const t=this.getAttributes();return!(t!=null&&t.src)||RM.some(i=>t.src.endsWith(i))}render(){var t,i;if(!this.props.room&&!this.props.player)return null;const n=this.getAttributes();if(!n)return null;const r=1e3*(((t=this.player)==null?void 0:t.duration())||1e3),s=((i=this.player)==null?void 0:i.bufferedPercent())||0;return H.createElement("div",{className:this.isEnabled()?"vjs-p":"vjs-p disabled",onMouseEnter:this.showController,onMouseMove:this.showController},H.createElement("div",{className:"video-js-plugin-player",ref:this.container}),this.isShowingPoster()&&H.createElement("div",{className:"video-js-plugin-poster"},n.poster&&H.createElement("img",{src:n.poster,alt:"",draggable:!1})),H.createElement(qM,{duration:r,volume:n.volume,setVolume:this.setVolume,paused:n.paused,play:this.play,pause:this.pause,currentTime:1e3*Rr(n,this.props),setCurrentTime:this.setCurrentTime,buffered:r*s,visible:!0}),this.state.NoSound&&H.createElement("div",{ref:this.setupAlert,className:"videojs-plugin-muted-alert"}),this.state.MediaError&&H.createElement("div",{className:"videojs-plugin-recovery-mode"},H.createElement("button",{ref:this.setupReload},"Reload Player")))}debug(t,...i){It.verbose&&It.log(`[MediaPlayer] ${t}`,...i)}componentDidMount(){this.debug("app version =","0.1.0-alpha.5"),this.debug("video.js version =",Su.default.VERSION),this.initPlayer(),this.props.context.emitter.on("attributesUpdate",this.syncPlayerWithAttributes),this.syncPlayerTimer=setInterval(this.syncPlayerWithAttributes,It.syncInterval),this.decreaseRetryTimer=setInterval(this.decreaseRetryCount,It.retryInterval)}componentWillUnmount(){var t;this.debug("unmount"),this.props.context.emitter.off("attributesUpdate",this.syncPlayerWithAttributes),(t=this.player)==null||t.dispose(),clearInterval(this.syncPlayerTimer),clearInterval(this.decreaseRetryTimer)}isEnabled(){return this.props.context.getIsWritable()}}const Xa={kind:"MediaPlayer",setup(e){let t=e.getAttributes();if(!t||!t.src)return e.emitter.emit("destroy",{error:new Error("[MediaPlayer]: Missing 'attributes'.'src'.")});t=Ve(Ve({},ug),t);const i=e.getBox();i.mountStyles(`.vjs-p{display:flex;flex-grow:1}.vjs-p *{pointer-events:auto}.vjs-p.disabled *{pointer-events:none}.vjs-p .video-js-plugin-poster{position:absolute;top:0;left:0;right:0;bottom:0;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgQAAACACAYAAAB0vHFxAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAACBKADAAQAAAABAAAAgAAAAACE3oPTAAAKXUlEQVR4Ae3dYW4ktxEG0LW9FwkC2McycokAOUGAXMLwtQwYvomdP4akHUnNnm6SVUU+/xqpe8ji+yiDWz3a/e7L5v/98se//3pL8K9//O+7t19Hv85eX7RP9vnllz2h4/rkd+wz+ir/0cLfjv/9t1/6igABAgQIENhRwIFgx9StmQABAgQIPAg4EDyA+JIAAQIECOwo8HXHRVvzPIHRzwBHjz9PKudMo31Hj59TdZ2qsueXvb5sO0GHIFsi6iFAgAABAgECOgQB6KbsJ5Dtt0L6rWyPkeRXO+fs+WWvL1v6OgTZElEPAQIECBAIENAhCEA3ZT8Bzwj7WUaMJL8I9X5zZs8ve339kugzkg5BH0ejECBAgACB0gIOBKXjUzwBAgQIEOgj4EDQx9EoBAgQIECgtIADQen4FE+AAAECBPoIOBD0cTQKAQIECBAoLeC3DErHp/iWgE8Zt4RyX5df7nxa1Y3Ob/T4rfWtdl2HYLVErYcAAQIECFwQWL5DsPoJcvX1XdjTpd4iv1JxvStWfu9IfCORwLP7U4cgUXhKIUCAAAECUQIOBFHy5iVAgAABAokEHAgShaEUAgQIECAQJXD7MwTPPqOIWujVeUevb/T4V9ftfecE5HfOKetd8suajLoiBHQIItTNSYAAAQIEkgnc7hAkW0/3ckb/e9qjx+8OYsBvBOT3DUe5L+RXLjIFDxTQIRiIa2gCBAgQIFBFoNkh2P0Z2+j1jx4/+0asvv7q9d/dH9XXX73+3fO7u/7W+3fbHzoErR3hOgECBAgQ2ECg2SHwjG2DXRC4xOj9tdufAHpHLb/eonPHk9+xd7TPcXX9r+oQ9Dc1IgECBAgQKCfgQFAuMgUTIECAAIH+Ag4E/U2NSIAAAQIEygk0P0MQvaLsz3hb9bWu840WOJ5ffsc+2a/KL3tC6jsSmL1/dQiO0nCNAAECBAhsItDsEMw+oTzrHl1f61OorevPrvfZ+6N9WvVmr09+xwnKr7ZP9vyOdcdfze7Tuz4dgvF7ygwECBAgQCC9QLNDkH0F0X+C45NdoHZ99rf8aguofqRA7/8/6BCMTMvYBAgQIECgiED5DkHvZyhFcjtdJp/TVClvlF/KWE4XJb/TVG68INB7f+kQXAjBWwgQIECAwGoCDgSrJWo9BAgQIEDggoADwQU0byFAgAABAqsJfO39DGI1IOuJFbA/Y/3vzi6/u4Kx7189v7vru/v+2HTfz65D8N7EdwgQIECAwHYCw3/LYLUT1HY7pLFg+TaAkl+WX/KAGuXJrwEUfLlaPjoEwRvG9AQIECBAIIPA8A5B779JKQOaGl4F5PtqUfGV/Cqm9lqz/F4tMr6qlo8OQcZdpCYCBAgQIDBZYHiHoNozlMn+5aeTb+0I5Se/2gK5q6/286VDkHs/qY4AAQIECEwRcCCYwmwSAgQIECCQW8CBIHc+qiNAgAABAlMEhn+GYMoqTEKAAAEC7wSqPcN+twDfmCqgQzCV22QECBAgQCCnQHiHoPoJtlV/63rObfFaVfX6X1dy7VX19Vev/1pqr++qvv7q9b8m4dVHAtny1SH4KCXfI0CAAAECmwmEdwiq/U1Om+2PL/Kpnbj85FdbYO3qs/186hCsvd+sjgABAgQInBJwIDjF5CYCBAgQILC2gAPB2vlaHQECBAgQOCUQ/hmCbJ+yPKW20U3yqR22/ORXW2Dt6qN/Ph/n1yFYe79ZHQECBAgQOCXgQHCKyU0ECBAgQGBtAQeCtfO1OgIECBAgcErAgeAUk5sIECBAgMDaAg4Ea+drdQQIECBA4JTA1+///OGnoztd52N/fC7g58PPx+e748sX+8P+qLQ/dAiO0nKNAAECBAhsIuBAsEnQlkmAAAECBI4EHAiOdFwjQIAAAQKbCDgQbBK0ZRIgQIAAgSMBB4IjHdcIECBAgMAmAuH/lsHP//zvb5tYl1ymfErG9lK0/F4oSr6QX8nYThcdne/j/DoEp6NzIwECBAgQWFfAgWDdbK2MAAECBAicFnAgOE3lRgIECBAgsK5A+GcIfv39Pz++5X18pvH2mtfzBeQz37znjPLrqTl/LPnNN585Y7Z8dQhmpm8uAgQIECCQVCC8Q1C9I9Cqv3U96b54Kat6/S8Lufii+vqr138xtpe3VV9/9fpfgvDiQ4Fs+eoQfBiTbxIgQIAAgb0EwjsEe3FbLQECBOYJZPsT6LyVm+mKgA7BFTXvIUCAAAECiwk4ECwWqOUQIECAAIErAg4EV9S8hwABAgQILCYw/DMEnmEttmMeliPfB5BiX8qvWGAP5crvASTZl9Xy0SFItoGUQ4AAAQIEIgSGdwiy/U1MEcgrzynf2unKT361BXJXX+3nS4cg935SHQECBAgQmCIwvENQ7RnKFPWFJpFv7TDlJ7/aArmrr/bzpUOQez+pjgABAgQITBH4Wu0EM0XFJGkE7M80UVwqRH6X2NK8afX87q7v7vvTBP13IToE2RJRDwECBAgQCBBwIAhANyUBAgQIEMgm4ECQLRH1ECBAgACBAIHhv2Uwek2rPcPp7cWnt+jc8eQ317v3bPLrLWq8twK995cOwVtdrwkQIECAwKYC5TsE1f4mqNn7jM9s8b7zya+v5+zR5DdbfK/5eu8vHYK99o/VEiBAgACBDwWaHYLezyg+rOLGN6Pra53QWtdvLP3UW6N9WkVmr09+xwnKr7ZP9vyOdcdfze7Tuz4dgvF7ygwECBAgQCC9QLNDEL2C3ieg3utp1de63rueZ8fLXt+z6+l9f3af7PX1zuPZ8bL7ZK/vWW/39xWYvT90CPrmZzQCBAgQIFBSwIGgZGyKJkCAAAECfQUcCPp6Go0AAQIECJQUaH6GIPpT1iVVFX1aIHp/zX5GdxqmyI3yKxLUJ2XK7xOYv78d7XNcXf+rOgT9TY1IgAABAgTKCTQ7BLv/CWr0+kePn31HVl9/9frv7o/q669e/+753V1/6/277Q8dgtaOcJ0AAQIECGwg0OwQbGBwuMTRz5BGj3+4OBdvC8jvNmHoAPIL5Td5MgEdgmSBKIcAAQIECEQI3O4QrP6MZfT6Ro8fsal2mlN+tdOWX+38VN9XQIegr6fRCBAgQIBASQEHgpKxKZoAAQIECPQVcCDo62k0AgQIECBQUuD2Zwiyr3r1Z4Srry/7/rpbn/zuCsa+X36x/mY/Fnh2f+oQHHu6SoAAAQIEthBYvkOwRYoW+anAsyfkTwdyIURAfiHs3SYdnd/o8btBFBlIh6BIUMokQIAAAQIjBRwIRuoamwABAgQIFBFwICgSlDIJECBAgMBIAQeCkbrGJkCAAAECRQQcCIoEpUwCBAgQIDBSwG8ZjNQ19nABnzIeTjx0AvkN5R0+ePb8stc3PKAnJ9AheBLM7QQIECBAYEUBHYIVU91oTf49+9phy09+IwXsr+d0dQie83I3AQIECBBYUkCHYMlY8yxq9DO80ePnkYypZLTv6PFj1PaZNXt+2evLtlN0CLIloh4CBAgQIBAg4EAQgG5KAgQIECCQTcCBIFsi6iFAgAABAgEC/wdVfx9UuC8B6AAAAABJRU5ErkJggg==);background-repeat:repeat-x;background-position:0 50%;display:flex;align-items:center;justify-content:center}.vjs-p .video-js-plugin-poster img{box-shadow:0 0 5px 10px #0006}.vjs-p .player-controller,.vjs-p .videojs-plugin-muted-alert{pointer-events:auto}.vjs-p.disabled .videojs-plugin-close-icon,.vjs-p.disabled .player-controller{pointer-events:none}.vjs-p .video-js-plugin-player{position:absolute;top:0;left:0;right:0;bottom:0}.video-js,[data-vjs-player]{width:100%;height:100%}.vjs-p .videojs-plugin-muted-alert{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:43}.vjs-p .videojs-plugin-muted-alert:before{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:43;content:"\\f104";background:rgba(0,0,0,.3);font-family:VideoJS;font-size:2em;display:flex;align-items:center;justify-content:center;color:#fff}.vjs-p .videojs-plugin-recovery-mode{pointer-events:auto;cursor:pointer;position:absolute;top:0;left:0;right:0;bottom:0;z-index:44}.vjs-p .videojs-plugin-recovery-mode button{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.vjs-p .seek-slider{position:relative;width:100%}.vjs-p .seek-slider:focus{outline:none}.vjs-p .seek-slider .track{padding:10px 0;cursor:pointer;outline:none}.vjs-p .seek-slider .track:focus{border:0;outline:none}.vjs-p .seek-slider .track .main{width:100%;height:3px;background-color:#ffffff4d;border-radius:30px;position:absolute;left:0;top:8.5px;transition:transform .4s;outline:none}.vjs-p .seek-slider .track .main:focus{border:0;outline:none}.vjs-p .seek-slider .track .main .buffered{position:absolute;background-color:#ffffff4d;width:100%;height:100%;transform:scaleX(.8);z-index:2;transform-origin:0 0}.vjs-p .seek-slider .track .main .seek-hover{position:absolute;background-color:#ffffff80;width:100%;height:100%;z-index:1;transform:scaleX(.6);transform-origin:0 0;opacity:0;transition:opacity .4s}.vjs-p .seek-slider .track .main .connect{position:absolute;background-color:#fff;width:100%;height:100%;z-index:3;left:0;transform:scaleX(.13);transform-origin:0 0}.vjs-p .seek-slider .track.active .main{transform:scaleY(2)}.vjs-p .seek-slider .thumb{pointer-events:none;position:absolute;width:12px;height:12px;left:-6px;top:4px;z-index:4;transform:translate(100px)}.vjs-p .seek-slider .thumb .handler{border-radius:100%;width:100%;height:100%;background-color:#fff;opacity:0;transform:scale(.4);cursor:pointer;transition:transform .2s;pointer-events:none}.vjs-p .seek-slider .thumb.active .handler{opacity:1;transform:scale(1)}.vjs-p .seek-slider .hover-time{position:absolute;background-color:#0000004d;line-height:18px;font-size:16px;color:#ddd;top:-25px;left:0;padding:5px 10px;border-radius:5px;box-shadow:0 0 5px #0000004d;opacity:0;transform:translate(150px);pointer-events:none}.vjs-p .seek-slider .hover-time.active{opacity:1}.vjs-p .seek-slider:hover .track .main .seek-hover{opacity:1}.vjs-p .player-controller{position:absolute;z-index:100;bottom:0px;left:0;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:stretch;height:64px;background-image:linear-gradient(0deg,#000,transparent);transition:opacity .2s;color:#fff}.vjs-p .player-menu-box{display:flex;align-items:center;justify-content:center;flex-direction:column;margin-bottom:40px}.vjs-p .player-menu-cell{width:100%;text-align:center;font-size:12px;color:#7a7b7c}.vjs-p .player-multiple-play{width:64px;height:120px}.vjs-p .player-controller-actions-left{display:flex;justify-content:center;align-items:center;flex-shrink:0}.vjs-p .player-right-box{font-size:14px;color:#7a7b7c;cursor:pointer;margin-right:12px}.vjs-p .player-controller-actions{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:8px;padding-right:8px;margin-top:2px}.vjs-p .player-mid-box-time{font-size:9px;display:flex;justify-content:center;align-items:center;color:#fff;flex-shrink:0;margin-right:8px;font-family:monospace}.vjs-p .player-controller-play{display:flex;align-items:center;justify-content:center;cursor:pointer;padding-right:4px}.vjs-p .player-controller-progress{width:calc(100% - 28px);margin-left:14px;display:flex;align-items:center;justify-content:center;margin-top:8px}.vjs-p .player-volume{display:flex;align-items:center;justify-content:center;cursor:pointer;margin-right:16px;margin-left:8px}.vjs-p .player-volume-slider{width:60px;margin-right:12px;display:flex;align-items:center}.vjs-p .player-volume-box{display:flex;flex-direction:row}.netless-app-media-player-container{display:flex;position:relative;height:100%}
`);const n=document.createElement("div");n.classList.add("netless-app-media-player-container"),wd.render(H.createElement(iS,{context:e}),n),i.mountContent(n),e.emitter.on("destroy",()=>{console.log("[MediaPlayer]: destroy"),wd.unmountComponentAtNode(n)})}},rS=()=>{Y.debug&&dg({verbose:!0}),Y.register({kind:ta.kind,src:ta}),Y.register({kind:Xa.kind,src:Xa})},sS={DocsViewer:ta.kind,MediaPlayer:Xa.kind};var fg=(e=>(e.Init="Init",e.AttributesUpdate="AttributesUpdate",e.SetAttributes="SetAttributes",e.RegisterMagixEvent="RegisterMagixEvent",e.RemoveMagixEvent="RemoveMagixEvent",e.RemoveAllMagixEvent="RemoveAllMagixEvent",e.RoomStateChanged="RoomStateChanged",e.DispatchMagixEvent="DispatchMagixEvent",e.ReciveMagixEvent="ReciveMagixEvent",e.NextPage="NextPage",e.PrevPage="PrevPage",e.SDKCreate="SDKCreate",e.OnCreate="OnCreate",e.SetPage="SetPage",e.GetAttributes="GetAttributes",e.Ready="Ready",e.Destory="Destory",e.StartCreate="StartCreate",e.WrapperDidUpdate="WrapperDidUpdate",e.DispayIframe="DispayIframe",e.HideIframe="HideIframe",e.GetRootRect="GetRootRect",e.ReplayRootRect="ReplayRootRect",e.PageTo="PageTo",e))(fg||{}),gg=(e=>(e.WrapperDidMount="WrapperDidMount",e.IframeLoad="IframeLoad",e))(gg||{});const Dt={Ready:"Ready",RootRect:"ReplayRootRect",Message:"message",ComputeStyle:"computeStyle",Load:"load",DisplayerState:"displayerState",Show:"show",Hide:"hide"},oS=(e,t)=>new Array(e).fill(0).map((i,n)=>t(n)),ee=class{constructor(e,t){this.manager=e,this.appManager=t,this.magixEventMap=new Map,this.cssList=[],this.allowAppliances=["clicker"],this.bridgeDisposer=T.noop,this.rootRect=null,this.sideEffectManager=new tr,this.execListenIframe=T.debounce(i=>{this.listenIframe(i)},50),this.onPhaseChangedListener=i=>{i===b.PlayerPhase.Playing&&this.computedStyleAndIframeDisplay()},this.stateChangeListener=i=>{i={...i},i.cameraState=this.manager.cameraState,this.postMessage({kind:"RoomStateChanged",payload:i}),i.cameraState&&(ee.emitter.emit("GetRootRect"),this.computedStyle(i)),i.memberState&&(this.computedZindex(),this.updateStyle()),i.sceneState&&this.computedIframeDisplay(i,this.attributes)},this.displayer=ee.displayer=t.displayer,this.iframe=this._createIframe(),this.sideEffectManager.addDisposer(ee.emitter.on("ReplayRootRect",i=>{this.rootRect=i}),Dt.RootRect),this.sideEffectManager.addDisposer(ee.emitter.on("HideIframe",()=>{this.iframe.className=ee.hiddenClass}),Dt.Hide),this.sideEffectManager.addDisposer(ee.emitter.on("DispayIframe",()=>{this.iframe.className=""}),Dt.Show),this.sideEffectManager.addDisposer(ee.emitter.on("created",()=>{this.bridgeDisposer(),this.bridgeDisposer=b.autorun(()=>{var n;const i=this.attributes;if(i.url){const r=(n=this.iframe)==null?void 0:n.src;r&&r!==i.url&&this.execListenIframe(i)}i.displaySceneDir&&this.computedIframeDisplay(this.displayer.state,i),(i.width||i.height)&&this.iframe&&(this.iframe.width=`${i.width}px`,this.iframe.height=`${i.height}px`),this.postMessage({kind:"AttributesUpdate",payload:i})})})),this.sideEffectManager.addDisposer(e.emitter.on("cameraStateChange",()=>{this.computedStyle(this.displayer.state)})),ee.onCreate(this)}static onCreate(e){ee.emitter.emit("StartCreate"),ee.emitter.emit("OnCreate",e),ee.emitter.emit("created")}insert(e){const t={url:e.url,width:e.width,height:e.height,displaySceneDir:e.displaySceneDir,useClicker:e.useClicker||!1,useSelector:e.useSelector};this.setAttributes(t);const i=()=>{this.getIframe(),this.listenIframe(this.attributes),this.listenDisplayerState(),ee.emitter.emit("GetRootRect")};if(this.getIframe())i();else{const n=this.sideEffectManager.addDisposer(ee.emitter.on("WrapperDidMount",()=>{i(),this.sideEffectManager.flush(n)})),r=this.sideEffectManager.addDisposer(ee.emitter.on("WrapperDidUpdate",()=>{i(),this.sideEffectManager.flush(r)}))}return this.attributes.useSelector&&this.allowAppliances.push("selector"),this.computedStyle(this.displayer.state),this.listenDisplayerCallbacks(),this.getComputedIframeStyle(),this.sideEffectManager.addEventListener(window,"message",this.messageListener.bind(this),void 0,Dt.Message),ee.alreadyCreate=!0,this}getComputedIframeStyle(){this.sideEffectManager.setTimeout(()=>{this.iframe&&getComputedStyle(this.iframe)},200,Dt.ComputeStyle)}destroy(){this.sideEffectManager.flushAll(),ee.emitter.emit("Destory"),ee.alreadyCreate=!1,ee.emitter.clearListeners()}getIframe(){return this.iframe||(this.iframe=this._createIframe()),this.iframe}setIframeSize(e){this.iframe&&(this.iframe.width=`${e.width}px`,this.iframe.height=`${e.height}px`,this.setAttributes({width:e.width,height:e.height}))}get attributes(){return this.appManager.store.getIframeBridge()}setAttributes(e){this.appManager.store.setIframeBridge(e)}_createIframe(){const e=document.createElement("iframe");return e.id="IframeBridge",e.className=ee.hiddenClass,this.appManager.mainView.divElement&&this.appManager.mainView.divElement.appendChild(e),e}scaleIframeToFit(e=b.AnimationMode.Immediately){if(!this.inDisplaySceneDir)return;const{width:t=1280,height:i=720}=this.attributes,n=t?-t/2:0,r=i?-i/2:0;this.manager.moveCameraToContain({originX:n,originY:r,width:t,height:i,animationMode:e})}get isReplay(){return this.manager.isReplay}handleSetPage(e){if(this.isReplay||!this.attributes.displaySceneDir)return;const t=e.payload,i=this.displayer,n=i.entireScenes()[this.attributes.displaySceneDir];if(!n||n.length!==t){const r=oS(t,s=>({name:String(s+1)}));i.putScenes(this.attributes.displaySceneDir,r),this.manager.setMainViewScenePath(this.attributes.displaySceneDir)}}listenIframe(e){const t=i=>{var n;this.postMessage({kind:"Init",payload:{attributes:this.attributes,roomState:(n=ee.displayer)==null?void 0:n.state,currentPage:this.currentPage,observerId:this.displayer.observerId}}),ee.emitter.emit("IframeLoad",i),this.sideEffectManager.addDisposer(ee.emitter.on("Ready",()=>{var r;this.postMessage((r=this.attributes.lastEvent)==null?void 0:r.payload)}),Dt.Ready),this.computedStyleAndIframeDisplay()};e.url&&this.iframe.src!==e.url&&(this.src_url_equal_anchor||(this.src_url_equal_anchor=document.createElement("a")),this.src_url_equal_anchor.href=e.url,this.src_url_equal_anchor.href!==this.iframe.src&&(this.iframe.src=e.url)),this.iframe.width=`${e.width}px`,this.iframe.height=`${e.height}px`,this.sideEffectManager.addEventListener(this.iframe,"load",t,void 0,Dt.Load)}listenDisplayerState(){this.isReplay&&(this.displayer._phase===b.PlayerPhase.Playing&&this.computedStyleAndIframeDisplay(),this.sideEffectManager.add(()=>(this.displayer.callbacks.on("onPhaseChanged",this.onPhaseChangedListener),()=>this.displayer.callbacks.off("onPhaseChanged",this.onPhaseChangedListener)),Dt.DisplayerState)),this.computedStyleAndIframeDisplay()}computedStyleAndIframeDisplay(){this.computedStyle(this.displayer.state),this.computedIframeDisplay(this.displayer.state,this.attributes)}listenDisplayerCallbacks(){this.displayer.callbacks.on(this.callbackName,this.stateChangeListener)}get callbackName(){return this.isReplay?"onPlayerStateChanged":"onRoomStateChanged"}computedStyle(e){const t=this.manager.cameraState,i=this.attributes.width||1280,n=this.attributes.height||720;if(this.iframe){const{width:r,height:s,scale:o,centerX:a,centerY:l}=t,u=this.rootRect||{x:0,y:0},d=`${r/2+u.x}px`,c=`${s/2+u.y}px`,m=`transform-origin: ${d} ${c};`,v=(r-i)/2*o,y=(s-n)/2*o,x=-(a*o)+v,h=-(l*o)+y,p=`transform: translate(${x}px,${h}px) scale(${o}, ${o});`,E=["position: absolute;","border: 0.1px solid rgba(0,0,0,0);","top: 0px;","left: 0px;",m,p];this.cssList=E,this.computedZindex(),this.updateStyle()}}computedIframeDisplay(e,t){this.inDisplaySceneDir?ee.emitter.emit("DispayIframe"):ee.emitter.emit("HideIframe")}computedZindex(){const e="z-index: -1;",t=this.cssList.findIndex(i=>i===e);t!==-1&&this.cssList.splice(t,1),(!this.isClicker()||this.isDisableInput)&&this.cssList.push(e)}updateStyle(){this.iframe.style.cssText=this.cssList.join(" ")}get iframeOrigin(){if(this.iframe)try{return new URL(this.iframe.src).origin}catch(e){console.warn(e)}}messageListener(e){if(tt("<<<",JSON.stringify(e.data)),e.origin!==this.iframeOrigin)return;const t=e.data;switch(t.kind){case"SetAttributes":{this.handleSetAttributes(t);break}case"RegisterMagixEvent":{this.handleRegisterMagixEvent(t);break}case"RemoveMagixEvent":{this.handleRemoveMagixEvent(t);break}case"DispatchMagixEvent":{this.handleDispatchMagixEvent(t);break}case"RemoveAllMagixEvent":{this.handleRemoveAllMagixEvent();break}case"NextPage":{this.handleNextPage();break}case"PrevPage":{this.handlePrevPage();break}case"SDKCreate":{this.handleSDKCreate();break}case"SetPage":{this.handleSetPage(t);break}case"GetAttributes":{this.handleGetAttributes();break}case"PageTo":{this.handlePageTo(t);break}default:{tt(`${t.kind} not allow event.`);break}}}handleSDKCreate(){this.postMessage({kind:"Init",payload:{attributes:this.attributes,roomState:this.displayer.state,currentPage:this.currentPage,observerId:this.displayer.observerId}})}handleDispatchMagixEvent(e){const t=e.payload;this.appManager.safeDispatchMagixEvent(t.event,t.payload)}handleSetAttributes(e){this.setAttributes(e.payload)}handleRegisterMagixEvent(e){const t=e.payload,i=n=>{n.authorId!==this.displayer.observerId&&this.postMessage({kind:"ReciveMagixEvent",payload:n})};this.magixEventMap.set(t,i),this.displayer.addMagixEventListener(t,i)}handleRemoveMagixEvent(e){const t=e.payload,i=this.magixEventMap.get(t);this.displayer.removeMagixEventListener(t,i)}handleNextPage(){this.manager.canOperate&&(this.manager.nextPage(),this.dispatchMagixEvent("NextPage",{}))}handlePrevPage(){this.manager.canOperate&&(this.manager.prevPage(),this.dispatchMagixEvent("PrevPage",{}))}handlePageTo(e){if(this.manager.canOperate){const t=e.payload;if(!Number.isSafeInteger(t)||t<=0)return;this.manager.setMainViewSceneIndex(t-1),this.dispatchMagixEvent("PageTo",t-1)}}handleRemoveAllMagixEvent(){this.magixEventMap.forEach((e,t)=>{this.displayer.removeMagixEventListener(t,e)}),this.magixEventMap.clear()}handleGetAttributes(){this.postMessage({kind:"GetAttributes",payload:this.attributes})}postMessage(e){var t;this.iframe&&((t=this.iframe.contentWindow)==null||t.postMessage(JSON.parse(JSON.stringify(e)),"*"))}dispatchMagixEvent(e,t){this.manager.canOperate&&(this.setAttributes({lastEvent:{name:e,payload:t}}),this.displayer.dispatchMagixEvent(e,t))}get currentIndex(){return this.manager.mainViewSceneIndex}get currentPage(){return this.currentIndex+1}get totalPage(){return this.manager.mainViewScenesLength}get readonly(){return!this.displayer.isWritable}get inDisplaySceneDir(){return this.manager.mainViewSceneDir===this.attributes.displaySceneDir}isClicker(){if(this.readonly)return!1;const e=this.displayer.state.memberState.currentApplianceName;return this.allowAppliances.includes(e)}get isDisableInput(){return"disableDeviceInputs"in this.displayer?this.displayer.disableDeviceInputs:!0}};let Ai=ee;Ai.kind="IframeBridge";Ai.hiddenClass="netless-iframe-brdige-hidden";Ai.emitter=new tn.default;Ai.displayer=null;Ai.alreadyCreate=!1;const mg=new aw({emitter:L}),O=class extends b.InvisiblePlugin{constructor(e){super(e),this.version="1.0.2",this.dependencies={dependencies:{"@juggle/resize-observer":"^3.3.1","@netless/telebox-insider":"github:veytu/telebox-insider",emittery:"^0.9.2",lodash:"^4.17.21","p-retry":"^4.6.1",uuid:"^7.0.3","video.js":">=7"},peerDependencies:{jspdf:"2.5.1","white-web-sdk":"^2.16.52"},devDependencies:{"@hyrious/dts":"^0.2.2","@netless/app-media-player":"0.1.0-beta.9","@netless/app-docs-viewer":"github:veytu/app-docs-viewer","@rollup/plugin-commonjs":"^20.0.0","@rollup/plugin-node-resolve":"^13.0.4","@rollup/plugin-url":"^6.1.0","@sveltejs/vite-plugin-svelte":"^1.0.0-next.22","@tsconfig/svelte":"^2.0.1","@types/debug":"^4.1.7","@types/lodash":"^4.14.182","@types/lodash-es":"^4.17.4","@types/uuid":"^8.3.1","@typescript-eslint/eslint-plugin":"^4.30.0","@typescript-eslint/parser":"^4.30.0","@vitest/ui":"^0.14.1",cypress:"^8.7.0",dotenv:"^10.0.0",eslint:"^7.32.0","eslint-config-prettier":"^8.3.0","eslint-plugin-svelte3":"^3.2.0",jsdom:"^19.0.0",jspdf:"^2.5.1",less:"^4.1.1",prettier:"^2.3.2","prettier-plugin-svelte":"^2.4.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-styles":"^3.14.1","side-effect-manager":"0.1.5",svelte:"^3.42.4",typescript:"^4.5.5",vite:"^2.9.9",vitest:"^0.14.1","white-web-sdk":"2.16.52"}},this.emitter=Q,this.viewMode=b.ViewMode.Broadcaster,this.isReplay=b.isPlayer(this.displayer),this._cursorUIDs=[],this.containerSizeRatio=O.containerSizeRatio,O.displayer=e.displayer,window.NETLESS_DEPS={dependencies:{"@juggle/resize-observer":"^3.3.1","@netless/telebox-insider":"github:veytu/telebox-insider",emittery:"^0.9.2",lodash:"^4.17.21","p-retry":"^4.6.1",uuid:"^7.0.3","video.js":">=7"},peerDependencies:{jspdf:"2.5.1","white-web-sdk":"^2.16.52"},devDependencies:{"@hyrious/dts":"^0.2.2","@netless/app-media-player":"0.1.0-beta.9","@netless/app-docs-viewer":"github:veytu/app-docs-viewer","@rollup/plugin-commonjs":"^20.0.0","@rollup/plugin-node-resolve":"^13.0.4","@rollup/plugin-url":"^6.1.0","@sveltejs/vite-plugin-svelte":"^1.0.0-next.22","@tsconfig/svelte":"^2.0.1","@types/debug":"^4.1.7","@types/lodash":"^4.14.182","@types/lodash-es":"^4.17.4","@types/uuid":"^8.3.1","@typescript-eslint/eslint-plugin":"^4.30.0","@typescript-eslint/parser":"^4.30.0","@vitest/ui":"^0.14.1",cypress:"^8.7.0",dotenv:"^10.0.0",eslint:"^7.32.0","eslint-config-prettier":"^8.3.0","eslint-plugin-svelte3":"^3.2.0",jsdom:"^19.0.0",jspdf:"^2.5.1",less:"^4.1.1",prettier:"^2.3.2","prettier-plugin-svelte":"^2.4.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-styles":"^3.14.1","side-effect-manager":"0.1.5",svelte:"^3.42.4",typescript:"^4.5.5",vite:"^2.9.9",vitest:"^0.14.1","white-web-sdk":"2.16.52"}}}static onCreate(e){O._resolve(e)}static async mount(e){const t=e.room;O.container=e.container,O.supportAppliancePlugin=e.supportAppliancePlugin;const i=e.containerSizeRatio,n=e.debug,r=e.cursor;O.params=e,O.displayer=e.room,pm();let s;if(b.isRoom(t)){if(t.phase!==b.RoomPhase.Connected)throw new Error("[WindowManager]: Room only Connected can be mount");t.phase===b.RoomPhase.Connected&&t.isWritable&&(t.disableSerialization=!1),s=await this.initManager(t)}if(O.isCreated)throw new Error("[WindowManager]: Already created cannot be created again");if(this.debug=Boolean(n),this.debug&&dg({verbose:!0}),tt("Already insert room",s),b.isRoom(this.displayer)){if(!s)throw new Error("[WindowManager]: init InvisiblePlugin failed")}else await bd.default(async o=>{if(s=t.getInvisiblePlugin(O.kind),!s)throw tt(`manager is empty. retrying ${o}`),new Error},{retries:10,maxTimeout:5e3});if(!s)throw new Error("[WindowManager]: create manager failed");i&&(O.containerSizeRatio=i),await s.ensureAttributes(),s._fullscreen=e.fullscreen,s.appManager=new dm(s),s.appManager.polling=e.polling||!1,s._pageState=new ow(s.appManager),s.cursorManager=new sw(s.appManager,Boolean(r),e.cursorOptions,e.applianceIcons),i&&(s.containerSizeRatio=i),e.container&&s.bindContainer(e.container),lw(t,s),L.emit("onCreated"),O.isCreated=!0;try{await Pg()}catch(o){console.warn("[WindowManager]: indexedDB open failed"),console.log(o)}return s}static initManager(e){return fm(e)}static initContainer(e,t,i){const{chessboard:n,overwriteStyles:r,fullscreen:s}=i;O.container||(O.container=t);const{playground:o,wrapper:a,sizer:l,mainViewElement:u}=hm(t);if(O.playground=o,n&&l.classList.add("netless-window-manager-chess-sizer"),s&&l.classList.add("netless-window-manager-fullscreen"),r){const d=document.createElement("style");d.textContent=r,o.appendChild(d)}return e.containerResizeObserver=el.create(o,l,a,L),O.wrapper=a,O.sizer=l,u}static get registered(){return Ee.registered}bindContainer(e){var t,i,n,r,s,o;if(b.isRoom(this.displayer)&&this.room.phase!==b.RoomPhase.Connected)throw new Ld;if(O.isCreated&&O.container)O.container.firstChild&&e.appendChild(O.container.firstChild);else if(O.params){const a=O.params,l=O.initContainer(this,e,a);this.boxManager&&this.boxManager.destroy();const u=Av(this,Q,L,St,{collectorContainer:a.collectorContainer,collectorStyles:a.collectorStyles,prefersColorScheme:a.prefersColorScheme});this.boxManager=u,(t=this.appManager)==null||t.setBoxManager(u),this.bindMainView(l,a.disableCameraTransform),O.wrapper&&((i=this.cursorManager)==null||i.setupWrapper(O.wrapper))}L.emit("updateManagerRect"),(n=this.appManager)==null||n.refresh(),(r=this.appManager)==null||r.resetMaximized(),(s=this.appManager)==null||s.resetMinimized(),(o=this.appManager)==null||o.displayerWritableListener(!this.room.isWritable),O.container=e}bindCollectorContainer(e){O.isCreated&&this.boxManager?this.boxManager.setCollectorContainer(e):O.params&&(O.params.collectorContainer=e)}static register(e){return Ee.register(e)}static unregister(e){return Ee.unregister(e)}async addApp(e){if(this.appManager)return this.appManager.rootDirRemoving?new Promise((t,i)=>{L.once("rootDirRemoved").then(async()=>{try{const n=await this._addApp(e);t(n)}catch(n){i(n.message)}})}):this._addApp(e);throw new qe}async _addApp(e){var t,i,n;if(this.appManager){if(!e.kind||typeof e.kind!="string")throw new Dd;e.src&&typeof e.src=="string"&&Ee.register({kind:e.kind,src:e.src});const r=await((t=Ee.appClasses.get(e.kind))==null?void 0:t());if(r&&((i=r.config)==null?void 0:i.singleton)&&this.appManager.appProxies.has(e.kind))throw new kd;const s=this.setupScenePath(e,this.appManager);return s===void 0?void 0:((n=e==null?void 0:e.options)!=null&&n.scenePath&&(e.options.scenePath=Yg(e.options.scenePath)),await this.appManager.addApp(e,Boolean(s)))}else throw new qe}setupScenePath(e,t){let i=!1;if(e.options){const{scenePath:n,scenes:r}=e.options;if(n){if(!Gg(n))throw new Bd;const s=Object.keys(this.apps||{});for(const o of s){const a=t.store.getAppScenePath(o);if(a&&a===n){if(console.warn(`[WindowManager]: ScenePath "${n}" already opened`),this.boxManager){const l=this.boxManager.getTopBox();l&&(this.boxManager.setZIndex(o,l.zIndex+1,!1),this.boxManager.focusBox({appId:o},!1))}return}}}n&&r&&r.length>0&&(this.isDynamicPPT(r)?(i=!0,Qi(this.displayer)[n]||bn(this.room,n,r)):Qi(this.displayer)[n]||bn(this.room,n,[{name:r[0].name}])),n&&r===void 0&&bn(this.room,n,[{}])}return i}async setMainViewScenePath(e){this.appManager&&await this.appManager.setMainViewScenePath(e)}async setMainViewSceneIndex(e){this.appManager&&await this.appManager.setMainViewSceneIndex(e)}async nextPage(){if(this.appManager){const e=this.mainViewSceneIndex+1;return e>=this.mainViewScenesLength?(console.warn("[WindowManager]: current page is the last page"),!1):(await this.appManager.setMainViewSceneIndex(e),!0)}else return!1}async prevPage(){if(this.appManager){const e=this.mainViewSceneIndex-1;return e<0?(console.warn("[WindowManager]: current page is the first page"),!1):(await this.appManager.setMainViewSceneIndex(e),!0)}else return!1}async jumpPage(e){return this.appManager?e<0||e>=this.pageState.length?(console.warn(`[WindowManager]: index ${e} out of range`),!1):(await this.appManager.setMainViewSceneIndex(e),!0):!1}async addPage(e){if(this.appManager){const t=e==null?void 0:e.after,i=e==null?void 0:e.scene;if(t){const n=this.mainViewSceneIndex+1;this.room.putScenes(_e,[i||{}],n)}else this.room.putScenes(_e,[i||{}])}}async removePage(e){if(this.appManager){const t=e===void 0?this.pageState.index:e;return this.pageState.length===1?(console.warn("[WindowManager]: can not remove the last page"),!1):t<0||t>=this.pageState.length?(console.warn(`[WindowManager]: index ${e} out of range`),!1):this.appManager.removeSceneByIndex(t)}else return!1}getMainViewScenePath(){var e;return(e=this.appManager)==null?void 0:e.store.getMainViewScenePath()}getMainViewSceneIndex(){var e;return(e=this.appManager)==null?void 0:e.store.getMainViewSceneIndex()}setReadonly(e){var t;this.readonly=e,(t=this.boxManager)==null||t.setReadonly(e),L.emit("setReadonly",e)}switchMainViewToWriter(){var e;return(e=this.appManager)==null?void 0:e.mainViewProxy.mainViewClickHandler()}onAppDestroy(e,t){Qg(`destroy-${e}`,t)}onAppEvent(e,t){return L.on(`custom-${e}`,t)}setViewMode(e){var t,i,n,r;(e===b.ViewMode.Broadcaster||e===b.ViewMode.Follower)&&(this.canOperate&&e===b.ViewMode.Broadcaster&&((t=this.appManager)==null||t.mainViewProxy.setCameraAndSize()),(i=this.appManager)==null||i.mainViewProxy.start()),e===b.ViewMode.Freedom&&((n=this.appManager)==null||n.mainViewProxy.stop()),this.viewMode=e,(r=this.appManager)==null||r.mainViewProxy.setViewMode(e)}setBoxState(e){if(!!this.canOperate)switch(e){case"normal":this.setMaximized(!1),this.setMinimized(!1);break;case"maximized":this.setMaximized(!0),this.setMinimized(!1);break;case"minimized":this.setMinimized(!0);break}}setMaximized(e){var t;!this.canOperate||(t=this.boxManager)==null||t.setMaximized(e,!1)}setMinimized(e){var t;!this.canOperate||(t=this.boxManager)==null||t.setMinimized(e,!1)}setFullscreen(e){var t;this._fullscreen!==e&&(this._fullscreen=e,(t=O.sizer)==null||t.classList.toggle("netless-window-manager-fullscreen",e),Q.emit("fullscreenChange",e))}get cursorUIDs(){return this._cursorUIDs}setCursorUIDs(e){var t,i;if(this._cursorUIDs=e||[],this._cursorUIDs.length===0)(t=this._cursorUIDsStyleDOM)==null||t.remove();else{this._cursorUIDsStyleDOM||(this._cursorUIDsStyleDOM=document.createElement("style")),(i=O.playground)==null||i.appendChild(this._cursorUIDsStyleDOM);let n="[data-cursor-uid] { display: none }";for(const r of this._cursorUIDs)n+=`
[data-cursor-uid="${r}"] { display: flex }`;this._cursorUIDsStyleDOM.textContent=n}}maximizedBoxNextPage(){var i,n;const e=this.getTopMaxBoxId();if(!e)return!1;const t=(i=this.appManager)==null?void 0:i.appProxies.get(e);return t?(n=t==null?void 0:t.appContext)==null?void 0:n.nextPage():!1}maximizedBoxPrevPage(){var i,n;const e=this.getTopMaxBoxId();if(!e)return!1;const t=(i=this.appManager)==null?void 0:i.appProxies.get(e);return t?(n=t==null?void 0:t.appContext)==null?void 0:n.prevPage():!1}getMaximizedBoxPageState(){var i,n;const e=this.getTopMaxBoxId();if(!e)return;const t=(i=this.appManager)==null?void 0:i.appProxies.get(e);if(!!t)return(n=t==null?void 0:t.appContext)==null?void 0:n.pageState}getTopMaxBoxId(){var t,i;const e=(i=(t=this.appManager)==null?void 0:t.boxManager)==null?void 0:i.teleBoxManager.maximizedBoxes.filter(n=>{var r,s;return!((s=(r=this.appManager)==null?void 0:r.boxManager)!=null&&s.teleBoxManager.minimizedBoxes.includes(n))});if(!!(e!=null&&e.length))return e.reduce((n,r)=>{var s,o,a,l,u,d,c,m;return Number((l=(a=(o=(s=this.appManager)==null?void 0:s.boxManager)==null?void 0:o.getBox(n))==null?void 0:a._zIndex$)==null?void 0:l.value)>Number((m=(c=(d=(u=this.appManager)==null?void 0:u.boxManager)==null?void 0:d.getBox(r))==null?void 0:c._zIndex$)==null?void 0:m.value)?n:r})}get mainView(){if(this.appManager)return this.appManager.mainViewProxy.view;throw new qe}get camera(){if(this.appManager)return this.appManager.mainViewProxy.view.camera;throw new qe}get cameraState(){if(this.appManager)return this.appManager.mainViewProxy.cameraState;throw new qe}get apps(){var e;return(e=this.appManager)==null?void 0:e.store.apps()}get boxState(){var e;if(this.appManager)return(e=this.appManager.boxManager)==null?void 0:e.boxState;throw new qe}get darkMode(){var e,t;return Boolean((t=(e=this.appManager)==null?void 0:e.boxManager)==null?void 0:t.darkMode)}get prefersColorScheme(){var e;if(this.appManager)return(e=this.appManager.boxManager)==null?void 0:e.prefersColorScheme;throw new qe}get focused(){return this.attributes.focus}get focusedView(){var e,t;return((t=(e=this.appManager)==null?void 0:e.focusApp)==null?void 0:t.view)||this.mainView}get polling(){var e;return((e=this.appManager)==null?void 0:e.polling)||!1}set polling(e){this.appManager&&(this.appManager.polling=e)}get cursorStyle(){var e;return((e=this.cursorManager)==null?void 0:e.style)||"default"}set cursorStyle(e){if(!this.cursorManager)throw new Error("[WindowManager]: cursor is not enabled, please set { cursor: true }.");this.cursorManager.style=e}get mainViewSceneIndex(){var e;return((e=this._pageState)==null?void 0:e.index)||0}get mainViewSceneDir(){var e;if(this.appManager)return(e=this.appManager)==null?void 0:e.getMainViewSceneDir();throw new qe}get topApp(){var e,t;return(t=(e=this.boxManager)==null?void 0:e.getTopBox())==null?void 0:t.id}get mainViewScenesLength(){var e;return((e=this._pageState)==null?void 0:e.length)||0}get canRedoSteps(){var e;return((e=this.focusedView)==null?void 0:e.canRedoSteps)||0}get canUndoSteps(){var e;return((e=this.focusedView)==null?void 0:e.canUndoSteps)||0}get sceneState(){if(this.appManager)return this.appManager.sceneState;throw new qe}get pageState(){if(this._pageState)return this._pageState.toObject();throw new qe}get fullscreen(){return Boolean(this._fullscreen)}queryAll(){var e;return Array.from(((e=this.appManager)==null?void 0:e.appProxies.values())||[])}queryOne(e){var t;return(t=this.appManager)==null?void 0:t.appProxies.get(e)}async closeApp(e){var t;return(t=this.appManager)==null?void 0:t.closeApp(e)}focusApp(e){var i,n,r;const t=(i=this.boxManager)==null?void 0:i.getBox(e);t&&((n=this.boxManager)==null||n.focusBox({appId:e},!1),((r=this.boxManager)==null?void 0:r.teleBoxManager).makeBoxTop(t,!1))}moveCamera(e){var n;const t=T.omit(e,["animationMode"]),i={...this.mainView.camera};T.isEqual({...i,...t},i)||(this.mainView.moveCamera(e),(n=this.appManager)==null||n.dispatchInternalEvent(q.MoveCamera,e),setTimeout(()=>{var r;(r=this.appManager)==null||r.mainViewProxy.setCameraAndSize()},500))}moveCameraToContain(e){var t;this.mainView.moveCameraToContain(e),(t=this.appManager)==null||t.dispatchInternalEvent(q.MoveCameraToContain,e),setTimeout(()=>{var i;(i=this.appManager)==null||i.mainViewProxy.setCameraAndSize()},500)}convertToPointInWorld(e){return this.mainView.convertToPointInWorld(e)}setCameraBound(e){this.mainView.setCameraBound(e)}onDestroy(){this._destroy()}destroy(){this._destroy()}_destroy(){var e,t,i,n,r;(e=this.containerResizeObserver)==null||e.disconnect(),(t=this.appManager)==null||t.destroy(),(i=this.cursorManager)==null||i.destroy(),O.container=void 0,O.wrapper=void 0,O.sizer=void 0,O.isCreated=!1,O.playground&&((n=O.playground.parentNode)==null||n.removeChild(O.playground)),O.params=void 0,(r=this._iframeBridge)==null||r.destroy(),this._iframeBridge=void 0,tt("Destroyed")}bindMainView(e,t){var i;this.appManager&&(this.appManager.bindMainView(e,Boolean(t)),(i=this.cursorManager)==null||i.setMainViewDivElement(e))}get canOperate(){return b.isRoom(this.displayer)?this.displayer.isWritable&&this.displayer.phase===b.RoomPhase.Connected:!1}get room(){return this.displayer}safeSetAttributes(e){this.canOperate&&this.setAttributes(e)}safeUpdateAttributes(e,t){this.canOperate&&this.updateAttributes(e,t)}setPrefersColorScheme(e){var t,i;(i=(t=this.appManager)==null?void 0:t.boxManager)==null||i.setPrefersColorScheme(e)}cleanCurrentScene(){var e;tt("clean current scene"),(e=this.focusedView)==null||e.cleanCurrentScene()}redo(){var e;return((e=this.focusedView)==null?void 0:e.redo())||0}undo(){var e;return((e=this.focusedView)==null?void 0:e.undo())||0}delete(){var e;(e=this.focusedView)==null||e.delete()}copy(){var e;(e=this.focusedView)==null||e.copy()}paste(){var e;(e=this.focusedView)==null||e.paste()}duplicate(){var e;(e=this.focusedView)==null||e.duplicate()}insertText(e,t,i){var n;return((n=this.focusedView)==null?void 0:n.insertText(e,t,i))||""}insertImage(e){var t;return(t=this.focusedView)==null?void 0:t.insertImage(e)}completeImageUpload(e,t){var i;return(i=this.focusedView)==null?void 0:i.completeImageUpload(e,t)}lockImage(e,t){var i;return(i=this.focusedView)==null?void 0:i.lockImage(e,t)}lockImages(e){var t;return(t=this.focusedView)==null?void 0:t.lockImages(e)}refresh(){var e;this._refresh(),(e=this.appManager)==null||e.dispatchInternalEvent(q.Refresh)}_refresh(){var e,t;(e=this.appManager)==null||e.mainViewProxy.rebind(),O.container&&this.bindContainer(O.container),(t=this.appManager)==null||t.refresher.refresh()}setContainerSizeRatio(e){if(!T.isNumber(e)||!(e>0))throw new Error(`[WindowManager]: updateContainerSizeRatio error, ratio must be a positive number. but got ${e}`);O.containerSizeRatio=e,this.containerSizeRatio=e,L.emit("containerSizeRatioUpdate",e)}isDynamicPPT(e){var i,n;const t=(n=(i=e[0])==null?void 0:i.ppt)==null?void 0:n.src;return t==null?void 0:t.startsWith("pptx://")}async ensureAttributes(){T.isNull(this.attributes)&&await Nd(50),T.isObject(this.attributes)&&(this.attributes[ye.Apps]||this.safeSetAttributes({[ye.Apps]:{}}),this.attributes[ye.Cursors]||this.safeSetAttributes({[ye.Cursors]:{}}),this.attributes._mainScenePath||this.safeSetAttributes({_mainScenePath:Td}),this.attributes._mainSceneIndex||this.safeSetAttributes({_mainSceneIndex:0}),this.attributes[ye.Registered]||this.safeSetAttributes({[ye.Registered]:{}}),this.attributes[ye.IframeBridge]||this.safeSetAttributes({[ye.IframeBridge]:{}}))}getIframeBridge(){if(!this.appManager)throw new Error("[WindowManager]: should call getIframeBridge() after await mount()");return this._iframeBridge||(this._iframeBridge=new Ai(this,this.appManager)),this._iframeBridge}};let Y=O;Y.kind="WindowManager";Y.debug=!1;Y.containerSizeRatio=Eg;Y.isCreated=!1;Y._resolve=e=>{};rS();exports.AppCreateError=kd;exports.AppManagerNotInitError=qe;exports.AppNotRegisterError=Kg;exports.BindContainerRoomPhaseInvalidError=Ld;exports.BoxManagerNotFoundError=jd;exports.BoxNotCreatedError=zd;exports.BuiltinApps=sS;exports.DomEvents=gg;exports.IframeBridge=Ai;exports.IframeEvents=fg;exports.InvalidScenePath=Bd;exports.ParamsInvalidError=Dd;exports.WhiteWebSDKInvalidError=Pd;exports.WindowManager=Y;exports.calculateNextIndex=Ka;exports.reconnectRefresher=mg;
//# sourceMappingURL=index.js.map
